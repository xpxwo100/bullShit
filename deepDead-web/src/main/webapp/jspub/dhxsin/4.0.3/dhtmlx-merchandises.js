/*
Product Name: dhtmlxSuite 
Version: 4.0.3 
Edition: Professional 
License: content of this file is covered by DHTMLX Commercial or Enterprise license. Usage without proper license is prohibited. To obtain it contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.0.3",skin:null,skinDetect:function(c){var d=document.createElement("DIV");d.className=c+"_skin_detect";if(document.body.firstChild){document.body.insertBefore(d,document.body.firstChild)}else{document.body.appendChild(d)}var a=d.offsetWidth;d.parentNode.removeChild(d);d=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[a]||null},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var d=this.first();for(var c in this.data){d=Math.max(d,this.data[c])}return d},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y")},trim:function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},template:function(c,d,a){return c.replace(/#([a-zA-Z0-9_-]{1,})#/g,function(g,f){if(f.length>0&&typeof(d[f])!="undefined"){if(a==true){return window.dhx4.trim(d[f])}return String(d[f])}return""})},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this._aOfs(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this._aOfs(a).top},_aOfsSum:function(a){var d=0,c=0;while(a){d=d+parseInt(a.offsetTop);c=c+parseInt(a.offsetLeft);a=a.offsetParent}return{top:d,left:c}},_aOfsRect:function(f){var j=f.getBoundingClientRect();var k=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||k.scrollTop;var g=window.pageXOffset||c.scrollLeft||k.scrollLeft;var h=c.clientTop||k.clientTop||0;var l=c.clientLeft||k.clientLeft||0;var m=j.top+a-h;var d=j.left+g-l;return{top:Math.round(m),left:Math.round(d)}},_aOfs:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfsSum(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(f){if(this._isObj(f)){var d={};for(var c in f){if(typeof(f[c])=="object"&&f[c]!=null){d[c]=this._copyObj(f[c])}else{d[c]=f[c]}}}else{var d=[];for(var c=0;c<f.length;c++){if(typeof(f[c])=="object"&&f[c]!=null){d[c]=this._copyObj(f[c])}else{d[c]=f[c]}}}return d},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var c={};c.left=document.body.scrollLeft;c.right=c.left+(window.innerWidth||document.body.clientWidth);c.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);c.bottom=c.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return c},selectTextRange:function(f,h,c){f=(typeof(f)=="string"?document.getElementById(f):f);var a=f.value.length;h=Math.max(Math.min(h,a),0);c=Math.min(c,a);if(f.setSelectionRange){try{f.setSelectionRange(h,c)}catch(g){}}else{if(f.createTextRange){var d=f.createTextRange();d.moveStart("character",h);d.moveEnd("character",c-a);try{d.select()}catch(g){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var d={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var c in d){if(this.transData.transProp==false&&document.documentElement.style[c]!=null){this.transData.transProp=c;this.transData.transEv=d[c]}}d=null}return this.transData}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0);window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0);window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0)}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"post",get:function(a,c){this._call("GET",a,null,true,c)},getSync:function(a){return this._call("GET",a,null,false)},post:function(c,a,d){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){d=a;a=""}else{a=String(a)}}this._call("POST",c,a,true,d)},postSync:function(c,a){a=(a==null?"":String(a));return this._call("POST",c,a,false)},getLong:function(a,c){this._call("GET",a,null,true,c,{url:a})},postLong:function(c,a,d){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){d=a;a=""}this._call("POST",c,a,true,d,{url:c,postData:a})},_call:function(k,c,a,h,g,f){var d=(window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var j=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(h==true){d.onreadystatechange=function(){if((d.readyState==4&&d.status==200)||(j==true&&d.readyState==3)){window.setTimeout(function(){if(typeof(g)=="function"){g.apply(window,[{xmlDoc:d}])}if(f!=null){if(typeof(f.postData)!="undefined"){dhx4.ajax.postLong(f.url,f.postData,g)}else{dhx4.ajax.getLong(f.url,g)}}g=null;d=null},1)}}}if(k=="GET"&&this.cache!=true){c+=(c.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()}d.open(k,c,h);if(k=="POST"){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(this.cache!=true){a+=(a.length>0?"&":"")+"dhxr"+new Date().getTime()}}else{a=null}d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.send(a);if(!h){return{xmlDoc:d}}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(obj,initObj,xmlToJson,xmlRootTag,mode){if(mode=="clear"){for(var a in obj._dhxdataload){obj._dhxdataload[a]=null;delete obj._dhxdataload[a]}obj._loadData=null;obj._dhxdataload=null;obj.load=null;obj.loadStruct=null;obj=null;return}obj._dhxdataload={initObj:initObj,xmlToJson:xmlToJson,xmlRootTag:xmlRootTag,onBeforeXLS:null};obj._loadData=function(data,loadParams,onLoad){if(arguments.length==2){onLoad=loadParams;loadParams=null}var obj=null;if(arguments.length==3){onLoad=arguments[2]}if(typeof(data)=="string"){var k=data.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var tag=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(tag.test(k.replace(/^<\?xml[^\?]*\?>\s*/,""))){if(window.DOMParser){obj=(new window.DOMParser()).parseFromString(data,"text/xml")}else{if(typeof(window.ActiveXObject)!="undefined"){obj=new window.ActiveXObject("Microsoft.XMLDOM");obj.async="false";obj.loadXML(data)}}if(obj!=null){obj=this[this._dhxdataload.xmlToJson].apply(this,[obj])}}if(obj==null&&(k.match(/^\{.*\}$/)!=null||k.match(/^\[.*\]$/)!=null)){try{eval("dhx4.temp="+k)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj==null){this.callEvent("onXLS",[]);var params=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var k=this._dhxdataload.onBeforeXLS.apply(this,[data]);if(k!=null&&typeof(k)=="object"){if(k.url!=null){data=k.url}if(k.params!=null){for(var a in k.params){params.push(a+"="+encodeURIComponent(k.params[a]))}}}}var t=this;var callBack=function(r){var obj=null;if((r.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(r.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){obj=t[t._dhxdataload.xmlToJson].apply(t,[r.xmlDoc.responseXML])}else{try{eval("dhx4.temp="+r.xmlDoc.responseText)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null}if(obj!=null){t[t._dhxdataload.initObj].apply(t,[obj,data])}t.callEvent("onXLE",[]);if(onLoad!=null){if(typeof(onLoad)=="function"){onLoad.apply(t,[])}else{if(typeof(window[onLoad])=="function"){window[onLoad].apply(t,[])}}}callBack=onLoad=null;obj=r=t=null};params=params.join("&")+(typeof(loadParams)=="string"?"&"+loadParams:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(data,params,callBack)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(data+(data.indexOf("?")>0?"":"")+params,callBack)}}return}}else{if(typeof(data.documentElement)=="object"||(typeof(data.tagName)!="undefined"&&typeof(data.getElementsByTagName)!="undefined"&&data.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){obj=this[this._dhxdataload.xmlToJson].apply(this,[data])}else{obj=window.dhx4._copyObj(data)}}if(obj!=null){this[this._dhxdataload.initObj].apply(this,[obj])}if(onLoad!=null){if(typeof(onLoad)=="function"){onLoad.apply(this,[])}else{if(typeof(window[onLoad])=="function"){window[onLoad].apply(this,[])}}onLoad=null}};if(mode!=null){var k={struct:"loadStruct",data:"load"};for(var a in mode){if(mode[a]==true){obj[k[a]]=function(){return this._loadData.apply(this,arguments)}}}}obj=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,c){if(c=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(d,g){d=String(d).toLowerCase();if(!this.dhxevs.data[d]){this.dhxevs.data[d]={}}var f=window.dhx4.newId();this.dhxevs.data[d][f]=g;return f};a.detachEvent=function(h){for(var f in this.dhxevs.data){var g=0;for(var d in this.dhxevs.data[f]){if(d==h){this.dhxevs.data[f][d]=null;delete this.dhxevs.data[f][d]}else{g++}}if(g==0){this.dhxevs.data[f]=null;delete this.dhxevs.data[f]}}};a.checkEvent=function(d){d=String(d).toLowerCase();return(this.dhxevs.data[d]!=null)};a.callEvent=function(f,h){f=String(f).toLowerCase();if(this.dhxevs.data[f]==null){return true}var g=true;for(var d in this.dhxevs.data[f]){g=this.dhxevs.data[f][d].apply(this,h)&&g}return g};a.detachAllEvents=function(){for(var f in this.dhxevs.data){for(var d in this.dhxevs.data[f]){this.dhxevs.data[f][d]=null;delete this.dhxevs.data[f][d]}this.dhxevs.data[f]=null;delete this.dhxevs.data[f]}};a=null}}dhtmlx=function(d){for(var c in d){dhtmlx[c]=d[c]}return dhtmlx};dhtmlx.extend_api=function(a,f,d){var c=window[a];if(!c){return}window[a]=function(j){if(j&&typeof j=="object"&&!j.tagName){var h=c.apply(this,(f._init?f._init(j):arguments));for(var g in dhtmlx){if(f[g]){this[f[g]](dhtmlx[g])}}for(var g in j){if(f[g]){this[f[g]](j[g])}else{if(g.indexOf("on")==0){this.attachEvent(g,j[g])}}}}else{var h=c.apply(this,arguments)}if(f._patch){f._patch(this)}return h||this};window[a].prototype=c.prototype;if(d){dhtmlXHeir(window[a].prototype,d)}};dhtmlxAjax={get:function(a,d){var c=new dtmlXMLLoaderObject(true);c.async=(arguments.length<3);c.waitCall=d;c.loadXML(a);return c},post:function(a,d,f){var c=new dtmlXMLLoaderObject(true);c.async=(arguments.length<4);c.waitCall=f;c.loadXML(a,true,d);return c},getSync:function(a){return this.get(a,null,true)},postSync:function(a,c){return this.post(a,c,null,true)}};function dtmlXMLLoaderObject(c,f,d,a){this.xmlDoc="";if(typeof(d)!="undefined"){this.async=d}else{this.async=true}this.onloadAction=c||null;this.mainObject=f||null;this.waitCall=null;this.rSeed=a||false;return this}dtmlXMLLoaderObject.count=0;dtmlXMLLoaderObject.prototype.waitLoadFunction=function(c){var a=true;this.check=function(){if((c)&&(c.onloadAction!=null)){if((!c.xmlDoc.readyState)||(c.xmlDoc.readyState==4)){if(!a){return}a=false;dtmlXMLLoaderObject.count++;if(typeof c.onloadAction=="function"){c.onloadAction(c.mainObject,null,null,null,c)}if(c.waitCall){c.waitCall.call(this,c);c.waitCall=null}}}};return this.check};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(d,a){if(typeof this.xmlDoc.status=="undefined"||this.xmlDoc.status<400){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(d);if(c.length==0&&d.indexOf(":")!=-1){var c=this.xmlDoc.responseXML.getElementsByTagName((d.split(":"))[1])}var f=c[0]}else{var f=this.xmlDoc.documentElement}if(f){this._retry=false;return f}if(!this._retry&&_isIE){this._retry=true;var a=this.xmlDoc;this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),true);return this.getXMLTopNode(d,a)}}dhtmlxError.throwError("LoadXML","Incorrect XML",[(a||this.xmlDoc),this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(c,a){if(!_isIE){var d=new DOMParser();this.xmlDoc=d.parseFromString(c,"text/xml")}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=this.async;this.xmlDoc.onreadystatechange=function(){};this.xmlDoc.loadXML(c)}if(a){return}if(this.onloadAction){this.onloadAction(this.mainObject,null,null,null,this)}if(this.waitCall){this.waitCall();this.waitCall=null}};dtmlXMLLoaderObject.prototype.loadXML=function(d,c,a,f){if(this.rSeed){d+=((d.indexOf("?")!=-1)?"&":"?")+"a_dhx_rSeed="+(new Date()).valueOf()}this.filePath=d;if((!_isIE)&&(window.XMLHttpRequest)){this.xmlDoc=new XMLHttpRequest()}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP")}if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)}this.xmlDoc.open(c?"POST":"GET",d,this.async);if(f){this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")");this.xmlDoc.setRequestHeader("Content-type","text/xml")}else{if(c){this.xmlDoc.setRequestHeader("Content-type",(this.contenttype||"application/x-www-form-urlencoded"))}}this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(null||a);if(!this.async){(new this.waitLoadFunction(this))()}};dtmlXMLLoaderObject.prototype.destructor=function(){this._filterXPath=null;this._getAllNamedChilds=null;this._retry=null;this.async=null;this.rSeed=null;this.filePath=null;this.onloadAction=null;this.mainObject=null;this.xmlDoc=null;this.doXPath=null;this.doXPathOpera=null;this.doXSLTransToObject=null;this.doXSLTransToString=null;this.loadXML=null;this.loadXMLString=null;this.doSerialization=null;this.xmlNodeToJSON=null;this.getXMLTopNode=null;this.setXSLParamValue=null;return null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(f){var d={};for(var c=0;c<f.attributes.length;c++){d[f.attributes[c].name]=f.attributes[c].value}d._tagvalue=f.firstChild?f.firstChild.nodeValue:"";for(var c=0;c<f.childNodes.length;c++){var a=f.childNodes[c].tagName;if(a){if(!d[a]){d[a]=[]}d[a].push(this.xmlNodeToJSON(f.childNodes[c]))}}return d};function callerFunction(a,c){this.handler=function(d){if(!d){d=window.event}a(d,c);return true};return this.handler}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){var d=0,c=0;while(a){d=d+parseInt(a.offsetTop);c=c+parseInt(a.offsetLeft);a=a.offsetParent}return{top:d,left:c}}function getOffsetRect(f){var j=f.getBoundingClientRect();var k=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||k.scrollTop;var g=window.pageXOffset||c.scrollLeft||k.scrollLeft;var h=c.clientTop||k.clientTop||0;var l=c.clientLeft||k.clientLeft||0;var m=j.top+a-h;var d=j.left+g-l;return{top:Math.round(m),left:Math.round(d)}}function getOffset(a){if(a.getBoundingClientRect){return getOffsetRect(a)}else{return getOffsetSum(a)}}function convertStringToBoolean(a){if(typeof(a)=="string"){a=a.toLowerCase()}switch(a){case"1":case"true":case"yes":case"y":case 1:case true:return true;break;default:return false}}function getUrlSymbol(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,c){a.onmousedown=this.preCreateDragCopy;a.dragStarter=c;this.addDragLanding(a,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,c){a.dragLanding=c};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(d){if(!d){d=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,d);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(d,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var c=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var g=document.createElement("Div");g.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=g.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=d.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=d.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!d.srcElement){var f=d.target}else{f=d.srcElement}dragger.checkLanding(f,d)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(g){if(window.name){var d=parent.frames[window.name].frameElement.offsetParent;var f=0;var c=0;while(d){f+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);f+=a.split("_")[0]*1;c+=a.split("_")[1]*1}if(g){return f+"_"+c}else{this.fx=f}this.fy=c}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(c,a){if((c)&&(c.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=c;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((c)&&(c.tagName!="BODY")){this.checkLanding(c.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(c,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:c.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(d){if(d){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=d)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(c){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=d)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(c){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(d,f){if(d){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=d.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=d.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=d.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=d.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(f))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=d)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(c){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=d)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!d||f)?1:0))}}catch(c){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}dtmlXMLLoaderObject.prototype.doXPath=function(d,g,f,l){if(_isKHTML||(!_isIE&&!window.XPathResult)){return this.doXPathOpera(d,g)}if(_isIE){if(!g){if(!this.xmlDoc.nodeName){g=this.xmlDoc.responseXML}else{g=this.xmlDoc}}if(!g){dhtmlxError.throwError("LoadXML","Incorrect XML",[(g||this.xmlDoc),this.mainObject])}if(f!=null){g.setProperty("SelectionNamespaces","xmlns:xsl='"+f+"'")}if(l=="single"){return g.selectSingleNode(d)}else{return g.selectNodes(d)||new Array(0)}}else{var a=g;if(!g){if(!this.xmlDoc.nodeName){g=this.xmlDoc.responseXML}else{g=this.xmlDoc}}if(!g){dhtmlxError.throwError("LoadXML","Incorrect XML",[(g||this.xmlDoc),this.mainObject])}if(g.nodeName.indexOf("document")!=-1){a=g}else{a=g;g=g.ownerDocument}var j=XPathResult.ANY_TYPE;if(l=="single"){j=XPathResult.FIRST_ORDERED_NODE_TYPE}var h=new Array();var c=g.evaluate(d,a,function(m){return f},j,null);if(j==XPathResult.FIRST_ORDERED_NODE_TYPE){return c.singleNodeValue}var k=c.iterateNext();while(k){h[h.length]=k;k=c.iterateNext()}return h}};function _dhtmlxError(c,a,d){if(!this.catches){this.catches=new Array()}return this}_dhtmlxError.prototype.catchError=function(c,a){this.catches[c]=a};_dhtmlxError.prototype.throwError=function(c,a,d){if(this.catches[c]){return this.catches[c](c,a,d)}if(this.catches.ALL){return this.catches.ALL(c,a,d)}alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]);return null};window.dhtmlxError=new _dhtmlxError();dtmlXMLLoaderObject.prototype.doXPathOpera=function(d,a){var g=d.replace(/[\/]+/gi,"/").split("/");var f=null;var c=1;if(!g.length){return[]}if(g[0]=="."){f=[a]}else{if(g[0]==""){f=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(g[c].replace(/\[[^\]]*\]/g,""));c++}else{return[]}}for(c;c<g.length;c++){f=this._getAllNamedChilds(f,g[c])}if(g[c-1].indexOf("[")!=-1){f=this._filterXPath(f,g[c-1])}return f};dtmlXMLLoaderObject.prototype._filterXPath=function(f,d){var h=new Array();var d=d.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var g=0;g<f.length;g++){if(f[g].getAttribute(d)){h[h.length]=f[g]}}return h};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(f,d){var k=new Array();if(_isKHTML){d=d.toUpperCase()}for(var h=0;h<f.length;h++){for(var g=0;g<f[h].childNodes.length;g++){if(_isKHTML){if(f[h].childNodes[g].tagName&&f[h].childNodes[g].tagName.toUpperCase()==d){k[k.length]=f[h].childNodes[g]}}else{if(f[h].childNodes[g].tagName==d){k[k.length]=f[h].childNodes[g]}}}}return k};function dhtmlXHeir(f,d){for(var g in d){if(typeof(d[g])=="function"){f[g]=d[g]}}return f}function dhtmlxEvent(c,d,a){if(c.addEventListener){c.addEventListener(d,a,false)}else{if(c.attachEvent){c.attachEvent("on"+d,a)}}}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(c,d,f){if(!f){f=this.xslDoc}if(f.responseXML){f=f.responseXML}var a=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+c+"']",f,"http://www.w3.org/1999/XSL/Transform","single");if(a!=null){a.firstChild.nodeValue=d}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(f,c){if(!f){f=this.xslDoc}if(f.responseXML){f=f.responseXML}if(!c){c=this.xmlDoc}if(c.responseXML){c=c.responseXML}if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor();this.XSLProcessor.importStylesheet(f)}var a=this.XSLProcessor.transformToDocument(c)}else{var a=new ActiveXObject("Msxml2.DOMDocument.3.0");try{c.transformNodeToObject(f,a)}catch(d){a=c.transformNode(f)}}return a};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(d,c){var a=this.doXSLTransToObject(d,c);if(typeof(a)=="string"){return a}return this.doSerialization(a)};dtmlXMLLoaderObject.prototype.doSerialization=function(c){if(!c){c=this.xmlDoc}if(c.responseXML){c=c.responseXML}if(!_isIE){var a=new XMLSerializer();return a.serializeToString(c)}else{return c.xml}};dhtmlxEventable=function(obj){obj.attachEvent=function(name,catcher,callObj){name="ev_"+name.toLowerCase();if(!this[name]){this[name]=new this.eventCatcher(callObj||this)}return(name+":"+this[name].addEvent(catcher))};obj.callEvent=function(name,arg0){name="ev_"+name.toLowerCase();if(this[name]){return this[name].apply(this,arg0)}return true};obj.checkEvent=function(name){return(!!this["ev_"+name.toLowerCase()])};obj.eventCatcher=function(obj){var dhx_catch=[];var z=function(){var res=true;for(var i=0;i<dhx_catch.length;i++){if(dhx_catch[i]!=null){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr}}return res};z.addEvent=function(ev){if(typeof(ev)!="function"){ev=eval(ev)}if(ev){return dhx_catch.push(ev)-1}return false};z.removeEvent=function(id){dhx_catch[id]=null};return z};obj.detachEvent=function(id){if(id!=false){var list=id.split(":");this[list[0]].removeEvent(list[1])}};obj.detachAllEvents=function(){for(var name in this){if(name.indexOf("ev_")==0){this.detachEvent(name);this[name]=null}}};obj=null};if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(c,a){if(!c){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(h,d){if(!h._event_check){h._event_check={};h._event_check_size={}}for(var c in d){h._event_check[c.toLowerCase()]=d[c];var g=-1;for(var f in d[c]){g++}h._event_check_size[c.toLowerCase()]=g}};dhtmlx.assert_method_info=function(g,c,f,h){var a=[];for(var d=0;d<h.length;d++){a.push(h[d][0]+" : "+h[d][1]+"\n   "+h[d][2].describe()+(h[d][3]?"; optional":""))}return g.name+"."+c+"\n"+f+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(d,a){for(var c in a){dhtmlx.assert_method_process(d,c,a[c].descr,a[c].args,(a[c].min||99),a[c].skip)}};dhtmlx.assert_method_process=function(h,c,g,j,d,f){var a=h[c];if(!f){h[c]=function(){if(arguments.length!=j.length&&arguments.length<d){dhtmlx.log("warn","Incorrect count of parameters\n"+h[c].describe()+"\n\nExpecting "+j.length+" but have only "+arguments.length)}else{for(var k=0;k<j.length;k++){if(!j[k][3]&&!j[k][2](arguments[k])){dhtmlx.log("warn","Incorrect method call\n"+h[c].describe()+"\n\nActual value of "+(k+1)+" parameter: {"+(typeof arguments[k])+"} "+arguments[k])}}}return a.apply(this,arguments)}}h[c].describe=function(){return dhtmlx.assert_method_info(h,c,g,j)}};dhtmlx.assert_event_call=function(d,c,a){if(d._event_check){if(!d._event_check[c]){dhtmlx.log("warn","Not expected event call :"+c)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+c)}else{if(d._event_check_size[c]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+d._event_check_size[c]+" parameter(s), but have "+a.length+" parameter(s), for "+c+" event")}}}}};dhtmlx.assert_event_attach=function(c,a){if(c._event_check&&!c._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(c,a){if(!c._settings_check){c._settings_check={}}dhtmlx.extend(c._settings_check,a)};dhtmlx.assert_check=function(d,c){if(typeof d=="object"){for(var a in d){dhtmlx.assert_settings(a,d[a],c)}}};dhtmlx.assert_settings=function(k,g,f){f=f||this._settings_check;if(f){if(!f[k]){return dhtmlx.log("warn","Unknown propery: "+k)}var j="";var c="";var a=false;for(var d=0;d<f[k].length;d++){var h=f[k][d];if(typeof h=="string"){continue}if(typeof h=="function"){a=a||h(g)}else{if(typeof h=="object"&&typeof h[1]=="function"){a=a||h[1](g);if(a&&h[2]){dhtmlx.assert_check(g,h[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(k,f)+"\nActual value: {"+(typeof g)+"} "+g)}}};dhtmlx.assert_info=function(c,h){var a=h[c];var g="";var f=[];for(var d=0;d<a.length;d++){if(typeof rule=="string"){g=a[d]}else{if(a[d].describe){f.push(a[d].describe())}else{if(a[d][1]&&a[d][1].describe){f.push(a[d][1].describe())}}}}return"Property: "+c+", "+g+" \nExpected value: \n - "+f.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,c){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(c){var a=function(d){return c[d]};a.describe=function(){var f=[];for(var d in c){f.push(d)}return"{String} can take one of next values: "+f.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(d,c){var f=function(a){if(d(a)||c(a)){return true}return false};f.describe=function(){return d.describe()};return f}}dhtmlx.version="3.0";dhtmlx.codebase="./";dhtmlx.copy=function(c){var a=dhtmlx.copy._function;a.prototype=c;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(c,a){for(var d in a){c[d]=a[d]}if(dhtmlx.assert_enabled()&&a._assert){c._assert();c._assert=null}dhtmlx.assert(c,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){c._init()}return c};dhtmlx.proto_extend=function(){var h=arguments;var d=h[0];var c=[];for(var g=h.length-1;g>0;g--){if(typeof h[g]=="function"){h[g]=h[g].prototype}for(var f in h[g]){if(f=="_init"){c.push(h[g][f])}else{if(!d[f]){d[f]=h[g][f]}}}}if(h[0]._init){c.push(h[0]._init)}d._init=function(){for(var j=0;j<c.length;j++){c[j].apply(this,arguments)}};d.base=h[1];var a=function(j){this._init(j);if(this._parseSettings){this._parseSettings(j,this.defaults)}};a.prototype=d;d=h=null;return a};dhtmlx.bind=function(c,a){return function(){return c.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,d,c){return function(){var f=false;f=a[d].apply(a,arguments);return f}};dhtmlx.isNotDefined=function(c){return typeof c=="undefined"};dhtmlx.delay=function(f,c,d,a){setTimeout(function(){var g=f.apply(c,d);f=c=d=null;return g},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(f,d,a,c){f=dhtmlx.toNode(f);var g=dhtmlx.uid();dhtmlx._events[g]=[f,d,a];if(c){a=dhtmlx.bind(a,c)}if(f.addEventListener){f.addEventListener(d,a,false)}else{if(f.attachEvent){f.attachEvent("on"+d,a)}}return g};dhtmlx.eventRemove=function(c){if(!c){return}dhtmlx.assert(this._events[c],"Removing non-existing event");var a=dhtmlx._events[c];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[c]};dhtmlx.log=function(c,d,a){if(window.console&&console.log){c=c.toLowerCase();if(window.console[c]){window.console[c](d||"unknown error")}else{window.console.log(c+": "+d)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var c=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var d="_start_time_log"+a;if(!dhtmlx[d]){dhtmlx[d]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var c=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx[d].valueOf())/1000+"s");dhtmlx[d]=null}};dhtmlx.error=function(c,a){dhtmlx.log("error",c,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(d,g){if(this._events._block){return true}d=d.toLowerCase();dhtmlx.assert_event_call(this,d,g);var f=this._events[d.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+d,g)}if(f){for(var c=0;c<f.length;c++){if(f[c].apply(this,(g||[]))===false){a=false}}}if(this._map[d]&&!this._map[d].callEvent(d,g)){a=false}return a},attachEvent:function(c,a,f){c=c.toLowerCase();dhtmlx.assert_event_attach(this,c);f=f||dhtmlx.uid();a=dhtmlx.toFunctor(a);var d=this._events[c]||dhtmlx.toArray();d.push(a);this._events[c]=d;this._handlers[f]={f:a,t:c};return f},detachEvent:function(f){if(this._handlers[f]){var c=this._handlers[f].t;var a=this._handlers[f].f;var d=this._events[c];d.remove(a);delete this._handlers[f]}}};dhtmlx.PowerArray={removeAt:function(c,a){if(c>=0){this.splice(c,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,d){if(!d&&d!==0){this.push(c)}else{var a=this.splice(d,(this.length-d));this[d]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,d){for(var c=0;c<this.length;c++){a.call((d||this),this[c])}},map:function(a,d){for(var c=0;c<this.length;c++){this[c]=a.call((d||this),this[c])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var g=document.createElement("DIV");var f;for(var c=0;c<a.names.length;c++){while(p=a[a.names[c]].pop()){if(typeof g.style[p]!="undefined"){dhtmlx.env[a.names[c]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(c,a,d){a=a||{};var f=document.createElement(c);for(var g in a){f.setAttribute(g,a[g])}if(a.style){f.style.cssText=a.style}if(a["class"]){f.className=a["class"]}if(d){f.innerHTML=d}return f},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}}else{if(c&&c.parentNode){c.parentNode.removeChild(c)}}},insertBefore:function(c,d,a){if(!c){return}if(d){d.parentNode.insertBefore(c,d)}else{a.appendChild(c)}},locate:function(c,f){c=c||event;var a=c.target||c.srcElement;while(a){if(a.getAttribute){var d=a.getAttribute(f);if(d){return d}}a=a.parentNode}return null},offset:function(f){if(f.getBoundingClientRect){var j=f.getBoundingClientRect();var k=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||k.scrollTop;var g=window.pageXOffset||c.scrollLeft||k.scrollLeft;var h=c.clientTop||k.clientTop||0;var l=c.clientLeft||k.clientLeft||0;var m=j.top+a-h;var d=j.left+g-l;return{y:Math.round(m),x:Math.round(d)}}else{var m=0,d=0;while(f){m=m+parseInt(f.offsetTop,10);d=d+parseInt(f.offsetLeft,10);f=f.offsetParent}return{y:m,x:d}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var c=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(c,a){c.className+=" "+a},removeCss:function(c,a){c.className=c.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var d=0;d<dhtmlx.destructors.length;d++){dhtmlx.destructors[d].destructor()}dhtmlx.destructors=[]}for(var c in dhtmlx._events){var f=dhtmlx._events[c];if(f[0].removeEventListener){f[0].removeEventListener(f[1],f[2],false)}else{if(f[0].detachEvent){f[0].detachEvent("on"+f[1],f[2])}}delete dhtmlx._events[c]}});dhtmlx.ajax=function(a,c,d){if(arguments.length!==0){var f=new dhtmlx.ajax();if(d){f.master=d}f.get(a,null,c)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(g,l,j){var c=this.getXHR();if(typeof j=="function"){j=[j]}if(typeof l=="object"){var h=[];for(var d in l){var k=l[d];if(k===null||k===dhtmlx.undefined){k=""}h.push(d+"="+encodeURIComponent(k))}l=h.join("&")}if(l&&!this.post){g=g+(g.indexOf("?")!=-1?"&":"?")+l;l=null}c.open(this.post?"POST":"GET",g,!this._sync);if(this.post){c.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var f=this;c.onreadystatechange=function(){if(!c.readyState||c.readyState==4){if(j&&f){for(var a=0;a<j.length;a++){if(j[a]){j[a].call((f.master||f),c.responseText,c.responseXML,c)}}}f.master=null;j=f=null}};c.send(l||null);return c},get:function(a,d,c){this.post=false;return this.send(a,d,c)},post:function(a,d,c){this.post=true;return this.send(a,d,c)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,c){this.callEvent("onXLS",[]);if(typeof c=="string"){this.data.driver=dhtmlx.DataDriver[c];c=arguments[2]}else{this.data.driver=dhtmlx.DataDriver.xml}dhtmlx.ajax(a,[this._onLoad,c],this)},parse:function(c,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(c,null)},_onLoad:function(g,c,a){var d=this.data.driver;var f=d.getRecords(d.toObject(g,c))[0];this.data=(d?d.getDetails(f):g);this.callEvent("onXLE",[])},_check_data_feed:function(c){if(!this._settings.dataFeed||this._ignore_feed||!c){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(c.id||c),c)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(c.id||c);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(f,d){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(f)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(c){if(typeof c=="string"){var a=null;if(c.indexOf("<")==-1){a=dhtmlx.toNode(c)}if(!a){a=document.createElement("DIV");a.innerHTML=c}return a.getElementsByTagName(this.tag)}return c},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(d){var a={};for(var c=0;c<d.length;c++){a["data"+c]=d[c]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(d){d=this.stringToArray(d);var a={};for(var c=0;c<d.length;c++){a["data"+c]=d[c]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(c){c=c.split(this.cell);for(var a=0;a<c.length;a++){c[a]=c[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return c},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(c,a){if(a&&(a=this.checkResponse(c,a))){return a}if(typeof c=="string"){return this.fromString(c)}return c},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(f,l){if(window.XPathResult){var d=f;if(f.nodeName.indexOf("document")==-1){f=f.ownerDocument}var j=[];var c=f.evaluate(l,d,null,XPathResult.ANY_TYPE,null);var k=c.iterateNext();while(k){j.push(k);k=c.iterateNext()}return j}else{var h=true;try{if(typeof(f.selectNodes)=="undefined"){h=false}}catch(g){}if(h){return f.selectNodes(l)}else{var a=l.split("/").pop();return f.getElementsByTagName(a)}}},tagToObject:function(d,l){l=l||{};var g=false;var f=d.attributes;if(f&&f.length){for(var j=0;j<f.length;j++){l[f[j].name]=f[j].value}g=true}var c=d.childNodes;var k={};for(var j=0;j<c.length;j++){if(c[j].nodeType==1){var h=c[j].tagName;if(typeof l[h]!="undefined"){if(!(l[h] instanceof Array)){l[h]=[l[h]]}l[h].push(this.tagToObject(c[j],{}))}else{l[c[j].tagName]=this.tagToObject(c[j],{})}g=true}}if(!g){return this.nodeValue(d)}l.value=this.nodeValue(d);return l},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(c){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(c,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(c);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(f,d){if(d&&(d.firstChild&&d.firstChild.tagName!="parsererror")){return d}var c=this.fromString(f.replace(/^[\s]+/,""));if(c){return c}dhtmlx.error("xml can't be parsed",f)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,c){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(f,d){if(this._load_count){return this._load_count=[f,d]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+f+"&count="+d,function(){var g=this._load_count;this._load_count=false;if(typeof g=="object"){this.data.feed.apply(this,g)}})}}},_onLoad:function(d,c,a){this.data._parse(this.data.driver.toObject(d,c));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(j,h){if(this._settings.dataFeed){var g={};if(!j&&!g){return}if(typeof j=="function"){if(!h){return}j(h,g)}else{g={text:h}}this.clearAll();var c=this._settings.dataFeed;if(typeof c=="function"){return c.call(this,h,g)}var f=[];for(var d in g){f.push("dhx_filter["+d+"]="+encodeURIComponent(g[d]))}this.load(c+(c.indexOf("?")<0?"?":"&")+f.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(g){this.callEvent("onParse",[this.driver,g]);if(this._filter_order){this.filter()}var h=this.driver.getInfo(g);if(h._key){dhtmlx.security_key=h._key}var f=this.driver.getRecords(g);var l=(h._from||0)*1;if(l===0&&this.order[0]){l=this.order.length}var c=0;for(var d=0;d<f.length;d++){var a=this.driver.getDetails(f[d]);var k=this.id(a);if(!this.pull[k]){this.order[c+l]=k;c++}this.pull[k]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var d=0;d<h._size;d++){if(!this.order[d]){var k=dhtmlx.uid();var a={id:k,$template:"loading"};this.pull[k]=a;this.order[d]=k}}this.callEvent("onStoreLoad",[this.driver,g]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(c,a){dhtmlx.assert(this.pull[c],"Can't change id, for non existing item: "+c);this.pull[a]=this.pull[c];this.pull[a].id=a;this.order[this.order.find(c)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(c)]=a}this.callEvent("onIdChange",[c,a]);if(this._render_change_id){this._render_change_id(c,a)}},get:function(a){return this.item(a)},set:function(c,a){return this.update(c,a)},item:function(a){return this.pull[a]},update:function(c,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[c,a])===false){return false}this.pull[c]=a;this.refresh(c)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(f,d){if(f){f=this.indexById(f)}else{f=this.startOffset||0}if(d){d=this.indexById(d)}else{d=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(d<0){d=0}}if(f>d){var c=d;d=f;f=c}return this.getIndexRange(f,d)},getIndexRange:function(f,d){d=Math.min((d||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var c=(f||0);c<=d;c++){a.push(this.item(this.order[c]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,f){if(a<0||f<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var d=this.idByIndex(a);var c=this.item(d);this.order.removeAt(a);this.order.insertAt(d,Math.min(this.order.length,f));this.callEvent("onStoreUpdated",[d,c,"move"])},scheme:function(a){this._scheme=a},sync:function(g,f,a){if(typeof f!="function"){a=f;f=null}if(dhtmlx.debug_bind){this.debug_sync_master=g;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var d=g;if(g.name!="DataStore"){g=g.data}var c=dhtmlx.bind(function(k,h,j){if(j!="update"||f){k=null}if(!k){this.order=dhtmlx.toArray([].concat(g.order));this._filter_order=null;this.pull=g.pull;if(f){this.silent(f)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(k)}else{a=false}},this);g.attachEvent("onStoreUpdated",c);this.feed=function(j,h){d.loadNext(h,j)};c()},add:function(g,a){if(this._scheme){g=g||{};for(var c in this._scheme){g[c]=g[c]||this._scheme[c]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(g)}else{if(this._scheme.$update){this._scheme.$update(g)}}}}var h=this.id(g);var f=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=f}if(a>f){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[h,g,a])===false){return false}if(this.exists(h)){return dhtmlx.error("Not unique ID")}this.pull[h]=g;this.order.insertAt(h,a);if(this._filter_order){var d=this._filter_order.length;if(!a&&this.order.length){d=0}this._filter_order.insertAt(h,d)}this.callEvent("onafterAdd",[h,a]);this.callEvent("onStoreUpdated",[h,g,"add"]);return h},remove:function(d){if(d instanceof Array){for(var a=0;a<d.length;a++){this.remove(d[a])}return}if(this.callEvent("onBeforeDelete",[d])===false){return false}if(!this.exists(d)){return dhtmlx.error("Not existing ID",d)}var c=this.item(d);this.order.remove(d);if(this._filter_order){this._filter_order.remove(d)}delete this.pull[d];this.callEvent("onafterdelete",[d]);this.callEvent("onStoreUpdated",[d,c,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(c){var a=this.order.find(c);return a},next:function(c,a){return this.order[this.indexById(c)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(c,a){return this.order[this.indexById(c)-(a||1)]},sort:function(h,c,a){var d=h;if(typeof h=="function"){d={as:h,dir:c}}else{if(typeof h=="string"){d={by:h,dir:c,as:a}}}var g=[d.by,d.dir,d.as];if(!this.callEvent("onbeforesort",g)){return}if(this.order.length){var j=dhtmlx.sort.create(d);var f=this.getRange(this.first(),this.last());f.sort(j);this.order=f.map(function(k){return this.id(k)},this)}this.refresh();this.callEvent("onaftersort",g)},filter:function(g,f){if(!this.callEvent("onBeforeFilter",[g,f])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(g){var c=g;f=f||"";if(typeof g=="string"){g=dhtmlx.Template.fromHTML(g);f=f.toString().toLowerCase();c=function(k,j){return g(k).toLowerCase().indexOf(j)!=-1}}var d=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var h=this.order[a];if(c(this.item(h),f)){d.push(h)}}this._filter_order=this.order;this.order=d}this.refresh();this.callEvent("onAfterFilter",[])},each:function(d,c){for(var a=0;a<this.order.length;a++){d.call((c||this),this.item(this.order[a]))}},provideApi:function(f,c){this.debug_bind_master=f;if(c){this.mapEvent({onbeforesort:f,onaftersort:f,onbeforeadd:f,onafteradd:f,onbeforedelete:f,onafterdelete:f,onbeforeupdate:f})}var d=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<d.length;a++){f[d[a]]=dhtmlx.methodPush(this,d[a])}if(dhtmlx.assert_enabled()){this.assert_event(f)}},serialize:function(){var d=this.order;var a=[];for(var c=0;c<d.length;c++){a.push(this.pull[d[c]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(d,c){d=d*1;c=c*1;return d>c?1:(d<c?-1:0)},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:(d<c?-1:0)},string:function(d,c){d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:(d<c?-1:0)}},by:function(c,a){if(!c){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}c=dhtmlx.Template.fromHTML(c);return function(f,d){return a(c(f),c(d))}},dir:function(c,a){if(c=="asc"){return a}return function(f,d){return a(f,d)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(c){c=c||event;var a=c.which||c.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,c.ctrlKey,c.shiftKey,c])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var c=dhtmlx.html.locate(a,this._id);if(c&&!this.callEvent("onBeforeContextMenu",[c,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(h,g,c){h=h||event;var a=h.target||h.srcElement;var d="";var j=null;var f=false;while(a&&a.parentNode){if(!f&&a.getAttribute){j=a.getAttribute(this._id);if(j){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[j,a])}if(!this.callEvent("on"+c,[j,h,a])){return}f=true}}d=a.className;if(d){d=d.split(" ");d=d[0]||d[1];if(g[d]){return g[d].call(this,h,j||dhtmlx.html.locate(h,this._id),a)}}a=a.parentNode}return f}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(c,a){if(typeof c=="object"){return this._parseSeetingColl(c)}return this._define(c,a)},_define:function(c,a){dhtmlx.assert_settings.call(this,c,a);var d=this[c+"_setter"];return this._settings[c]=d?d.call(this,a):a},_parseSeetingColl:function(d){if(d){for(var c in d){this._define(c,d[c])}}},_parseSettings:function(d,a){var c=dhtmlx.extend({},a);if(typeof d=="object"&&!d.tagName){dhtmlx.extend(c,d)}this._parseSeetingColl(c)},_mergeSettings:function(a,d){for(var c in d){switch(typeof a[c]){case"object":a[c]=this._mergeSettings((a[c]||{}),d[c]);break;case"undefined":a[c]=d[c];break;default:break}}return a},_parseContainer:function(c,a,d){if(typeof c=="object"&&!c.tagName){c=c.container}this._obj=this.$view=dhtmlx.toNode(c);if(!this._obj&&d){this._obj=d(c)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(c){var a=dhtmlx.Template.setter(c);var d=this;return function(){return a.apply(d,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(d,c){if(!d.types&&d.prototype.types){d=d.prototype}if(dhtmlx.assert_enabled()){this.assert_event(c)}var a=c.name||"default";this._template(c);this._template(c,"edit");this._template(c,"loading");d.types[a]=dhtmlx.extend(dhtmlx.extend({},(d.types[a]||this._default)),c);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(d,a){a="template"+(a?("_"+a):"");var c=d[a];if(c&&(typeof c=="string")){if(c.indexOf("->")!=-1){c=c.split("->");switch(c[0]){case"html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case"http":c=new dhtmlx.ajax().sync().get(c[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}d[a]=dhtmlx.Template.fromHTML(c)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";this.version="3.0";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,c){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=c.y+this._settings.dy+"px";this._obj.style.left=c.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(c){var a=new dhtmlx.ui.Tooltip(c);this.attachEvent("onMouseMove",function(f,d){a.show(this.get(f),dhtmlx.html.pos(d))});this.attachEvent("onMouseOut",function(f,d){a.hide()});this.attachEvent("onMouseMoving",function(f,d){a.hide()});return a}};dhtmlx.compat=function(a,c){if(dhtmlx.compat[a]){dhtmlx.compat[a](c)}};(function(){if(!window.dhtmlxError){var c=function(){};window.dhtmlxError={catchError:c,throwError:c};window.convertStringToBoolean=function(d){return !!d};window.dhtmlxEventable=function(d){dhtmlx.extend(d,dhtmlx.EventSystem)};var a={getXMLTopNode:function(d){},doXPath:function(d){return dhtmlx.DataDriver.xml.xpath(this.xml,d)},xmlDoc:{responseXML:true}};dhtmlx.compat.dataProcessor=function(h){var d="_sendData";var f="_in_progress";var j="_tMode";var g="_waitMode";h[d]=function(l,m){if(!l){return}if(m){this[f][m]=(new Date()).valueOf()}if(!this.callEvent("onBeforeDataSending",m?[m,this.getState(m)]:[])){return false}var k=this;var n=this.serverProcessor;if(this[j]!="POST"){dhtmlx.ajax().get(n+((n.indexOf("?")!=-1)?"&":"?")+this.serialize(l,m),"",function(r,o,q){a.xml=dhtmlx.DataDriver.xml.checkResponse(r,o);k.afterUpdate(k,null,null,null,a)})}else{dhtmlx.ajax().post(n,this.serialize(l,m),function(r,o,q){a.xml=dhtmlx.DataDriver.xml.checkResponse(r,o);k.afterUpdate(k,null,null,null,a)})}this[g]++}}}})();if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(c,a){var g=document.createElement("DIV");g.id="CustomObject_"+dhtmlx.uid();g.style.width="100%";g.style.height="100%";g.cmp="grid";document.body.appendChild(g);this.attachObject(g.id);a.container=g.id;var f=this.vs[this.av];f.grid=new window[c](a);f.gridId=g.id;f.gridObj=g;f.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var d="_viewRestore";return this.vs[this[d]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(d,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=d;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var c=document.createElement("DIV");c.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(c);c=null;this._updateIdx=function(){for(var f in this.conf.idx){this.conf.idx[f]=null;delete this.conf.idx[f]}for(var j=0;j<this.cell.childNodes.length;j++){var g=this.cell.childNodes[j].className;for(var f in this.conf.idx_data){var h=new RegExp(this.conf.idx_data[f]);if(g.match(h)!=null){this.conf.idx[f]=j}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var f in this.dataNodes){if(this.dataNodes[f]!=null&&typeof(this.dataNodes[f].setSizes)=="function"){this.dataNodes[f].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(g,n,j,l,m,f,k){if(!this.conf.size){this.conf.size={}}this.conf.size.x=g;this.conf.size.y=n;this.conf.size.w=j;this.conf.size.h=l;this.cell.style.left=g+"px";this.cell.style.top=n+"px";this.cell.style.width=j+"px";this.cell.style.height=l+"px";this.callEvent("_onSetSize",[]);if(f!==true){this._adjustCont(m,k)}else{this._adjustAttached(m)}this._adjustProgress()};this._adjustCont=function(m,j){var l=this.cell.childNodes[this.conf.idx.cont];var h=0;for(var f in this.conf.ofs_nodes.t){var g=this.conf.ofs_nodes.t[f];h+=(g=="func"?this[f]():(g==true?this.cell.childNodes[this.conf.idx[f]].offsetHeight:0))}var n=0;for(var f in this.conf.ofs_nodes.b){var g=this.conf.ofs_nodes.b[f];n+=(g=="func"?this[f]():(g==true?this.cell.childNodes[this.conf.idx[f]].offsetHeight:0))}l.style.left="0px";l.style.top=h+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};l.style.width=this.cell.offsetWidth+"px";l.style.height=Math.max(this.cell.offsetHeight-h-n,0)+"px";this.conf.cells_cont.w=parseInt(l.style.width)-l.offsetWidth;this.conf.cells_cont.h=parseInt(l.style.height)-l.offsetHeight}l.style.left="0px";l.style.top=h+"px";l.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";l.style.height=Math.max(this.conf.size.h-h-n+this.conf.cells_cont.h,0)+"px";l=null;this._adjustAttached(m);if(j=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var g=["menu","toolbar"];for(var j=0;j<g.length;j++){if(this.conf.idx[g[j]]!=null){var k=this.cell.childNodes[this.conf.idx[g[j]]];var h="dhx_cell_"+g[j]+"_no_borders";var f="dhx_cell_"+g[j]+"_def";k.className=k.className.replace(new RegExp(this.conf.borders?h:f),this.conf.borders?f:h);k=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(h){this.views[h]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var j=this.cell.childNodes[this.conf.idx.cont];while(j.childNodes.length>0){this.views[h].cellCont.push(j.firstChild);j.removeChild(j.firstChild)}this.dataType=null;this.dataObj=null;for(var g in this.dataNodes){for(var f in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[f][g])!="undefined"){this.views[h].ofs_nodes[f][g]=this.conf.ofs_nodes[f][g];this.conf.ofs_nodes[f][g]=null;delete this.conf.ofs_nodes[f][g]}}this.views[h].dataNodesCont[g]=this.cell.childNodes[this.conf.idx[g]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[g]]);this.views[h].dataNodes[g]=this.dataNodes[g];this.dataNodes[g]=null;delete this.dataNodes[g];this._updateIdx()}this.callEvent("_onViewSave",[h])};this._viewRestore=function(h){if(this.views[h]==null){return}this.dataObj=this.views[h].dataObj;this.dataType=this.views[h].dataType;for(var j=0;j<this.views[h].cellCont.length;j++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[h].cellCont[j])}for(var g in this.views[h].dataNodes){this.dataNodes[g]=this.views[h].dataNodes[g];if(g=="menu"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(g=="toolbar"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.cont])}if(g=="sb"){this.cell.appendChild(this.views[h].dataNodesCont[g])}this._updateIdx()}for(var g in this.views[h].ofs_nodes){for(var f in this.views[h].ofs_nodes[g]){this.conf.ofs_nodes[g][f]=this.views[h].ofs_nodes[g][f]}}if(this.conf.borders!=this.views[h].borders){this[this.views[h].borders?"_showBorders":"_hideBorders"](true)}this.callEvent("_onViewRestore",[h]);this._viewDelete(h)};this._viewDelete=function(h){if(this.views[h]==null){return}this.views[h].borders=null;for(var g in this.views[h].ofs_nodes){for(var f in this.views[h].ofs_nodes[g]){this.views[h].ofs_nodes[g][f]=null}this.views[h].ofs_nodes[g]=null}this.views[h].dataType=null;this.views[h].dataObj=null;for(var j=0;j<this.views[h].cellCont.length;j++){this.views[h].cellCont[j]=null}this.views[h].cellCont=null;for(var g in this.views[h].dataNodes){this.views[h].dataNodes[g]=null;this.views[h].dataNodesCont[g]=null}this.views[h].dataNodes=this.views[h].dataNodesCont=null;this.views[h]=null;delete this.views[h]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var c=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return c};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(f){if(f==this.conf.view){var g=this.conf.unloading;this.conf.unloading=true;this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon();this._detachObject(null,true);this.conf.unloading=g;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[f]==null){return}var d=this.views[f];for(var c in d.dataNodes){if(typeof(d.dataNodes[c].unload)=="function"){d.dataNodes[c].unload()}d.dataNodes[c]=null;d.dataNodesCont[c]=null}if(d.dataType=="url"){if(d.cellCont!=null&&d.cellCont[0]!="null"){this._detachURLEvents(d.cellCont[0])}}else{if(d.dataObj!=null){if(typeof(d.dataObj.unload)=="function"){d.dataObj.unload()}else{if(typeof(d.dataObj.destructor)=="function"){d.dataObj.destructor()}}d.dataObj=null}}d=null;this._viewDelete(f);if(typeof(this.conf.views_loaded[f])!="undefined"){delete this.conf.views_loaded[f]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var c=document.createElement("DIV");c.className="dhx_cell_progress_bar";this.cell.appendChild(c);var a=document.createElement("DIV");a.className="dhx_cell_progress_img";this.cell.appendChild(a);c=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(!this.conf.progress){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var c=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){a.style.width=c.offsetWidth+"px";a.style.height=c.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=c.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=c.offsetHeight-this.conf.pr.ofs.h+"px";c=a=null};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var c in this.views){this.unloadView(c)}this.conf=null;for(var c in this){this[c]=null}};dhtmlXCellObject.prototype.attachObject=function(f,d){if(window.dhx4.s2b(d)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){d=false}if(typeof(f)=="string"){f=document.getElementById(f)}if(f.parentNode==this.cell.childNodes[this.conf.idx.cont]){f=null;return}if(d){f.style.display="";var a=f.offsetWidth;var c=f.offsetHeight}this._attachObject(f);this.dataType="obj";f.style.display="";f=null;if(d){this._adjustByCont(a,c)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(c,a){this._detachObject(null,c,a)};dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj};dhtmlXCellObject.prototype.attachURL=function(c,m,d){if(d==true){d={}}var f=(typeof(d)!="undefined"&&d!=false&&d!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=c;this.conf.url_data.ajax=(m==true);this.conf.url_data.post_data=(d==true?{}:(d||null));if(m==true){var l=this;if(f){var g="";for(var k in d){g+="&"+encodeURIComponent(k)+"="+encodeURIComponent(d[k])}dhx4.ajax.post(c,g,function(a){l.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(l._doOnFrameContentLoaded)=="function"){l._doOnFrameContentLoaded()}l.dataType="url-ajax";l=a=null})}else{dhx4.ajax.get(c,function(a){l.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(l._doOnFrameContentLoaded)=="function"){l._doOnFrameContentLoaded()}l.dataType="url-ajax";l=a=null})}}else{if(this.dataType=="url"){var h=this.getFrame()}else{var h=document.createElement("IFRAME");h.frameBorder=0;h.border=0;h.style.width="100%";h.style.height="100%";h.style.position="relative";this._attachObject(h);this.dataType="url";this._attachURLEvents()}if(f){var j=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(j){this._attachURLEvents()}h.src="about:blank"}else{h.src=c+(c.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()}h=null}h=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachLayout=function(a){if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){}if(this instanceof dhtmlXLayoutCell){this._hideBorders()}var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(typeof(this._layoutMainInst)!="undefined"){c._layoutMainInst=this._layoutMainInst}if(this instanceof window.dhtmlXLayoutCell){}if(typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof dhtmlXLayoutCell){c._isParentCell=true}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){c._ofs={t:-1}}if(typeof(a)=="string"){a={pattern:a}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=c;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(a);if(this instanceof dhtmlXLayoutCell){this.dataObj.parentLayout=this.layout}c._layoutMainInst=null;a.parent=null;c=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachTree=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(c,"100%","100%",(a||0));this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachGrid=function(){var a=document.createElement("DIV");a.style.width="100%";a.style.height="100%";a.style.position="relative";a.style.overflow="hidden";this._attachObject(a);this.dataType="grid";this.dataObj=new dhtmlXGridObject(a);this.dataObj.setSkin(this.conf.skin);if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachTabbar=function(a){if(typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof dhtmlXLayoutCell){this._hideBorders()}if(typeof(a)=="string"){a={mode:a}}else{if(typeof(a)!="object"||a==null){a={}}}var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){c._ofs={t:-1}}this._attachObject(c);a.skin=this.conf.skin;a.parent=c;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=c=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachAccordion=function(a){if(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){}else{if(this._isCell){this._hideBorders()}}var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";this._attachObject(c);if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=c;if(typeof(window.dhtmlXAccordionCell)!="undefined"&&(this instanceof window.dhtmlXAccordionCell)){c._ofs={s:{first:-1},m:{first:4}}}this.dataType="acc";this.dataObj=new dhtmlXAccordion(a);a.obj=null;c=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachEditor=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(!(typeof(a)=="object"&&a!=null)){a={}}a.parent=c;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);c=null;a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachDataView=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(typeof(a)=="undefined"){a={}}c.id="DataViewObject_"+new Date().getTime();a.container=c.id;a.skin=this.conf.skin;this.dataType="dataview";this.dataObj=new dhtmlXDataView(a);this.dataObj.setSizes=function(){this.render()};c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachScheduler=function(a,j,c,f){f=f||window.scheduler;var g=false;if(c){var h=document.getElementById(c);if(h){g=true}}if(!g){var d=c||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var h=document.createElement("DIV");h.id="dhxSchedObj_"+new Date().getTime();h.style.width="100%";h.style.height="100%";h.style.position="relative";h.style.overflow="hidden";h.className="dhx_cal_container";h.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+d+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(h);this.dataType="scheduler";this.dataObj=f;this.dataObj.setSizes=function(){this.update_view()};f.init(h.id,a,j);h=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachForm=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(c)}else{c.style.overflow="auto"}this._attachObject(c);this.dataType="form";this.dataObj=new dhtmlXForm(c,a);this.dataObj.setSkin(this.conf.skin);c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var c=document.createElement("DIV");c.id="GMapsObj_"+this._genStr(12);c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(c,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachChart=function(a){var c=document.createElement("DIV");c.id="dhxChartObj_"+window.dhx4.newId();c.style.width="100%";c.style.height="100%";document.body.appendChild(c);this._attachObject(c);a.container=c.id;this.dataType="chart";this.dataObj=new dhtmlXChart(a);if(!this.dataObj.setSizes){this.dataObj.setSizes=function(){if(this.resize){this.resize()}else{this.render()}}}return this.dataObj};dhtmlXCellObject.prototype.attachMenu=function(a){if(this.dataNodes.menu){return}if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("menu").firstChild;this.dataNodes.menu=new dhtmlXMenuObject(a);this._adjustCont(this._idd);a.parent=null;a=null;return this.dataNodes.menu};dhtmlXCellObject.prototype.detachMenu=function(){if(!this.dataNodes.menu){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;delete this.dataNodes.menu;this._detachObject("menu")};dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")};dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}if(typeof(a)=="undefined"){a={}}else{if(typeof(a)=="string"){a={skin:a}}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});a.parent=null;a=null;return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(!this.dataNodes.toolbar){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}if(typeof(a)=="undefined"){a={}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);var c=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){c._adjustCont(c._idd)});this._adjustCont();a.parent=null;a=null;return this.dataNodes.ribbon};dhtmlXCellObject.prototype.detachRibbon=function(){if(!this.dataNodes.ribbon){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;delete this.dataNodes.ribbon;this._detachObject("ribbon")};dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")};dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(c){this.childNodes[0].innerHTML=c};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(c){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(c,a){if(!this.dataNodes[c]){return}this.cell.childNodes[this.conf.idx[c]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._genStr=function(){if(!this._genStrId){this._genStrId=new Date().getTime()}return this._genStrId++};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var d=this;var c=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(f){d.callEvent("_onContentMouseDown",[c,f||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(d._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",d._doOnFrameMouseDown,false)}}catch(f){}try{if(typeof(d._doOnFrameContentLoaded)=="function"){d._doOnFrameContentLoaded()}}catch(f){}}}else{a.onreadystatechange=function(f){if(this.readyState=="complete"){try{if(typeof(d._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",d._doOnFrameMouseDown)}}catch(g){}try{if(typeof(d._doOnFrameContentLoaded)=="function"){d._doOnFrameContentLoaded()}}catch(g){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var l=this.getFrame().contentWindow.document;var j=l.createElement("FORM");j.method="POST";j.action=this.conf.url_data.url;l.body.appendChild(j);var g={};g["dhxr"+new Date().getTime()]="1";for(var c in this.conf.url_data.post_data){g[c]=this.conf.url_data.post_data[c]}for(var c in g){var h=l.createElement("INPUT");h.type="hidden";h.name=c;h.value=g[c];j.appendChild(h);h=null}this.conf.url_data.post_ifr=false;j.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(c){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(c){}}a=null};dhtmlXCellObject.prototype._attachObject=function(k,f,j,a,g){if(k=="menu"){if(typeof(g)!="undefined"){k=g}else{k=document.createElement("DIV");k.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders");k.appendChild(document.createElement("DIV"))}this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]);this.conf.ofs_nodes.t.menu=true;this._updateIdx();return k}if(k=="toolbar"){if(typeof(g)!="undefined"){k=g}else{k=document.createElement("DIV");k.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");k.appendChild(document.createElement("DIV"));k.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return k}if(k=="ribbon"){if(typeof(g)!="undefined"){k=g}else{k=document.createElement("DIV");k.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders");k.appendChild(document.createElement("DIV"))}this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.ribbon=true;this._updateIdx();this._adjustCont(this._idd);return k}if(k=="sb"){if(typeof(g)!="undefined"){k=g}else{var c=f||{};var l=(typeof(c.text)=="string"&&c.text.length>0?c.text:"&nbsp;");var d=(typeof(c.height)=="number"?c.height:false);var k=document.createElement("DIV");k.className="dhx_cell_statusbar_def";k.innerHTML="<div class='dhx_cell_statusbar_text'>"+l+"</div>";if(d!=false){k.firstChild.style.height=k.firstChild.style.lineHeight=d+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(k)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return k}if(a!=true){this._detachObject(null,true,null)}if(typeof(j)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=j}else{this.cell.childNodes[this.conf.idx.cont].appendChild(k)}k=null};dhtmlXCellObject.prototype._detachObject=function(g,c,a){this.callEvent("_onBeforeContentDetach",[]);if(g=="menu"||g=="toolbar"||g=="ribbon"||g=="sb"){var f=this.cell.childNodes[this.conf.idx[g]];f.parentNode.removeChild(f);f=null;this.conf.ofs_nodes[g=="sb"?"b":"t"][g]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(c==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var f=this.cell.childNodes[this.conf.idx.cont];while(f.childNodes.length>0){if(a===false){f.removeChild(f.lastChild)}else{f.firstChild.style.display="none";a.appendChild(f.firstChild)}}if(this.conf.append_mode){f.style.overflow="";this.conf.append_mode=false}var d=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=f=null;if(this.conf.unloading!=true&&d){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(c){this.detachObject(true);var f="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){f="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&c instanceof window.dhtmlXWindowsCell&&c.wins.w[c._idd].conf.parked){c.wins._winCellSetOpacity(c._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&c instanceof window.dhtmlXAccordionCell&&c.conf.opened==false){c._cellSetOpacity("open",false)}for(var d in c.dataNodes){this._attachObject(d,null,null,null,c.cell.childNodes[c.conf.idx[d]]);this.dataNodes[d]=c.dataNodes[d];c.dataNodes[d]=null;c.conf.ofs_nodes[d=="sb"?"b":"t"][d]=false;c._updateIdx()}this._mtbUpdBorder();if(c.dataType!=null&&c.dataObj!=null){this.dataType=c.dataType;this.dataObj=c.dataObj;while(c.cell.childNodes[c.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild)}c.dataType=null;c.dataObj=null;if(this.dataType=="grid"){if(f=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(c.cell.childNodes[c.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild)}}this.conf.view=c.conf.view;c.conf.view="def";for(var d in c.views){this.views[d]=c.views[d];c.views[d]=null;delete c.views[d]}c._updateIdx();c._adjustCont();this._updateIdx();this._adjustCont();if(f=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXPopup(d){var f=this;this.conf=d||{};d=null;this.mode=(this.conf.mode||"bottom");this.conf.zi=window.dhx4.newId();this.conf.isIE=(navigator.userAgent.indexOf("MSIE")>=0);this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(this.conf.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.onclick=function(g){g=g||event;f._clearClick=true;if(f._nodeObj!=null){f.callEvent("onContentClick",[]);return true}var a=(g.target||g.srcElement);var h=null;while(a!=f.p&&a!=null){if(typeof(a._idd)!="undefined"&&!a._isSeparator){h=a._idd;a=null}else{a=a.parentNode}}a=null;if(h!=null){f.callEvent("onClick",[h]);if(f!=null&&f.isVisible!=null&&f.isVisible()&&f.callEvent("onBeforeHide",["select",g,h])===true){g.cancelBubble=true;f.hide()}}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=function(a){this.tpl=a.split(",")};this.show=function(g){var a=null;if(arguments.length==1){if(!g){g=this.conf.id[0]}else{if(!this._idExists(g)){return}}if(this.conf.toolbar){a=this.conf.toolbar._getItemDim(g)}if(this.conf.ribbon){a=this.conf.ribbon._getItemDim(g)}if(this.conf.form){a=this.conf.form._getItemDim(g)}}else{if(arguments.length==4){this._clearClick=true;a={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};g=null}}if(!a){return}this.p.style.visibility="hidden";this.p.style.display="";this._setPos(a);this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this.p.style.visibility="visible";this._lastId=g;this.callEvent("onShow",[g])};this._setPos=function(E,l){var s=E.left;var q=E.top;var v=E.width;var H=E.height;this._posData={left:s,top:q,width:v,height:H};var J=window.dhx4.screenDim();var C=l||this.mode;if(typeof(l)=="undefined"){l=false}var L={top:(q-this.p.offsetHeight)-J.top,bottom:J.bottom-(q+H+this.p.offsetHeight),left:s-this.p.offsetWidth-J.left,right:J.right-(s+v+this.p.offsetWidth)};if(!l&&L[C]<0){var F=this._getAvailPos(C,L);if(F!==false){this._setPos(E,F);return}}if(C=="top"||C=="bottom"){var A=this.skinParams[this.conf.skin].t2;var u=this.skinParams[this.conf.skin].t3;var o=Math.round(this.p.offsetWidth/2);var a=Math.round(this.p.lastChild.offsetWidth/2);if(s<J.left){var I=Math.min(s+v,J.left);v=s+v-I;s=I}if(s+v>J.right){v=J.right-s}var r=Math.round(s+v/2);var j=r-o;var G=r-A-a;var n=r+a+A-this.p.offsetWidth;if(j<J.left-u){j=Math.min(J.left-u,G)}else{if(j+this.p.offsetWidth>J.right+u){j=Math.max(n,J.right+u-this.p.offsetWidth)}}this.p.style.left=j+"px";this.p.style.top=(C=="top"?q-this.p.offsetHeight:q+H)+"px";r=r-j-a;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+C;this.p.lastChild.style.top=(C=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=r+"px"}if(C=="left"||C=="right"){var A=this.skinParams[this.conf.skin].t0;var u=this.skinParams[this.conf.skin].t1;var m=Math.round(this.p.offsetHeight/2);var N=Math.round(this.p.lastChild.offsetHeight/2);if(q<J.top){var g=Math.min(q+H,J.top);H=q+H-g;q=g}if(q+H>J.bottom){H=J.bottom-q}var r=Math.round(q+H/2);var D=r-m;var M=r-A-N;var K=r+N+A-this.p.offsetHeight;if(D<J.top-u){D=Math.min(J.top-u,M)}else{if(D+this.p.offsetHeight>J.bottom+u){D=Math.max(K,J.bottom+u-this.p.offsetHeight)}}this.p.style.left=(C=="left"?s-this.p.offsetWidth:s+v)+"px";this.p.style.top=D+"px";r=r-D-N;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+C;this.p.lastChild.style.left=(C=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=r+"px"}if(this._IEDisp&&this._nodeId!=null){var B=document.getElementById(this._nodeId);window.setTimeout(function(){B.style.visibility="visible";B=null},1)}};this._getAvailPos=function(m,l){var h={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]};var j=null;for(var k=0;k<h[m].length;k++){if(j==null&&l[h[m][k]]>0){j=h[m][k]}}if(j==null){j="bottom";for(var g in l){if(l[g]>l[j]){j=g}}}if(j==m){return false}return j};this._repaint=function(){if(this.isVisible()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(this.conf.isIE&&typeof(dhtmlXLayoutObject)!="undefined"&&this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var g=0;g<this._nodeObjEv.length;g++){this.detachEvent(this._nodeObjEv[g])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var a=this.p.firstChild.firstChild.firstChild;while(a.childNodes.length>0){a.removeChild(a.lastChild)}a=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null;this.callEvent("onHide",[a])}};this.isVisible=function(){return(this.p.style.display=="")};this.itemData={};this.getItemData=function(a){if(!a){return this.itemData}if(this.itemData[a]){return this.itemData[a]}return{}};this.setSkin=function(a){this.conf.skin=a;this.p.className="dhx_popup_"+this.conf.skin;if(this._nodeObj!=null&&typeof(this._nodeObj.setSkin)=="function"){this._nodeObj.setSkin(this.conf.skin)}this._repaint()};this.attachList=function(h,m){this._setTemplate(h);this.clear();var j=this.p.firstChild.firstChild.firstChild;for(var l=0;l<m.length;l++){var k=document.createElement("TR");if(m[l]!=this.separator){if(typeof(m[l].id)=="undefined"||m[l].id==null){k._idd=window.dhx4.newId();while(this.itemData[k._idd]!=null){k._idd=window.dhx4.newId()}}else{k._idd=m[l].id}this.itemData[k._idd]=m[l]}j.appendChild(k);if(m[l]==this.separator){k.className="dhx_popup_sep";k._isSeparator=true;var n=document.createElement("TD");n.className="dhx_popup_sep";n.colSpan=this.tpl.length;n.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";k.appendChild(n);n=null}else{for(var a=0;a<this.tpl.length;a++){var g="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||a==0||a==this.tpl.length-1)){if(this.tpl.length==1){g+=" dhx_popup_td_single"}else{g+=(a==0?" dhx_popup_td_first":" dhx_popup_td_last")}}var n=document.createElement("TD");n.className=g;n.innerHTML=m[l][this.tpl[a]]||"&nbsp;";k.appendChild(n);n=null}if(this._IEHover){k._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}k=null}j=null;this._repaint()};this._attachNode=function(j,h){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild;var g=document.createElement("TR");g.className="dhxnode";a.appendChild(g);var k=document.createElement("TD");k.className="dhx_popup_td";k.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(h.width){k.firstChild.style.width=h.width+"px"}if(h.height){k.firstChild.style.height=h.height+"px"}g.appendChild(k);k=g=a=null;if(typeof(this["_attach_init_"+j])=="function"){this["_attach_init_"+j](h);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("click",this._doOnClick,false);window.removeEventListener("keyup",this._doOnKeyUp,false);window.removeEventListener("unload",this._doOnUnload,false)}else{document.body.detachEvent("onclick",this._doOnClick,false);document.body.detachEvent("onkeyup",this._doOnKeyUp,false);document.body.detachEvent("onunload",this._doOnUnload,false)}this.clear();this._doOnClick=null;this._doOnUnload=null;this._doOnKeyUp=null;if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){if(this.conf.toolbar.detachEvent!=null){this.conf.toolbar.detachEvent(this.conf.toolbarEvent)}else{this.conf.toolbar._getItemDim=null}}if(this.conf.ribbonEvent!=null&&this.conf.ribbon!=null){if(this.conf.ribbon.detachEvent!=null){this.conf.ribbon.detachEvent(this.conf.ribbonEvent)}else{this.conf.ribbon._getItemDim=null}}if(this.conf.slider){for(var a=0;a<this.conf.slider_events.length;a++){this.conf.slider.detachEvent(this.conf.slider_events[a])}this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.attachList=this.attachAccordion=this.attachCalendar=this.attachForm=this.attachGrid=this.attachLayout=this.attachTabbar=this.attachTree=this.attachHTML=this.attachObject=this._attachNode=null;this.show=this.hide=this.isVisible=this._setTemplate=this._repaint=this._setPos=this.getItemData=this.clear=this._idExists=this._doOnToolbarClick=this._doOnRibbonClick=this.setSkin=null;this.tpl=this.itemData=this.separator=this.mode=null;this._clearClick=this._lastId=this._posData=this.skinParams=this.skinParent=null;this.p.onclick=null;this.p.parentNode.removeChild(this.p);this.p=null;this.conf.toolbar=this.conf.toolbarEvent=this.conf.ribbon=this.conf.ribbonEvent=this.conf.form=this.conf.id=null;this.conf=null;this._IEHover=this._IEHoverTM=this._IEHoverInit=this._IEHoverClear=this._IEHoverRender=this._IEHoverInited=null;this._IEDisp=null;this.unload=null;f=null};window.dhx4._eventable(this);this._doOnClick=function(l){l=l||event;if(f._clearClick){f._clearClick=false;return}if(f.conf.form!=null){var m;var g=(l.target||l.srcElement);if((g.tagName||"").toLowerCase()=="option"){g=g.parentNode}if(g.className!=null&&g.className.search("dhxform")>=0){if(g.parentNode!=null&&g.parentNode.parentNode!=null&&g.parentNode.parentNode._idd!=null){m=g.parentNode.parentNode._idd;if(g.parentNode.parentNode._type=="ra"){m=[g.parentNode.parentNode._group,g.parentNode.parentNode._value]}}}else{var a=true;var h=false;while(a&&!h){var j=(g.className||"").toLowerCase();if(j.length>0){h=(j=="dhxform_btn"||j.search(/dhxeditor_inside/gi)>=0||j=="dhxcombo_input"||j.search(/dhxcombolist/gi)>=0)}g=g.parentNode;a=(g!=null)}if(h){return}}g=null;if(m!=null&&f._idExists(m)){return}}if(f.isVisible()&&f.callEvent("onBeforeHide",["click",l])===true){f.hide()}};this._doOnKeyUp=function(a){a=a||event;if(a.keyCode==27){if(f.isVisible()&&f.callEvent("onBeforeHide",["esc",a])===true){f.hide()}}};this._doOnUnload=function(){f.unload()};if(typeof(window.addEventListener)=="function"){window.addEventListener("click",this._doOnClick,false);window.addEventListener("keyup",this._doOnKeyUp,false);window.addEventListener("unload",this._doOnUnload,false)}else{document.body.attachEvent("onclick",this._doOnClick,false);document.body.attachEvent("onkeyup",this._doOnKeyUp,false);document.body.attachEvent("onunload",this._doOnUnload,false)}this._idExists=function(h){var a=false;for(var g=0;g<this.conf.id.length;g++){if(this.conf.id[g] instanceof Array){a=a||(this.conf.id[g][0]==h[0]&&this.conf.id[g][1]==h[1])}else{a=a||this.conf.id[g]==h}}return a};this._IEDisp=(this.conf.isIE&&(navigator.userAgent.search("MSIE 6.0")>=0||document.compatMode!="CSS1Compat"));this._IEHover=(this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var a=event.srcElement;while(a!=this&&a._IEHover!=true){a=a.parentNode}if(a._IEHover){if(f._IEHoverTM){window.clearTimeout(f._IEHoverTM)}if(f._lastIEHover==a){return}f._IEHoverRender(a);a=null}};this.p.onmouseout=function(){if(f._IEHoverTM){window.clearTimeout(f._IEHoverTM)}f._IEHoverTM=window.setTimeout(function(){f._IEHoverRender(null)},1)};this._IEHoverRender=function(a){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,"");this._lastIEHover=null}}if(a!=null&&a.className.search(/tr_hover/gi)<0){a.className+=" tr_hover";f._lastIEHover=a}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(this.conf.isIE&&navigator.userAgent.search(/MSIE [6,7,8]\.0/i)>=0);this._enableIEVFix=function(){if(this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0){var g=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"});var a=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(g,a)}};if(typeof(window.dhtmlXToolbarObject)!="undefined"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.conf.skin;this._doOnToolbarClick=function(g){for(var a=0;a<f.conf.id.length;a++){if(g==f.conf.id[a]){if(g!=f._lastId){f.show(g);f._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)=="undefined"){dhtmlXToolbarObject.prototype._getItemDim=function(h){var a=this.objPull[this.idPrefix+h];var g={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};a=null;return g}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)!="undefined"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.ribbon.conf.skin;this._doOnRibbonClick=function(g){for(var a=0;a<f.conf.id.length;a++){if(g==f.conf.id[a]){if(g!=f._lastId){f.show(g);f._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)=="undefined"){dhtmlXRibbon.prototype._getItemDim=function(h){var a=this._items[h].base;var g={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return g}}this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)!="undefined"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)=="undefined"){dhtmlXForm.prototype._getItemDim=function(a,g){return this.doWithItem(a,"_getDim")};for(var c in {input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[c]!=null){dhtmlXForm.prototype.items[c]._getDim=function(g){var a=g;if({ta:true,pw:true,se:true,calendar:true,colorpicker:1,editor:true}[g._type]){a=g.childNodes[g._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[g._type]){a=g.childNodes[g._ll?1:0].childNodes[1]}if({bt:true}[g._type]){a=g.firstChild}if({combo:true}[g._type]){a=g._combo.DOMParent.firstChild}var h={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return h}}}}}if(typeof(window.dhtmlXSlider)!="undefined"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider){if(!this.conf.mode){this.mode="top"}this.conf.slider_tm=null;this._sliderShow=function(){if(f.conf.slider_tm){window.clearTimeout(f.conf.slider_tm)}var a=f.conf.slider._nodes.runner;var g={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};f.show(g.left,g.top,g.width,g.height)};this._sliderHide=function(){f.conf.slider_tm=window.setTimeout(function(){f.hide()},200)};this.conf.slider_events=[this.conf.slider.attachEvent("_onRunnerMouseDown",this._sliderShow),this.conf.slider.attachEvent("_onRunnerMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]}this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue");return this}dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj=(typeof(a.obj)=="string"?document.getElementById(a.obj):a.obj);a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})};dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(a){return this._attachNode("form",{struct:a})};dhtmlXPopup.prototype._attach_init_form=function(c){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,c.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){a._clearClick=true})};dhtmlXPopup.prototype.attachCalendar=function(){return this._attachNode("calendar",{})};dhtmlXPopup.prototype._attach_init_calendar=function(a){this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(c,a){return this._attachNode("grid",{width:c||400,height:a||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(d,c,a){return this._attachNode("tree",{width:d||400,height:c||200,rootId:a||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",(a.rootId))};dhtmlXPopup.prototype.attachLayout=function(c,a,d){return this._attachNode("layout",{width:c||400,height:a||200,pattern:d||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(d,a,c){return this._attachNode("accordion",{width:d||400,height:a||200,conf:c||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(a.conf)};dhtmlXPopup.prototype.attachTabbar=function(d,a,c){if(typeof(c)=="string"){c={mode:c}}else{if(typeof(c)!="object"||c==null){c={}}}return this._attachNode("tabbar",{width:d||400,height:a||200,conf:c})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(a.conf)};dhtmlXPopup.prototype.attachEditor=function(d,a,c){return this._attachNode("editor",{width:d||400,height:a||200,conf:c||{}})};dhtmlXPopup.prototype._attach_init_editor=function(c){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;c.conf.parent=this._nodeId;if(c.conf.skin==null){c.conf.skin=this.conf.skin}this._nodeObj=new dhtmlXEditor(c.conf);var a=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(a)};dhtmlXPopup.prototype.attachColorPicker=function(a){if(typeof(a)!="object"||a==null){a={}}return this._attachNode("colorpicker",{conf:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin;a.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.conf)};function dhtmlXToolbarObject(c,d){var a=this;this.conf={skin:(d||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue"),align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if(typeof(c)=="object"&&c!=null&&typeof(c.tagName)=="undefined"){if(c.icons_path!=null||c.icon_path!=null){this.conf.icons_path=(c.icons_path||c.icon_path)}if(c.icons_size!=null){this.conf.icons_size_autoload=c.icons_size}if(c.json!=null){this.conf.json_autoload=c.json}if(c.xml!=null){this.conf.xml_autoload=c.xml}if(c.onload!=null){this.conf.onload_autoload=c.onload}if(c.items!=null){this.conf.items_autoload=c.items}if(c.skin!=null){this.conf.skin=c.skin}if(c.align!=null){this.conf.align_autostart=c.align}c=c.parent}this.cont=(typeof(c)!="object")?document.getElementById(c):c;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}c=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);if(window.dhx4.isIPad){this.cont.ontouchstart=function(f){f=f||event;if((String(f.target.tagName||"").toLowerCase()=="input")){return true}if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}this.setSkin(this.conf.skin);this.objPull={};this.anyUsed="none";this._genStr=function(f){var g="";var j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<f;h++){g+=j.charAt(Math.round(Math.random()*(j.length-1)))}return g};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(j,f){var g=null;for(var h=0;h<j.childNodes.length;h++){if(j.childNodes[h].tagName!=null){if(String(j.childNodes[h].tagName).toLowerCase()==String(f).toLowerCase()){g=j.childNodes[h]}}}return g};this._addImgObj=function(g){var f=document.createElement("IMG");if(g.childNodes.length>0){g.insertBefore(f,g.childNodes[0])}else{g.appendChild(f)}return f};this._setItemImage=function(j,g,f){if(f==true){j.imgEn=g}else{j.imgDis=g}if((!j.state&&f==true)||(j.state&&f==false)){return}var h=this._getObj(j.obj,"img");if(h==null){h=this._addImgObj(j.obj)}h.src=this.conf.icons_path+g};this._clearItemImage=function(h,f){if(f==true){h.imgEn=""}else{h.imgDis=""}if((!h.state&&f==true)||(h.state&&f==false)){return}var g=this._getObj(h.obj,"img");if(g!=null){g.parentNode.removeChild(g)}};this._setItemText=function(f,h){var g=this._getObj(f.obj,"div");if(h==null||h.length==0){if(g!=null){g.parentNode.removeChild(g)}return}if(g==null){g=document.createElement("DIV");g.className="dhxtoolbar_text";f.obj.appendChild(g)}g.innerHTML=h};this._getItemText=function(f){var g=this._getObj(f.obj,"div");if(g!=null){return g.innerHTML}return""};this._enableItem=function(g){if(g.state){return}g.state=true;if(this.objPull[g.id]["type"]=="buttonTwoState"&&this.objPull[g.id]["obj"]["pressed"]==true){g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";g.obj.renderAs=g.obj.className}if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var f=this._getObj(g.obj,"img");if(g.imgEn!=""){if(f==null){f=this._addImgObj(g.obj)}f.src=this.conf.icons_path+g.imgEn}else{if(f!=null){f.parentNode.removeChild(f)}}};this._disableItem=function(g){if(!g.state){return}g.state=false;g.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[g.id]["type"]=="buttonTwoState"&&g.obj.pressed?"pres_":"")+"dis";g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var f=this._getObj(g.obj,"img");if(g.imgDis!=""){if(f==null){f=this._addImgObj(g.obj)}f.src=this.conf.icons_path+g.imgDis}else{if(f!=null){f.parentNode.removeChild(f)}}if(g.polygon!=null){if(g.polygon.style.display!="none"){window.dhx4.zim.clear(g.polygon._idd);g.polygon.style.display="none";if(g.polygon._ie6cover){g.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(g.id,true)}}}this.anyUsed="none"};this.clearAll=function(){for(var f in this.objPull){this._removeItem(String(f).replace(this.idPrefix,""))}};this._doOnClick=function(f){if(a&&a.forEachItem){a.forEachItem(function(h){if(a.objPull[a.idPrefix+h]["type"]=="buttonSelect"){var g=a.objPull[a.idPrefix+h];if(g.arw._skip===true){g.arw._skip=false}else{if(g.polygon.style.display!="none"){g.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";g.obj.className=g.obj.renderAs;g.arw.className=String(g.obj.renderAs).replace("btn","arw");a.anyUsed="none";window.dhx4.zim.clear(g.polygon._idd);g.polygon.style.display="none";if(g.polygon._ie6cover){g.polygon._ie6cover.style.display="none"}if(a.conf.skin=="dhx_terrace"){a._improveTerraceButtonSelect(g.id,true)}}}}})}};if(window.dhx4.isIPad){document.addEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}return this}dhtmlXToolbarObject.prototype.addSpacer=function(d){var c=this.idPrefix+d;if(this._spacer!=null){if(this._spacer.idd==d){return}if(this._spacer==this.objPull[c].obj.parentNode){var a=true;while(a){var j=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(j==d||this._spacer.childNodes.length==0){if(this.objPull[c].arw!=null){this.base.appendChild(this.objPull[c].arw)}a=false}}this._spacer.idd=d;this._fixSpacer();return}if(this.base==this.objPull[c].obj.parentNode){var a=true;var h=(this.objPull[c].arw!=null);while(a){var f=this.base.childNodes.length-1;if(h==true){if(this.base.childNodes[f]==this.objPull[c].arw){a=false}}if(this.base.childNodes[f].idd==d){a=false}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[f],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[f])}}}this._spacer.idd=d;this._fixSpacer();return}}else{var g=null;for(var f=0;f<this.base.childNodes.length;f++){if(this.base.childNodes[f]==this.objPull[this.idPrefix+d].obj){g=f;if(this.objPull[this.idPrefix+d].arw!=null){g=f+1}}}if(g!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=d;while(this.base.childNodes.length>g+1){this._spacer.appendChild(this.base.childNodes[g+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(d){var f=this.getParentId(d);if(f!=null){var c=null;var a=this.objPull[this.idPrefix+f]._listOptions[d];if(a!=null){if(a.sep!=null){c="buttonSelectSeparator"}else{c="buttonSelectButton"}}return c}else{if(this.objPull[this.idPrefix+d]==null){return null}return this.objPull[this.idPrefix+d]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(c){var a=this.getType(c);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button"}else{a="separator"}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(d,c){for(var a=0;a<d.length;a++){if(d[a]==c){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(f){var g=null;for(var d in this.objPull){if(this.objPull[d]._listOptions){for(var c in this.objPull[d]._listOptions){if(c==f){g=String(d).replace(this.idPrefix,"")}}}}return g};dhtmlXToolbarObject.prototype._addItem=function(a,c){this._addItemToStorage(a,c);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(g,f,c,a,d){this._addItem({id:g,type:"button",text:c,img:a,imgdis:d},f)};dhtmlXToolbarObject.prototype.addText=function(d,c,a){this._addItem({id:d,type:"text",text:a},c)};dhtmlXToolbarObject.prototype.addButtonSelect=function(f,k,n,a,c,l,j,r,g,h){var o=[];for(var d=0;d<a.length;d++){var m={};if(a[d] instanceof Array){m.id=a[d][0];m.type=(a[d][1]=="obj"?"button":"separator");m.text=(a[d][2]||null);m.img=(a[d][3]||null)}else{if(a[d] instanceof Object&&a[d]!=null&&typeof(a[d].id)!="undefined"&&typeof(a[d].type)!="undefined"){m.id=a[d].id;m.type=(a[d].type=="obj"?"button":"separator");m.text=a[d].text;m.img=a[d].img}}o.push(m)}this._addItem({id:f,type:"buttonSelect",text:n,img:c,imgdis:l,renderSelect:j,openAll:r,options:o,maxOpen:g,mode:h},k)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(g,f,c,a,d){this._addItem({id:g,type:"buttonTwoState",img:a,imgdis:d,text:c},f)};dhtmlXToolbarObject.prototype.addSeparator=function(c,a){this._addItem({id:c,type:"separator"},a)};dhtmlXToolbarObject.prototype.addSlider=function(c,j,g,f,l,d,h,a,k){this._addItem({id:c,type:"slider",length:g,valueMin:f,valueMax:l,valueNow:d,textMin:h,textMax:a,toolTip:k},j)};dhtmlXToolbarObject.prototype.addInput=function(f,d,c,a){this._addItem({id:f,type:"buttonInput",value:c,width:a},d)};dhtmlXToolbarObject.prototype.forEachItem=function(d){for(var c in this.objPull){if(this.inArray(this.rootTypes,this.objPull[c]["type"])){d(this.objPull[c]["id"].replace(this.idPrefix,""))}}};(function(){var h="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var d=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var c=function(j,k){return function(n,m,l){n=this.idPrefix+n;if(this.objPull[n][j]!=null){return this.objPull[n][j].call(this.objPull[n],m,l)}else{return k}}};for(var g=0;g<h.length;g++){var a=h[g];var f=d[g];dhtmlXToolbarObject.prototype[a]=c(a,f)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(g,d){if(this.objPull[this.idPrefix+g]==null){return null}var f=null;var a=0;for(var c=0;c<this.base.childNodes.length;c++){if(this.base.childNodes[c].idd!=null){if(this.base.childNodes[c].idd==g){f=a}a++}}if(!f&&this._spacer!=null){for(var c=0;c<this._spacer.childNodes.length;c++){if(this._spacer.childNodes[c].idd!=null){if(this._spacer.childNodes[c].idd==g){f=a}a++}}}return f};dhtmlXToolbarObject.prototype.setPosition=function(a,c){this._setPosition(a,c)};dhtmlXToolbarObject.prototype._setPosition=function(g,f){if(this.objPull[this.idPrefix+g]==null){return}if(isNaN(f)){f=this.base.childNodes.length}if(f<0){f=0}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}var d=this.objPull[this.idPrefix+g];this.base.removeChild(d.obj);if(d.arw){this.base.removeChild(d.arw)}var c=this._getIdByPosition(f,true);if(c[0]==null){this.base.appendChild(d.obj);if(d.arw){this.base.appendChild(d.arw)}}else{this.base.insertBefore(d.obj,this.base.childNodes[c[1]]);if(d.arw){this.base.insertBefore(d.arw,this.base.childNodes[c[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(h,c){var g=null;var a=0;var d=0;for(var f=0;f<this.base.childNodes.length;f++){if(this.base.childNodes[f]["idd"]!=null&&g==null){if((a++)==h){g=this.base.childNodes[f]["idd"]}}if(g==null){d++}}d=(g==null?null:d);return(c==true?new Array(g,d):g)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(g){var d=this.getType(g);g=this.idPrefix+g;var f=this.objPull[g];if(d=="button"){f.obj._doOnMouseOver=null;f.obj._doOnMouseOut=null;f.obj._doOnMouseUp=null;f.obj._doOnMouseUpOnceAnywhere=null;f.obj.onclick=null;f.obj.onmouseover=null;f.obj.onmouseout=null;f.obj.onmouseup=null;f.obj.onmousedown=null;f.obj.onselectstart=null;f.obj.renderAs=null;f.obj.idd=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.state=null;f.img=null;f.imgEn=null;f.imgDis=null;f.type=null;f.enableItem=null;f.disableItem=null;f.isEnabled=null;f.showItem=null;f.hideItem=null;f.isVisible=null;f.setItemText=null;f.getItemText=null;f.setItemImage=null;f.clearItemImage=null;f.setItemImageDis=null;f.clearItemImageDis=null;f.setItemToolTip=null;f.getItemToolTip=null}if(d=="buttonTwoState"){f.obj._doOnMouseOver=null;f.obj._doOnMouseOut=null;f.obj.onmouseover=null;f.obj.onmouseout=null;f.obj.onmousedown=null;f.obj.onselectstart=null;f.obj.renderAs=null;f.obj.idd=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.state=null;f.img=null;f.imgEn=null;f.imgDis=null;f.type=null;f.enableItem=null;f.disableItem=null;f.isEnabled=null;f.showItem=null;f.hideItem=null;f.isVisible=null;f.setItemText=null;f.getItemText=null;f.setItemImage=null;f.clearItemImage=null;f.setItemImageDis=null;f.clearItemImageDis=null;f.setItemToolTip=null;f.getItemToolTip=null;f.setItemState=null;f.getItemState=null}if(d=="buttonSelect"){for(var c in f._listOptions){this.removeListOption(g,c)}f._listOptions=null;if(f.polygon._ie6cover){document.body.removeChild(f.polygon._ie6cover);f.polygon._ie6cover=null}f.p_tbl.removeChild(f.p_tbody);f.polygon.removeChild(f.p_tbl);f.polygon.onselectstart=null;document.body.removeChild(f.polygon);f.p_tbody=null;f.p_tbl=null;f.polygon=null;f.obj.onclick=null;f.obj.onmouseover=null;f.obj.onmouseout=null;f.obj.onmouseup=null;f.obj.onmousedown=null;f.obj.onselectstart=null;f.obj.idd=null;f.obj.iddPrefix=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.arw.onclick=null;f.arw.onmouseover=null;f.arw.onmouseout=null;f.arw.onmouseup=null;f.arw.onmousedown=null;f.arw.onselectstart=null;f.arw.parentNode.removeChild(f.arw);f.arw=null;f.renderSelect=null;f.state=null;f.type=null;f.id=null;f.img=null;f.imgEn=null;f.imgDis=null;f.openAll=null;f._isListButton=null;f._separatorButtonSelectObject=null;f._buttonButtonSelectObject=null;f.setWidth=null;f.enableItem=null;f.disableItem=null;f.isEnabled=null;f.showItem=null;f.hideItem=null;f.isVisible=null;f.setItemText=null;f.getItemText=null;f.setItemImage=null;f.clearItemImage=null;f.setItemImageDis=null;f.clearItemImageDis=null;f.setItemToolTip=null;f.getItemToolTip=null;f.addListOption=null;f.removeListOption=null;f.showListOption=null;f.hideListOption=null;f.isListOptionVisible=null;f.enableListOption=null;f.disableListOption=null;f.isListOptionEnabled=null;f.setListOptionPosition=null;f.getListOptionPosition=null;f.setListOptionImage=null;f.getListOptionImage=null;f.clearListOptionImage=null;f.setListOptionText=null;f.getListOptionText=null;f.setListOptionToolTip=null;f.getListOptionToolTip=null;f.forEachListOption=null;f.getAllListOptions=null;f.setListOptionSelected=null;f.getListOptionSelected=null}if(d=="buttonInput"){f.obj.childNodes[0].onkeydown=null;f.obj.removeChild(f.obj.childNodes[0]);f.obj.w=null;f.obj.idd=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.type=null;f.enableItem=null;f.disableItem=null;f.isEnabled=null;f.showItem=null;f.hideItem=null;f.isVisible=null;f.setItemToolTip=null;f.getItemToolTip=null;f.setWidth=null;f.getWidth=null;f.setValue=null;f.getValue=null;f.setItemText=null;f.getItemText=null}if(d=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",f.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",f.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",f.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",f.pen._doOnMouseMoveEnd)}}f.pen.allowMove=null;f.pen.initXY=null;f.pen.maxX=null;f.pen.minX=null;f.pen.nowX=null;f.pen.newNowX=null;f.pen.valueMax=null;f.pen.valueMin=null;f.pen.valueNow=null;f.pen._definePos=null;f.pen._detectLimits=null;f.pen._doOnMouseMoveStart=null;f.pen._doOnMouseMoveEnd=null;f.pen.onmousedown=null;f.obj.removeChild(f.pen);f.pen=null;f.label.tip=null;document.body.removeChild(f.label);f.label=null;f.obj.onselectstart=null;f.obj.idd=null;while(f.obj.childNodes.length>0){f.obj.removeChild(f.obj.childNodes[0])}f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.type=null;f.state=null;f.enableItem=null;f.disableItem=null;f.isEnabled=null;f.setItemToolTipTemplate=null;f.getItemToolTipTemplate=null;f.setMaxValue=null;f.setMinValue=null;f.getMaxValue=null;f.getMinValue=null;f.setValue=null;f.getValue=null;f.showItem=null;f.hideItem=null;f.isVisible=null}if(d=="separator"){f.obj.onselectstart=null;f.obj.idd=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.type=null;f.showItem=null;f.hideItem=null;f.isVisible=null}if(d=="text"){f.obj.onselectstart=null;f.obj.idd=null;f.obj.parentNode.removeChild(f.obj);f.obj=null;f.id=null;f.type=null;f.showItem=null;f.hideItem=null;f.isVisible=null;f.setWidth=null;f.setItemText=null;f.getItemText=null}d=null;f=null;this.objPull[this.idPrefix+g]=null;delete this.objPull[this.idPrefix+g]};(function(){var f="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var c=function(g){return function(n,j,h,m,l,k){n=this.idPrefix+n;if(this.objPull[n]==null){return}if(this.objPull[n]["type"]!="buttonSelect"){return}return this.objPull[n][g].call(this.objPull[n],j,h,m,l,k)}};for(var d=0;d<f.length;d++){var a=f[d];dhtmlXToolbarObject.prototype[a]=c(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(c,a){return c+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,d,c){this.id=a.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(c.hidden!=null?"none":"");this.obj.idd=String(d);this.obj.title=(c.title||"");this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(a,d,c){this.id=a.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(c.hidden!=null?"none":"");this.obj.idd=String(d);this.obj.title=(c.title||"");this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}this.obj.innerHTML=(c.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(f){this.obj.innerHTML=f};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(f){this.obj.style.width=f+"px"};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(a,f,c){this.id=a.idPrefix+f;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img||"");this.imgDis=(c.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(c.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(c.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(f);this.obj.title=(c.title||"");this.obj.pressed=false;this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(c.text!=null?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""));var d=this;this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=true;if(d.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){this.allowClick=false;if(d.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.renderAs};this.obj.onclick=function(g){if(d.state==false){return}if(this.allowClick==false){return}g=g||event;var h=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](h)}catch(g){}}if(a&&a.callEvent){a.callEvent("onClick",[h])}};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(g){if(d.state==false){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}g.cancelBubble=true;return false}if(a.anyUsed!="none"){return}a.anyUsed=this.idd;this.className="dhx_toolbar_btn dhxtoolbar_btn_pres";this.pressed=true;this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){a.anyUsed="none";this._doOnMouseOut()};return false};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(h){if(d.state==false){return}if(a.anyUsed!="none"){if(a.anyUsed!=this.idd){return}}var g=a.anyUsed;this._doOnMouseUp();if(window.dhx4.isIPad&&g!="none"){a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")])}};if(window.dhx4.isIPad){this.obj.ontouchmove=function(g){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){a.anyUsed="none";this.className=this.renderAs;this.pressed=false};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(g){a._setItemText(this,g)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(g){a._setItemImage(this,g,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(g){a._setItemImage(this,g,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(g){this.obj.title=g};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(d,h,g){this.id=d.idPrefix+h;this.state=(g.enabled!=null?(g.enabled=="true"?true:false):true);this.imgEn=(g.img||"");this.imgDis=(g.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(g.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!g.text||g.text.length==0){g.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(g.openAll)==true);this.renderSelect=(g.renderSelect==null?true:window.dhx4.s2b(g.renderSelect))}this.maxOpen=(!isNaN(g.maxOpen?g.maxOpen:"")?g.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!d._sbw){var l=document.createElement("DIV");l.className="dhxtoolbar_maxopen_test";document.body.appendChild(l);var j=document.createElement("DIV");j.className="dhxtoolbar_maxopen_test2";l.appendChild(j);d._sbw=l.offsetWidth-j.offsetWidth;l.removeChild(j);j=null;document.body.removeChild(l);l=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(g.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(g.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};this.obj.idd=String(h);this.obj.title=(g.title||"");this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=d._rtlParseBtn((this.img!=""?"<img src='"+d.conf.icons_path+this.img+"'>":""),(g.text!=null?"<div class='dhxtoolbar_text'>"+g.text+"</div>":""));d.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};d.base.appendChild(this.arw);var a=this;this.obj.onmouseover=function(j){j=j||event;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw")};this.obj.onmouseout=function(){a.obj.allowClick=false;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");a.callEvent=false};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(j){j=j||event;if(!a.obj.allowClick){return}if(!a.state){return}if(d.anyUsed!="none"){return}var k=a.obj.idd.replace(d.idPrefix,"");if(a.obj.extAction){try{window[a.obj.extAction](k)}catch(j){}}d.callEvent("onClick",[k])};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(j){j=j||event;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.allowClick=true;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.callEvent=true};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(j){j=j||event;j.cancelBubble=true;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");if(window.dhx4.isIPad&&a.callEvent){var k=a.obj.idd.replace(d.idPrefix,"");d.callEvent("onClick",[k])}}}if(window.dhx4.isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(l){l=l||event;var s=(this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling);if(s._skip){l=l||event;l.cancelBubble=true}else{s._skip=true}s=null;if(!a.state){return}if(d.anyUsed==a.obj.idd){a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");d.anyUsed="none";window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,true)}}else{if(d.anyUsed!="none"){if(d.objPull[d.idPrefix+d.anyUsed]["type"]=="buttonSelect"){var r=d.objPull[d.idPrefix+d.anyUsed];if(r.polygon.style.display!="none"){r.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";r.obj.className=r.obj.renderAs;r.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(r.polygon._idd);r.polygon.style.display="none";if(r.polygon._ie6cover){r.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(r.id,true)}}}}a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";d.anyUsed=a.obj.idd;a.polygon.style.top="0px";a.polygon.style.visibility="hidden";a.polygon.style.zIndex=window.dhx4.zim.reserve(a.polygon._idd);a.polygon.style.display="";if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,false)}a._fixMaxOpenHeight(a.maxOpen||null);d._autoDetectVisibleArea();var m=window.dhx4.absTop(a.obj)+a.obj.offsetHeight+d.conf.sel_ofs_y;var o=a.polygon.offsetHeight;if(m+o>d.tY2){var n=(a.maxOpen!=null?Math.floor((d.tY2-m)/22):0);if(n>=1){a._fixMaxOpenHeight(n)}else{m=window.dhx4.absTop(a.obj)-o-d.conf.sel_ofs_y;if(m<0){m=0}}}a.polygon.style.top=m+"px";if(d.rtl){a.polygon.style.left=window.dhx4.absLeft(a.obj)+a.obj.offsetWidth-a.polygon.offsetWidth+d.conf.sel_ofs_x+"px"}else{var k=document.body.scrollLeft;var j=k+(window.innerWidth||document.body.clientWidth);var q=window.dhx4.absLeft(a.obj)+d.conf.sel_ofs_x;if(q+a.polygon.offsetWidth>j){q=window.dhx4.absLeft(a.arw)+a.arw.offsetWidth-a.polygon.offsetWidth}a.polygon.style.left=Math.max(q,5)+"px"}a.polygon.style.visibility="visible";if(a.polygon._ie6cover){a.polygon._ie6cover.style.left=a.polygon.style.left;a.polygon._ie6cover.style.top=a.polygon.style.top;a.polygon._ie6cover.style.width=a.polygon.offsetWidth+"px";a.polygon._ie6cover.style.height=a.polygon.offsetHeight+"px";a.polygon._ie6cover.style.display=""}}return false};this.arw.onclick=function(j){j=j||event;j.cancelBubble=true};this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(j){j=j||event;j.cancelBubble=true};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(window.dhx4.isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend}}this.obj.iddPrefix=d.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(n){var m="auto";var l=false;if(n!==null){var k=0;for(var j in this._listOptions){k++}if(k>n){this._ph=22*n;m=this._ph+"px"}else{l=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!l&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+d._sbw+"px";this.polygon.style.height=m}};this._separatorButtonSelectObject=function(l,j,k){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};if(isNaN(k)){k=a.p_tbody.childNodes.length+1}else{if(k<1){k=1}}if(k>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[k-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[l]=this.obj;return this};this._buttonButtonSelectObject=function(n,l,m){var k=true;if(typeof(l.enabled)!="undefined"){k=window.dhx4.s2b(l.enabled)}else{if(typeof(l.disabled)!="undefined"){k=window.dhx4.s2b(l.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=k;this.obj.tr.extAction=(l.action||null);this.obj.tr._selected=(l.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};this.obj.tr.idd=String(n);if(isNaN(m)){m=a.p_tbody.childNodes.length+1}else{if(m<1){m=1}}if(m>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[m-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(o){o=o||event;if(o.preventDefault){o.preventDefault()}else{o.returnValue=false}return false};if(d.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(l.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+d.conf.icons_path+l.img+"' border='0'>";this.obj.tr._img=l.img}else{this.obj.td_a.innerHTML="&nbsp;"}var j=(l.text!=null?l.text:(l.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+j+"</div>";this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){if(!this.en||(this._selected&&a.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(){if(!this.en){return}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(o){o=o||event;o.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(d.idPrefix,""));a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,true)}d.anyUsed="none";var q=this.idd.replace(d.idPrefix,"");if(this.extAction){try{window[this.extAction](q)}catch(o){}}d.callEvent("onClick",[q])};a._listOptions[n]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+d.conf.skin+" dhxtoolbar_icons_"+d.conf.iconSize;this.polygon.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};this.polygon.onmousedown=function(j){j=j||event;j.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();if(window.dhx4.isIPad){this.polygon.ontouchstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}j.cancelBubble=true;return false}}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(g.options!=null){for(var f=0;f<g.options.length;f++){var c="_"+(g.options[f].type||"")+"ButtonSelectObject";if(g.options[f].id==null){g.options[f].id=d._genStr(24)}if(typeof(this[c])=="function"){new this[c](g.options[f].id,g.options[f])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(j){this.obj.style.width=j-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){d._enableItem(this)};this.disableItem=function(){d._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(j){d._setItemText(this,j)};this.getItemText=function(){return d._getItemText(this)};this.setItemImage=function(j){d._setItemImage(this,j,true)};this.clearItemImage=function(){d._clearItemImage(this,true)};this.setItemImageDis=function(j){d._setItemImage(this,j,false)};this.clearItemImageDis=function(){d._clearItemImage(this,false)};this.setItemToolTip=function(j){this.obj.title=j;this.arw.title=j};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(o,n,l,m,j){if(!(l=="button"||l=="separator")){return}var k={id:o,type:l,text:m,img:j};new this["_"+l+"ButtonSelectObject"](o,k,n)};this.removeListOption=function(l){if(!this._isListButton(l,true)){return}var j=this._listOptions[l];if(j.td_a!=null&&j.td_b!=null){j.td_a.onselectstart=null;j.td_b.onselectstart=null;while(j.td_a.childNodes.length>0){j.td_a.removeChild(j.td_a.childNodes[0])}while(j.td_b.childNodes.length>0){j.td_b.removeChild(j.td_b.childNodes[0])}j.tr.onselectstart=null;j.tr.onmouseover=null;j.tr.onmouseout=null;j.tr.onclick=null;while(j.tr.childNodes.length>0){j.tr.removeChild(j.tr.childNodes[0])}j.tr.parentNode.removeChild(j.tr);j.td_a=null;j.td_b=null;j.tr=null}else{j.sep.onselectstart=null;j.td.onselectstart=null;j.tr.onselectstart=null;while(j.td.childNodes.length>0){j.td.removeChild(j.td.childNodes[0])}while(j.tr.childNodes.length>0){j.tr.removeChild(j.tr.childNodes[0])}j.tr.parentNode.removeChild(j.tr);j.sep=null;j.td=null;j.tr=null}j=null;this._listOptions[l]=null;try{delete this._listOptions[l]}catch(k){}};this.showListOption=function(j){if(!this._isListButton(j,true)){return}this._listOptions[j].tr.style.display=""};this.hideListOption=function(j){if(!this._isListButton(j,true)){return}this._listOptions[j].tr.style.display="none"};this.isListOptionVisible=function(j){if(!this._isListButton(j,true)){return}return(this._listOptions[j].tr.style.display!="none")};this.enableListOption=function(j){if(!this._isListButton(j)){return}this._listOptions[j].tr.en=true;this._listOptions[j].tr.className="tr_btn"+(this._listOptions[j].tr._selected&&d.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(j){if(!this._isListButton(j)){return}this._listOptions[j].tr.en=false;this._listOptions[j].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(j){if(!this._isListButton(j)){return}return this._listOptions[j].tr.en};this.setListOptionPosition=function(l,k){if(!this._listOptions[l]||this.getListOptionPosition(l)==k||isNaN(k)){return}if(k<1){k=1}var j=this._listOptions[l].tr;this.p_tbody.removeChild(j);if(k>this.p_tbody.childNodes.length){this.p_tbody.appendChild(j)}else{this.p_tbody.insertBefore(j,this.p_tbody.childNodes[k-1])}j=null};this.getListOptionPosition=function(l){var k=-1;if(!this._listOptions[l]){return k}for(var j=0;j<this.p_tbody.childNodes.length;j++){if(this.p_tbody.childNodes[j]==this._listOptions[l].tr){k=j+1}}return k};this.setListOptionImage=function(m,j){if(!this._isListButton(m)){return}var l=this._listOptions[m].tr.childNodes[(d.rtl?1:0)];if(l.childNodes.length>0){l.childNodes[0].src=d.conf.icons_path+j}else{var k=document.createElement("IMG");k.className="btn_sel_img";k.src=d.conf.icons_path+j;l.appendChild(k)}l=null};this.getListOptionImage=function(l){if(!this._isListButton(l)){return}var k=this._listOptions[l].tr.childNodes[(d.rtl?1:0)];var j=null;if(k.childNodes.length>0){j=k.childNodes[0].src}k=null;return j};this.clearListOptionImage=function(k){if(!this._isListButton(k)){return}var j=this._listOptions[k].tr.childNodes[(d.rtl?1:0)];while(j.childNodes.length>0){j.removeChild(j.childNodes[0])}j.innerHTML="&nbsp;";j=null};this.setListOptionText=function(k,j){if(!this._isListButton(k)){return}this._listOptions[k].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML=j};this.getListOptionText=function(j){if(!this._isListButton(j)){return}return this._listOptions[j].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(k,j){if(!this._isListButton(k)){return}this._listOptions[k].tr.title=j};this.getListOptionToolTip=function(j){if(!this._isListButton(j)){return}return this._listOptions[j].tr.title};this.forEachListOption=function(k){for(var j in this._listOptions){k(j)}};this.getAllListOptions=function(){var k=new Array();for(var j in this._listOptions){k[k.length]=j}return k};this.setListOptionSelected=function(l){for(var j in this._listOptions){var k=this._listOptions[j];if(k.td_a!=null&&k.td_b!=null&&k.tr.en){if(j==l){k.tr._selected=true;k.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(k.tr._img){this.setItemImage(k.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(l))}}else{k.tr._selected=false;k.tr.className="tr_btn"}}k=null}};this.getListOptionSelected=function(){var k=null;for(var j in this._listOptions){if(this._listOptions[j].tr._selected==true){k=j}}return k};this._isListButton=function(k,j){if(this._listOptions[k]==null){return false}if(!j&&this._listOptions[k].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(j){this._ph=null;if(typeof(j)=="number"){this.maxOpen=j;this._maxOpenTest();return}this.maxOpen=null};if(g.width){this.setWidth(g.width)}if(this.mode=="select"&&typeof(g.selected)!="undefined"){this.setListOptionSelected(g.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(d,g,f){this.id=d.idPrefix+g;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(f.hidden!=null?"none":"");this.obj.idd=String(g);this.obj.w=(f.width!=null?f.width:100);this.obj.title=(f.title!=null?f.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(f.value!=null?" value='"+f.value+"'":"")+">";var c=d;var a=this;this.obj.childNodes[0].onkeydown=function(h){h=h||event;if(h.keyCode==13){c.callEvent("onEnter",[a.obj.idd,this.value])}};d.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(h){this.obj.childNodes[0].value=h};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(h){this.obj.w=h;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(h){this.obj.title=h};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(f.enabled)!="undefined"&&window.dhx4.s2b(f.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,f,c){this.id=a.idPrefix+f;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img!=null?c.img:"");this.imgDis=(c.imgdis!=null?c.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(c.selected!=null);this.obj.extAction=(c.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(c.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(f);this.obj.title=(c.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(c.text!=null?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""));a.base.appendChild(this.obj);var d=this;this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(d.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){if(d.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.className};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(g){if(a.checkEvent("onBeforeStateChange")){if(!a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed])){return}}if(d.state==false){return}if(a.anyUsed!="none"){return}this.pressed=!this.pressed;this.className=(this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs);var h=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](h,this.pressed)}catch(g){}}a.callEvent("onStateChange",[h,this.pressed]);return false};this.setItemState=function(g,j){if(this.obj.pressed!=g){if(g==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis");this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.renderAs=this.obj.className}if(j==true){var k=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](k,this.obj.pressed)}catch(h){}}a.callEvent("onStateChange",[k,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(g){a._setItemText(this,g)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(g){a._setItemImage(this,g,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(g){a._setItemImage(this,g,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(g){this.obj.title=g};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(f,h,g){this.id=f.idPrefix+h;this.state=(g.enabled!=null?(g.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(g.hidden!=null?"none":"");this.obj.onselectstart=function(j){j=j||event;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}};this.obj.idd=String(h);this.obj.len=(g.length!=null?Number(g.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(g.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(g.textMax||"")+"</div>";f.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var d=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+f.conf.skin+(f.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(g.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var c=this.label;this.pen.valueMin=(g.valueMin!=null?Number(g.valueMin):0);this.pen.valueMax=(g.valueMax!=null?Number(g.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(g.valueNow!=null?Number(g.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(j){if(a.state==false){return}j=j||event;this.initXY=(window.dhx4.isIPad?j.touches[0].clientX:j.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(c.tip!=""){c.style.visibility="hidden";c.style.display="";c.innerHTML=c.tip.replace("%v",this.valueNow);c.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-c.offsetWidth/2)+"px";c.style.top=window.dhx4.absTop(this)-c.offsetHeight-3+"px";c.style.visibility="";c.style.zIndex=window.dhx4.zim.reserve(c._zi)}};this.pen._doOnMouseMoveStart=function(k){k=k||event;if(!d.allowMove){return}var j=(window.dhx4.isIPad?k.touches[0].clientX:k.clientX);var l=j-d.initXY;if(j<window.dhx4.absLeft(d)+Math.round(d.offsetWidth/2)&&d.nowX==d.minX){return}if(j>window.dhx4.absLeft(d)+Math.round(d.offsetWidth/2)&&d.nowX==d.maxX){return}d.newNowX=d.nowX+l;if(d.newNowX<d.minX){d.newNowX=d.minX}if(d.newNowX>d.maxX){d.newNowX=d.maxX}d.nowX=d.newNowX;d.style.left=d.nowX+"px";d.initXY=j;d.newValueNow=Math.round((d.valueMax-d.valueMin)*(d.newNowX-d.minX)/(d.maxX-d.minX)+d.valueMin);if(c.tip!=""){c.innerHTML=c.tip.replace(/%v/gi,d.newValueNow);c.style.left=Math.round(window.dhx4.absLeft(d)+d.offsetWidth/2-c.offsetWidth/2)+"px";c.style.top=window.dhx4.absTop(d)-c.offsetHeight-3+"px"}k.cancelBubble=true;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!d.allowMove){return}d.className="dhxtoolbar_sl_pen";d.allowMove=false;d.nowX=d.newNowX;d.valueNow=d.newValueNow;if(c.tip!=""){c.style.display="none";window.dhx4.zim.clear(c._zi)}f.callEvent("onValueChange",[a.obj.idd.replace(f.idPrefix,""),d.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",d._doOnMouseMoveStart,false);document.addEventListener("touchend",d._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",d._doOnMouseMoveStart,false);window.addEventListener("mouseup",d._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",d._doOnMouseMoveStart);document.body.attachEvent("onmouseup",d._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(j,k){j=Number(j);if(j<this.pen.valueMin){j=this.pen.valueMin}if(j>this.pen.valueMax){j=this.pen.valueMax}this.pen.valueNow=j;this.pen._definePos();if(k==true){f.callEvent("onValueChange",[this.obj.idd.replace(f.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(k,j){k=Number(k);if(k>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=j;this.obj.childNodes[0].style.display=(j.length>0?"":"none");this.pen.valueMin=k;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(k,j){k=Number(k);if(k<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=j;this.obj.childNodes[4].style.display=(j.length>0?"":"none");this.pen.valueMax=k;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var j=this.obj.childNodes[0].innerHTML;var k=this.pen.valueMin;return new Array(k,j)};this.getMaxValue=function(){var j=this.obj.childNodes[4].innerHTML;var k=this.pen.valueMax;return new Array(k,j)};this.setItemToolTipTemplate=function(j){this.label.tip=j};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(this.conf.isIPad){document.removeEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype._initObj=function(c){for(var a=0;a<c.length;a++){this._addItemToStorage(c[a])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(n){var l=[];var v=n.getElementsByTagName("toolbar");if(v!=null&&v[0]!=null){v=v[0];var A=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var d=["id","type","enabled","disabled","action","selected","img","text"];for(var c=0;c<v.childNodes.length;c++){if(v.childNodes[c].tagName=="item"){var j={};for(var x=0;x<A.length;x++){var f=v.childNodes[c].getAttribute(A[x]);if(f!=null){j[A[x]]=f}}for(var s=0;s<v.childNodes[c].childNodes.length;s++){if(v.childNodes[c].childNodes[s].tagName=="item"&&j.type=="buttonSelect"){var y={};for(var x=0;x<d.length;x++){var f=v.childNodes[c].childNodes[s].getAttribute(d[x]);if(f!=null){y[d[x]]=f}}var o=v.childNodes[c].childNodes[s].getElementsByTagName("itemText");if(o!=null&&o[0]!=null){y.itemText=o[0].firstChild.nodeValue}var m=v.childNodes[c].childNodes[s].getElementsByTagName("userdata");for(var x=0;x<m.length;x++){if(!y.userdata){y.userdata={}}var a={};try{a.name=m[x].getAttribute("name")}catch(g){a.name=null}try{a.value=m[x].firstChild.nodeValue}catch(g){a.value=""}if(a.name!=null){y.userdata[a.name]=a.value}}if(j.options==null){j.options=[]}j.options.push(y)}if(v.childNodes[c].childNodes[s].tagName=="userdata"){if(j.userdata==null){j.userdata={}}var y={};try{y.name=v.childNodes[c].childNodes[s].getAttribute("name")}catch(g){y.name=null}try{y.value=v.childNodes[c].childNodes[s].firstChild.nodeValue}catch(g){y.value=""}if(y.name!=null){j.userdata[y.name]=y.value}}}l.push(j)}}}return l};dhtmlXToolbarObject.prototype._addItemToStorage=function(h,l){var j=(h.id||this._genStr(24));var f=(h.type||"");if(f!=""&&this["_"+f+"Object"]!=null){if(f=="buttonSelect"){if(h.options!=null){for(var g=0;g<h.options.length;g++){if(h.options[g].type=="obj"){h.options[g].type="button"}if(h.options[g].type=="sep"){h.options[g].type="separator"}}}}if(f=="slider"){var d={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var c in d){if(h[d[c]]==null&&h[c]!=null){h[d[c]]=h[c]}}}if(f=="buttonInput"){if(h.value==null&&h.text!=null){h.value=h.text}}if(f=="buttonTwoState"){if(typeof(h.selected)=="undefined"&&typeof(h.pressed)!="undefined"&&window.dhx4.s2b(h.pressed)){h.selected=true}}if(typeof(h.enabled)=="undefined"&&typeof(h.disabled)!="undefined"&&window.dhx4.s2b(h.disabled)){h.enabled=false}if(h.imgDis==null&&h.img_disabled!=null){h.imgdis=h.img_disabled}if((typeof(h.openAll)=="undefined"||h.openAll==null)&&this.conf.skin=="dhx_terrace"){h.openAll=true}this.objPull[this.idPrefix+j]=new this["_"+f+"Object"](this,j,h);this.objPull[this.idPrefix+j]["type"]=f;this.setPosition(j,l)}if(h.userdata!=null){for(var c in h.userdata){this.setUserData(j,c,h.userdata[c])}}if(h.options!=null){for(var g=0;g<h.options.length;g++){if(h.options[g].userdata!=null){for(var c in h.options[g].userdata){this.setListOptionUserData(h.id,h.options[g].id,c,h.options[g].userdata[c])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(g,d){if(d===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=g;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}for(var c in this.objPull){var f=this.objPull[c];if(f.type=="slider"){f.pen._detectLimits();f.pen._definePos();f.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(f.type=="buttonSelect"){f.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}}if(g=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align=(a=="right"?"right":"left");this.base.className=(a=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(a=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(d,a,c){d=this.idPrefix+d;if(this.objPull[d]!=null){if(this.objPull[d].userData==null){this.objPull[d].userData={}}this.objPull[d].userData[a]=c}};dhtmlXToolbarObject.prototype.getUserData=function(c,a){c=this.idPrefix+c;if(this.objPull[c]!=null&&this.objPull[c].userData!=null){return this.objPull[c].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,d){if(this.objPull[this.idPrefix+a]==null){return false}var c=this.objPull[this.idPrefix+a];if(c.type!="buttonSelect"){return false}if(c._listOptions[d]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,g,c,f){if(!this._isListOptionExists(a,g)){return}var d=this.objPull[this.idPrefix+a]._listOptions[g];if(d.userData==null){d.userData={}}d.userData[c]=f};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,f,c){if(!this._isListOptionExists(a,f)){return null}var d=this.objPull[this.idPrefix+a]._listOptions[f];if(!d.userData){return null}return(d.userData[c]?d.userData[c]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var d=[];var f={separator:true,text:true};var h=[this.base];if(this._spacer!=null){h.push(this._spacer)}for(var k=0;k<h.length;k++){d[k]=[];for(var c=0;c<h[k].childNodes.length;c++){if(h[k].childNodes[c].idd!=null&&h[k].childNodes[c].style.display!="none"){var j=this.idPrefix+h[k].childNodes[c].idd;if(this.objPull[j]!=null&&this.objPull[j].obj==h[k].childNodes[c]){d[k].push({a:j,type:this.objPull[j].type,node:this.objPull[j][this.objPull[j].type=="buttonSelect"?"arw":"obj"]})}}}h[k]=null}for(var k=0;k<d.length;k++){for(var c=0;c<d[k].length;c++){var l=d[k][c];var m=false;var g=false;if(!f[l.type]){if(c==d[k].length-1||(d[k][c+1]!=null&&f[d[k][c+1].type])){m=true}if(c==0||(c-1>=0&&d[k][c-1]!=null&&f[d[k][c-1].type])){g=true}}l.node.style.borderRightWidth=(m?"1px":"0px");l.node.style.borderTopRightRadius=l.node.style.borderBottomRightRadius=(m?this.conf.terrace_radius:"0px");if(l.type=="buttonSelect"){l.node.previousSibling.style.borderTopLeftRadius=l.node.previousSibling.style.borderBottomLeftRadius=(g?this.conf.terrace_radius:"0px");l.node.previousSibling._br=m;l.node.previousSibling._bl=g}else{l.node.style.borderTopLeftRadius=l.node.style.borderBottomLeftRadius=(g?this.conf.terrace_radius:"0px")}l.node._br=m;l.node._bl=g}}for(var k=0;k<d.length;k++){for(var c=0;c<d[k].length;c++){for(var j in d[k][c]){d[k][c][j]=null}d[k][c]=null}d[k]=null}d=h=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(d,c){var a=this.objPull[d];if(c==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.conf.terrace_radius:"0px");a.arw.style.borderBottomRightRadius=(a.obj._br?this.conf.terrace_radius:"0px")}else{a.obj.style.borderBottomLeftRadius="0px";a.arw.style.borderBottomRightRadius="0px"}a=null};function dhtmlXEditor(d,f){var c=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click"]};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(d)=="object"&&d!=null&&d.tagName==null){f=d.skin;if(d.content!=null){this.conf.content=d.content}if(d.contentHTML!=null){this.conf.contentHTML=d.contentHTML}if(d.iconsPath!=null){this.conf.iconsPath=d.iconsPath}if(d.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(d.toolbar)}if(d.onFocusChanged!=null){this._doOnFocusChanged=d.onFocusChanged}if(d.onAccess!=null){this._doOnAccess=d.onAccess}d=d.parent}this.conf.skin=(f||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue");if(typeof(d)=="string"){d=document.getElementById(d)}this.base=d;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var g=(window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position"));if(!(g=="relative"||g=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.setSizes();this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}var a=this.editor;if(typeof(window.addEventListener)!="undefined"){a.onload=function(){for(var h=0;h<c.conf.evs.length;h++){a.contentWindow.addEventListener(c.conf.evs[h],c._ev,false)}}}else{a.onreadystatechange=function(h){if(typeof(a.readyState)!="undefined"&&a.readyState=="complete"){try{for(var j=0;j<c.conf.evs.length;j++){a.contentWindow.document.body.attachEvent("on"+c.conf.evs[j],c._ev)}}catch(k){}}}}this._ev=function(j){j=j||event;var h=j.type;c.callEvent("onAccess",[h,j]);if(typeof(c._doOnAccess)=="function"){c._doOnAccess(h,j)}else{if(typeof(c._doOnAccess)=="string"&&typeof(window[c._doOnAccess])=="function"){window[c._doOnAccess](h,j)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(k,m){var j="";if(k===true&&this.getContent!=null){j=this.getContent()}var h=this.editor.contentWindow.document;h.open("text/html","replace");if(window.dhx4.isOpera){h.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(m!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){h.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(m!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){h.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none;} </style></head><body "+(m!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{h.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(m!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}h.close();if(window.dhx4.isIE){h.contentEditable=(m!==true)}else{h.designMode=(m!==true?"On":"Off")}if(window.dhx4.isFF){try{h.execCommand("useCSS",false,true)}catch(l){}}if(k===true&&this.setContent!=null){this.setContent(j)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(c.conf.resizeTM);c.conf.resizeTM=window.setTimeout(function(){if(c.setSizes){c.setSizes()}},c.conf.resizeTMTime)};this._runCommand=function(k,m){if(this.conf.roMode===true){return}if(arguments.length<2){m=null}if(window.dhx4.isIE){this.edWin.focus()}try{var j=this.editor.contentWindow.document;j.execCommand(k,false,m)}catch(l){}if(window.dhx4.isIE){this.edWin.focus();var h=this;window.setTimeout(function(){h.edWin.focus();h=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat")};this._doOnClick=function(k){var j=k||window.event;var h=j.target||j.srcElement;c._showInfo(h)};this._doOnMouseDown=function(k){var j=k||window.event;var h=j.target||j.srcElement;c._showInfo(h)};this._doOnKeyUp=function(l){var k=l||window.event;var h=k.keyCode;var j=k.target||k.srcElement;if({37:1,38:1,39:1,40:1,13:1}[h]==1){c._showInfo(j)}};this._getParentByTag=function(h,k){k=k.toLowerCase();var j=h;do{if(k==""||j.nodeName.toLowerCase()==k){return j}}while(j=j.parentNode);return h};this._isStyleProperty=function(j,l,h,k){l=l.toLowerCase();var m=j;do{if((m.nodeName.toLowerCase()==l)&&(m.style[h]==k)){return true}}while(m=m.parentNode);return false};this._setStyleProperty=function(h,k){this.style[k]=false;var j=this._getParentByTag(h,k);if(j&&(j.tagName.toLowerCase()==k)){this.style[k]=true}if(k=="del"&&this._getParentByTag(h,"strike")&&this._getParentByTag(h,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(j){var j=(this._getSelectionBounds().end)?this._getSelectionBounds().end:j;if(!j||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var h=this.edWin.getComputedStyle(j,null);var k=((h.getPropertyValue("font-weight")==401)?700:h.getPropertyValue("font-weight"));this.style={fontStyle:h.getPropertyValue("font-style"),fontSize:h.getPropertyValue("font-size"),textDecoration:h.getPropertyValue("text-decoration"),fontWeight:k,fontFamily:h.getPropertyValue("font-family"),textAlign:h.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=h.getPropertyValue("font-style");this.style.vAlign=h.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(j,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(j,"span","textDecoration","underline")}}else{var h=j.currentStyle;this.style={fontStyle:h.fontStyle,fontSize:h.fontSize,textDecoration:h.textDecoration,fontWeight:h.fontWeight,fontFamily:h.fontFamily,textAlign:h.textAlign}}this._setStyleProperty(j,"h1");this._setStyleProperty(j,"h2");this._setStyleProperty(j,"h3");this._setStyleProperty(j,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(j,"del");this._setStyleProperty(j,"sub");this._setStyleProperty(j,"sup");this._setStyleProperty(j,"u")}this.callEvent("onFocusChanged",[this.style,h])}catch(l){return null}};this._getSelectionBounds=function(){var m,k,o,j;if(this.edWin.getSelection){var n=this.edWin.getSelection();m=n.getRangeAt(n.rangeCount-1);o=m.startContainer;j=m.endContainer;k=m.commonAncestorContainer;if(o.nodeName=="#text"){k=k.parentNode}if(o.nodeName=="#text"){o=o.parentNode}if(o.nodeName.toLowerCase()=="body"){o=o.firstChild}if(j.nodeName=="#text"){j=j.parentNode}if(j.nodeName.toLowerCase()=="body"){j=j.lastChild}if(o==j){k=o}return{root:k,start:o,end:j}}else{if(this.edWin.document.selection){m=this.edDoc.selection.createRange();if(!m.duplicate){return null}k=m.parentElement();var l=m.duplicate();var h=m.duplicate();l.collapse(true);h.moveToElementText(l.parentElement());h.setEndPoint("EndToStart",l);o=l.parentElement();l=m.duplicate();h=m.duplicate();h.collapse(false);l.moveToElementText(h.parentElement());l.setEndPoint("StartToEnd",h);j=h.parentElement();if(o.nodeName.toLowerCase()=="body"){o=o.firstChild}if(j.nodeName.toLowerCase()=="body"){j=j.lastChild}if(o==j){k=o}return{root:k,start:o,end:j}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(l){l=l||"";if(this.edDoc.body){var j=false;if(window.dhx4.isFF){var h=navigator.userAgent.match(/Firefox\/(\d*)/);j=(h!=null&&h[1]<28)}if(j){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=l}else{this.editor.contentWindow.document.body.innerHTML="";if(l.length==0){l=" "}this._runCommand("InsertHTML",l)}}else{this.editor.contentWindow.document.body.innerHTML=l}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=l;this._onFirstLoad=function(){c.setContent(c.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){c.edWin.removeEventListener("load",c._onFirstLoad,false)}else{c.edWin.detachEvent("onload",c._onFirstLoad)}c.conf.firstLoadData=null;c.conf.firstLoadEv=false;c._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(h){window.dhx4.ajax.get(h,function(j){if(j.xmlDoc.responseText!=null){c.setContent(j.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(h){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(h)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](h)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var h=0;h<c.conf.evs.length;h++){a.contentWindow.removeEventListener(c.conf.evs[h],c._ev,false)}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var h=0;h<c.conf.evs.length;h++){a.contentWindow.document.body.detachEvent("on"+c.conf.evs[h],c._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;c=a=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath)}this.setIconsPath=function(h){this.conf.iconsPath=h};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight)};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=(a===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(a){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};window.dhtmlXEditorCell=function(d,a){dhtmlXCellObject.apply(this,[d,"_editor"]);var c=this;this.editor=a;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;c=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var j=this;var h=document.createElement("DIV");h.className="dhx_cell_stb";this.cell.insertBefore(h,this.cell.childNodes[this.conf.idx.cont]);h.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var g={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var f in g){var c=document.createElement("A");c.href="javascript:void(0);";c.tabIndex=-1;h.appendChild(c);c.onmousedown=c.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var l=document.createElement("DIV");l.className="dhx_cell_stb_button btn_"+f;l._actv=f.charAt(0);l._cmd=g[f];c.appendChild(l);l.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};l.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}j.editor[this._cmd]();j.editor.callEvent("onToolbarClick",[this._actv])};l=c=null}h=null;this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];a.onselectstart=null;while(a.childNodes.length>0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=j=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXEditor.prototype.attachToolbar=function(c){if(this.tb!=null){return}if(c!=null){this.conf.iconsPath=c}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var h=0;h<this._availFonts.length;h++){var f=String(this._availFonts[h]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+f+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(f).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var d in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+d+":"+this._availSizes[d]+'" text="'+this._availSizes[d]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(k){if(!k.h1&&!k.h2&&!k.h3&&!k.h4){var a=(String(k.fontWeight).search(/bold/i)!=-1)||(Number(k.fontWeight)>=700);this.tb.setItemState("applyBold",a)}else{this.tb.setItemState("applyBold",false)}var j="alignLeft";if(String(k.textAlign).search(/center/)!=-1){j="alignCenter"}if(String(k.textAlign).search(/right/)!=-1){j="alignRight"}if(String(k.textAlign).search(/justify/)!=-1){j="alignJustify"}this.tb.setItemState(j,true);this._checkAlign(j);this.tb.setItemState("applyH1",k.h1);this.tb.setItemState("applyH2",k.h2);this.tb.setItemState("applyH3",k.h3);this.tb.setItemState("applyH4",k.h4);if(window._KHTMLrv){k.sub=(k.vAlign=="sub");k.sup=(k.vAlign=="super")}this.tb.setItemState("applyItalic",(k.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",k.del);this.tb.setItemState("applySub",k.sub);this.tb.setItemState("applySuper",k.sup);this.tb.setItemState("applyUnderscore",k.u)};this._doOnToolbarClick=function(j){var a=String(j).split(":");if(this[a[0]]!=null){if(typeof(this[a[0]])=="function"){this[a[0]](a[1]);this.callEvent("onToolbarClick",[j])}}};this._doOnStateChange=function(j,a){this[j]();switch(j){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(j);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(j);break}this.callEvent("onToolbarClick",[j])};this._doOnBeforeStateChange=function(j,a){if((j=="alignLeft"||j=="alignCenter"||j=="alignRight"||j=="alignJustify")&&a==true){return false}return true};var g=this;this.tb.attachEvent("onClick",function(a){g._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(j,a){g._doOnStateChange(j,a)});this.tb.attachEvent("onBeforeStateChange",function(j,a){return g._doOnBeforeStateChange(j,a)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false)}};function xmlPointer(a){this.d=a}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var a=new XMLSerializer();return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?(this.d.firstChild.wholeText||this.d.firstChild.data):""},each:function(g,k,j,h){var d=this.d.childNodes;var l=new xmlPointer();if(d.length){for(h=h||0;h<d.length;h++){if(d[h].tagName==g){l.d=d[h];if(k.apply(j,[l,h])==-1){return}}}}},get_all:function(){var d={};var c=this.d.attributes;for(var f=0;f<c.length;f++){d[c[f].name]=c[f].value}return d},sub:function(f){var d=this.d.childNodes;var h=new xmlPointer();if(d.length){for(var g=0;g<d.length;g++){if(d[g].tagName==f){h.d=d[g];return h}}}},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,c){this.d.setAttribute(a,c)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(d){var c=this.d.childNodes;if(c.length){for(var f=0;f<c.length;f++){if(c[f].tagName==d){return true}}}return false},through:function(d,k,n,h,o){var l=this.d.childNodes;if(l.length){for(var g=0;g<l.length;g++){if(l[g].tagName==d&&l[g].getAttribute(k)!=null&&l[g].getAttribute(k)!=""&&(!n||l[g].getAttribute(k)==n)){var j=new xmlPointer(l[g]);h.apply(o,[j,g])}var m=this.d;this.d=l[g];this.through(d,k,n,h,o);this.d=m}}}};function dhtmlXTreeObject(h,f,c,a){if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(g){}}if(typeof(h)!="object"){this.parentObject=document.getElementById(h)}else{this.parentObject=h}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=f;this.height=c;this.rootId=a;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="24px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden"}var d=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(j){return d._doContClick(j||window.event,true)}}this.allTree.onmousedown=function(j){return d._doContClick(j||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(_isIE){this.preventIECashing(true)}this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="&nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);if(window.addEventListener){window.addEventListener("unload",function(){try{d.destructor()}catch(j){}},false)}if(window.attachEvent){window.attachEvent("onunload",function(){try{d.destructor()}catch(j){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};dhtmlXTreeObject.prototype._doContClick=function(j,a){if(!a&&j.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu._contextEnd()}}return true}var c=(_isIE?j.srcElement:j.target);while((c)&&(c.tagName!="BODY")){if(c.parentObject){break}c=c.parentNode}if((!c)||(!c.parentObject)){return true}var g=c.parentObject;if(!this.callEvent("onRightClick",[g.id,j])){(j.srcElement||j.target).oncontextmenu=function(m){(m||event).cancelBubble=true;return false}}this._acMenu=(g.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[g.id]))){return true}if(!_isMacOS){(j.srcElement||j.target).oncontextmenu=function(m){(m||event).cancelBubble=true;return false}}if(this._acMenu.showContextMenu){var f=window.document.documentElement;var d=window.document.body;var k=new Array((f.scrollLeft||d.scrollLeft),(f.scrollTop||d.scrollTop));if(_isIE){var l=j.clientX+k[0];var h=j.clientY+k[1]}else{var l=j.pageX;var h=j.pageY}this._acMenu.showContextMenu(l-1,h-1);this.contextID=g.id;j.cancelBubble=true;this._acMenu._skip_hide=true}else{c.contextMenuId=g.id;c.contextMenu=this._acMenu;c.a=this._acMenu._contextStart;c.a(c,j);c.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){if(!a){this._getImg=function(c){return document.createElement((c==this.rootId)?"div":"img")};this._setSrc=function(d,c){d.src=c};this._getSrc=function(c){return c.src}}else{this._getImg=function(){var c=document.createElement("DIV");c.innerHTML="&nbsp;";c.className="dhx_bg_img_fix";return c};this._setSrc=function(d,c){d.style.backgroundImage="url("+c+")"};this._getSrc=function(c){var d=c.style.backgroundImage;return d.substr(4,d.length-5).replace(/(^")|("$)/g,"")}}};dhtmlXTreeObject.prototype.destructor=function(){for(var c in this._idpull){var d=this._idpull[c];if(!d){continue}d.parentObject=null;d.treeNod=null;d.childNodes=null;d.span=null;d.tr.nodem=null;d.tr=null;d.htmlNode.objBelong=null;d.htmlNode=null;this._idpull[c]=null}this.parentObject.innerHTML="";if(this.XMLLoader){this.XMLLoader.destructor()}this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var c in this){this[c]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a()};function dhtmlXTreeItemObject(h,c,d,a,f,g){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=a;this.label=c;this.parentObject=d;this.actionHandler=f;this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]);this.id=a._globalIdStorageAdd(h,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,g)}else{this.htmlNode=this.treeNod._createItem(0,this,g)}this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(c,a){if(this._globalIdStorageFind(c,1,1)){c=c+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(c,a)}this._idpull[c]=a;this._pullSize++;return c};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){if(this._idpull[a]){this._unselectItem(this._idpull[a]);this._idpull[a]=null;this._pullSize--}if((this._locker)&&(this._locker[a])){this._locker[a]=false}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(h,a,d,f){var g=this._idpull[h];if(g){if((g.unParsed)&&(!d)){this.reParse(g,0)}if(this._srnd&&!g.htmlNode){this._buildSRND(g,d)}if((f)&&(this._edsbpsA)){for(var c=0;c<this._edsbpsA.length;c++){if(this._edsbpsA[c][2]==h){dhtmlxError.throwError("getItem","Requested item still in parsing process.",h);return null}}}return g}if((this.slowParse)&&(h!=0)&&(!a)){return this.preParse(h)}else{return null}};dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var c=[];a.each("item",function(d){c.push(d.get("id"))},this);return c.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.findXML=function(c,a,d){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(c,a,f){var d=[];if(f==2){c.through("item","checked",-1,function(g){d.push(g.get("id"))},this)}if(f==1){c.through("item","id",null,function(g){if(g.get("checked")&&(g.get("checked")!=-1)){d.push(g.get("id"))}},this)}if(f==0){c.through("item","id",null,function(g){if(!g.get("checked")||g.get("checked")==0){d.push(g.get("id"))}},this)}if(d.length){return a+(a?this.dlmtr:"")+d.join(this.dlmtr)}if(a){return a}else{return""}};dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,c){var d=a?"1":"";c.through("item","id",null,function(f){if(!f.get("disabled")||f.get("disabled")==0){f.set("checked",d)}},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(d,a){var f=[];var c=function(g){if(!g.sub_exists("item")){f.push(g.get("id"))}else{g.each("item",c,this)}};c(d);return f.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(d,a){var f=[];var c=function(g){if(!g.sub_exists("item")){return}f.push(g.get("id"));g.each("item",c,this)};c(d);return f.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(d,c,a){var c=[];a.through("item","id",null,function(f){c.push(f.get("id"))},this);return c.join(",")};dhtmlXTreeObject.prototype.reParse=function(d){var h=this;if(!this.parsCount){h.callEvent("onXLS",[h,d.id])}this.xmlstate=1;var f=d.unParsed;d.unParsed=0;this.XMLloadingWarning=1;var a=this.parsingOn;var j=this.waitUpdateXML;var k=this.parsedArray;this.parsedArray=new Array();this.waitUpdateXML=false;this.parsingOn=d.id;this.parsedArray=new Array();this.setCheckList="";this._parse(f,d.id,2);var l=this.setCheckList.split(this.dlmtr);for(var g=0;g<this.parsedArray.length;g++){d.htmlNode.childNodes[0].appendChild(this.parsedArray[g])}if(f.get("order")&&f.get("order")!="none"){this._reorderBranch(d,f.get("order"),true)}this.oldsmcheck=this.smcheck;this.smcheck=false;for(var c=0;c<l.length;c++){if(l[c]){this.setCheck(l[c],1)}}this.smcheck=this.oldsmcheck;this.parsingOn=a;this.waitUpdateXML=j;this.parsedArray=k;this.XMLloadingWarning=0;this._redrawFrom(this,d);if(this._srnd&&!d._sready){this.prepareSR(d.id)}this.xmlstate=0;return true};dhtmlXTreeObject.prototype.preParse=function(c){if(!c||!this._p){return null}var a=false;this._p.clone().through("item","id",c,function(f){this._globalIdStorageFind(f.up().get("id"));return a=true},this);if(a){var d=this._globalIdStorageFind(c,true,false);if(!d){dhtmlxError.throwError("getItem","The item "+c+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",c)}}return d};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;break;case"utf8":return encodeURIComponent(a);break;default:return escape(a);break}};dhtmlXTreeObject.prototype._drawNewTr=function(g,d){var f=document.createElement("tr");var c=document.createElement("td");var a=document.createElement("td");c.appendChild(document.createTextNode(" "));a.colSpan=3;a.appendChild(g);f.appendChild(c);f.appendChild(a);return f};dhtmlXTreeObject.prototype.loadXMLString=function(d,c){var a=this;if(!this.parsCount){this.callEvent("onXLS",[a,null])}this.xmlstate=1;if(c){this.XMLLoader.waitCall=c}this.XMLLoader.loadXMLString(d)};dhtmlXTreeObject.prototype.loadXML=function(a,d){if(this._datamode&&this._datamode!="xml"){return this["load"+this._datamode.toUpperCase()](a,d)}var c=this;if(!this.parsCount){this.callEvent("onXLS",[c,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype._attachChildNode=function(j,h,f,k,y,x,w,l,d,q,r){if(q&&q.parentObject){j=q.parentObject}if(((j.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){j.XMLload=1;this._loadDynXML(j.id)}var m=j.childsCount;var A=j.childNodes;if(r&&r.tr.previousSibling){if(r.tr.previousSibling.previousSibling){q=r.tr.previousSibling.nodem}else{l=l.replace("TOP","")+",TOP"}}if(q){var g,v;for(g=0;g<m;g++){if(A[g]==q){for(v=m;v!=g;v--){A[1+v]=A[v]}break}}g++;m=g}if(l){var s=l.split(",");for(var u=0;u<s.length;u++){switch(s[u]){case"TOP":if(j.childsCount>0){q=new Object;q.tr=j.childNodes[0].tr.previousSibling}j._has_top=true;for(g=m;g>0;g--){A[g]=A[g-1]}m=0;break}}}var o;if(!(o=this._idpull[h])||o.span!=-1){o=A[m]=new dhtmlXTreeItemObject(h,f,j,this,k,1);h=A[m].id;j.childsCount++}if(!o.htmlNode){o.label=f;o.htmlNode=this._createItem((this.checkBoxOff?1:0),o);o.htmlNode.objBelong=o}if(y){o.images[0]=y}if(x){o.images[1]=x}if(w){o.images[2]=w}var c=this._drawNewTr(o.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){o.htmlNode.parentNode.parentNode.style.display="none"}if((q)&&q.tr&&(q.tr.nextSibling)){j.htmlNode.childNodes[0].insertBefore(c,q.tr.nextSibling)}else{if(this.parsingOn==j.id){this.parsedArray[this.parsedArray.length]=c}else{j.htmlNode.childNodes[0].appendChild(c)}}if((q)&&(!q.span)){q=null}if(this.XMLsource){if((d)&&(d!=0)){o.XMLload=0}else{o.XMLload=1}}o.tr=c;c.nodem=o;if(j.itemId==0){c.childNodes[0].className="hiddenRow"}if((j._r_logic)||(this._frbtr)){this._setSrc(o.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(l){var s=l.split(",");for(var u=0;u<s.length;u++){switch(s[u]){case"SELECT":this.selectItem(h,false);break;case"CALL":this.selectItem(h,true);break;case"CHILD":o.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+h}else{this.setCheck(h,1)}break;case"HCHECKED":this._setCheck(o,"unsure");break;case"OPEN":o.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(j)<0)&&(!this._hAdI)){this.openItem(j.id)}if(q){this._correctPlus(q);this._correctLine(q)}this._correctPlus(j);this._correctLine(j);this._correctPlus(o);if(j.childsCount>=2){this._correctPlus(A[j.childsCount-2]);this._correctLine(A[j.childsCount-2])}if(j.childsCount!=2){this._correctPlus(A[0])}if(this.tscheck){this._correctCheckStates(j)}if(this._onradh){if(this.xmlstate==1){var a=this.onXLE;this.onXLE=function(n){this._onradh(h);if(a){a(n)}}}else{this._onradh(h)}}}return o};dhtmlXTreeObject.prototype.enableContextMenu=function(a){if(a){this.cMenu=a}};dhtmlXTreeObject.prototype.setItemContextMenu=function(g,f){var a=g.toString().split(this.dlmtr);for(var d=0;d<a.length;d++){var c=this._globalIdStorageFind(a[d]);if(!c){continue}c.cMenu=f}};dhtmlXTreeObject.prototype.insertNewItem=function(f,k,m,d,j,h,g,c,a){var n=this._globalIdStorageFind(f);if(!n){return(-1)}var l=this._attachChildNode(n,k,m,d,j,h,g,c,a);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(n)}return l};dhtmlXTreeObject.prototype.insertNewChild=function(f,k,l,d,j,h,g,c,a){return this.insertNewItem(f,k,l,d,j,h,g,c,a)};dhtmlXTreeObject.prototype._parseXMLTree=function(g,f,l,k,h){var j=new xmlPointer(h.getXMLTopNode("tree"));g._parse(j);g._p=j};dhtmlXTreeObject.prototype._parseItem=function(h,m,g,k){var d;if(this._srnd&&(!this._idpull[d=h.get("id")]||!this._idpull[d].span)){this._addItemSRND(m.id,d,h);return}var j=h.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[j.id])){this._parse(h,j.id,1);return}if((j.text===null)||(typeof(j.text)=="undefined")){j.text=h.sub("itemtext");if(j.text){j.text=j.text.content()}}var o=[];if(j.select){o.push("SELECT")}if(j.top){o.push("TOP")}if(j.call){this.nodeAskingCall=j.id}if(j.checked==-1){o.push("HCHECKED")}else{if(j.checked){o.push("CHECKED")}}if(j.open){o.push("OPEN")}if(this.waitUpdateXML){if(this._globalIdStorageFind(j.id)){var l=this.updateItem(j.id,j.text,j.im0,j.im1,j.im2,j.checked,j.child)}else{if(this.npl==0){o.push("TOP")}else{g=m.childNodes[this.npl]}var l=this._attachChildNode(m,j.id,j.text,0,j.im0,j.im1,j.im2,o.join(","),j.child,0,g);j.id=l.id;g=null}}else{var l=this._attachChildNode(m,j.id,j.text,0,j.im0,j.im1,j.im2,o.join(","),j.child,(k||0),g)}if(j.tooltip){l.span.parentNode.parentNode.title=j.tooltip}if(j.style){if(l.span.style.cssText){l.span.style.cssText+=(";"+j.style)}else{l.span.setAttribute("style",l.span.getAttribute("style")+"; "+j.style)}}if(j.radio){l._r_logic=true}if(j.nocheckbox){var n=l.span.parentNode.previousSibling.previousSibling;n.style.display="none";l.nocheckbox=true}if(j.disabled){if(j.checked!=null){this._setCheck(l,j.checked)}this.disableCheckbox(l,1)}l._acc=j.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,h,j,(m?m.id:0))}this.setItemColor(l,j.aCol,j.sCol);if(j.locked=="1"){this.lockItem(l.id,true,true)}if((j.imwidth)||(j.imheight)){this.setIconSize(j.imwidth,j.imheight,l)}if((j.closeable=="0")||(j.closeable=="1")){this.setItemCloseable(l,j.closeable)}var f="";if(j.topoffset){this.setItemTopOffset(l,j.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(h.sub_exists("item")){f=this._parse(h,j.id,1)}}else{if((!l.childsCount)&&h.sub_exists("item")){l.unParsed=h.clone()}h.each("userdata",function(a){this.setUserData(j.id,a.get("name"),a.content())},this)}if(f!=""){this.nodeAskingCall=f}h.each("userdata",function(a){this.setUserData(h.get("id"),a.get("name"),a.content())},this)};dhtmlXTreeObject.prototype._parse=function(d,h,a,c){if(this._srnd&&!this.parentObject.offsetHeight){var r=this;return window.setTimeout(function(){r._parse(d,h,a,c)},100)}if(!d.exists()){return}this.skipLock=true;if(!h){h=d.get("id");var o=d.get("dhx_security");if(o){dhtmlx.security_key=o}if(d.get("radio")){this.htmlNode._r_logic=true}this.parsingOn=h;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall=""}var q=this._globalIdStorageFind(h);if(!q){return dhtmlxError.throwError("DataStructure","XML refers to not existing parent")}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((q.childsCount)&&(!c)&&(!this._edsbps)&&(!q._has_top)){var j=0}else{var j=0}this.npl=0;d.each("item",function(s,n){q.XMLload=1;this._parseItem(s,q,0,j);if((this._edsbps)&&(this.npl==this._edsbpsC)){this._distributedStart(d,n+1,h,a,q.childsCount);return -1}this.npl++},this,c);if(!a){d.each("userdata",function(n){this.setUserData(d.get("id"),n.get("name"),n.content())},this);q.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var g=q.childsCount-1;g>=0;g--){if(q.childNodes[g]._dmark){this.deleteItem(q.childNodes[g].id)}}}var l=this._globalIdStorageFind(this.parsingOn);for(var g=0;g<this.parsedArray.length;g++){q.htmlNode.childNodes[0].appendChild(this.parsedArray[g])}this.parsedArray=[];this.lastLoadedXMLId=h;this.XMLloadingWarning=0;var m=this.setCheckList.split(this.dlmtr);for(var f=0;f<m.length;f++){if(m[f]){this.setCheck(m[f],1)}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(q.id!=this.rootId)){if(q.checkstate===0){this._setSubChecked(0,q)}else{if(q.checkstate===1){this._setSubChecked(1,q)}}}this._redrawFrom(this,null,c);if(d.get("order")&&d.get("order")!="none"){this._reorderBranch(q,d.get("order"),true)}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()])}if(this._branchUpdate){this._branchUpdateNext(d)}}if(this.parsCount==1){this.parsingOn=null;if(this._srnd&&q.id!=this.rootId){this.prepareSR(q.id);if(this.XMLsource){this.openItem(q.id)}}d.through("item","open",null,function(n){this.openItem(n.get("id"))},this);if((!this._edsbps)||(!this._edsbpsA.length)){var k=this;window.setTimeout(function(){k.callEvent("onXLE",[k,h])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;var k=this;if(this._edsbps){window.setTimeout(function(){k._distributedStep(h)},this._edsbpsD)}if(!a&&this.onXLE){this.onXLE(this,h)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(f){var d=f.get("id");if(this._idpull[d]&&(!this._idpull[d].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(f.get("id"),f)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(c,d){if((c.nodeType==1)&&(c.tagName=="userdata")){var a=c.getAttribute("name");if((a)&&(c.childNodes[0])){this.setUserData(d,a,c.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(k,c,j,d){if(!c){var g=k._globalIdStorageFind(k.lastLoadedXMLId);k.lastLoadedXMLId=-1;if(!g){return 0}}else{g=c}var h=0;for(var f=(j?j-1:0);f<g.childsCount;f++){if((!this._branchUpdate)||(this._getOpenState(g)==1)){if((!c)||(d==1)){g.childNodes[f].htmlNode.parentNode.parentNode.style.display=""}}if(g.childNodes[f].openMe==1){this._openItem(g.childNodes[f]);g.childNodes[f].openMe=0}k._redrawFrom(k,g.childNodes[f]);if(this.childCalc!=null){if((g.childNodes[f].unParsed)||((!g.childNodes[f].XMLload)&&(this.XMLsource))){if(g.childNodes[f]._acc){g.childNodes[f].span.innerHTML=g.childNodes[f].label+this.htmlcA+g.childNodes[f]._acc+this.htmlcB}else{g.childNodes[f].span.innerHTML=g.childNodes[f].label}}if((g.childNodes[f].childNodes.length)&&(this.childCalc)){if(this.childCalc==1){g.childNodes[f].span.innerHTML=g.childNodes[f].label+this.htmlcA+g.childNodes[f].childsCount+this.htmlcB}if(this.childCalc==2){var a=g.childNodes[f].childsCount-(g.childNodes[f].pureChilds||0);if(a){g.childNodes[f].span.innerHTML=g.childNodes[f].label+this.htmlcA+a+this.htmlcB}if(g.pureChilds){g.pureChilds++}else{g.pureChilds=1}}if(this.childCalc==3){g.childNodes[f].span.innerHTML=g.childNodes[f].label+this.htmlcA+g.childNodes[f]._acc+this.htmlcB}if(this.childCalc==4){var a=g.childNodes[f]._acc;if(a){g.childNodes[f].span.innerHTML=g.childNodes[f].label+this.htmlcA+a+this.htmlcB}}}else{if(this.childCalc==4){h++}}h+=g.childNodes[f]._acc;if(this.childCalc==3){h++}}}if((!g.unParsed)&&((g.XMLload)||(!this.XMLsource))){g._acc=h}k._correctLine(g);k._correctPlus(g);if((this.childCalc)&&(!c)){k._fixChildCountLabel(g)}};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(c){if(c.unParsed){return}if(this.rootId!=c.id){if(!c.htmlNode){return}var f=c.htmlNode.childNodes[0].childNodes;var a=f.length;for(var d=1;d<a;d++){f[d].style.display="none"}this._correctPlus(c)}for(var d=0;d<c.childsCount;d++){if(c.childNodes[d].childsCount){this._xcloseAll(c.childNodes[d])}}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var c=0;c<a.childsCount;c++){this._xopenAll(a.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(c){if(!c.htmlNode){return}var d=c.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var g=c.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var a=this.lineArray;if((this.XMLsource)&&(!c.XMLload)){var a=this.plusArray;this._setSrc(g,this.iconURL+c.images[2]);if(this._txtimg){return(d.innerHTML="[+]")}}else{if((c.childsCount)||(c.unParsed)){if((c.htmlNode.childNodes[0].childNodes[1])&&(c.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!c.wsign){var a=this.minusArray}this._setSrc(g,this.iconURL+c.images[1]);if(this._txtimg){return(d.innerHTML="[-]")}}else{if(!c.wsign){var a=this.plusArray}this._setSrc(g,this.iconURL+c.images[2]);if(this._txtimg){return(d.innerHTML="[+]")}}}else{this._setSrc(g,this.iconURL+c.images[0])}}var f=2;if(!c.treeNod.treeLinesOn){this._setSrc(d,this.imPath+a[3])}else{if(c.parentObject){f=this._getCountStatus(c.id,c.parentObject)}this._setSrc(d,this.imPath+a[f])}};dhtmlXTreeObject.prototype._correctLine=function(c){if(!c.htmlNode){return}var a=c.parentObject;if(a){if((this._getLineStatus(c.id,a)==0)||(!this.treeLinesOn)){for(var d=1;d<=c.childsCount;d++){if(!c.htmlNode.childNodes[0].childNodes[d]){break}c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage="";c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat=""}}else{for(var d=1;d<=c.childsCount;d++){if(!c.htmlNode.childNodes[0].childNodes[d]){break}c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat="repeat-y"}}}};dhtmlXTreeObject.prototype._getCountStatus=function(c,a){if(a.childsCount<=1){if(a.id==this.rootId){return 4}else{return 0}}if(a.childNodes[0].id==c){if(a.id==this.rootId){return 2}else{return 1}}if(a.childNodes[a.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(c,a){if(a.childNodes[a.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(c,g){if((this.XMLsource)&&(!c.XMLload)){if(g==1){return}c.XMLload=1;this._loadDynXML(c.id);return}if(c.unParsed){this.reParse(c)}var f=c.htmlNode.childNodes[0].childNodes;var a=f.length;if(a>1){if(((f[1].style.display!="none")||(g==1))&&(g!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none"}else{nodestyle=""}for(var d=1;d<a;d++){f[d].style.display=nodestyle}}this._correctPlus(c)};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode){return 0}var c=a.htmlNode.childNodes[0].childNodes;if(c.length<=1){return 0}if(c[1].style.display!="none"){return 1}else{return -1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a])){return false}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(c,d,a){if(d!=this.rootId){this.callEvent("onOpenEnd",[d,c.getOpenState(d)])}c.onXLE=c._oie_onXLE.pop();if(!a&&!c._oie_onXLE.length){if(c.onXLE){c.onXLE(c,d)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(c){c=c||window.event;var a=this.parentObject.treeNod;a._selectItem(this.parentObject,c)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var c=new Array();for(var a=0;a<this._selected.length;a++){c[a]=this._selected[a].id}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(h,j){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}if((!this._amsel)||(!j)||((!j.ctrlKey)&&(!j.metaKey)&&(!j.shiftKey))){this._unselectItems()}if((h.i_sel)&&(this._amsel)&&(j)&&(j.ctrlKey||j.metaKey)){this._unselectItem(h)}else{if((!h.i_sel)&&((!this._amselS)||(this._selected.length==0)||(this._selected[0].parentObject==h.parentObject))){if((this._amsel)&&(j)&&(j.shiftKey)&&(this._selected.length!=0)&&(this._selected[this._selected.length-1].parentObject==h.parentObject)){var f=this._getIndex(this._selected[this._selected.length-1]);var d=this._getIndex(h);if(d<f){var l=f;f=d;d=l}for(var g=f;g<=d;g++){if(!h.parentObject.childNodes[g].i_sel){this._markItem(h.parentObject.childNodes[g])}}}else{this._markItem(h)}}}if(this.checkEvent("onSelect")){var k=this.getSelectedItemId();if(k!=this._onSSCFold){this.callEvent("onSelect",[k])}}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.scolor){a.span.style.color=a.scolor}a.span.className="selectedTreeRow";a.i_sel=true;this._selected[this._selected.length]=a};dhtmlXTreeObject.prototype.getIndexById=function(c){var a=this._globalIdStorageFind(c);if(!a){return null}return this._getIndex(a)};dhtmlXTreeObject.prototype._getIndex=function(a){var d=a.parentObject;for(var c=0;c<d.childsCount;c++){if(d.childNodes[c]==a){return c}}};dhtmlXTreeObject.prototype._unselectItem=function(c){if((c)&&(c.i_sel)){c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false;for(var a=0;a<this._selected.length;a++){if(!this._selected[a].i_sel){this._selected.splice(a,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var c=this._selected[a];c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(f,d,h){f=f||window.event;var c=this.parentObject;if(d){c=d.parentObject}var a=c.treeNod;var g=a.getSelectedItemId();if((!f)||(!f.skipUnSel)){a._selectItem(c,f)}if(!h){if(c.actionHandler){c.actionHandler(c.id,g)}else{a.callEvent("onClick",[c.id,g])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(g){if(!this.tscheck){return}if(!g){return}if(g.id==this.rootId){return}var d=g.childNodes;var c=0;var a=0;if(g.childsCount==0){return}for(var f=0;f<g.childsCount;f++){if(d[f].dscheck){continue}if(d[f].checkstate==0){c=1}else{if(d[f].checkstate==1){a=1}else{c=1;a=1;break}}}if((c)&&(a)){this._setCheck(g,"unsure")}else{if(c){this._setCheck(g,false)}else{this._setCheck(g,true)}}this._correctCheckStates(g.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(o,n,k){var q=document.createElement("table");q.cellSpacing=0;q.cellPadding=0;q.border=0;if(this.hfMode){q.style.tableLayout="fixed"}q.style.margin=0;q.style.padding=0;var j=document.createElement("tbody");var m=document.createElement("tr");var f=document.createElement("td");f.className="standartTreeImage";if(this._txtimg){var g=document.createElement("div");f.appendChild(g);g.className="dhx_tree_textSign"}else{var g=this._getImg(n.id);g.border="0";if(g.tagName=="IMG"){g.align="absmiddle"}f.appendChild(g);g.style.padding=0;g.style.margin=0;g.style.width=this.def_line_img_x;g.style.height=this.def_line_img_y}var d=document.createElement("td");var l=this._getImg(this.cBROf?this.rootId:n.id);l.checked=0;this._setSrc(l,this.imPath+this.checkArray[0]);l.style.width="18px";l.style.height="18px";if(!o){d.style.display="none"}d.appendChild(l);if((!this.cBROf)&&(l.tagName=="IMG")){l.align="absmiddle"}l.onclick=this.onCheckBoxClick;l.treeNod=this;l.parentObject=n;if(!window._KHTMLrv){d.width="20px"}else{d.width="16px"}var c=document.createElement("td");c.className="standartTreeImage";var h=this._getImg(this.timgen?n.id:this.rootId);h.onmousedown=this._preventNsDrag;h.ondragstart=this._preventNsDrag;h.border="0";if(this._aimgs){h.parentObject=n;if(h.tagName=="IMG"){h.align="absmiddle"}h.onclick=this.onRowSelect}if(!k){this._setSrc(h,this.iconURL+this.imageArray[0])}c.appendChild(h);h.style.padding=0;h.style.margin=0;if(this.timgen){c.style.width=h.style.width=this.def_img_x;h.style.height=this.def_img_y}else{h.style.width="0px";h.style.height="0px";if(_isOpera||window._KHTMLrv){c.style.display="none"}}var a=document.createElement("td");a.className="standartTreeRow";n.span=document.createElement("span");n.span.className="standartTreeRow";if(this.mlitems){n.span.style.width=this.mlitems;n.span.style.display="block"}else{a.noWrap=true}if(_isIE&&_isIE>7){a.style.width="999999px"}else{if(!window._KHTMLrv){a.style.width="100%"}}n.span.innerHTML=n.label;a.appendChild(n.span);a.parentObject=n;f.parentObject=n;a.onclick=this.onRowSelect;f.onclick=this.onRowClick;a.ondblclick=this.onRowClick2;if(this.ettip){m.title=n.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(c,this);c.parentObject=n}this.dragger.addDraggableItem(a,this)}n.span.style.paddingLeft="5px";n.span.style.paddingRight="5px";a.style.verticalAlign="";a.style.fontSize="10pt";a.style.cursor=this.style_pointer;m.appendChild(f);m.appendChild(d);m.appendChild(c);m.appendChild(a);j.appendChild(m);q.appendChild(j);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){m.onmousemove=this._itemMouseIn;m[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut}return q};dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a;this.iconURL=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(f){var d=0;for(var c=0;c<f.childsCount;c++){if(f.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype._getChildCounterValue=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}if((a.unParsed)||((!a.XMLload)&&(this.XMLsource))){return a._acc}switch(this.childCalc){case 1:return a.childsCount;break;case 2:return this._getLeafCount(a);break;case 3:return a._acc;break;case 4:return a._acc;break}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(h,f){if(this.childCalc==null){return}if((h.unParsed)||((!h.XMLload)&&(this.XMLsource))){if(h._acc){h.span.innerHTML=h.label+this.htmlcA+h._acc+this.htmlcB}else{h.span.innerHTML=h.label}return}switch(this.childCalc){case 1:if(h.childsCount!=0){h.span.innerHTML=h.label+this.htmlcA+h.childsCount+this.htmlcB}else{h.span.innerHTML=h.label}break;case 2:var g=this._getLeafCount(h);if(g!=0){h.span.innerHTML=h.label+this.htmlcA+g+this.htmlcB}else{h.span.innerHTML=h.label}break;case 3:if(h.childsCount!=0){var d=0;for(var c=0;c<h.childsCount;c++){if(!h.childNodes[c]._acc){h.childNodes[c]._acc=0}d+=h.childNodes[c]._acc*1}d+=h.childsCount*1;h.span.innerHTML=h.label+this.htmlcA+d+this.htmlcB;h._acc=d}else{h.span.innerHTML=h.label;h._acc=0}if((h.parentObject)&&(h.parentObject!=this.htmlNode)){this._fixChildCountLabel(h.parentObject)}break;case 4:if(h.childsCount!=0){var d=0;for(var c=0;c<h.childsCount;c++){if(!h.childNodes[c]._acc){h.childNodes[c]._acc=1}d+=h.childNodes[c]._acc*1}h.span.innerHTML=h.label+this.htmlcA+d+this.htmlcB;h._acc=d}else{h.span.innerHTML=h.label;h._acc=1}if((h.parentObject)&&(h.parentObject!=this.htmlNode)){this._fixChildCountLabel(h.parentObject)}break}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(c,a){this.htmlcA=c;this.htmlcB=a};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}this._xopenAll(a)};dhtmlXTreeObject.prototype.getOpenState=function(c){var a=this._globalIdStorageFind(c);if(!a){return""}return this._getOpenState(a)};dhtmlXTreeObject.prototype.closeAllItems=function(c){if(c===window.undefined){c=this.rootId}var a=this._globalIdStorageFind(c);if(!a){return 0}this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(f,c,d){var a=this._globalIdStorageFind(f,0,true);if(!a){return}if(c=="hint"){a.htmlNode.childNodes[0].childNodes[0].title=d}if(typeof(a.userData["t_"+c])=="undefined"){if(!a._userdatalist){a._userdatalist=c}else{a._userdatalist+=","+c}}a.userData["t_"+c]=d};dhtmlXTreeObject.prototype.getUserData=function(d,c){var a=this._globalIdStorageFind(d,0,true);if(!a){return}return a.userData["t_"+c]};dhtmlXTreeObject.prototype.getItemColor=function(d){var a=this._globalIdStorageFind(d);if(!a){return 0}var c=new Object();if(a.acolor){c.acolor=a.acolor}if(a.scolor){c.scolor=a.scolor}return c};dhtmlXTreeObject.prototype.setItemColor=function(d,c,f){if((d)&&(d.span)){var a=d}else{var a=this._globalIdStorageFind(d)}if(!a){return 0}else{if(a.i_sel){if(f){a.span.style.color=f}}else{if(c){a.span.style.color=c}}if(f){a.scolor=f}if(c){a.acolor=c}}};dhtmlXTreeObject.prototype.getItemText=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}return(a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(c){var a=this._globalIdStorageFind(c);if((!a)||(!a.parentObject)){return""}return a.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(c,d){if(c==d){return}var a=this._globalIdStorageFind(c);if(!a){return 0}a.id=d;a.span.contextMenuId=d;this._idpull[d]=this._idpull[c];delete this._idpull[c]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c._cimgs=new Array();c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(d){var a=this._globalIdStorageFind(d);if(!a){return 0}for(var c=0;c<this.nodeCut.length;c++){if(this._checkPNodes(a,this.nodeCut[c])){continue}this._moveNode(this.nodeCut[c],a)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(a,c){var h=this.dadmodec;if(h==1){var g=c;if(this.dadmodefix<0){while(true){g=this._getPrevNode(g);if((g==-1)){g=this.htmlNode;break}if((g.tr==0)||(g.tr.style.display=="")||(!g.parentObject)){break}}var f=g;var d=c}else{if((g.tr)&&(g.tr.nextSibling)&&(g.tr.nextSibling.nodem)&&(this._getOpenState(g)<1)){g=g.tr.nextSibling.nodem}else{g=this._getNextNode(g);if((g==-1)){g=this.htmlNode}}var d=g;var f=c}if(this._getNodeLevel(f,0)>this._getNodeLevel(d,0)){if(!this.dropLower){return this._moveNodeTo(a,f.parentObject)}else{if(d.id!=this.rootId){return this._moveNodeTo(a,d.parentObject,d)}else{return this._moveNodeTo(a,this.htmlNode,null)}}}else{return this._moveNodeTo(a,d.parentObject,d)}}else{return this._moveNodeTo(a,c)}};dhtmlXTreeObject.prototype._fixNodesCollection=function(k,h){var c=0;var f=0;var j=k.childNodes;var a=k.childsCount-1;if(h==j[a]){return}for(var g=0;g<a;g++){if(j[g]==j[a]){j[g]=j[g+1];j[g+1]=j[a]}}for(var g=0;g<a+1;g++){if(c){var d=j[g];j[g]=c;c=d}else{if(j[g]==h){c=j[g];j[g]=j[a]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(h,k,g,a){var c;var l="";if(g){for(c=0;c<k.childsCount;c++){if(k.childNodes[c]==g){break}}if(c!=0){g=k.childNodes[c-1]}else{l="TOP";g=""}}var d=this._onradh;this._onradh=null;var j=this._attachChildNode(k,h.id,h.label,0,h.images[0],h.images[1],h.images[2],l,0,g);j._userdatalist=h._userdatalist;j.userData=h.userData.clone();if(h._attrs){j._attrs={};for(var f in h._attrs){j._attrs[f]=h._attrs[f]}}j.XMLload=h.XMLload;if(d){this._onradh=d;this._onradh(j.id)}if(h.treeNod.dpcpy){h.treeNod._globalIdStorageFind(h.id)}else{j.unParsed=h.unParsed}this._correctPlus(j);for(var c=0;c<h.childsCount;c++){this._recreateBranch(h.childNodes[c],j,0,1)}if((!a)&&(this.childCalc)){this._redrawFrom(this,k)}return j};dhtmlXTreeObject.prototype._moveNodeTo=function(o,r,n){if(o.treeNod._nonTrivialNode){return o.treeNod._nonTrivialNode(this,r,n,o)}if(this._checkPNodes(r,o)){return false}if(r.mytype){var j=(o.treeNod.lWin!=r.lWin)}else{var j=(o.treeNod.lWin!=r.treeNod.lWin)}if(!this.callEvent("onDrag",[o.id,r.id,(n?n.id:null),o.treeNod,r.treeNod])){return false}if((r.XMLload==0)&&(this.XMLsource)){r.XMLload=1;this._loadDynXML(r.id)}this.openItem(r.id);var d=o.treeNod;var l=o.parentObject.childsCount;var m=o.parentObject;if((j)||(d.dpcpy)){var f=o.id;o=this._recreateBranch(o,r,n);if(!d.dpcpy){d.deleteItem(f)}}else{var g=r.childsCount;var q=r.childNodes;if(g==0){r._open=true}d._unselectItem(o);q[g]=o;o.treeNod=r.treeNod;r.childsCount++;var k=this._drawNewTr(q[g].htmlNode);if(!n){r.htmlNode.childNodes[0].appendChild(k);if(this.dadmode==1){this._fixNodesCollection(r,n)}}else{r.htmlNode.childNodes[0].insertBefore(k,n.tr);this._fixNodesCollection(r,n);q=r.childNodes}}if((!d.dpcpy)&&(!j)){var a=o.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){a.parentNode.removeChild(a)},250)}else{o.parentObject.htmlNode.childNodes[0].removeChild(o.tr)}if((!n)||(r!=o.parentObject)){for(var h=0;h<m.childsCount;h++){if(m.childNodes[h].id==o.id){m.childNodes[h]=0;break}}}else{m.childNodes[m.childsCount-1]=0}d._compressChildList(m.childsCount,m.childNodes);m.childsCount--}if((!j)&&(!d.dpcpy)){o.tr=k;k.nodem=o;o.parentObject=r;if(d!=r.treeNod){if(o.treeNod._registerBranch(o,d)){return}this._clearStyles(o);this._redrawFrom(this,o.parentObject);if(this._onradh){this._onradh(o.id)}}this._correctPlus(r);this._correctLine(r);this._correctLine(o);this._correctPlus(o);if(n){this._correctPlus(n)}else{if(r.childsCount>=2){this._correctPlus(q[r.childsCount-2]);this._correctLine(q[r.childsCount-2])}}this._correctPlus(q[r.childsCount-1]);if(this.tscheck){this._correctCheckStates(r)}if(d.tscheck){d._correctCheckStates(m)}}if(l>1){d._correctPlus(m.childNodes[l-2]);d._correctLine(m.childNodes[l-2])}d._correctPlus(m);d._correctLine(m);this._fixChildCountLabel(r);d._fixChildCountLabel(m);this.callEvent("onDrop",[o.id,r.id,(n?n.id:null),d,r.treeNod]);return o.id};dhtmlXTreeObject.prototype._clearStyles=function(a){if(!a.htmlNode){return}var f=a.htmlNode.childNodes[0].childNodes[0].childNodes[1];var c=f.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=false;if(a._aimgs){this.dragger.removeDraggableItem(f.nextSibling)}if(this.checkBoxOff){f.childNodes[0].style.display="";f.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(f.childNodes[0],this.imPath+this.checkArray[a.checkstate])}else{f.style.display="none"}f.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(c);if(this.dragAndDropOff){this.dragger.addDraggableItem(c,this)}if(this._aimgs){this.dragger.addDraggableItem(f.nextSibling,this)}c.childNodes[0].className="standartTreeRow";c.onclick=this.onRowSelect;c.ondblclick=this.onRowClick2;f.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var d=0;d<a.childsCount;d++){this._clearStyles(a.childNodes[d])}};dhtmlXTreeObject.prototype._registerBranch=function(c,a){if(a){a._globalIdStorageSub(c.id)}c.id=this._globalIdStorageAdd(c.id,c);c.treeNod=this;for(var d=0;d<c.childsCount;d++){this._registerBranch(c.childNodes[d],a)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=true;this.attachEvent("onMouseIn",a)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=true;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(c,a){this.checkBoxOff=convertStringToBoolean(c);this.cBROf=(!(this.checkBoxOff||convertStringToBoolean(a)))};dhtmlXTreeObject.prototype.setStdImages=function(a,d,c){this.imageArray[0]=a;this.imageArray[1]=d;this.imageArray[2]=c};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setImageArrays=function(f,a,h,g,d,c){switch(f){case"plus":this.plusArray[0]=a;this.plusArray[1]=h;this.plusArray[2]=g;this.plusArray[3]=d;this.plusArray[4]=c;break;case"minus":this.minusArray[0]=a;this.minusArray[1]=h;this.minusArray[2]=g;this.minusArray[3]=d;this.minusArray[4]=c;break}};dhtmlXTreeObject.prototype.openItem=function(c){this.skipLock=true;var a=this._globalIdStorageFind(c);if(!a){return 0}else{return this._openItem(a)}this.skipLock=false};dhtmlXTreeObject.prototype._openItem=function(a){var c=this._getOpenState(a);if((c<0)||(((this.XMLsource)&&(!a.XMLload)))){if(!this.callEvent("onOpenStart",[a.id,c])){return 0}this._HideShow(a,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,a.id,true)}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this._srnd){this._HideShow(a,2)}}if(a.parentObject&&!this._skip_open_parent){this._openItem(a.parentObject)}};dhtmlXTreeObject.prototype.closeItem=function(c){if(this.rootId==c){return 0}this.skipLock=true;var a=this._globalIdStorageFind(c);if(!a){return 0}if(a.closeble){this._HideShow(a,1)}this.skipLock=false};dhtmlXTreeObject.prototype.getLevel=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}return this._getNodeLevel(a,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(d,a){a=convertStringToBoolean(a);if((d)&&(d.span)){var c=d}else{var c=this._globalIdStorageFind(d)}if(!c){return 0}c.closeble=a};dhtmlXTreeObject.prototype._getNodeLevel=function(a,c){if(a.parentObject){return this._getNodeLevel(a.parentObject,c+1)}return(c)};dhtmlXTreeObject.prototype.hasChildren=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}else{if((this.XMLsource)&&(!a.XMLload)){return true}else{return a.childsCount}}};dhtmlXTreeObject.prototype._getLeafCount=function(f){var d=0;for(var c=0;c<f.childsCount;c++){if(f.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype.setItemText=function(f,d,c){var a=this._globalIdStorageFind(f);if(!a){return 0}a.label=d;a.span.innerHTML=d;if(this.childCalc){this._fixChildCountLabel(a)}a.span.parentNode.parentNode.title=c||""};dhtmlXTreeObject.prototype.getItemTooltip=function(c){var a=this._globalIdStorageFind(c);if(!a){return""}return(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"")};dhtmlXTreeObject.prototype.refreshItem=function(c){if(!c){c=this.rootId}var a=this._globalIdStorageFind(c);this.deleteChildItems(c);this._loadDynXML(c)};dhtmlXTreeObject.prototype.setItemImage2=function(f,a,g,d){var c=this._globalIdStorageFind(f);if(!c){return 0}c.images[1]=g;c.images[2]=d;c.images[0]=a;this._correctPlus(c)};dhtmlXTreeObject.prototype.setItemImage=function(d,a,f){var c=this._globalIdStorageFind(d);if(!c){return 0}if(f){c.images[1]=a;c.images[2]=f}else{c.images[0]=a}this._correctPlus(c)};dhtmlXTreeObject.prototype.getSubItems=function(d){var a=this._globalIdStorageFind(d,0,1);if(!a){return 0}if(a.unParsed){return(this._getSubItemsXML(a.unParsed))}var c="";for(i=0;i<a.childsCount;i++){if(!c){c=""+a.childNodes[i].id}else{c+=this.dlmtr+a.childNodes[i].id}}return c};dhtmlXTreeObject.prototype._getAllScraggyItems=function(d){var f="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(d.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(d.childNodes[c])}if(a){if(f){f+=this.dlmtr+a}else{f=a}}}else{if(!f){f=""+d.childNodes[c].id}else{f+=this.dlmtr+d.childNodes[c].id}}}return f};dhtmlXTreeObject.prototype._getAllFatItems=function(d){var f="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(!f){f=""+d.childNodes[c].id}else{f+=this.dlmtr+d.childNodes[c].id}if(d.childNodes[c].unParsed){var a=this._getAllFatItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(d.childNodes[c])}if(a){f+=this.dlmtr+a}}}return f};dhtmlXTreeObject.prototype._getAllSubItems=function(h,g,f){if(f){c=f}else{var c=this._globalIdStorageFind(h)}if(!c){return 0}g="";for(var d=0;d<c.childsCount;d++){if(!g){g=""+c.childNodes[d].id}else{g+=this.dlmtr+c.childNodes[d].id}var a=this._getAllSubItems(0,g,c.childNodes[d]);if(a){g+=this.dlmtr+a}}if(c.unParsed){g=this._getAllSubItemsXML(h,g,c.unParsed)}return g};dhtmlXTreeObject.prototype.selectItem=function(f,d,c){d=convertStringToBoolean(d);var a=this._globalIdStorageFind(f);if((!a)||(!a.parentObject)){return 0}if(this.XMLloadingWarning){a.parentObject.openMe=1}else{this._openItem(a.parentObject)}var g=null;if(c){g=new Object;g.ctrlKey=true;if(a.i_sel){g.skipUnSel=true}}if(d){this.onRowSelect(g,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(g,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var c=new Array();for(var a=0;a<this._selected.length;a++){c[a]=this._selected[a].span.innerHTML}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(a,d){a--;for(var c=0;c<a;c++){if(d[c]==0){d[c]=d[c+1];d[c+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(j,g,l){if((!g)||(!g.parentObject)){return 0}var a=0;var c=0;if(g.tr.nextSibling){a=g.tr.nextSibling.nodem}if(g.tr.previousSibling){c=g.tr.previousSibling.nodem}var h=g.parentObject;var d=h.childsCount;var k=h.childNodes;for(var f=0;f<d;f++){if(k[f].id==j){if(!l){h.htmlNode.childNodes[0].removeChild(k[f].tr)}k[f]=0;break}}this._compressChildList(d,k);if(!l){h.childsCount--}if(a){this._correctPlus(a);this._correctLine(a)}if(c){this._correctPlus(c);this._correctLine(c)}if(this.tscheck){this._correctCheckStates(h)}if(!l){this._globalIdStorageRecSub(g)}};dhtmlXTreeObject.prototype.setCheck=function(d,c){var a=this._globalIdStorageFind(d,0,1);if(!a){return}if(c==="unsure"){this._setCheck(a,c)}else{c=convertStringToBoolean(c);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(c,a)}else{this._setCheck(a,c)}}if(this.smcheck){this._correctCheckStates(a.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(a,d){if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(d)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=a}else{for(var c=0;c<a.parentObject.childsCount;c++){this._setCheck(a.parentObject.childNodes[c],0)}}}var f=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(d=="unsure"){a.checkstate=2}else{if(d){a.checkstate=1}else{a.checkstate=0}}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(f,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(d,c){var a=this._globalIdStorageFind(d);this._setSubChecked(c,a);this._correctCheckStates(a.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(d,a){d=convertStringToBoolean(d);if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(d)){for(var c=0;c<a.parentObject.childsCount;c++){this._setSubChecked(0,a.parentObject.childNodes[c])}}if(a.unParsed){this._setSubCheckedXML(d,a.unParsed)}if(a._r_logic||this._frbtr){this._setSubChecked(d,a.childNodes[0])}else{for(var c=0;c<a.childsCount;c++){this._setSubChecked(d,a.childNodes[c])}}var f=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(d){a.checkstate=1}else{a.checkstate=0}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(f,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.isItemChecked=function(c){var a=this._globalIdStorageFind(c);if(!a){return}return a.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(f){var a=this._globalIdStorageFind(f);if(!a){return}var c=a.childsCount;for(var d=0;d<c;d++){this._deleteNode(a.childNodes[0].id,a.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(d,a){if((!this._onrdlh)||(this._onrdlh(d))){var c=this._deleteItem(d,a);if(c){this._fixChildCountLabel(c)}}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(h,c,g){c=convertStringToBoolean(c);var a=this._globalIdStorageFind(h);if(!a){return}var d=this.getParentId(h);var f=a.parentObject;this._deleteNode(h,a,g);if(this._editCell&&this._editCell.id==h){this._editCell=null}this._correctPlus(f);this._correctLine(f);if((c)&&(d!=this.rootId)){this.selectItem(d,1)}return f};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var c=0;c<a.childsCount;c++){this._globalIdStorageRecSub(a.childNodes[c]);this._globalIdStorageSub(a.childNodes[c].id)}this._globalIdStorageSub(a.id);var d=a;d.span=null;d.tr.nodem=null;d.tr=null;d.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(k,n,m,d,h,g,f,c,a){var j=this._globalIdStorageFind(k);if((!j)||(!j.parentObject)){return(0)}var l=this._attachChildNode(0,n,m,d,h,g,f,c,a,j);if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(j.parentObject)}return l};dhtmlXTreeObject.prototype.getItemIdByIndex=function(d,a){var c=this._globalIdStorageFind(d);if((!c)||(a>=c.childsCount)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(d,a){var c=this._globalIdStorageFind(d);if((!c)||(a>=c.childsCount)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null}this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(c,a){if(c=="temporary_disabled"){this.dADTempOff=false;c=true}else{this.dADTempOff=true}this.dragAndDropOff=convertStringToBoolean(c);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this)}if(arguments.length>1){this._ddronr=(!convertStringToBoolean(a))}};dhtmlXTreeObject.prototype._setMove=function(g,d,j){if(g.parentObject.span){var f=getAbsoluteTop(g);var c=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(this.dadmode==2){var h=j-f+(document.body.scrollTop||document.documentElement.scrollTop)-2-g.offsetHeight/2;if((Math.abs(h)-g.offsetHeight/6)>0){this.dadmodec=1;if(h<0){this.dadmodefix=0-g.offsetHeight}}else{this.dadmodec=0}}if(this.dadmodec==0){var a=g.parentObject.span;a.className+=" dragAndDropRow";this._lastMark=a}else{this._clearMove();this.selectionBar.style.top=(f-c+((parseInt(g.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix)+"px";this.selectionBar.style.left="5px";if(this.allTree.offsetWidth>20){this.selectionBar.style.width=(this.allTree.offsetWidth-(_isFF?30:25))+"px"}this.selectionBar.style.display=""}this._autoScroll(null,f,c)}};dhtmlXTreeObject.prototype._autoScroll=function(d,c,a){if(this.autoScroll){if(d){c=getAbsoluteTop(d);a=getAbsoluteTop(this.allTree)-this.allTree.scrollTop}if((c-a-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if((c-a)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(g,f){if(!this.dADTempOff){return null}var d=g.parentObject;if(!this.callEvent("onBeforeDrag",[d.id,f])){return null}if(!d.i_sel){this._selectItem(d,f)}this._checkMSelectionLogic();var c=document.createElement("div");var h=new Array();if(this._itim_dg){for(var a=0;a<this._selected.length;a++){h[a]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[a].span.innerHTML+"</td></tr></table>"}}else{h=this.getSelectedItemText().split(this.dlmtr)}c.innerHTML=h.join("");c.style.position="absolute";c.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return c};dhtmlXTreeObject.prototype._focusNode=function(a){var c=getAbsoluteTop(a.htmlNode)-getAbsoluteTop(this.allTree);if((c>(this.allTree.offsetHeight-30))||(c<0)){this.allTree.scrollTop=c+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(a){if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlXTreeObject.prototype._drag=function(j,k,a){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!a.parentObject){a=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var h=j.parentObject.treeNod;if((h)&&(h._clearMove)){h._clearMove("")}if((!this.dragMove)||(this.dragMove())){if((!h)||(!h._clearMove)||(!h._dragged)){var f=new Array(j.parentObject)}else{var f=h._dragged}var c=a.parentObject;for(var g=0;g<f.length;g++){var d=this._moveNode(f[g],c);if((this.dadmodec)&&(d!==false)){c=this._globalIdStorageFind(d,true,true)}if((d)&&(!this._sADnD)){this.selectItem(d,0,1)}}}if(h){h._dragged=new Array()}};dhtmlXTreeObject.prototype._dragIn=function(h,f,a,k){if(!this.dADTempOff){return 0}var j=f.parentObject;var c=h.parentObject;if((!c)&&(this._ddronr)){return}if(!this.callEvent("onDragIn",[j.id,c?c.id:null,j.treeNod,this])){if(c){this._autoScroll(h)}return 0}if(!c){this.allTree.className+=" selectionBox"}else{if(j.childNodes==null){this._setMove(h,a,k);return h}var g=j.treeNod;for(var d=0;d<g._dragged.length;d++){if(this._checkPNodes(c,g._dragged[d])){this._autoScroll(h);return 0}}this.selectionBar.parentNode.removeChild(this.selectionBar);c.span.parentNode.appendChild(this.selectionBar);this._setMove(h,a,k);if(this._getOpenState(c)<=0){this._autoOpenId=c.id;this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000)}}return h};dhtmlXTreeObject.prototype._autoOpenItem=function(c,a){a.openItem(a._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype._getNextNode=function(a,c){if((!c)&&(a.childsCount)){return a.childNodes[0]}if(a==this.htmlNode){return -1}if((a.tr)&&(a.tr.nextSibling)&&(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}return this._getNextNode(a.parentObject,true)};dhtmlXTreeObject.prototype._lastChild=function(a){if(a.childsCount){return this._lastChild(a.childNodes[a.childsCount-1])}else{return a}};dhtmlXTreeObject.prototype._getPrevNode=function(a,c){if((a.tr)&&(a.tr.previousSibling)&&(a.tr.previousSibling.nodem)){return this._lastChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return -1}};dhtmlXTreeObject.prototype.findItem=function(a,d,c){var f=this._findNodeByLabel(a,d,(c?this.htmlNode:null));if(f){this.selectItem(f.id,true);this._focusNode(f);return f.id}else{return null}};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,d,c){var f=this._findNodeByLabel(a,d,(c?this.htmlNode:null));if(f){return f.id}else{return null}};dhtmlXTreeObject.prototype.findStrInXML=function(c,d,g){if(!c.childNodes&&c.item){return this.findStrInJSON(c,d,g)}if(!c.childNodes){return false}for(var a=0;a<c.childNodes.length;a++){if(c.childNodes[a].nodeType==1){var f=c.childNodes[a].getAttribute(d);if(!f&&c.childNodes[a].tagName=="itemtext"){f=c.childNodes[a].firstChild.data}if((f)&&(f.toLowerCase().search(g)!=-1)){return true}if(this.findStrInXML(c.childNodes[a],d,g)){return true}}}return false};dhtmlXTreeObject.prototype.findStrInJSON=function(c,d,g){for(var a=0;a<c.item.length;a++){var f=c.item[a].text;if((f)&&(f.toLowerCase().search(g)!=-1)){return true}if(c.item[a].item&&this.findStrInJSON(c.item[a],d,g)){return true}}return false};dhtmlXTreeObject.prototype._findNodeByLabel=function(a,g,f){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!f){f=this._selected[0];if(!f){f=this.htmlNode}}var c=f;if(!g){if((f.unParsed)&&(this.findStrInXML(f.unParsed.d,"text",a))){this.reParse(f)}f=this._getNextNode(c);if(f==-1){f=this.htmlNode.childNodes[0]}}else{var d=this._getPrevNode(c);if(d==-1){d=this._lastChild(this.htmlNode)}if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d);f=this._getPrevNode(c)}else{f=d}if(f==-1){f=this._lastChild(this.htmlNode)}}while((f)&&(f!=c)){if((f.label)&&(f.label.search(a)!=-1)){return(f)}if(!g){if(f==-1){if(c==this.htmlNode){break}f=this.htmlNode.childNodes[0]}if((f.unParsed)&&(this.findStrInXML(f.unParsed.d,"text",a))){this.reParse(f)}f=this._getNextNode(f);if(f==-1){f=this.htmlNode}}else{var d=this._getPrevNode(f);if(d==-1){d=this._lastChild(this.htmlNode)}if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d);f=this._getPrevNode(f)}else{f=d}if(f==-1){f=this._lastChild(this.htmlNode)}}}return null};dhtmlXTreeObject.prototype.moveItem=function(k,c,l,a){var g=this._globalIdStorageFind(k);if(!g){return(0)}var h=null;switch(c){case"right":alert("Not supported yet");break;case"item_child":var d=(a||this)._globalIdStorageFind(l);if(!d){return(0)}h=(a||this)._moveNodeTo(g,d,0);break;case"item_sibling":var d=(a||this)._globalIdStorageFind(l);if(!d){return(0)}h=(a||this)._moveNodeTo(g,d.parentObject,d);break;case"item_sibling_next":var d=(a||this)._globalIdStorageFind(l);if(!d){return(0)}if((d.tr)&&(d.tr.nextSibling)&&(d.tr.nextSibling.nodem)){h=(a||this)._moveNodeTo(g,d.parentObject,d.tr.nextSibling.nodem)}else{h=(a||this)._moveNodeTo(g,d.parentObject)}break;case"left":if(g.parentObject.parentObject){h=this._moveNodeTo(g,g.parentObject.parentObject,g.parentObject)}break;case"up":var j=this._getPrevNode(g);if((j==-1)||(!j.parentObject)){return null}h=this._moveNodeTo(g,j.parentObject,j);break;case"up_strict":var j=this._getIndex(g);if(j!=0){h=this._moveNodeTo(g,g.parentObject,g.parentObject.childNodes[j-1])}break;case"down_strict":var j=this._getIndex(g);var f=g.parentObject.childsCount-2;if(j==f){h=this._moveNodeTo(g,g.parentObject)}else{if(j<f){h=this._moveNodeTo(g,g.parentObject,g.parentObject.childNodes[j+2])}}break;case"down":var j=this._getNextNode(this._lastChild(g));if((j==-1)||(!j.parentObject)){return}if(j.parentObject==g.parentObject){var j=this._getNextNode(j)}if(j==-1){h=this._moveNodeTo(g,g.parentObject)}else{if((j==-1)||(!j.parentObject)){return}h=this._moveNodeTo(g,j.parentObject,j)}break}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}return h};dhtmlXTreeObject.prototype.setDragBehavior=function(c,a){this._sADnD=(!convertStringToBoolean(a));switch(c){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2;break}};dhtmlXTreeObject.prototype._loadDynXML=function(d,c){c=c||this.XMLsource;var a=(new Date()).valueOf();this._ld_id=d;if(this.xmlalb=="function"){if(c){c(this._escape(d))}}else{if(this.xmlalb=="name"){this.loadXML(c+this._escape(d))}else{if(this.xmlalb=="xmlname"){this.loadXML(c+this._escape(d)+".xml?uid="+a)}else{this.loadXML(c+getUrlSymbol(c)+"uid="+a+"&id="+this._escape(d))}}}};dhtmlXTreeObject.prototype.enableMultiselection=function(c,a){this._amsel=convertStringToBoolean(c);this._amselS=convertStringToBoolean(a)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){var d=new Array();for(var c=0;c<this._selected.length;c++){for(var a=0;a<this._selected.length;a++){if((c!=a)&&(this._checkPNodes(this._selected[a],this._selected[c]))){d[d.length]=this._selected[a]}}}for(var c=0;c<d.length;c++){this._unselectItem(d[c])}};dhtmlXTreeObject.prototype._checkPNodes=function(c,a){if(this._dcheckf){return false}if(a==c){return 1}if(c.parentObject){return this._checkPNodes(c.parentObject,a)}else{return 0}};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(d,c,a){this._edsbps=convertStringToBoolean(d);this._edsbpsA=new Array();this._edsbpsC=c||10;this._edsbpsD=a||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return(!((!this._edsbpsA)||(!this._edsbpsA.length)))};dhtmlXTreeObject.prototype.getItemParsingState=function(d){var c=this._globalIdStorageFind(d,true,true);if(!c){return 0}if(this._edsbpsA){for(var a=0;a<this._edsbpsA.length;a++){if(this._edsbpsA[a][2]==d){return -1}}}return 1};dhtmlXTreeObject.prototype._distributedStart=function(c,g,f,d,a){if(!this._edsbpsA){this._edsbpsA=new Array()}this._edsbpsA[this._edsbpsA.length]=[c,g,f,d,a]};dhtmlXTreeObject.prototype._distributedStep=function(f){var c=this;if((!this._edsbpsA)||(!this._edsbpsA.length)){c.XMLloadingWarning=0;return}var g=this._edsbpsA[0];this.parsedArray=new Array();this._parse(g[0],g[2],g[3],g[1]);var a=this._globalIdStorageFind(g[2]);this._redrawFrom(this,a,g[4],this._getOpenState(a));var d=this.setCheckList.split(this.dlmtr);for(var h=0;h<d.length;h++){if(d[h]){this.setCheck(d[h],1)}}this._edsbpsA=(new Array()).concat(this._edsbpsA.slice(1));if((!this._edsbpsA.length)){window.setTimeout(function(){if(c.onXLE){c.onXLE(c,f)}c.callEvent("onXLE",[c,f])},1);c.xmlstate=0}};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.preventIECaching=function(a){this.no_cashe=convertStringToBoolean(a);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(d,c){if(typeof(d)!="object"){var a=this._globalIdStorageFind(d,0,1)}else{var a=d}if(!a){return}a.dscheck=convertStringToBoolean(c)?(((a.checkstate||0)%3)+3):((a.checkstate>2)?(a.checkstate-3):a.checkstate);this._setCheck(a);if(a.dscheck<3){a.dscheck=false}};dhtmlXTreeObject.prototype.smartRefreshBranch=function(c,a){this._branchUpdate=1;this.smartRefreshItem(c,a)};dhtmlXTreeObject.prototype.smartRefreshItem=function(f,d){var a=this._globalIdStorageFind(f);for(var c=0;c<a.childsCount;c++){a.childNodes[c]._dmark=true}this.waitUpdateXML=true;if(d&&d.exists){this._parse(d,f)}else{this._loadDynXML(f,d)}};dhtmlXTreeObject.prototype.refreshItems=function(c,d){var f=c.toString().split(this.dlmtr);this.waitUpdateXML=new Array();for(var a=0;a<f.length;a++){this.waitUpdateXML[f[a]]=true}this.loadXML((d||this.XMLsource)+getUrlSymbol(d||this.XMLsource)+"ids="+this._escape(c))};dhtmlXTreeObject.prototype.updateItem=function(j,h,f,d,c,g,k){var a=this._globalIdStorageFind(j);a.userData=new cObject();if(h){a.label=h}a.images=new Array(f||this.imageArray[0],d||this.imageArray[1],c||this.imageArray[2]);this.setItemText(j,h);if(g){this._setCheck(a,true)}if(k=="1"&&!this.hasChildren(j)){a.XMLload=0}this._correctPlus(a);a._dmark=false;return a};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return(this.xmlstate==1)};dhtmlXTreeObject.prototype.setItemTopOffset=function(h,f){var d;if(typeof(h)!="object"){d=this._globalIdStorageFind(h)}else{d=h}var g=d.span.parentNode.parentNode;d.span.style.paddingBottom="1px";for(var c=0;c<g.childNodes.length;c++){if(c!=0){if(_isIE){g.childNodes[c].style.height="18px";g.childNodes[c].style.paddingTop=parseInt(f)+"px"}else{g.childNodes[c].style.height=18+parseInt(f)+"px"}}else{var a=g.childNodes[c].firstChild;if(g.childNodes[c].firstChild.tagName!="DIV"){a=document.createElement("DIV");g.childNodes[c].insertBefore(a,g.childNodes[c].firstChild)}a.style.height=parseInt(f)+"px";if((d.parentObject.id!=this.rootId||d.parentObject.childNodes[0]!=d)&&this.treeLinesOn){a.style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"}a.innerHTML="&nbsp;";a.style.overflow="hidden";if(parseInt(f)==0){g.childNodes[c].removeChild(a)}}if(!_isIE){g.childNodes[c].style.verticalAlign="bottom"}if(_isIE){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}}};dhtmlXTreeObject.prototype.setIconSize=function(f,c,g){if(g){if((g)&&(g.span)){var a=g}else{var a=this._globalIdStorageFind(g)}if(!a){return(0)}var d=a.span.parentNode.previousSibling.childNodes[0];if(f){d.style.width=f;if(window._KHTMLrv){d.parentNode.style.width=f}}if(c){d.style.height=c;if(window._KHTMLrv){d.parentNode.style.height=c}}}else{this.def_img_x=f;this.def_img_y=c}};dhtmlXTreeObject.prototype.getItemImage=function(g,f,c){var d=this._globalIdStorageFind(g);if(!d){return""}var a=d.images[f||0];if(c){a=this.iconURL+a}return a};dhtmlXTreeObject.prototype.enableRadioButtons=function(f,d){if(arguments.length==1){this._frbtr=convertStringToBoolean(f);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}var c=this._globalIdStorageFind(f);if(!c){return""}d=convertStringToBoolean(d);if((d)&&(!c._r_logic)){c._r_logic=true;for(var a=0;a<c.childsCount;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}if((!d)&&(c._r_logic)){c._r_logic=false;for(var a=0;a<c.childsCount;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!convertStringToBoolean(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){if(a===true){this.mlitems="100%"}else{this.mlitems=a}};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.clearSelection=function(a){if(a){this._unselectItem(this._globalIdStorageFind(a))}else{this._unselectItems()}};dhtmlXTreeObject.prototype.showItemSign=function(f,c){var a=this._globalIdStorageFind(f);if(!a){return 0}var d=a.span.parentNode.previousSibling.previousSibling.previousSibling;if(!convertStringToBoolean(c)){this._openItem(a);a.closeble=false;a.wsign=true}else{a.closeble=true;a.wsign=false}this._correctPlus(a)};dhtmlXTreeObject.prototype.showItemCheckbox=function(g,f){if(!g){for(var c in this._idpull){this.showItemCheckbox(this._idpull[c],f)}}if(typeof(g)!="object"){g=this._globalIdStorageFind(g,0,0)}if(!g){return 0}g.nocheckbox=!convertStringToBoolean(f);var d=g.span.parentNode.previousSibling.previousSibling.childNodes[0];d.parentNode.style.display=(!g.nocheckbox)?"":"none"};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=true;this.ehlta=convertStringToBoolean(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;a.callEvent("onMouseOut",[c.id]);if(c.id==a._l_onMSI){a._l_onMSI=null}if(!a.ehlta){return}c.span.className=c.span.className.replace("_lor","")};dhtmlXTreeObject.prototype._itemMouseIn=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;if(a._l_onMSI!=c.id){a.callEvent("onMouseIn",[c.id])}a._l_onMSI=c.id;if(!a.ehlta){return}c.span.className=c.span.className.replace("_lor","");c.span.className=c.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.focusItem=function(c){var a=this._globalIdStorageFind(c);if(!a){return(0)}this._focusNode(a)};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(d){var f="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(d.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(d.childNodes[c])}if(a){if(f){f+=this.dlmtr+a}else{f=a}}}else{if(!f){f=""+d.childNodes[c].id}else{f+=this.dlmtr+d.childNodes[c].id}}}return f};dhtmlXTreeObject.prototype._getAllFatItems=function(d){var f="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(!f){f=""+d.childNodes[c].id}else{f+=this.dlmtr+d.childNodes[c].id}if(d.childNodes[c].unParsed){var a=this._getAllFatItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(d.childNodes[c])}if(a){f+=this.dlmtr+a}}}return f};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){if(a){a=this._globalIdStorageFind(a)}return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)];var c=this._getAllChecked("","",2);if(c){a.push(c)}return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(f,d,g){if(!f){f=this.htmlNode}if(f.checkstate==g){if(!f.nocheckbox){if(d){d+=this.dlmtr+f.id}else{d=""+f.id}}}var a=f.childsCount;for(var c=0;c<a;c++){d=this._getAllChecked(f.childNodes[c],d,g)}if(f.unParsed){d=this._getAllCheckedXML(f.unParsed,d,g)}if(d){return d}else{return""}};dhtmlXTreeObject.prototype.setItemStyle=function(f,d,c){var c=c||false;var a=this._globalIdStorageFind(f);if(!a){return 0}if(!a.span.style.cssText){a.span.setAttribute("style",a.span.getAttribute("style")+"; "+d)}else{a.span.style.cssText=c?d:a.span.style.cssText+";"+d}};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+a;if(a=="dhx_terrace"||a=="dhx_web"){this.enableTreeLines(false)}};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,(a.width||"100%"),(a.height||"100%"),(a.root_id||0)]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(f,h,c){var d=this._loader.doXPath(".//item",f);var g=d[0].getAttribute("text");this.obj.insertNewItem(c,h,g,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(f,h,c){var d=this._loader.doXPath(".//item",f);var g=d[0].getAttribute("text");this.obj.setItemText(h,g);if(this.obj.getParentId(h)!=c){this.obj.moveItem(h,"item_child",c)}this.setUpdated(h,true,"updated")});a.attachEvent("deleteCallback",function(d,f,c){this.obj.setUserData(f,this.action_param,"true_deleted");this.obj.deleteItem(f,false)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(c,d){if(c==3){a.setUpdated(d,true)}return true});this.attachEvent("onDrop",function(h,g,f,d,c){if(d==c){a.setUpdated(h,true)}});this._onrdlh=function(c){var d=a.getState(c);if(d=="inserted"){a.set_invalid(c,false);a.setUpdated(c,false);return true}if(d=="true_deleted"){a.setUpdated(c,false);return true}a.setUpdated(c,true,"deleted");return false};this._onradh=function(c){a.setUpdated(c,true,"inserted")};a._getRowData=function(g){var f={};var h=this.obj._globalIdStorageFind(g);var d=h.parentObject;var c=0;for(c=0;c<d.childsCount;c++){if(d.childNodes[c]==h){break}}f.tr_id=h.id;f.tr_pid=d.id;f.tr_order=c;f.tr_text=h.span.innerHTML;d=(h._userdatalist||"").split(",");for(c=0;c<d.length;c++){f[d[c]]=h.userData["t_"+d[c]]}return f}};dhtmlXTreeObject.prototype.makeDraggable=function(c,a){if(typeof(c)!="object"){c=document.getElementById(c)}dragger=new dhtmlDragAndDropObject();dropper=new dhx_dragSomethingInTree();dragger.addDraggableItem(c,dropper);c.dragLanding=null;c.ondragstart=dropper._preventNsDrag;c.onselectstart=new Function("return false;");c.parentObject=new Object;c.parentObject.img=c;c.parentObject.treeNod=dropper;dropper._customDrop=a};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(c){var d=document.getElementsByTagName("div");for(var a=0;a<d.length;a++){if(d[a].getAttribute("dragInDhtmlXTree")){this.makeDragable(d[a],c)}}};function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(c){var a=document.createElement("div");a.style.position="absolute";a.innerHTML=(c.innerHTML||c.value);a.className="dragSpanDiv";return a};this._preventNsDrag=function(a){(a||window.event).cancelBubble=true;if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};this._nonTrivialNode=function(c,d,a,f){if(this._customDrop){return this._customDrop(c,f.img.id,d.id,a?a.id:null)}var g=(f.img.getAttribute("image")||"");var j=f.img.id||"new";var h=(f.img.getAttribute("text")||(_isIE?f.img.innerText:f.img.textContent));c[a?"insertNewNext":"insertNewItem"](a?a.id:d.id,j,h,"",g,g,g)}}dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=convertStringToBoolean(a);if(!this._eItEdFlag){this._edn_click_IE=true;this._edn_dblclick=true;this._ie_aFunc=this.aFunc;this._ie_dblclickFuncHandler=this.dblclickFuncHandler;this.setOnDblClickHandler(function(d,c){if(this._edn_dblclick){this._editItem(d,c)}return true});this.setOnClickHandler(function(d,c){this._stopEditItem(d,c);if((this.ed_hist_clcik==d)&&(this._edn_click_IE)){this._editItem(d,c)}this.ed_hist_clcik=d;return true});this._eItEdFlag=true}};dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)};dhtmlXTreeObject.prototype.setEditStartAction=function(a,c){this._edn_click_IE=convertStringToBoolean(a);this._edn_dblclick=convertStringToBoolean(c)};dhtmlXTreeObject.prototype._stopEdit=function(c,h){if(this._editCell){this.dADTempOff=this.dADTempOffEd;if(this._editCell.id!=c){var f=true;if(!h){f=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value])}else{f=false;this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])}if(f===true){f=this._editCell.span.childNodes[0].value}else{if(f===false){f=this._editCell._oldValue}}var g=(f!=this._editCell._oldValue);this._editCell.span.innerHTML=f;this._editCell.label=this._editCell.span.innerHTML;var d=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=d;this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var j=this._editCell.id;if(this.childCalc){this._fixChildCountLabel(this._editCell)}this._editCell=null;if(!h){this.callEvent("onEdit",[3,j,this,g])}if(this._enblkbrd){this.parentObject.lastChild.focus();this.parentObject.lastChild.focus()}}}};dhtmlXTreeObject.prototype._stopEditItem=function(c,a){this._stopEdit(c)};dhtmlXTreeObject.prototype.stopEdit=function(a){if(this._editCell){this._stopEdit(this._editCell.id+"_non",a)}};dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)};dhtmlXTreeObject.prototype._editItem=function(g,a){if(this._eItEd){this._stopEdit();var d=this._globalIdStorageFind(g);if(!d){return}var f=this.callEvent("onEdit",[0,g,this,d.span.innerHTML]);if(f===true){f=(typeof d.span.innerText!="undefined"?d.span.innerText:d.span.textContent)}else{if(f===false){return}}this.dADTempOffEd=this.dADTempOff;this.dADTempOff=false;this._editCell=d;d._oldValue=f;d.span.innerHTML="<input type='text' class='intreeeditRow' />";d.span.style.paddingRight=d.span.style.paddingLeft="0px";d.span.onclick=d.span.ondblclick=function(h){(h||event).cancelBubble=true};d.span.childNodes[0].value=f;d.span.childNodes[0].onselectstart=function(h){(h||event).cancelBubble=true;return true};d.span.childNodes[0].onmousedown=function(h){(h||event).cancelBubble=true;return true};d.span.childNodes[0].focus();d.span.childNodes[0].focus();d.span.onclick=function(h){(h||event).cancelBubble=true;return false};d.span.className="";d.span.parentNode.className="";var c=this;d.span.childNodes[0].onkeydown=function(h){if(!h){h=window.event}if(h.keyCode==13){h.cancelBubble=true;c._stopEdit(window.undefined)}else{if(h.keyCode==27){c._stopEdit(window.undefined,true)}}(h||event).cancelBubble=true};this.callEvent("onEdit",[1,g,this])}};function jsonPointer(c,a){this.d=c;this.dp=a}jsonPointer.prototype={text:function(){var a=function(g){var f=[];for(var d=0;d<g.length;d++){f.push("{"+c(g[d])+"}")}return f.join(",")};var c=function(g){var f=[];for(var d in g){if(typeof(g[d])=="object"){if(d.length){f.push('"'+d+'":['+a(g[d])+"]")}else{f.push('"'+d+'":{'+c(g[d])+"}")}}else{f.push('"'+d+'":"'+g[d]+'"')}}return f.join(",")};return"{"+c(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(g,k,j){var d=this.d[g];var l=new jsonPointer();if(d){for(var h=0;h<d.length;h++){l.d=d[h];k.apply(j,[l,h])}}},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return !!this.d[a]},each_x:function(g,l,k,j,h){var d=this.d[g];var m=new jsonPointer(0,this.d);if(d){for(h=h||0;h<d.length;h++){if(d[h][l]){m.d=d[h];if(k.apply(j,[m,h])==-1){return}}}}},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,c){this.d[a]=c},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(d,k,n,h,o){var l=this.d[d];if(l.length){for(var g=0;g<l.length;g++){if(l[g][k]!=null&&l[g][k]!=""&&(!n||l[g][k]==n)){var j=new jsonPointer(l[g],this.d);h.apply(o,[j,g])}var m=this.d;this.d=l[g];if(this.sub_exists(d)){this.through(d,k,n,h,o)}this.d=m}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,afterCall){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var z="+arguments[4].xmlDoc.responseText);that.loadJSArray(z)},this,true,this.no_cashe);if(afterCall){this.XMLLoader.waitCall=afterCall}this.XMLLoader.loadXML(file)};dhtmlXTreeObject.prototype.loadCSV=function(a,d){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){c.loadCSVString(arguments[4].xmlDoc.responseText)},this,true,this.no_cashe);if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype.loadJSArray=function(a,g){var j=[];for(var c=0;c<a.length;c++){if(!j[a[c][1]]){j[a[c][1]]=[]}j[a[c][1]].push({id:a[c][0],text:a[c][2]})}var h={id:this.rootId};var d=function(m,l){if(j[m.id]){m.item=j[m.id];for(var k=0;k<m.item.length;k++){l(m.item[k],l)}}};d(h,d);this.loadJSONObject(h,g)};dhtmlXTreeObject.prototype.loadCSVString=function(a,j){var l=[];var c=a.split("\n");for(var g=0;g<c.length;g++){var d=c[g].split(",");if(!l[d[1]]){l[d[1]]=[]}l[d[1]].push({id:d[0],text:d[2]})}var k={id:this.rootId};var h=function(o,n){if(l[o.id]){o.item=l[o.id];for(var m=0;m<o.item.length;m++){n(o.item[m],n)}}};h(k,h);this.loadJSONObject(k,j)};dhtmlXTreeObject.prototype.loadJSONObject=function(a,c){if(!this.parsCount){this.callEvent("onXLS",[this,null])}this.xmlstate=1;var d=new jsonPointer(a);this._parse(d);this._p=d;if(c){c()}};dhtmlXTreeObject.prototype.loadJSON=function(file,afterCall){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){try{eval("var t="+arguments[4].xmlDoc.responseText)}catch(e){dhtmlxError.throwError("LoadXML","Incorrect JSON",[(arguments[4].xmlDoc),this]);return}var p=new jsonPointer(t);that._parse(p);that._p=p},this,true,this.no_cashe);if(afterCall){this.XMLLoader.waitCall=afterCall}this.XMLLoader.loadXML(file)};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){var a=['{"id":"'+this.rootId+'", "item":['];var d=[];for(var c=0;c<this.htmlNode.childsCount;c++){d.push(this._serializeItemJSON(this.htmlNode.childNodes[c]))}a.push(d.join(","));a.push("]}");return a.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(j){var a=[];if(j.unParsed){return(j.unParsed.text())}if(this._selected.length){var d=this._selected[0].id}else{d=""}var h=j.span.innerHTML;h=h.replace(/\"/g,'\\"',h);if(!this._xfullXML){a.push('{ "id":"'+j.id+'", '+(this._getOpenState(j)==1?' "open":"1", ':"")+(d==j.id?' "select":"1",':"")+' "text":"'+h+'"'+(((this.XMLsource)&&(j.XMLload==0))?', "child":"1" ':""))}else{a.push('{ "id":"'+j.id+'", '+(this._getOpenState(j)==1?' "open":"1", ':"")+(d==j.id?' "select":"1",':"")+' "text":"'+h+'", "im0":"'+j.images[0]+'", "im1":"'+j.images[1]+'", "im2":"'+j.images[2]+'" '+(j.acolor?(', "aCol":"'+j.acolor+'" '):"")+(j.scolor?(', "sCol":"'+j.scolor+'" '):"")+(j.checkstate==1?', "checked":"1" ':(j.checkstate==2?', "checked":"-1"':""))+(j.closeable?', "closeable":"1" ':"")+(((this.XMLsource)&&(j.XMLload==0))?', "child":"1" ':""))}if((this._xuserData)&&(j._userdatalist)){a.push(', "userdata":[');var g=j._userdatalist.split(",");var f=[];for(var c=0;c<g.length;c++){f.push('{ "name":"'+g[c]+'" , "content":"'+j.userData["t_"+g[c]]+'" }')}a.push(f.join(","));a.push("]")}if(j.childsCount){a.push(', "item":[');var f=[];for(var c=0;c<j.childsCount;c++){f.push(this._serializeItemJSON(j.childNodes[c]))}a.push(f.join(","));a.push("]\n")}a.push("}\n");return a.join("")};function dhtmlXTreeFromHTML(obj){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var n=obj;var id=n.id;var cont="";for(var j=0;j<obj.childNodes.length;j++){if(obj.childNodes[j].nodeType=="1"){if(obj.childNodes[j].tagName=="XMP"){var cHead=obj.childNodes[j];for(var m=0;m<cHead.childNodes.length;m++){cont+=cHead.childNodes[m].data}}else{if(obj.childNodes[j].tagName.toLowerCase()=="ul"){cont=dhx_li2trees(obj.childNodes[j],new Array(),0)}}break}}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0);var z_all=new Array();for(b in t){z_all[b.toLowerCase()]=b}var atr=obj.attributes;for(var a=0;a<atr.length;a++){if((atr[a].name.indexOf("set")==0)||(atr[a].name.indexOf("enable")==0)){var an=atr[a].name;if(!t[an]){an=z_all[atr[a].name]}t[an].apply(t,atr[a].value.split(","))}}if(typeof(cont)=="object"){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);if(cont[i][2]){t._setCheck(n,cont[i][2])}}t.XMLloadingWarning=0;t.lastLoadedXMLId=0;t._redrawFrom(t)}else{t.loadXMLString("<tree id='0'>"+cont+"</tree>")}window[id]=t;var oninit=obj.getAttribute("oninit");if(oninit){eval(oninit)}return t}function dhx_init_trees(){var c=document.getElementsByTagName("div");for(var a=0;a<c.length;a++){if(c[a].className=="dhtmlxTree"){dhtmlXTreeFromHTML(c[a])}}}function dhx_li2trees(o,h,d){for(var k=0;k<o.childNodes.length;k++){var n=o.childNodes[k];if((n.nodeType==1)&&(n.tagName.toLowerCase()=="li")){var m="";var l=null;var a=n.getAttribute("checked");for(var g=0;g<n.childNodes.length;g++){var f=n.childNodes[g];if(f.nodeType==3){m+=f.data}else{if(f.tagName.toLowerCase()!="ul"){m+=dhx_outer_html(f)}else{l=f}}}h[h.length]=[d,m,a,(n.id||(h.length+1))];if(l){h=dhx_li2trees(l,h,(n.id||h.length))}}}return h}function dhx_outer_html(c){if(c.outerHTML){return c.outerHTML}var a=document.createElement("DIV");a.appendChild(c.cloneNode(true));a=a.innerHTML;return a}if(window.addEventListener){window.addEventListener("load",dhx_init_trees,false)}else{if(window.attachEvent){window.attachEvent("onload",dhx_init_trees)}}dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(f,c,d){this._idpull[c.id]._attrs=c}};dhtmlXTreeObject.prototype.getAttribute=function(d,a){this._globalIdStorageFind(d);var c=this._idpull[d]._attrs;return c?c[a]:window.undefined};dhtmlXTreeObject.prototype.setAttribute=function(f,a,d){this._globalIdStorageFind(f);var c=(this._idpull[f]._attrs)||{};c[a]=d;this._idpull[f]._attrs=c};dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(d){this._enblkbrd=convertStringToBoolean(d);if(this._enblkbrd){if(_isFF){var c=window.getComputedStyle(this.parentObject,null)["position"];if((c!="absolute")&&(c!="relative")){this.parentObject.style.position="relative"}}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var a=this;var c=document.createElement("INPUT");c.className="a_dhx_hidden_input";c.autocomplete="off";if(window._KHTMLrv){c.style.color="white"}this.parentObject.appendChild(c);this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(f){if(a.callEvent("onKeyPress",[(f||window.event).keyCode,(f||window.event)])){return a._onKeyDown(f||window.event)}};this.parentObject.onclick=function(f){if(_isFF||_isIE){c.select()}if(window._KHTMLrv||_isOpera){c.focus()}}}else{this.parentObject.onkeydown=null}};dhtmlXTreeObject.prototype._onKeyDown=function(d){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive){return true}var a=this;for(var c=0;c<this._navKeys.length;c++){if(this._navKeys[c][1]==d.keyCode){this["_onkey_"+this._navKeys[c][0]].apply(this,[this.getSelectedItemId()]);if(d.preventDefault){d.preventDefault()}(d||event).cancelBubble=true;return false}}if(this._textSearch){return this._searchItemByKey(d)}return true};dhtmlXTreeObject.prototype._onkey_up=function(d){var a=this._globalIdStorageFind(d);if(!a){return}var c=this._getPrevVisibleNode(a);if(c.id==this.rootId){return}this.focusItem(c.id);this.selectItem(c.id,false)};dhtmlXTreeObject.prototype._onkey_down=function(d){var a=this._globalIdStorageFind(d);if(!a){return}var c=this._getNextVisibleNode(a);if(c.id==this.rootId){return}this.focusItem(c.id);this.selectItem(c.id,false)};dhtmlXTreeObject.prototype._onkey_open=function(a){this.openItem(a)};dhtmlXTreeObject.prototype._onkey_close=function(a){this.closeItem(a)};dhtmlXTreeObject.prototype._onkey_call=function(a){if(this.stopEdit){this.stopEdit();this.parentObject.lastChild.focus();this.parentObject.lastChild.focus();this.selectItem(a,true)}else{this.selectItem(this.getSelectedItemId(),true)}};dhtmlXTreeObject.prototype._onkey_edit=function(a){if(this.editItem){this.editItem(a)}};dhtmlXTreeObject.prototype._getNextVisibleNode=function(a,c){if((!c)&&(this._getOpenState(a)>0)){return a.childNodes[0]}if((a.tr)&&(a.tr.nextSibling)&&(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}if(a.parentObject){return this._getNextVisibleNode(a.parentObject,1)}return a};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(a){if((a.tr)&&(a.tr.previousSibling)&&(a.tr.previousSibling.nodem)){return this._lastVisibleChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return a}};dhtmlXTreeObject.prototype._lastVisibleChild=function(a){if(this._getOpenState(a)>0){return this._lastVisibleChild(a.childNodes[a.childsCount-1])}else{return a}};dhtmlXTreeObject.prototype._searchItemByKey=function(c){if(c.keyCode==8){this._textSearchString="";return true}var a=String.fromCharCode(c.keyCode).toUpperCase();if(a.match(/[A-Z,a-z,0-9\ ]/)){this._textSearchString+=a;this._textSearchInProgress=true;if(!(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))){this.findItem(this._textSearchString,0)}this._textSearchInProgress=false;if(c.preventDefault){c.preventDefault()}(c||event).cancelBubble=true;return false}return true};dhtmlXTreeObject.prototype.assignKeys=function(a){this._navKeys=a};dhtmlXTreeObject.prototype.enableKeySearch=function(c){this._textSearch=convertStringToBoolean(c);if(!this._textSearch){return}this._textSearchString="";var a=this;this._markItem2=this._markItem;this._markItem=function(d){if(!a._textSearchInProgress){a._textSearchString=""}a._markItem2(d)}};dhtmlXTreeObject.prototype.enableLoadingItem=function(a){this.attachEvent("onXLS",this._showFakeItem);this.attachEvent("onXLE",this._hideFakeItem);this._tfi_text=a||"Loading..."};dhtmlXTreeObject.prototype._showFakeItem=function(a,d){if((d===null)||(this._globalIdStorageFind("fake_load_xml_"+d))){return}var c=this.XMLsource;this.XMLsource=null;this.insertNewItem(d,"fake_load_xml_"+d,this._tfi_text);this.XMLsource=c};dhtmlXTreeObject.prototype._hideFakeItem=function(a,c){if(c===null){return}this.deleteItem("fake_load_xml_"+c)};dhtmlXTreeObject.prototype.isLocked=function(a){if(!this._locker){this._init_lock()}return(this._locker[a]==true)};dhtmlXTreeObject.prototype._lockItem=function(a,g,c){if(!this._locker){this._init_lock()}if(g){if(this._locker[a.id]==true){return}this._locker[a.id]=true;a.bIm0=a.images[0];a.bIm1=a.images[1];a.bIm2=a.images[2];a.images[0]=this.lico0;a.images[1]=this.lico1;a.images[2]=this.lico2;var f=a.span.parentNode;var d=f.previousSibling;this.dragger.removeDraggableItem(f);this.dragger.removeDraggableItem(d)}else{if(this._locker[a.id]!=true){return}this._locker[a.id]=false;a.images[0]=a.bIm0;a.images[1]=a.bIm1;a.images[2]=a.bIm2;var f=a.span.parentNode;var d=f.previousSibling;this.dragger.addDraggableItem(f,this);this.dragger.addDraggableItem(d,this)}if(!c){this._correctPlus(a)}};dhtmlXTreeObject.prototype.lockItem=function(d,c){if(!this._locker){this._init_lock()}this._lockOn=false;var a=this._globalIdStorageFind(d);this._lockOn=true;this._lockItem(a,convertStringToBoolean(c))};dhtmlXTreeObject.prototype.setLockedIcons=function(d,c,a){if(!this._locker){this._init_lock()}this.lico0=d;this.lico1=c;this.lico2=a};dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array();this._locker_count="0";this._lockOn=true;this._globalIdStorageFindA=this._globalIdStorageFind;this._globalIdStorageFind=this._lockIdFind;if(this._serializeItem){this._serializeItemA=this._serializeItem;this._serializeItem=this._serializeLockItem;this._serializeTreeA=this.serializeTree;this.serializeTree=this._serializeLockTree}this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])};dhtmlXTreeObject.prototype._lockIdFind=function(d,a,c){if(!this.skipLock){if((!c)&&(this._lockOn==true)&&(this._locker[d]==true)){return null}}return this._globalIdStorageFindA(d,a,c)};dhtmlXTreeObject.prototype._serializeLockItem=function(a){if(this._locker[a.id]==true){return""}return this._serializeItemA(a)};dhtmlXTreeObject.prototype._serializeLockTree=function(){var a=this._serializeTreeA();return a.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")};dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo;dhtmlXTreeObject.prototype._moveNodeTo=function(a,d,c){if((d.treeNod.isLocked)&&(d.treeNod.isLocked(d.id))){return false}return this._moveNodeToA(a,d,c)};dhtmlXTreeObject.prototype.lockTree=function(a){if(convertStringToBoolean(a)){this._initTreeLocker()}else{if(this._TreeLocker){this._TreeLocker.parentNode.removeChild(this._TreeLocker);this._TreeLocker=null}}};dhtmlXTreeObject.prototype._initTreeLocker=function(a){if(this._TreeLocker){return}this.parentObject.style.overflow="hidden";if(this.parentObject.style.position!="absolute"){this.parentObject.style.position="relative"}var c=document.createElement("div");c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.className="dhx_tree_opacity";c.style.width=this.allTree.offsetWidth+"px";c.style.backgroundColor="#FFFFFF";c.style.height=this.allTree.offsetHeight+"px";this._TreeLocker=c;this.parentObject.appendChild(this._TreeLocker)};dhtmlXTreeObject.prototype.enableRTL=function(c){var a=convertStringToBoolean(c);if(((a)&&(!this.rtlMode))||((!a)&&(this.rtlMode))){this.rtlMode=a;this._switchToRTL(this.rtlMode)}};dhtmlXTreeObject.prototype._switchToRTL=function(a){if(a){this.allTree.className=this._ltr_line=this.lineArray;this._ltr_min=this.minusArray;this._ltr_plus=this.plusArray;this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif");this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif");this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif");this.allTree.className="containerTableStyleRTL"}else{this.allTree.className="containerTableStyle";this.lineArray=this._ltr_line;this.minusArray=this._ltr_min;this.plusArray=this._ltr_plus}if(this.htmlNode.childsCount){this._redrawFrom(this,this.htmlNode)}};dhtmlXTreeObject.prototype.sortTree=function(f,c,d){var a=this._globalIdStorageFind(f);if(!a){return false}this._reorderBranch(a,(c.toString().toLowerCase()=="asc"),convertStringToBoolean(d))};dhtmlXTreeObject.prototype.setCustomSortFunction=function(a){this._csfunca=a};dhtmlXTreeObject.prototype._reorderBranch=function(j,c,k){var a=[];var h=j.childsCount;if(!h){return}var g=j.childNodes[0].tr.parentNode;for(var f=0;f<h;f++){a[f]=j.childNodes[f];g.removeChild(a[f].tr)}var d=this;if(c==1){if(this._csfunca){a.sort(function(m,l){return d._csfunca(m.id,l.id)})}else{a.sort(function(m,l){return((m.span.innerHTML.toUpperCase()>l.span.innerHTML.toUpperCase())?1:((m.span.innerHTML.toUpperCase()==l.span.innerHTML.toUpperCase())?0:-1))})}}else{if(this._csfunca){a.sort(function(m,l){return d._csfunca(l.id,m.id)})}else{a.sort(function(m,l){return((m.span.innerHTML.toUpperCase()<l.span.innerHTML.toUpperCase())?1:((m.span.innerHTML.toUpperCase()==l.span.innerHTML.toUpperCase())?0:-1))})}}for(var f=0;f<h;f++){g.appendChild(a[f].tr);j.childNodes[f]=a[f];if((k)&&(a[f].unParsed)){a[f].unParsed.set("order",c?1:-1)}else{if((k)&&(a[f].childsCount)){this._reorderBranch(a[f],c,k)}}}for(var f=0;f<h;f++){this._correctPlus(a[f]);this._correctLine(a[f])}};dhtmlXTreeObject.prototype._reorderXMLBranch=function(h){var k=h.getAttribute("order");if(k=="none"){return}var c=(k==1);var g=h.childNodes.length;if(!g){return}var a=new Array();var d=0;for(var f=0;f<g;f++){if(h.childNodes[f].nodeType==1){a[d]=h.childNodes[f];d++}}for(var f=g-1;f!=0;f--){h.removeChild(h.childNodes[f])}if(c){a.sort(function(l,j){return((l.getAttribute("text")>j.getAttribute("text"))?1:((l.getAttribute("text")==j.getAttribute("text"))?0:-1))})}else{a.sort(function(l,j){return((l.getAttribute("text")<j.getAttribute("text"))?1:((l.getAttribute("text")==j.getAttribute("text"))?0:-1))})}for(var f=0;f<d;f++){a[f].setAttribute("order",k);h.appendChild(a[f])}h.setAttribute("order","none")};dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]];dhtmlXTreeObject.prototype.registerXMLEntity=function(a,c){this._serEnts[this._serEnts.length]=[a,c,new RegExp(a,"g")]};dhtmlXTreeObject.prototype.setSerializationLevel=function(a,c,g,h,d){this._xuserData=convertStringToBoolean(a);this._xfullXML=convertStringToBoolean(c);this._dtd=d;this._xescapeEntities=convertStringToBoolean(g);if(convertStringToBoolean(h)){this._apreUC="<![CDATA[";this._apstUC="]]>"}else{}for(var f=0;f<this._serEnts.length;f++){this._serEnts[f][2]=new RegExp(this._serEnts[f][0],"g")}};dhtmlXTreeObject.prototype.serializeTree=function(){if(this.stopEdit){this.stopEdit()}this._apreUC=this._apreUC||"";this._apstUC=this._apstUC||"";var a='<?xml version="1.0"?>';if(this._dtd){a+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'}a+='<tree id="'+this.rootId+'">';if((this._xuserData)&&(this._idpull[this.rootId]._userdatalist)){var d=this._idpull[this.rootId]._userdatalist.split(",");for(var c=0;c<d.length;c++){a+='<userdata name="'+d[c]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+d[c]]+this._apstUC+"</userdata>"}}for(var c=0;c<this.htmlNode.childsCount;c++){a+=this._serializeItem(this.htmlNode.childNodes[c])}a+="</tree>";return a};dhtmlXTreeObject.prototype._serializeItem=function(j){if(j.unParsed){if(document.all){return j.unParsed.d.xml}else{var a=new XMLSerializer();return a.serializeToString(j.unParsed.d)}}var c="";if(this._selected.length){var f=this._selected[0].id}else{f='"'}var h=j.span.innerHTML;if(this._xescapeEntities){for(var d=0;d<this._serEnts.length;d++){h=h.replace(this._serEnts[d][2],this._serEnts[d][1])}}if(!this._xfullXML){c='<item id="'+j.id+'" '+(this._getOpenState(j)==1?' open="1" ':"")+(f==j.id?' select="1"':"")+' text="'+h+'"'+(((this.XMLsource)&&(j.XMLload==0))?' child="1" ':"")+">"}else{c='<item id="'+j.id+'" '+(this._getOpenState(j)==1?' open="1" ':"")+(f==j.id?' select="1"':"")+' text="'+h+'" im0="'+j.images[0]+'" im1="'+j.images[1]+'" im2="'+j.images[2]+'" '+(j.acolor?('aCol="'+j.acolor+'" '):"")+(j.scolor?('sCol="'+j.scolor+'" '):"")+(j.checkstate==1?'checked="1" ':(j.checkstate==2?'checked="-1"':""))+(j.closeable?'closeable="1" ':"")+(((this.XMLsource)&&(j.XMLload==0))?' child="1" ':"")+">"}if((this._xuserData)&&(j._userdatalist)){var g=j._userdatalist.split(",");for(var d=0;d<g.length;d++){c+='<userdata name="'+g[d]+'">'+this._apreUC+j.userData["t_"+g[d]]+this._apstUC+"</userdata>"}}for(var d=0;d<j.childsCount;d++){c+=this._serializeItem(j.childNodes[d])}c+="</item>";return c};dhtmlXTreeObject.prototype.saveSelectedItem=function(c,a){c=c||"";this.setCookie("treeStateSelected"+c,this.getSelectedItemId(),a)};dhtmlXTreeObject.prototype.restoreSelectedItem=function(a){a=a||"";var c=this.getCookie("treeStateSelected"+a);this.selectItem(c,false)};dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(a,c){this.assMode=convertStringToBoolean(a);if((this.assMode)&&(!this.oldOnSelect)){this.oldOnSelect=this.onRowSelect;this.onRowSelect=function(f,d,g){if(!d){d=this}d.parentObject.treeNod.oldOnSelect(f,d,g);if(d.parentObject.treeNod.assMode){d.parentObject.treeNod.saveSelectedItem(d.parentObject.treeNod.assCookieName)}}}this.assCookieName=c};dhtmlXTreeObject.prototype.saveState=function(d,c){var g=this._escape(this.serializeTree());var a=4000;if(g.length>a){if(navigator.appName.indexOf("Microsoft")!=-1){return false}this.setCookie("treeStatex"+d,Math.ceil(g.length/a));for(var f=0;f<Math.ceil(g.length/a);f++){this.setCookie("treeStatex"+d+"x"+f,g.substr(f*a,a),c)}}else{this.setCookie("treeStatex"+d,g,c)}var g=this.getCookie("treeStatex"+d);if(!g){this.setCookie("treeStatex"+d,"",c);return false}return true};dhtmlXTreeObject.prototype.loadState=function(a){var f=this.getCookie("treeStatex"+a);if(!f){return false}if(f.length){if(f.toString().length<4){var d="";for(var c=0;c<f;c++){d+=this.getCookie("treeStatex"+a+"x"+c)}f=d}this.loadXMLString((this.utfesc=="utf8")?decodeURI(f):unescape(f))}return true};dhtmlXTreeObject.prototype.setCookie=function(c,d,a){var f=c+"="+d+(a?("; "+a):"");document.cookie=f};dhtmlXTreeObject.prototype.getCookie=function(c){var d=c+"=";if(document.cookie.length>0){var f=document.cookie.indexOf(d);if(f!=-1){f+=d.length;var a=document.cookie.indexOf(";",f);if(a==-1){a=document.cookie.length}return document.cookie.substring(f,a)}}};dhtmlXTreeObject.prototype.saveOpenStates=function(c,a){var f=[];for(var d=0;d<this.htmlNode.childsCount;d++){f=f.concat(this._collectOpenStates(this.htmlNode.childNodes[d]))}f=f.join(this.dlmtr);this.setCookie("treeOpenStatex"+c,f,a)};dhtmlXTreeObject.prototype.loadOpenStates=function(c){for(var d=0;d<this.htmlNode.childsCount;d++){this._xcloseAll(this.htmlNode.childNodes[d])}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";var g=getCookie("treeOpenStatex"+c);if(g){var a=g.split(this.dlmtr);for(var d=0;d<a.length;d++){var f=this._globalIdStorageFind(a[d]);if(f){if((this.XMLsource)&&(!f.XMLload)&&(f.id!=this.rootId)){this._delayedLoad(f,"loadOpenStates('"+c+"')");return}else{this.openItem(a[d])}}}}this.callEvent("onAllOpenDynamic",[])};dhtmlXTreeObject.prototype._delayedLoad=function(c,a){this.afterLoadMethod=a;this.onLoadReserve=this.onXLE;this.onXLE=this._delayedLoadStep2;this._loadDynXML(c.id)};dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve;window.setTimeout(function(){dhtmlx.temp=tree;eval("dhtmlx.temp."+tree.afterLoadMethod)},100);if(tree.onXLE){tree.onXLE(tree)}tree.callEvent("onXLE",[tree])};dhtmlXTreeObject.prototype._collectOpenStates=function(c){var d=[];if(this._getOpenState(c)==1){d.push(c.id);for(var a=0;a<c.childsCount;a++){d=d.concat(this._collectOpenStates(c.childNodes[a]))}}return d};function setCookie(a,c){document.cookie=a+"="+c}function getCookie(c){var d=c+"=";if(document.cookie.length>0){var f=document.cookie.indexOf(d);if(f!=-1){f+=d.length;var a=document.cookie.indexOf(";",f);if(a==-1){a=document.cookie.length}return(document.cookie.substring(f,a))}}}dhtmlXTreeObject.prototype.openAllItemsDynamic=function(a){this.ClosedElem=new Array();this.G_node=null;var c=this._globalIdStorageFind(a||this.rootId);if(c.id!=this.rootId&&this.getOpenState(c.id)!=0){this.openItem(a)}this._openAllNodeChilds(c,0);if(this.ClosedElem.length>0){this.onLoadReserve=this.onXLE;this.onXLE=this._loadAndOpen;this._loadAndOpen(this)}};dhtmlXTreeObject.prototype._openAllNodeChilds=function(c){if((c.XMLload==0)||(c.unParsed)){this.ClosedElem.push(c)}for(var a=0;a<c.childsCount;a++){if(this._getOpenState(c.childNodes[a])<0){this._HideShow(c.childNodes[a],2)}if(c.childNodes[a].childsCount>0){this._openAllNodeChilds(c.childNodes[a])}if((c.childNodes[a].XMLload==0)||(c.childNodes[a].unParsed)){this.ClosedElem.push(c.childNodes[a])}}};dhtmlXTreeObject.prototype._loadAndOpen=function(a){if(a.G_node){a._openItem(a.G_node);a._openAllNodeChilds(a.G_node);a.G_node=null}if(a.ClosedElem.length>0){a.G_node=a.ClosedElem.shift()}if(a.G_node){if(a.G_node.unParsed){a.reParse(a.G_node)}else{window.setTimeout(function(){a._loadDynXML(a.G_node.id)},100)}}else{a.onXLE=a.onLoadReserve;if(a.onXLE){a.onXLE(a)}a.callEvent("onAllOpenDynamic",[a])}};dhtmlXTreeObject.prototype.openItemsDynamic=function(c,a){if(this.onXLE==this._stepOpen){return}this._opnItmsDnmcFlg=convertStringToBoolean(a);this.onLoadReserve=this.onXLE;this.onXLE=this._stepOpen;this.ClosedElem=c.split(",").reverse();this._stepOpen(this)};dhtmlXTreeObject.prototype._stepOpen=function(c){if(!c.ClosedElem.length){c.onXLE=c.onLoadReserve;if(c._opnItmsDnmcFlg){c.selectItem(c.G_node,true)}if((c.onXLE)&&(arguments[1])){c.onXLE.apply(c,arguments)}c.callEvent("onOpenDynamicEnd",[]);return}c.G_node=c.ClosedElem.pop();c.skipLock=true;var a=c._globalIdStorageFind(c.G_node);if(a){if(a.XMLload===0){c.openItem(c.G_node)}else{c.openItem(c.G_node);c._stepOpen(c)}}c.skipLock=false};function dhtmlXForm(g,f,h){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var d=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(a=="dhx_terrace"?"13px":"12px");this._updateBlocks();this.forEachItem(function(k){var j=d.getItemType(k);if(typeof(d.items[j])!="undefined"&&typeof(d.items[j].setSkin)=="function"){d.doWithItem(k,"setSkin",a)}})};this.skin=(h||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(g)=="object"?g:document.getElementById(g));if(!g._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="dhx_terrace"?"13px":"12px");this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(j){j=(j||event);if(j.keyCode==13){var a=(j.target||j.srcElement);if(typeof(a.tagName)!="undefined"&&String(a.tagName).toLowerCase()=="textarea"&&!j.ctrlKey){return}d.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(o,r){if(this.b_index==null){this.b_index=0}else{this.b_index++}var k=null;var j=null;if(r!=null){if(r<0){r=0}var m=0;for(var a=0;a<this.cont.childNodes.length;a++){for(var n=0;n<this.cont.childNodes[a].childNodes.length;n++){if(j==null&&this.cont.childNodes[a].childNodes[n]._isNestedForm!=true){if(m==r){k=this.cont.childNodes[a].nextSibling;j=this.cont.childNodes[a].childNodes[n]}m++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(o)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+o+"px!important;"}if(k!=null){this.cont.insertBefore(this.base[this.b_index],k);k=null}else{this.cont.appendChild(this.base[this.b_index])}if(j!=null){while(j!=null){var l=j;j=j.nextSibling;this.base[this.b_index].appendChild(l);l=null}}};this.setSizes=function(){};this._mergeSettings=function(n){var k=-1;var l={type:"settings"};for(var j in this.idef){l[j]=this.idef[j]}for(var m=0;m<n.length;m++){if(typeof(n[m])!="undefined"&&n[m].type=="settings"){for(var j in n[m]){l[j]=n[m][j]}k=m}}n[k>=0?k:n.length]=l;return n};this._genStr=function(a){var j="";var l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var k=0;k<a;k++){j+=l.charAt(Math.floor(Math.random()*l.length))}return j};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":g._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(B,n,u,r,y,C,x){if(this.items[B]._index){this.getForm()._indexId.push(n);this.getForm()._idIndex[n]={ind:this.getForm()._indexId.length-1}}if(!B){B=this._type}if(B=="list"&&y!=null&&this.itemPull[this.idPrefix+y]!=null&&typeof(this.itemPull[this.idPrefix+y]._addSubListNode)=="function"){var A=this.itemPull[this.idPrefix+y]._addSubListNode()}else{if(B=="newcolumn"){var A={}}else{var o=this.base[this.b_index];var j=null;if(typeof(C)!="undefined"&&!isNaN(C)&&B!="list"){C=Math.max(parseInt(C),0)+1;for(var E=0;E<this.cont.childNodes.length;E++){for(var l=0;l<this.cont.childNodes[E].childNodes.length;l++){if(j==null&&this.cont.childNodes[E].childNodes[l]._isNestedForm!=true){C--;if(C==0){j=this.cont.childNodes[E].childNodes[l];o=this.cont.childNodes[E]}}}}}else{if(B=="list"){for(var D in this.itemPull){if(D==this.idPrefix+n){j=this.itemPull[D].nextSibling;if(this.itemPull[D]._listBase!=null&&this.itemPull[D]._listBase.length>0){j=this.itemPull[D]._listBase[this.itemPull[D]._listBase.length-1]}}}}}var A=document.createElement("DIV");if(x==true&&j!=null){j=j.nextSibling}if(j!=null){o.insertBefore(A,j)}else{o.appendChild(A)}}}A._idd=n;A._rId=this._rId;if(typeof(A.style)!="undefined"){if(typeof(u.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){u.offsetLeft=this.idef.offsetLeft}if(typeof(u.offsetTop)=="undefined"&&this.idef.offsetTop>0){u.offsetTop=this.idef.offsetTop}var s="";if(typeof(u.offsetLeft)!="undefined"){s+=" padding-left:"+u.offsetLeft+"px!important;"}if(typeof(u.offsetTop)!="undefined"){s+=" padding-top:"+u.offsetTop+"px!important;"}A.style.cssText+=s}if(B=="block"){if(isNaN(u.blockOffset)){u.blockOffset=this.idef.blockOffset}}if(B=="list"){if(typeof(A._ofsNested)=="undefined"){A._ofsNested=this.idef_const.offsetNested}if(r!=null){A._sId=r}var v=this.items[B].render(A,this.skin);if(!this.itemPull[this.idPrefix+n]._listObj){this.itemPull[this.idPrefix+n]._listObj=[]}if(!this.itemPull[this.idPrefix+n]._list){this.itemPull[this.idPrefix+n]._list=[]}if(!this.itemPull[this.idPrefix+n]._listBase){this.itemPull[this.idPrefix+n]._listBase=[]}(this.itemPull[this.idPrefix+n]._listObj).push(v[0]);(this.itemPull[this.idPrefix+n]._list).push(v[1]);(this.itemPull[this.idPrefix+n]._listBase).push(A);v[1].checkEvent=function(a){return d.checkEvent(a)};v[1].callEvent=function(a,k){return d.callEvent(a,k)};v[1].getForm=function(){return d.getForm()};v[1]._initObj(this._mergeSettings(u));if(A._inBlcok){A.className+=" in_block"}return v[1]}if(B=="newcolumn"){this._prepare(u.offset,C);return}if(B=="label"&&this._ic++==0){u._isTopmost=true}u.position=this.apos_css[(!u.position||!this.apos_css[u.position]?this.idef.position:u.position)];A.className=u.position+(typeof(u.className)=="string"?" "+u.className:"");if(!u.labelWidth){u.labelWidth=this.idef.labelWidth}if(!u.labelHeight){u.labelHeight=this.idef.labelHeight}if(typeof(u.wrap)!="undefined"){u.wrap=window.dhx4.s2b(u.wrap)}u.labelAlign=(this.align_css[u.labelAlign]?this.align_css[u.labelAlign]:this.align_css[this.idef.labelAlign]);u.inputWidth=(u.width?u.width:(u.inputWidth?u.inputWidth:this.idef.inputWidth));if(!u.inputHeight){u.inputHeight=this.idef.inputHeight}if(typeof(u.note)!="undefined"){if(u.note.length!=null&&u.note[0]!=null){u.note=u.note[0]}if(typeof(u.note.width)=="undefined"){u.note.width=this.idef.noteWidth}if(u.note.width=="auto"){u.note.width=u.inputWidth}}A.checkEvent=function(a){return d.checkEvent(a)};A.callEvent=function(a,k){return d.callEvent(a,k)};A.getForm=function(){return d.getForm()};A._autoCheck=function(a){d._autoCheck(a)};if(typeof(u.readonly)=="string"){u.readonly=window.dhx4.s2b(u.readonly)}if(typeof(u.autoStart)=="string"){u.autoStart=window.dhx4.s2b(u.autoStart)}if(typeof(u.autoRemove)=="string"){u.autoRemove=window.dhx4.s2b(u.autoRemove)}if(typeof(u.titleScreen)=="string"){u.titleScreen=window.dhx4.s2b(u.titleScreen)}if(typeof(u.info)=="string"){u.info=window.dhx4.s2b(u.info)}if(typeof(u.hidden)=="string"){u.hidden=window.dhx4.s2b(u.hidden)}if(typeof(u.checked)=="string"){u.checked=window.dhx4.s2b(u.checked)}if(typeof(u.userdata)!="undefined"){for(var D in u.userdata){this.getForm().setUserData(n,D,u.userdata[D])}}if(u.validate){if(typeof(u.validate!="undefined")&&(typeof(u.validate)=="function"||typeof(window[u.validate])=="function")){A._validate=[u.validate]}else{A._validate=String(u.validate).split(this.separator)}}if(typeof(u.required)!="undefined"){if(typeof(u.required)=="string"){u.required=window.dhx4.s2b(u.required)}A._required=(u.required==true)}if(A._required){if(!A._validate){A._validate=[]}var m=false;for(l=0;l<A._validate.length;l++){m=(m||(A._validate[l]=="NotEmpty"))}if(!m){A._validate.push("NotEmpty")}}A._ll=(u.position==this.apos_css["label-left"]||u.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+n]=this.items[B].render(A,u);this.itemPull[this.idPrefix+n]=A};this._initObj=function(m,k){if(typeof(m.data)!="undefined"){var n=null;if(typeof(k)!="undefined"){n=k.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(n!=null&&n[0]!=null){n=n[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[n,window.dhx4._copyObj(m.data)])===true){this.formId=n;this._last_load_data=m;this.setFormData(m.data);this.resetDataProcessor("updated")}return}this._prepare();for(var l=0;l<m.length;l++){if(typeof(m[l])!="undefined"&&m[l].type=="settings"){for(var j in m[l]){this.idef[j]=m[l][j]}}}for(var l=0;l<m.length;l++){this._prepareItem(m[l])}this._autoCheck()};this._prepareItem=function(m,q,l){var k=(m!=null&&m.type!=null?m.type:"");if(this.items[k]){if(!m.name){m.name=this._genStr(12)}var o=m.name;if(this.objPull[this.idPrefix+o]!=null||k=="radio"){o=this._genStr(12)}var n=m;n.label=n.label||"";n.value=n.value;n.checked=window.dhx4.s2b(n.checked);n.disabled=window.dhx4.s2b(n.disabled);n.name=n.name||this._genStr(12);n.options=n.options||[];n.rows=n.rows||"none";n.uid=this._genStr(12);this._addItem(k,o,n,null,null,q,l);q=null;if(this._parentEnabled===false){this._disableItem(o)}for(var j=0;j<n.options.length;j++){if(n.options[j].list!=null){if(!n.options[j].value){n.options[j].value=this._genStr()}var a=this._addItem("list",o,n.options[j].list,n.options[j].value,null);a._subSelect=true;a._subSelectId=n.options[j].value}}if(m.list!=null){if(!m.listParent){m.listParent=n.name}var a=this._addItem("list",o,m.list,null,m.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(x,j){if(typeof(j)=="undefined"){j=true}if(j){var A=x.getElementsByTagName("items");A=(A!=null&&A[0]!=null?A[0]:null);var l=x.getElementsByTagName("data");l=(l!=null&&l[0]!=null?l[0]:null)}else{A=x}var v=(j?[]:{});if(A!=null){for(var n=0;n<A.childNodes.length;n++){if(typeof(A.childNodes[n].tagName)!="undefined"){var o=A.childNodes[n].tagName;if(this._xmlSubItems[o]!=null){var r=this._xmlSubItems[o];if(typeof(v[r])=="undefined"){v[r]=[]}var u={};for(var E=0;E<A.childNodes[n].attributes.length;E++){var B=A.childNodes[n].attributes[E].name;var y=A.childNodes[n].attributes[E].value;u[B]=y}if(r=="note"){u.text=A.childNodes[n].firstChild.nodeValue}if(r=="_userdata"){u.value=A.childNodes[n].firstChild.nodeValue}var s=this._xmlToObject(A.childNodes[n],false);for(var C in s){if(C=="_userdata"){if(!u.userdata){u.userdata={}}for(var E=0;E<s[C].length;E++){u.userdata[s[C][E].name]=s[C][E].value}}else{u[C]=s[C]}}if(j){v.push(u)}else{v[r].push(u)}}}}}if(l!=null){v={data:{}};for(var n=0;n<l.childNodes.length;n++){if(typeof(l.childNodes[n].tagName)!="undefined"){var m=l.childNodes[n].tagName;var D=(l.childNodes[n].firstChild!=null?l.childNodes[n].firstChild.nodeValue:"");v.data[m]=D}}}return v};this._autoCheck=function(n){if(this._locked===true){n=false}else{if(typeof(n)=="undefined"){n=true}}for(var l in this.itemPull){var o=(n&&(this.itemPull[l]._udis!==true));this[o?"_enableItem":"_disableItem"](this.itemPull[l]._idd);if(this.getForm()._idIndex[this.itemPull[l]._idd]!=null){this.getForm()._idIndex[this.itemPull[l]._idd].enabled=o}var k=(o&&(typeof(this.itemPull[l]._checked)=="boolean"?this.itemPull[l]._checked:true));if(this.itemPull[l]._list){for(var s=0;s<this.itemPull[l]._list.length;s++){var r=true;if(this.itemPull[l]._list[s]._subSelect==true){r=false;var m=this.getItemValue(this.itemPull[l]._idd);if(!(typeof(m)=="object"&&typeof(m.length)=="number")){m=[m]}for(var j=0;j<m.length;j++){r=(m[j]==this.itemPull[l]._list[s]._subSelectId)||r}this.itemPull[l]._listObj[s][r?"show":"hide"](this.itemPull[l]._listBase[s])}this.itemPull[l]._list[s]._autoCheck(k&&r)}}}};this.doWithItem=function(m,j,v,u,s,r){if(typeof(m)=="object"){var x=m[0];var w=m[1];var y=null;var o=null;for(var n in this.itemPull){if((this.itemPull[n]._value==w||w===null)&&this.itemPull[n]._group==x){return this.objPull[n][j](this.itemPull[n],v,u,s,r)}if(this.itemPull[n]._list!=null&&!o){for(var l=0;l<this.itemPull[n]._list.length;l++){o=this.itemPull[n]._list[l].doWithItem(m,j,v,u,s)}}}if(o!=null){return o}else{if(j=="getType"){return this.doWithItem(m[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+m]){var o=null;for(var n in this.itemPull){if(this.itemPull[n]._list&&!o){for(var l=0;l<this.itemPull[n]._list.length;l++){if(o==null){o=this.itemPull[n]._list[l].doWithItem(m,j,v,u,s,r)}}}}return o}else{return this.objPull[this.idPrefix+m][j](this.itemPull[this.idPrefix+m],v,u,s,r)}}};this._removeItem=function(j,a){if(a!=null){j=this.doWithItem([j,a],"destruct")}else{this.doWithItem(j,"destruct")}this._clearItemData(j)};this._clearItemData=function(m){if(this.itemPull[this.idPrefix+m]){m=this.idPrefix+m;try{this.objPull[m]=null;this.itemPull[m]=null;delete this.objPull[m];delete this.itemPull[m]}catch(l){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var j=0;j<this.itemPull[a]._list.length;j++){this.itemPull[a]._list[j]._clearItemData(m)}}}}};this.isItem=function(j,a){if(a!=null){j=[j,a]}return this.doWithItem(j,"isExist")};this.getItemType=function(j,a){j=[j,(a||null)];return this.doWithItem(j,"getType")};this.forEachItem=function(k){for(var j in this.objPull){if(this.objPull[j].t=="radio"){k(this.itemPull[j]._group,this.itemPull[j]._value)}else{k(String(j).replace(this.idPrefix,""))}if(this.itemPull[j]._list){for(var l=0;l<this.itemPull[j]._list.length;l++){this.itemPull[j]._list[l].forEachItem(k)}}}};this.setItemLabel=function(k,a,j){if(j!=null){k=[k,a]}else{j=a}this.doWithItem(k,"setText",j)};this.getItemLabel=function(j,a){if(a!=null){j=[j,a]}return this.doWithItem(j,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"check");this._autoCheck()};this.uncheckItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"unCheck");this._autoCheck()};this.isItemChecked=function(j,a){if(a!=null){j=[j,a]}return this.doWithItem(j,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(n,m){for(var j in this.itemPull){if(this.itemPull[j]._group==n&&(m==null||this.itemPull[j]._value==m)){return this.itemPull[j]._idd}if(this.itemPull[j]._list!=null){for(var l=0;l<this.itemPull[j]._list.length;l++){var k=this.itemPull[j]._list[l]._getRGroup(n,m);if(k!=null){return k}}}}return null};this.setItemValue=function(j,a){if(this.getItemType(j)=="radio"){if(this._getRGroup(j,a)!=null){this.checkItem(j,a)}else{this.uncheckItem(j,this.getCheckedValue(j))}return null}return this.doWithItem(j,"setValue",a)};this.getItemValue=function(j,a){if(this.getItemType(j)=="radio"){return this.getCheckedValue(j)}return this.doWithItem(j,"getValue",a)};this.updateValues=function(){this._updateValues()};this.showItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"show")};this.hideItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"hide")};this.isItemHidden=function(j,a){if(a!=null){j=[j,a]}return this.doWithItem(j,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(j,a){this.doWithItem(j,"setWidth",a)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(j,a){this.doWithItem(j,"setHeight",a)};this.setItemFocus=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"setFocus")};this._updateValues=function(){for(var j in this.itemPull){if(this.objPull[j]&&typeof(this.objPull[j].updateValue)=="function"){this.objPull[j].updateValue(this.itemPull[j])}if(this.itemPull[j]._list){for(var k=0;k<this.itemPull[j]._list.length;k++){this.itemPull[j]._list[k]._updateValues()}}}};this._getItemByName=function(m){for(var j in this.itemPull){if(this.itemPull[j]._idd==m){return this.itemPull[j]}if(this.itemPull[j]._list!=null){for(var l=0;l<this.itemPull[j]._list.length;l++){var k=this.itemPull[j]._list[l]._getItemByName(m);if(k!=null){return k}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,l,k){var j=this[this.getItemType(a)=="radio"?"_getRGroup":"_getItemByName"](a);if(!j){return}if(j._vcss!=null){this._resetValidateCss(j)}j._vcss=(typeof(k)=="string"?k:"validate_"+(l===true?"ok":"error"));j.className+=" "+j._vcss};this.resetValidateCss=function(k){for(var j in this.itemPull){if(this.itemPull[j]._vcss!=null){this._resetValidateCss(this.itemPull[j])}if(this.itemPull[j]._list!=null){for(var l=0;l<this.itemPull[j]._list.length;l++){this.itemPull[j]._list[l].resetValidateCss()}}}};this.validate=function(j){if(this.callEvent("onBeforeValidate",[])==false){return}var a=true;this.forEachItem(function(m,n){if(typeof(n)!="undefined"){m=[m,n]}var l=d.doWithItem(m,"_validate");if(typeof(l)!="boolean"){l=true}a=l&&a});this.callEvent("onAfterValidate",[a]);return a};this.validateItem=function(a,j){if(typeof(j)!="undefined"){a=[a,j]}return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(j,a){this.doWithItem(j,"setReadonly",a)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(j){for(var m=0;m<this._indexId.length;m++){var a=true;if(j==true){var l=this.getItemType(this._indexId[m]);if(!dhtmlXForm.prototype.items[l].setFocus){a=false}}if(a&&this._idIndex[this._indexId[m]].enabled){return this._indexId[m]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"userEnable");this._autoCheck()};this.disableItem=function(j,a){if(a!=null){j=[j,a]}this.doWithItem(j,"userDisable");this._autoCheck()};this.isItemEnabled=function(j,a){if(a!=null){j=[j,a]}return this.doWithItem(j,"isUserEnabled")};this.clear=function(){var j={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var k in this.itemPull){var l=this.itemPull[k]._idd;if(this.itemPull[k]._type=="ch"){this.uncheckItem(l)}if(this.itemPull[k]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(l,"")}if(this.itemPull[k]._type=="combo"){this.itemPull[k]._apiChange=true;var r=this.getCombo(l);r.selectOption(0);r=null;this.itemPull[k]._apiChange=false}if(this.itemPull[k]._type=="se"){var n=this.getOptions(l);if(n.length>0){n[0].selected=true}}if(this.itemPull[k]._type=="ra"){var m=this.itemPull[k]._group;if(!j[m]){this.checkItem(m,this.doWithItem(l,"_getFirstValue"));j[m]=true}}if(this.itemPull[k]._list){for(var o=0;o<this.itemPull[k]._list.length;o++){this.itemPull[k]._list[o].clear()}}if(this["setFormData_"+this.itemPull[k]._type]){this["setFormData_"+this.itemPull[k]._type](l,"")}}j=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var j in this.objPull){this._removeItem(String(j).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var k=0;k<this.base.length;k++){while(this.base[k].childNodes.length>0){this.base[k].removeChild(this.base[k].childNodes[0])}if(this.base[k].parentNode){this.base[k].parentNode.removeChild(this.base[k])}this.base[k]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var j in this){this[j]=null}d=null};for(var c in this.items){this.items[c].t=c;if(typeof(this.items[c]._index)=="undefined"){this.items[c]._index=true}if(!this.items[c].show){this.items[c].show=function(a){a.style.display="";if(a._listObj){for(var j=0;j<a._listObj.length;j++){a._listObj[j].show(a._listBase[j])}}}}if(!this.items[c].hide){this.items[c].hide=function(a){a.style.display="none";if(a._listObj){for(var j=0;j<a._listObj.length;j++){a._listObj[j].hide(a._listBase[j])}}}}if(!this.items[c].isHidden){this.items[c].isHidden=function(a){return(a.style.display=="none")}}if(!this.items[c].userEnable){this.items[c].userEnable=function(a){a._udis=false}}if(!this.items[c].userDisable){this.items[c].userDisable=function(a){a._udis=true}}if(!this.items[c].isUserEnabled){this.items[c].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[c].getType){this.items[c].getType=function(){return this.t}}if(!this.items[c].isExist){this.items[c].isExist=function(){return true}}if(!this.items[c]._validate){this.items[c]._validate=function(k){if(!k._validate||!k._enabled){return true}if(k._type=="ch"){var n=(this.isChecked(k)?this.getValue(k):0)}else{var n=this.getValue(k)}var j=true;for(var m=0;m<k._validate.length;m++){var a="is"+k._validate[m];if((n==null||n.length==0)&&a!="isNotEmpty"&&k._type!="container"){}else{var l=dhtmlxValidation[a];if(k._type=="container"&&typeof(l)=="function"){l=function(){return true}}if(typeof(l)!="function"&&typeof(k._validate[m])=="function"){l=k._validate[m]}if(typeof(l)!="function"&&typeof(window[k._validate[m]])=="function"){l=window[k._validate[m]]}j=((typeof(l)=="function"?l(n,k._idd):new RegExp(k._validate[m]).test(n))&&j);l=null}}if(!(k.callEvent("onValidate"+(j?"Success":"Error"),[k._idd,n,j])===false)){k.getForm().setValidateCss(k._idd,j)}return j}}}this._locked=false;this._doLock=function(j){var a=(j===true?true:false);if(this._locked==a){return}else{this._locked=a}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(l,j,a,k){return this.doWithItem(l,"setNumberFormat",j,a,k)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,j){this.callEvent("onButtonClick",[a,j])});this._updateBlocks=function(){this.forEachItem(function(a){if(d.getItemType(a)=="block"||d.getItemType(a)=="combo"){d.doWithItem(a,"_setCss",d.skin,d.cont.style.fontSize)}})};this._isObj=function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")};this._copyObj=function(l){if(this._isObj(l)){var k={};for(var j in l){if(typeof(l[j])=="object"&&l[j]!=null){k[j]=this._copyObj(l[j])}else{k[j]=l[j]}}}else{var k=[];for(var j=0;j<l.length;j++){if(typeof(l[j])=="object"&&l[j]!=null){k[j]=this._copyObj(l[j])}else{k[j]=l[j]}}}return k};if(f!=null&&typeof(f)=="object"){this._initObj(this._copyObj(f))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(a,c){a._type="ch";a._enabled=true;a._checked=false;a._value=(typeof(c.value)=="undefined"?null:String(c.value));a._ro=(c.readonly==true);if(c._autoInputWidth!==false){c.inputWidth=14}this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",true,true,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var d=document.createElement("DIV");d.className="dhxform_img chbx0";a.appendChild(d);if(!isNaN(c.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+"px"}a.childNodes[a._ll?1:0].appendChild(d);a.childNodes[a._ll?1:0].firstChild.value=String(c.value);a._updateImgNode=function(g,h){var f=g.childNodes[g._ll?1:0].lastChild;f.className=(h?"dhxform_actv_c":"dhxform_img")+" "+(g._checked?"chbx1":"chbx0");g=f=null};a._doOnFocus=function(f){f.getForm().callEvent("onFocus",[f._idd])};a._doOnBlur=function(f){f.getForm().callEvent("onBlur",[f._idd])};a._doOnKeyUpDown=function(g,f){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],f,this._idd])};if(c.checked==true){this.check(a)}if(c.hidden==true){this.hide(a)}if(c.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(c,d){var a=document.createElement("DIV");a.className="dhxform_label "+d.labelAlign;if(d.wrap==true){a.style.whiteSpace="normal"}if(c._ll){c.insertBefore(a,c.firstChild)}else{c.appendChild(a)}if(typeof(d.tooltip)!="undefined"){a.title=d.tooltip}a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(d.labelWidth)){a.firstChild.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.firstChild.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}},doAddInput:function(r,f,c,l,m,g,h){var a=document.createElement("DIV");a.className="dhxform_control";if(r._ll){r.appendChild(a)}else{r.insertBefore(a,r.firstChild)}var q=document.createElement(c);q.className=h;q.name=r._idd;q._idd=r._idd;q.id=f.uid;if(typeof(l)=="string"){q.type=l}if(c=="INPUT"||c=="TEXTAREA"){q.onkeyup=function(s){s=s||event;r.callEvent("onKeyUp",[this,s,this._idd])};q.onkeydown=function(s){s=s||event;r.callEvent("onKeyDown",[this,s,this._idd])}}a.appendChild(q);if(f.readonly){this.setReadonly(r,true)}if(f.hidden==true){this.hide(r)}if(f.disabled==true){this.userDisable(r)}if(m){if(!isNaN(f.inputLeft)){a.style.left=parseInt(f.inputLeft)+"px"}if(!isNaN(f.inputTop)){a.style.top=parseInt(f.inputTop)+"px"}}var o="";var j=false;if(g){if(!isNaN(f.inputWidth)){o+="width:"+parseInt(f.inputWidth)+"px;";j=true}if(!isNaN(f.inputHeight)){o+="height:"+parseInt(f.inputHeight)+"px;"}}if(typeof(f.style)=="string"){o+=f.style}q.style.cssText=o;if(f.maxLength){q.setAttribute("maxLength",f.maxLength)}if(f.connector){q.setAttribute("connector",f.connector)}if(j&&{input:1,password:1,select:1,calendar:1,colorpicker:1}[this.t]){if(dhtmlXForm.prototype.items[this.t]._dim==null){var n=parseInt(q.style.width);var d=(dhx4.isFF||dhx4.isIE?q.offsetWidth:q.clientWidth);dhtmlXForm.prototype.items[this.t]._dim=d-n}q.style.width=parseInt(q.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(f.note)=="object"){var k=document.createElement("DIV");k.className="dhxform_note";k.style.width=(isNaN(f.note.width)?q.offsetWidth:parseInt(f.note.width))+"px";k._w=f.note.width;k.innerHTML=f.note.text;a.appendChild(k);k=null}},doUnloadNestedLists:function(a){if(!a._list){return}for(var c=0;c<a._list.length;c++){a._list[c].unload();a._list[c]=null;a._listObj[c]=null;a._listBase[c].parentNode.removeChild(a._listBase[c]);a._listBase[c]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}var d=(f.target||f.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(d.className)!="undefined"&&d.className=="dhxform_note")){f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}a.doClick(this.parentNode)};c.childNodes[c._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}if(!this.parentNode.parentNode._enabled){f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}var d=f.target||f.srcElement;if(typeof(d.className)!="undefined"&&d.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd]);f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==true){return}}this.setChecked(a,!a._checked);a._autoCheck();a.callEvent("onChange",[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&&a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value=""}},setChecked:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,true)},unCheck:function(a){this.setChecked(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,c){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,c){this.setChecked(a,(c===true||parseInt(c)==1||c=="true"||a._value===c))},getValue:function(a,c){if(c=="realvalue"){return a._value}return((typeof(a._value)=="undefined"||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,c){a._ro=(c===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(d,f,c){d._type="ra";d._enabled=true;d._checked=false;d._group=f.name;d._value=f.value;d._uid=c;d._ro=(f.readonly==true);d._rName=d._rId+d._group;this.r[d._idd]=d;f.inputWidth=14;this.doAddLabel(d,f);this.doAddInput(d,f,"INPUT","TEXT",true,true,"dhxform_textarea");d.childNodes[d._ll?1:0].className+=" dhxform_img_node";var g=document.createElement("DIV");g.className="dhxform_img rdbt0";d.appendChild(g);if(!isNaN(f.inputLeft)){d.childNodes[d._ll?1:0].style.left=parseInt(f.inputLeft)+"px"}if(!isNaN(f.inputTop)){d.childNodes[d._ll?1:0].style.top=parseInt(f.inputTop)+"px"}d.childNodes[d._ll?1:0].appendChild(g);d.childNodes[d._ll?1:0].firstChild.name="";d.childNodes[d._ll?1:0].firstChild.value="";d._updateImgNode=function(j,k){var h=j.childNodes[j._ll?1:0].lastChild;h.className=(k?"dhxform_actv_r":"dhxform_img")+" "+(j._checked?"rdbt1":"rdbt0");j=h=null};d._doOnFocus=function(h){h.getForm().callEvent("onFocus",[h._group,h._value])};d._doOnBlur=function(h){h.getForm().callEvent("onBlur",[h._group,h._value])};d._doOnKeyUpDown=function(j,h){this.callEvent(j,[this.childNodes[this._ll?0:1].childNodes[0],h,this._group,this._value])};if(this.input[d._rName]==null){var a=document.createElement("INPUT");a.type="HIDDEN";a.name=f.name;a.firstValue=d._value;d.appendChild(a);this.input[d._rName]=a}if(!this.firstValue[d._rName]){this.firstValue[d._rName]=f.value}if(f.checked==true){this.check(d)}if(f.hidden==true){this.hide(d)}if(f.disabled==true){this.userDisable(d)}this.doAttachEvents(d);return this},destruct:function(f,g){if(f.lastChild==this.input[f._rName]){var d=false;for(var c in this.r){if(!d&&this.r[c]._group==f._group&&this.r[c]._idd!=f._idd){this.r[c].appendChild(this.input[f._rName]);d=true}}if(!d){this.input[f._rName].parentNode.removeChild(this.input[f._rName]);this.input[f._rName]=null;this.firstValue[f._rName]=null}}var h=f._idd;f._doOnFocus=f._doOnBlur=f._updateImgNode=null;this.doUnloadNestedLists(f);this.doDestruct(f);return h},doClick:function(c){c.childNodes[c._ll?0:1].childNodes[0].focus();if(!(c._enabled&&!c._checked)){return}if(c._ro){return}var a=[c._group,c._value,true];if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",a)!==true){return}}this.setChecked(c,true);c.getForm()._autoCheck();c.callEvent("onChange",a)},doCheckValue:function(d){var f=null;for(var c in this.r){if(this.r[c]._checked&&this.r[c]._group==d._group&&this.r[c]._rId==d._rId){f=this.r[c]._value}}if(f!=null&&this.r[c]._enabled){this.input[d._rName].name=String(d._group);this.input[d._rName].value=f}else{this.input[d._rName].name="";this.input[d._rName].value=""}this.input[d._rName]._value=f},setChecked:function(g,h){h=(h===true);for(var c in this.r){if(this.r[c]._group==g._group&&this.r[c]._rId==g._rId){var f=false;if(this.r[c]._idd==g._idd){if(this.r[c]._checked!=h){this.r[c]._checked=h;f=true}}else{if(this.r[c]._checked){this.r[c]._checked=false;f=true}}if(f){var d=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];d.className=d.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[c]._checked?" rdbt1":" rdbt0");d=null}}}this.doCheckValue(g)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,c){}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.select={render:function(a,c){a._type="se";a._enabled=true;a._value=null;a._newValue=null;if(window.dhx4.isFF||window.dhx4.isIE&&typeof(c.inputWidth)=="number"){c.inputWidth=Number(c.inputWidth)}this.doAddLabel(a,c);this.doAddInput(a,c,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,c);if(c.connector!=null){this.doLoadOptsConnector(a,c.connector)}if(typeof(c.value)!="undefined"&&c.value!=null){this.setValue(a,c.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(c,d){var a=document.createElement("DIV");a.className="dhxform_label "+d.labelAlign;a.innerHTML="<label for='"+d.uid+"'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(d.wrap==true){a.style.whiteSpace="normal"}if(typeof(d.tooltip)!="undefined"){a.title=d.tooltip}c.appendChild(a);if(typeof(d.label)=="undefined"||d.label==null||d.label.length==0){a.style.display="none"}if(!isNaN(d.labelWidth)){a.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}if(d.info){a.onclick=function(g){g=g||event;var f=g.target||g.srcElement;if(typeof(f.className)!="undefined"&&f.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd]);g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false}}}},doAttachEvents:function(d){var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onclick=function(){c.doOnChange(this)};a.onkeydown=function(f){f=f||event;c.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,f,this.parentNode.parentNode._idd])};a.onchange=function(){c.doOnChange(this)};a.onkeyup=function(f){f=f||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,f,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(d)},doAttachChangeLS:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.onfocus=function(){var d=this.parentNode.parentNode;d.getForm()._ccActivate(d._idd,this,d.getForm().getItemValue(d._idd,true));d.getForm().callEvent("onFocus",[d._idd]);d=null};a.onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);d.getForm().callEvent("onBlur",[d._idd]);d=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(j,g,m){var l=j.childNodes[j._ll?1:0].childNodes[0];var a=g.options;var f=false;for(var c=0;c<a.length;c++){var h=a[c].text||a[c].label;if(!h||typeof(h)=="undefined"){h=""}var d=new Option(h,a[c].value);if(typeof(a[c].img_src)=="string"){d.setAttribute("img_src",a[c].img_src)}l.options.add(d);if(typeof(a[c].selected)!="undefined"&&window.dhx4.s2b(a[c].selected)==true){d.selected=true;j._value=a[c].value;f=true}if(typeof(a[c].checked)!="undefined"&&window.dhx4.s2b(a[c].checked)==true){d.setAttribute("checked","1")}if(typeof(a[c].img)!="undefined"){d.setAttribute("img",a[c].img)}if(typeof(a[c].img_dis)!="undefined"){d.setAttribute("img_dis",a[c].img_dis)}}if(!f&&l.selectedIndex>=0){j._value=l.options[l.selectedIndex].value}if(m===true){j.callEvent("onOptionsLoaded",[j._idd])}this._checkNoteWidth(j)},doLoadOptsConnector:function(d,a){var c=this;d._connector_working=true;window.dhx4.ajax.get(a,function(j){j=j.xmlDoc.responseXML;if(j==null){return}var f=j.getElementsByTagName("data");if(f==null||f[0]==null){return}f=f[0];var h=[];for(var k=0;k<f.childNodes.length;k++){if(typeof(f.childNodes[k].tagName)!="undefined"&&String(f.childNodes[k].tagName).toLowerCase()=="item"){var g=f.childNodes[k];h.push({label:g.getAttribute("label"),value:g.getAttribute("value"),selected:(g.getAttribute("selected")!=null)});g=null}}c.doLoadOpts(d,{options:h},true);d._connector_working=false;if(d._connector_value!=null){c.setValue(d,d._connector_value);d._connector_value=null}c=d=null})},doOnChange:function(d){var a=d.parentNode.parentNode;a._newValue=(d.selectedIndex>=0?d.options[d.selectedIndex].value:null);if(a._newValue!=a._value){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])!==true){for(var c=0;c<d.options.length;c++){if(d.options[c].value==a._value){d.options[c].selected=true}}return}}a._value=a._newValue;a.callEvent("onChange",[a._idd,a._value]);if(a._type=="se"&&a.getForm().live_validate){this._validate(a)}}a._autoCheck()},setText:function(a,c){if(!c){c=""}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?0:1].style.display=(c.length==0||c==null?"none":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(c,f){if(c._connector_working){c._connector_value=f;return}var a=this.getOptions(c);for(var d=0;d<a.length;d++){if(a[d].value==f){a[d].selected=true;c._value=a[d].value}}if(c._list!=null&&c._list.length>0){c.getForm()._autoCheck()}c.getForm()._ccReload(c._idd,c._value)},getValue:function(d){var a=-1;var c=this.getOptions(d);for(var f=0;f<c.length;f++){if(c[f].selected){a=c[f].value}}return a},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(c){var a;if(c.childNodes[c._ll?1:0].childNodes[1]!=null){a=c.childNodes[c._ll?1:0].childNodes[1];if(a.className!=null&&a.className.search(/dhxform_note/gi)>=0&&a._w=="auto"){a.style.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth+"px"}}a=null}};(function(){for(var c in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(f,h,j){var c=f.childNodes[f._ll?1:0].childNodes[0];c.multiple=true;if(!isNaN(h.size)){c.size=Number(h.size)}f._value=[];f._newValue=[];var d=h.options;for(var g=0;g<d.length;g++){var a=new Option(d[g].text||d[g].label,d[g].value);c.options.add(a);if(d[g].selected==true||d[g].selected=="true"){a.selected=true;f._value.push(d[g].value)}}if(j===true){f.callEvent("onOptionsLoaded",[f._idd])}this._checkNoteWidth(f)},doAttachEvents:function(d){var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onfocus=function(){c.doOnChange(this);var f=this.parentNode.parentNode;f.getForm().callEvent("onFocus",[f._idd]);f=null};a.onblur=function(){c.doOnChange(this);var f=this.parentNode.parentNode;f.getForm().callEvent("onBlur",[f._idd]);f=null};a.onclick=function(){c.doOnChange(this);var f=this.parentNode.parentNode;f._autoCheck();f=null}},doOnChange:function(f){var c=f.parentNode.parentNode;c._newValue=[];for(var d=0;d<f.options.length;d++){if(f.options[d].selected){c._newValue.push(f.options[d].value)}}if((c._value).sort().toString()!=(c._newValue).sort().toString()){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,c._newValue])!==true){var a={};for(var d=0;d<c._value.length;d++){a[c._value[d]]=true}for(var d=0;d<f.options.length;d++){f.options[d].selected=(a[f.options[d].value]==true)}a=null;return}}c._value=[];for(var d=0;d<c._newValue.length;d++){c._value.push(c._newValue[d])}c.callEvent("onChange",[c._idd,c._value])}c._autoCheck()},setValue:function(d,g){var a={};if(typeof(g)=="string"){g=g.split(",")}if(typeof(g)!="object"){g=[g]}for(var f=0;f<g.length;f++){a[g[f]]=true}var c=this.getOptions(d);for(var f=0;f<c.length;f++){c[f].selected=(a[c[f].value]==true)}d._autoCheck()},getValue:function(d){var a=[];var c=this.getOptions(d);for(var f=0;f<c.length;f++){if(c[f].selected){a.push(c[f].value)}}return a}};(function(){for(var c in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[c]){dhtmlXForm.prototype.items.multiselect[c]=dhtmlXForm.prototype.items.select[c]}}})();dhtmlXForm.prototype.items.input={render:function(h,j){var g=(!isNaN(j.rows));h._type="ta";h._enabled=true;this.doAddLabel(h,j);this.doAddInput(h,j,(g?"TEXTAREA":"INPUT"),(g?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(h);if(g){h.childNodes[h._ll?1:0].childNodes[0].rows=Number(j.rows)+(window.dhx4.isIE6?1:0)}if(typeof(j.numberFormat)!="undefined"){var f,d=null,k=null;if(typeof(j.numberFormat)!="string"){f=j.numberFormat[0];d=j.numberFormat[1]||null;k=j.numberFormat[2]||null}else{f=j.numberFormat;if(typeof(j.groupSep)=="string"){d=j.groupSep}if(typeof(j.decSep)=="string"){k=j.decSep}}this.setNumberFormat(h,f,d,k,false)}this.setValue(h,j.value);return this},doAttachEvents:function(c){var a=this;if(c._type=="ta"||c._type=="se"||c._type=="pw"){c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){var d=this.parentNode.parentNode;if(d._df!=null){this.value=d._value||""}d.getForm()._ccActivate(d._idd,this,this.value);d.getForm().callEvent("onFocus",[d._idd]);d=null}}c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);a.updateValue(d,true);if(d.getForm().live_validate){a._validate(d)}d.getForm().callEvent("onBlur",[d._idd]);d=null}},updateValue:function(d,a){var f=d.childNodes[d._ll?1:0].childNodes[0].value;if(!a&&d._df!=null&&f==this._getFmtValue(d,f)){return}var c=this;if(d._value!=f){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,f])!==true){if(d._df!=null){c.setValue(d,d._value)}else{d.childNodes[d._ll?1:0].childNodes[0].value=d._value}return}}if(d._df!=null){c.setValue(d,f)}else{d._value=f}d.callEvent("onChange",[d._idd,f]);return}if(d._df!=null){this.setValue(d,d._value)}},setValue:function(d,f){d._value=(typeof(f)!="undefined"&&f!=null?f:"");var c=(String(d._value)||"");var a=d.childNodes[d._ll?1:0].childNodes[0];if(d._df!=null&&typeof(this._getFmtValue)=="function"){c=this._getFmtValue(d,c)}if(a.value!=c){a.value=c;d.getForm()._ccReload(d._idd,c)}a=null},getValue:function(a){var c=a.getForm();if(c._formLS&&c._formLS[a._idd]!=null){this.updateValue(a)}c=null;return(typeof(a._value)!="undefined"&&a._value!=null?a._value:"")},setReadonly:function(a,c){a._ro=(c===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(h,k,g,l,c){if(typeof(c)!="boolean"){c=true}if(k==""){h._df=null;if(c){this.setValue(h,h._value)}return true}if(typeof(k)!="string"){return}var a=k.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(a==null||a.length!=4){return false}h._df={i_len:false,i_sep:(typeof(g)=="string"?g:","),d_len:false,d_sep:(typeof(l)=="string"?l:"."),s_bef:(typeof(a[1])=="string"?a[1]:""),s_aft:(typeof(a[3])=="string"?a[3]:"")};var j=a[2].split(".");if(j[1]!=null){h._df.d_len=j[1].length}var d=j[0].split(",");if(d.length>1){h._df.i_len=d[d.length-1].length}if(c){this.setValue(h,h._value)}return true},_getFmtValue:function(item,v){var r=v.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=item._df.s_bef;if(item._df.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==item._df.i_len&&q>0){v1=item._df.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(item._df.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<item._df.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+item._df.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=item._df.d_sep+t1}dhx4.temp=t1=null}v0+=item._df.s_aft;return v0}return v}};(function(){for(var c in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.password={render:function(a,c){a._type="pw";a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,c.value);return this}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.file={render:function(d,f){d._type="fl";d._enabled=true;this.doAddLabel(d,f);this.doAddInput(d,f,"INPUT","FILE",true,false,"dhxform_textarea");var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onfocus=function(){var g=this.parentNode.parentNode;g.getForm().callEvent("onFocus",[g._idd]);g=null};a.onblur=function(){var g=this.parentNode.parentNode;if(g.getForm().live_validate){c._validate(g)}g.getForm().callEvent("onBlur",[g._idd]);g=null};a=null;d.childNodes[d._ll?1:0].childNodes[0].onchange=function(){d.callEvent("onChange",[d._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var c in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(c,d){c._type="lb";c._enabled=true;c._checked=true;var a=document.createElement("DIV");a.className="dhxform_txt_label2"+(d._isTopmost?" topmost":"");a.innerHTML=d.label;c.appendChild(a);if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}if(!isNaN(d.labelWidth)){a.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false},setText:function(a,c){a.firstChild.innerHTML=c},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.button={render:function(d,f){d._type="bt";d._enabled=true;d._name=f.name;d.className=String(d.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");if(!isNaN(f.width)){var a=Math.max(f.width,10)}var c=(typeof(a)!="undefined");d._doOnKeyUpDown=function(h,g){this.callEvent(h,[this.childNodes[0].childNodes[0],g,this._idd])};d.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt" '+(c?' style="width:'+a+'px;"':"")+">"+f.value+"</div></div>";if(!isNaN(f.inputLeft)){d.childNodes[0].style.left=parseInt(f.inputLeft)+"px"}if(!isNaN(f.inputTop)){d.childNodes[0].style.top=parseInt(f.inputTop)+"px"}if(f.hidden==true){this.hide(d)}if(f.disabled==true){this.userDisable(d)}if(typeof(f.tooltip)!="undefined"){d.firstChild.title=f.tooltip}d.onselectstart=function(g){g=g||event;g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};d.firstChild.onselectstart=function(g){g=g||event;g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};d.firstChild.onkeypress=function(g){g=g||event;if((g.keyCode==32||g.charCode==32||g.keyCode==13||g.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};d.firstChild.ontouchstart=function(){e=e||event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"])}};d.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};d.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};d.firstChild.onkeyup=function(g){this.parentNode._doOnKeyUpDown("onKeyUp",g||event)};d.firstChild.onkeydown=function(g){this.parentNode._doOnKeyUpDown("onKeyDown",g||event)};d.firstChild.onmouseover=function(){var g=this.parentNode;if(!g._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";g=null};d.firstChild.onmouseout=function(){var g=this.parentNode;if(!g._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;g=null};d.firstChild.onmousedown=function(h){h=h||event;if(h.button>=2){return}if(this._pressed){return}var g=this.parentNode;if(!g._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;g=null};d.firstChild.onmouseup=function(h){h=h||event;if(h.button>=2){return}if(!this._pressed){return}var g=this.parentNode;if(!g._enabled){return}g._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){g.callEvent("_onButtonClick",[g._name,g._cmd])}this._allowClick=false;this._pressed=false;g=null};d._doOnFocus=function(g){g.getForm().callEvent("onFocus",[g._idd])};d._doOnBlur=function(g){g.getForm().callEvent("onBlur",[g._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(c,d){c.style.display="none";c._name=d.name;c._type="hd";c._enabled=true;var a=document.createElement("INPUT");a.type="HIDDEN";a.name=d.name;a.value=(d.value||"");c.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,c){a.childNodes[0].value=c},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(a,c){a._type="list";a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,c)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(c,g){c._type="fs";if(typeof(parseInt(g.inputWidth))=="number"){}c._width=g.width;c._enabled=true;c._checked=true;c.className="fs_"+g.position+(typeof(g.className)=="string"?" "+g.className:"");var d=document.createElement("FIELDSET");d.className="dhxform_fs";var h=String(g.labelAlign).replace("align_","");d.innerHTML="<legend class='fs_legend' align='"+h+"' style='text-align:"+h+"'>"+g.label+"</legend>";c.appendChild(d);if(!isNaN(g.inputLeft)){d.style.left=parseInt(g.inputLeft)+"px"}if(!isNaN(g.inputTop)){d.style.top=parseInt(g.inputTop)+"px"}if(g.inputWidth!="auto"){if(!isNaN(g.inputWidth)){d.style.width=parseInt(g.inputWidth)+"px";var a=parseInt(d.style.width);if(d.offsetWidth>a){d.style.width=a+(a-d.offsetWidth)+"px"}}}c._addSubListNode=function(){var f=document.createElement("DIV");f._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(f);return f};if(g.hidden==true){this.hide(c)}if(g.disabled==true){this.userDisable(c)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}},setWidth:function(c,a){c.childNodes[0].style.width=a+"px";c._width=a},getWidth:function(a){return a._width}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(c,d){c._type="bl";c._width=d.width;c._enabled=true;c._checked=true;c.className="block_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block";a.style.fontSize=c.getForm().cont.style.fontSize;if(d.style){a.style.cssText=d.style}if(typeof(d.id)!="undefined"){a.id=d.id}c.appendChild(a);if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}if(!isNaN(d.blockOffset)){c._ofsNested=d.blockOffset}c._addSubListNode=function(){var f=document.createElement("DIV");f._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){f._ofsNested=this._ofsNested}this.childNodes[0].appendChild(f);return f};if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}return this},_setCss:function(a,d,c){a.firstChild.className="dhxform_obj_"+d+" dhxform_block";a.firstChild.style.fontSize=c}};(function(){for(var c in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[c]=dhtmlXForm.prototype.items.fieldset[c]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(c,d){var a=(!isNaN(d.rows));c._type="tp";c._enabled=true;if(d.format){if(typeof(d.format)=="function"){c.format=d.format}if(typeof(window[d.format])=="function"){c.format=window[d.format]}}if(!c.format){c.format=function(f,g){return g}}this.doAddLabel(c,d);this.doAddInput(c,d,"DIV",null,true,true,"dhxform_item_template");c._value=(d.value||"");c.childNodes[1].childNodes[0].innerHTML=c.format(c._idd,c._value);return this},setValue:function(a,c){a._value=c;a.childNodes[1].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false}};(function(){for(var c in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype._ulToObject=function(g,k){var h=[];for(var c=0;c<g.childNodes.length;c++){if(String(g.childNodes[c].tagName||"").toLowerCase()=="li"){var d={};var m=g.childNodes[c];for(var l=0;l<k.length;l++){if(m.getAttribute(k[l])!=null){d[String(k[l]).replace("ftype","type")]=m.getAttribute(k[l])}}if(!d.label){try{d.label=m.firstChild.nodeValue}catch(j){}}var f=m.getElementsByTagName("UL");if(f[0]!=null){d[(d.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(f[0],k)}for(var l=0;l<m.childNodes.length;l++){if(String(m.childNodes[l].tagName||"").toLowerCase()=="userdata"){if(!d.userdata){d.userdata={}}d.userdata[m.childNodes[l].getAttribute("name")]=m.childNodes[l].firstChild.nodeValue}}h[h.length]=d}if(String(g.childNodes[c].tagName||"").toLowerCase()=="div"){var d={};d.type="label";try{d.label=g.childNodes[c].firstChild.nodeValue}catch(j){}h[h.length]=d}}return h};dhtmlXForm.prototype.setUserData=function(g,d,f,a){if(typeof(a)!="undefined"){var c=this.doWithItem([g,d],"_getId");if(c!=null){g=c;d=f;f=a}}if(!this._userdata){this._userdata={}}this._userdata[g]=(this._userdata[g]||{});this._userdata[g][d]=f};dhtmlXForm.prototype.getUserData=function(f,d,a){if(typeof(a)!="undefined"){var c=this.doWithItem([f,d],"_getId");if(c!=null){f=c;d=a}}if(this._userdata!=null&&typeof(this._userdata[f])!="undefined"&&typeof(this._userdata[f][d])!="undefined"){return this._userdata[f][d]}return""};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(f,c){if(typeof(c)=="object"){var a=c[1];c=c[0]}if(document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent(c,true,false);f.dispatchEvent(d)}else{if(document.createEventObject){var d=document.createEventObject();d.button=1;f.fireEvent("on"+c,d)}}if(a){window.setTimeout(function(){_dhxForm_doClick(f,a)},100)}};dhtmlXForm.prototype.setFormData=function(d){for(var c in d){var f=this.getItemType(c);switch(f){case"checkbox":this[d[c]==true||parseInt(d[c])==1||d[c]=="true"||d[c]==this.getItemValue(c,"realvalue")?"checkItem":"uncheckItem"](c);break;case"radio":this.checkItem(c,d[c]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(c,d[c]);break;default:if(this["setFormData_"+f]){this["setFormData_"+f](c,d[c])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,c,d[c])}break}}};dhtmlXForm.prototype.getFormData=function(s,h){var c={};var m=this;for(var o in this.itemPull){var l=this.itemPull[o]._idd;var u=this.itemPull[o]._type;if(u=="ch"){c[l]=(this.isItemChecked(l)?this.getItemValue(l):0)}if(u=="ra"&&!c[this.itemPull[o]._group]){c[this.itemPull[o]._group]=this.getCheckedValue(this.itemPull[o]._group)}if(u in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[l]=this.getItemValue(l,s)}if(this["getFormData_"+u]){c[l]=this["getFormData_"+u](l)}if(u=="up"){var g=this.getItemValue(l);for(var f in g){c[f]=g[f]}}if(this.itemPull[o]._list){for(var d=0;d<this.itemPull[o]._list.length;d++){var j=this.itemPull[o]._list[d].getFormData(s,h);for(var n in j){c[n]=j[n]}}}}if(!h&&this.hId&&this._userdata[this.hId]){for(var o in this._userdata[this.hId]){if(!c[o]){c[o]=this._userdata[this.hId][o]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var g=0;var f=-1;for(var h=0;h<this.base.length;h++){g+=this.base[h].firstChild.offsetWidth;if(this.base[h].offsetHeight>f){f=this.base[h].offsetHeight}}var d=false;try{d=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(d){var a=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(j){}if(d&&typeof(a)!="undefined"){if(g>0){a.setWidth(g+10)}if(f>0){a.setHeight(f+a.firstChild.firstChild.offsetHeight+5)}d=a=null;return}var c=false;try{c=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(c){var k=this.cont.parentNode.parentNode;if(typeof(k.callEvent)=="function"){this.cont.style.display="none";k.callEvent("_setCellSize",[g+15,f+15]);this.cont.style.display=""}}}catch(j){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(c,j,k,f){if(typeof j=="function"){k=j;j="post"}else{j=(j=="get"?"get":"post")}if(f!==true&&!this.validate()){return}var h=this.getFormData(true);var g=[];for(var d in h){g.push(d+"="+encodeURIComponent(h[d]))}var a=function(l){if(k){k.call(this,l,l.xmlDoc.responseText)}};if(j=="get"){window.dhx4.ajax.get(c+(c.indexOf("?")==-1?"?":"&")+g.join("&"),a)}else{window.dhx4.ajax.post(c,g.join("&"),a)}};dhtmlXForm.prototype.save=function(a,c){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(c,a){this.formId=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(f,c){var d=this.obj.getFormData(true);d[this.action_param]=this.obj.getUserData(f,this.action_param);return d};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(d,f,g,c){if(f=="inserted"||f=="updated"){this.obj.resetDataProcessor("updated");this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,c]);return true});a.autoUpdate=false;a.setTransactionMode("POST",true);this.dp=a;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,a)};dhtmlXForm.prototype._ccActivate=function(d,a,c){if(!this._formLS){this._formLS={}}if(!this._formLS[d]){this._formLS[d]={input:a,value:c}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var c in this._formLS){var g=this._formLS[c].input;if(String(g.tagName).toLowerCase()=="select"){var d="";if(g.selectedIndex>=0&&g.selectedIndex<g.options.length){d=g.options[g.selectedIndex].value}}else{var d=g.value}if(d!=this._formLS[c].value){this._formLS[c].value=d;this.callEvent("onInputChange",[g._idd,d,this])}g=null}if(this._ccActive){var f=this;this._ccTm=window.setTimeout(function(){f._ccDo();f=null},100)}};dhtmlXForm.prototype._ccReload=function(c,a){if(this._formLS&&this._formLS[c]){this._formLS[c].value=a}};dhtmlXForm.prototype._autoload=function(){var c=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];var d=document.getElementsByTagName("UL");var f=[];for(var j=0;j<d.length;j++){if(d[j].className=="dhtmlxForm"){var h=document.createElement("DIV");f[f.length]={nodeUL:d[j],nodeForm:h,data:dhtmlXForm.prototype._ulToObject(d[j],c),name:(d[j].getAttribute("name")||null)}}}for(var j=0;j<f.length;j++){f[j].nodeUL.parentNode.insertBefore(f[j].nodeForm,f[j].nodeUL);var l=new dhtmlXForm(f[j].nodeForm,f[j].data);if(f[j].name!==null){window[f[j].name]=l}var g=(f[j].nodeUL.getAttribute("oninit")||null);f[j].nodeUL.parentNode.removeChild(f[j].nodeUL);f[j].nodeUL=null;f[j].nodeForm=null;f[j].data=null;f[j]=null;if(g){if(typeof(g)=="function"){g()}else{if(typeof(window[g])=="function"){window[g]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(c){var a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var c=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31)||false},isValidTime:function(c){var a=c.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var c=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&&!!(c[1]<=255&&c[2]<=255&&c[3]<=255&&c[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}dhtmlXForm.prototype.addItem=function(d,a,j,g){var c=null;if(d instanceof Array){c=d[1];d=d[0]}var h=null;if(d!=null){var h=this._getParentForm(d,c);if(h!=null){if(h.item._list==null){if(!a.listParent){a.listParent=h.item._idd}h.form._addItem("list",h.item._idd,[a],null,h.item._idd,j,g)}else{h.item._list[0].addItem(null,a,j,g)}h.form=h.item=null;h=null;this._autoCheck();return}}this._prepareItem(a,j,g);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(c,a){this._removeItem(c,a)};dhtmlXForm.prototype.removeColumn=function(k,j,g,d){var m=null;if(k instanceof Array){m=k[1];k=k[0]}if(k!=null){var h=this._getParentForm(k,m);if(h!=null){if(h.item._list!=null&&h.item._list[0]!=null){h.item._list[0].removeColumn(null,j,g,d)}h.form=h.item=null;h=null}return}j=Math.min(Math.max(j,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(g==true){this._removeItemsInColumn(this.cont.childNodes[j])}}else{if(g==true){this._removeItemsInColumn(this.cont.childNodes[j])}else{if(!d){var a=j-1;if(a<0){a=j+1}}else{var a=j+1;if(a>this.cont.childNodes.length-1){a=j-1}}while(this.cont.childNodes[j].childNodes.length>0){this.cont.childNodes[a].appendChild(this.cont.childNodes[j].childNodes[0])}}var l=[];for(var c=0;c<this.base.length;c++){if(this.cont.childNodes[j]!=this.base[c]){l.push(this.base[c])}}this.base=l;this.cont.removeChild(this.cont.childNodes[j]);this.b_index--;l=null}};dhtmlXForm.prototype.getColumnNode=function(d,c){var g=null;var a=null;if(d instanceof Array){a=d[1];d=d[0]}if(d!=null){var h=this._getParentForm(d,a);if(h!=null){if(h.item._list!=null&&h.item._list[0]!=null&&g==null){g=h.item._list[0].getColumnNode(null,c)}h.form=h.item=null;h=null}return g}if(c<0||c>this.cont.childNodes.length-1){return null}return this.cont.childNodes[c]};dhtmlXForm.prototype._removeItemsInColumn=function(f){var a=[];for(var d=0;d<f.childNodes.length;d++){var c=f.childNodes[d];if(c._idd!=null&&c._type!=null){a.push([c._idd,(c._type=="ra"?c._value:null)])}c=null}for(var d=0;d<a.length;d++){this.removeItem(a[d][0],a[d][1])}};dhtmlXForm.prototype._getParentForm=function(j,h){if(this.itemPull[this.idPrefix+j]!=null){return{form:this,item:this.itemPull[this.idPrefix+j]}}for(var c in this.itemPull){if(this.itemPull[c]._type=="ra"&&this.itemPull[c]._group==j&&this.itemPull[c]._value==h){return{form:this,item:this.itemPull[c]}}}var g=null;for(var c in this.itemPull){if(!g&&this.itemPull[c]._list!=null){for(var d=0;d<this.itemPull[c]._list.length;d++){if(!g){g=this.itemPull[c]._list[d]._getParentForm(j,h)}}}}return g};(function(){for(var c in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[c]._getItemNode){dhtmlXForm.prototype.items[c]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(c,a){if(a!=null){c=[c,a]}return this.doWithItem(c,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(l,h,g){if(typeof(g)=="undefined"){g=h}else{l=[l,h]}var d=this._getItemNode(l);if(!d){return}g=window.dhx4.s2b(g);d._required=(g==true);if(d._required){if(!d._validate){d._validate=[]}var c=false;for(var f=0;f<d._validate.length;f++){c=(d._validate[f]=="NotEmpty"||c)}if(!c){d._validate.push("NotEmpty")}var j=d.childNodes[d._ll?0:1].childNodes[0];if(!(j.lastChild&&j.lastChild.className&&j.lastChild.className.search(/required/)>=0)){var a=document.createElement("SPAN");a.className="dhxform_item_required";a.innerHTML="*";j.appendChild(a);a=j=null}}else{if(d._validate!=null){var c=d._validate;d._validate=[];for(var f=0;f<c.length;f++){if(c[f]!="NotEmpty"){d._validate.push(c[f])}}if(d._validate.length==0){d._validate=null}}var j=d.childNodes[d._ll?0:1].childNodes[0];if(j.lastChild&&j.lastChild.className&&j.lastChild.className.search(/required/)>=0){j.removeChild(j.lastChild);j=null}}this._resetValidateCss(d);d=null};dhtmlXForm.prototype.setNote=function(g,d,a){if(typeof(a)=="undefined"){a=d}else{g=[g,d]}var c=this._getItemNode(g);if(!c){return}var f=this._getNoteNode(c);if(!f){if(!a.width){a.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth}f=document.createElement("DIV");f.className="dhxform_note";if({ch:1,ra:1}[c._type]){c.childNodes[c._ll?1:0].insertBefore(f,c.childNodes[c._ll?1:0].lastChild)}else{c.childNodes[c._ll?1:0].appendChild(f)}}f.innerHTML=a.text;if(a.width!=null){f.style.width=a.width+"px";f._w=a.width}f=null};dhtmlXForm.prototype.clearNote=function(f,c){if(typeof(c)!="undefined"){f=[f,c]}var a=this._getItemNode(f);if(!a){return}var d=this._getNoteNode(a);if(d!=null){d.parentNode.removeChild(d);d=null}};dhtmlXForm.prototype._getNoteNode=function(a){var d=null;for(var c=0;c<a.childNodes[a._ll?1:0].childNodes.length;c++){if(String(a.childNodes[a._ll?1:0].childNodes[c].className).search(/dhxform_note/)>=0){d=a.childNodes[a._ll?1:0].childNodes[c]}}a=null;return d};dhtmlXForm.prototype.setValidation=function(h,f,g){if(typeof(note)=="undefined"){g=f}else{h=[h,f]}var c=this._getItemNode(h);if(!c){return}if(c._validate!=null){for(var d=0;d<c._validate.length;d++){c._validate[d]=null}}c._validate=[];if(typeof(g)=="function"||typeof(window[g])=="function"){c._validate=[g]}else{c._validate=String(g).split(this.separator)}if(c._required){var a=false;for(var d=0;d<c._validate.length;d++){a=(c._validate[d]=="NotEmpty"||a)}if(!a){c._validate.push("NotEmpty")}}c=null};dhtmlXForm.prototype.clearValidation=function(f,d){if(typeof(d)!="undefined"){f=[f,d]}var a=this._getItemNode(f);if(!a){return}if(a._validate!=null){for(var c=0;c<a._validate.length;c++){a._validate[c]=null}}a._validate=a._required?["NotEmpty"]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,h){var c=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[c]){return}if(c=="select"||c=="multiselect"){var f=this.getOptions(a);while(f.length>0){f.remove(0)}f.length=0;f=null;if(typeof(h)=="string"){this.doWithItem(a,"doLoadOptsConnector",h)}else{if(h instanceof Array){this.doWithItem(a,"doLoadOpts",{options:h})}}}if(c=="combo"){var j=this.getCombo(a);j.clearAll();j.setComboValue("");if(typeof(h)=="string"){this.doWithItem(a,"doLoadOptsConnector",h)}else{if(h instanceof Array){var d=null;for(var g=0;g<h.length;g++){if(window.dhx4.s2b(h[g].selected)){d=h[g].value}}j.addOption(h);if(d!=null){this.setItemValue(a,d)}j=null}}}};dhtmlXForm.prototype.setTooltip=function(h,g,f){if(typeof(f)=="undefined"){f=g}else{h=[h,g]}var c=this._getItemNode(h);if(!c){return}var a=null;if(c.childNodes.length==1){a=c.childNodes[0]}else{for(var d=0;d<c.childNodes.length;d++){if(c.childNodes[d].className!=null&&c.childNodes[d].className.search("dhxform_label")>=0){a=c.childNodes[d]}}}if(a!=null){if(f==null||f.length==0){a.removeAttribute("title")}else{a.title=f}}a=null};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.items.combo={render:function(c,d){c._type="combo";c._enabled=true;c._value=null;c._newValue=null;this.doAddLabel(c,d);this.doAddInput(c,d,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(c);this.doLoadOpts(c,d);c.onselectstart=function(f){return true};c.childNodes[c._ll?1:0].childNodes[0].setAttribute("mode",d.comboType||"");if(d.comboImagePath){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("imagePath",d.comboImagePath)}if(d.comboDefaultImage){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImage",d.comboDefaultImage)}if(d.comboDefaultImageDis){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImageDis",d.comboDefaultImageDis)}c._combo=new dhtmlXComboFromSelect(c.childNodes[c._ll?1:0].childNodes[0]);c._combo.setSkin(c.getForm().skin);c._combo._currentComboValue=c._combo.getSelectedValue();c._combo.getInput().id=d.uid;var a=this;c._combo.attachEvent("onChange",function(){a.doOnChange(this)});if(d.connector){this.doLoadOptsConnector(c,d.connector)}if(d.filtering){c._combo.enableFilteringMode(true)}else{if(d.serverFiltering){c._combo.enableFilteringMode(true,d.serverFiltering,d.filterCache,d.filterSubLoad)}}if(d.readonly==true){this.setReadonly(c,true)}if(d.style){c._combo.DOMelem_input.style.cssText+=d.style}c._combo.attachEvent("onFocus",function(){var g=this.cont.parentNode.parentNode;var h=g.getForm();if(h.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}h.callEvent("onFocus",[g._idd]);h=g=null});c._combo.attachEvent("onBlur",function(){var g=this.cont.parentNode.parentNode;var h=g.getForm();if(h.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}h.callEvent("onBlur",[g._idd]);h=g=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(c){var a=c.base.parentNode.parentNode.parentNode;if(a._apiChange){return}c._newComboValue=c.getSelectedValue();if(c._newComboValue!=c._currentComboValue){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,c._currentComboValue,c._newComboValue])!==true){window.setTimeout(function(){c.setComboValue(c._currentComboValue)},1);return false}}c._currentComboValue=c._newComboValue;a.callEvent("onChange",[a._idd,c._currentComboValue])}a._autoCheck(a._enabled)},doLoadOptsConnector:function(f,a){var d=this;var c=f;f._connector_working=true;f._apiChange=true;f._combo.load(a,function(){c.callEvent("onOptionsLoaded",[c._idd]);c._connector_working=false;if(c._connector_value!=null){d.setValue(c,c._connector_value);c._connector_value=null}c._apiChange=false;d=c=null})},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,c){if(a._connector_working){a._connector_value=c;return}a._apiChange=true;a._combo.setComboValue(c);a._combo._currentComboValue=a._combo.getActualValue();a._apiChange=false},getValue:function(a){return a._combo.getActualValue()},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,c){if(!a._combo){return}a._combo_ro=c;a._combo.readonly(a._combo_ro)},isReadonly:function(a,c){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,d,c){a._combo.setFontSize(c,c)}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(d,h){var c=this;d._type="calendar";d._enabled=true;var j=navigator.userAgent;var a=(j.indexOf("MSIE 6.0")>=0||j.indexOf("MSIE 7.0")>=0||j.indexOf("MSIE 8.0")>=0);this.doAddLabel(d,h);this.doAddInput(d,h,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(d);if(a){d.childNodes[d._ll?1:0].childNodes[0].onfocus2=d.childNodes[d._ll?1:0].childNodes[0].onfocus;d.childNodes[d._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}d.childNodes[d._ll?1:0].childNodes[0]._idd=d._idd;d.childNodes[d._ll?1:0].childNodes[0].onblur=function(){var k=this.parentNode.parentNode;if(k._c.base._formMouseDown){k._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;k=null;return true}var l=k.getForm();l._ccDeactivate(k._idd);c.checkEnteredValue(this.parentNode.parentNode);if(l.live_validate){c._validate(k)}l.callEvent("onBlur",[k._idd]);l=k=null};d._f=(h.dateFormat||null);d._f0=(h.serverDateFormat||d._f);var g=d.getForm();d._c=new dhtmlXCalendarObject(d.childNodes[d._ll?1:0].childNodes[0],h.skin||g.skin||"dhx_skyblue");d._c._nullInInput=true;d._c.enableListener(d.childNodes[d._ll?1:0].childNodes[0]);if(d._f!=null){d._c.setDateFormat(d._f)}if(!window.dhx4.s2b(h.enableTime)){d._c.hideTime()}if(window.dhx4.s2b(h.showWeekNumbers)){d._c.showWeekNumbers()}if(!isNaN(h.weekStart)){d._c.setWeekStartDay(h.weekStart)}if(typeof(h.calendarPosition)!="undefined"){d._c.setPosition(h.calendarPosition)}if(h.minutesInterval!=null){d._c.setMinutesInterval(h.minutesInterval)}d._c._itemIdd=d._idd;d._c.attachEvent("onBeforeChange",function(f){if(d._value!=f){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,f])!==true){return false}}d._tempValue=d._value=f;c.setValue(d,f,false);d.callEvent("onChange",[this._itemIdd,d._value])}return true});d._c.attachEvent("onClick",function(){d._tempValue=null});if(a){d._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(d,h.value);g=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,c){a._c.setSkin(c)},setValue:function(c,d,a){if(!d||d==null||typeof(d)=="undefined"||d==""){c._value=null;c.childNodes[c._ll?1:0].childNodes[0].value=""}else{c._value=(d instanceof Date?d:c._c._strToDate(d,c._f0||c._c._dateFormat));c.childNodes[c._ll?1:0].childNodes[0].value=c._c._dateToStr(c._value,c._f||c._c._dateFormat)}if(a!==false){c._c.setDate(c._value)}},getValue:function(c,a){var f=c._tempValue||c._c.getDate();if(a===true&&f==null){return""}return(a===true?c._c._dateToStr(f,c._f0||c._c._dateFormat):f)},setDateFormat:function(c,a,d){c._f=a;c._f0=(d||c._f);c._c.setDateFormat(c._f);this.setValue(c,this.getValue(c))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(c){}a._f=null;try{delete a._f}catch(c){}a._f0=null;try{delete a._f0}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.d2(a);a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(c,a,d){this.doWithItem(c,"setDateFormat",a,d)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};(function(){for(var c in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[c]){dhtmlXForm.prototype.items.btn2state[c]=dhtmlXForm.prototype.items.checkbox[c]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(a,c){c._autoInputWidth=false;this.render2(a,c);a._type="btn2state";a._cssName=(typeof(c.cssName)=="undefined"?"btn2state":c.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(f,d,g){this.callEvent(f,[this.childNodes[this._ll?0:1].childNodes[0],d,this._idd])};this.setChecked(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,c){this[c==true||parseInt(c)==1||c=="true"||c==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.isItemChecked(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(d,f){var c=this;d._type="colorpicker";d._enabled=true;this.doAddLabel(d,f);this.doAddInput(d,f,"INPUT","TEXT",true,true,"dhxform_textarea");d._value=(f.value||"");d.childNodes[d._ll?1:0].childNodes[0].value=d._value;var a={input:d.childNodes[d._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(f.enableCustomColors)==true),skin:d.getForm().skin};this.colorpicker[d._idd]=new dhtmlXColorPicker(a);this.colorpicker[d._idd]._nodes[0].valueColor=null;this.colorpicker[d._idd].base.className+=" dhtmlxcp_in_form";if(typeof(f.customColors)!="undefined"){this.colorpicker[d._idd].setCustomColors(f.customColors)}this.colorpicker[d._idd].attachEvent("onSelect",function(g){if(d._value!=g){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,g])!==true){d.childNodes[d._ll?1:0].childNodes[0].value=d._value;return}}d._value=g;c.setValue(d,g);d.callEvent("onChange",[d._idd,d._value])}});this.colorpicker[d._idd].attachEvent("onHide",function(g){var h=d.childNodes[d._ll?1:0].childNodes[0];if(h.value!=d._value){h.value=d._value}h=null});d.childNodes[d._ll?1:0].childNodes[0]._idd=d._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a);a=null},setSkin:function(a,c){this.colorpicker[a._idd].setSkin(c)}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(a,c){a._type="container";a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var c in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[c]){dhtmlXForm.prototype.items.container[c]=dhtmlXForm.prototype.items.input[c]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(d,f){var a=(!isNaN(f.rows));d._type="editor";d._enabled=true;this.doAddLabel(d,f);this.doAddInput(d,f,"DIV",null,true,true,"dhxform_item_template");d._value=(f.value||"");var c=this;this.editor[d._idd]=new dhtmlXEditor({parent:d.childNodes[d._ll?1:0].childNodes[0],content:d._value});this.editor[d._idd].attachEvent("onAccess",function(h,j){d.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(h=="blur"){c.doOnBlur(d,this);d.callEvent("onBlur",[d._idd]);if(d.getForm().skin=="dhx_terrace"){var g=d.childNodes[d._ll?1:0].className;if(g.indexOf("dhxeditor_focus")>=0){d.childNodes[d._ll?1:0].className=(g).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{d.callEvent("onEditorAccess",[d._idd,h,j,this,d.getForm()]);d.callEvent("onFocus",[d._idd]);if(d.getForm().skin=="dhx_terrace"){var g=d.childNodes[d._ll?1:0].className;if(g.indexOf("dhxeditor_focus")==-1){d.childNodes[d._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[d._idd].attachEvent("onToolbarClick",function(g){d.callEvent("onEditorToolbarClick",[d._idd,g,this,d.getForm()])});if(f.readonly){this.setReadonly(d,true)}d.childNodes[d._ll?0:1].childNodes[0].removeAttribute("for");d.childNodes[d._ll?0:1].childNodes[0].onclick=function(){c.editor[d._idd]._focus()};return this},doOnBlur:function(d,c){var a=c.getContent();if(d._value!=a){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,a])!==true){c.setContent(d._value);return}}d._value=a;d.callEvent("onChange",[d._idd,a])}},setValue:function(a,c){if(a._value==c){return}a._value=c;this.editor[a._idd].setContent(a._value)},getValue:function(a){a._value=this.editor[a._idd].getContent();return a._value},enable:function(a){this.editor[a._idd].setReadonly(false);this.doEn(a)},disable:function(a){this.editor[a._idd].setReadonly(true);this.doDis(a)},setReadonly:function(a,c){this.editor[a._idd].setReadonly(c)},getEditor:function(a){return(this.editor[a._idd]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._idd].unload();this.editor[a._idd]=null;this.d2(a);a=null},setFocus:function(a){this.editor[a._idd]._focus()}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[c]=dhtmlXForm.prototype.items.template[c]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};dhtmlXForm.prototype.items.upload={render:function(c,d){c._type="up";c._enabled=true;c._checked=true;c.className=d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");c.appendChild(a);if(!isNaN(d.inputLeft)){c.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}c._uploader=new dhtmlXFileUploader(a,d.swfPath||"",d.swfUrl||"",d.mode||null,d.swfLogs,d.slXap||"",d.slUrl||"",d.slLogs||"",d.multiple);c._uploader.setURL(d.url||"");c._uploader.callEvent=c.callEvent;if(typeof(d.autoStart)!="undefined"){c._uploader.setAutoStart(d.autoStart)}if(typeof(d.autoRemove)!="undefined"){c._uploader.setAutoRemove(d.autoRemove)}if(typeof(d.titleScreen)!="undefined"){c._uploader.enableTitleScreen(d.titleScreen)}if(typeof(d.titleText)!="undefined"){c._uploader.setTitleText(d.titleText)}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}if(!(d.inputHeight=="auto"||parseInt(d.inputHeight)==NaN)){c._uploader.p_files.style.height=parseInt(d.inputHeight)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=null;a._uploader.unload();a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._uploader.disable()},setWidth:function(c,a){c.childNodes[0].style.width=a+"px";c._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(h){var f=h._uploader.getData();var g={};var d=0;for(var c in f){g[h._idd+"_r_"+d]=f[c].realName;g[h._idd+"_s_"+d]=f[c].serverName;d++}g[h._idd+"_count"]=d;return g},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};function dhtmlXFileUploader(p,swfPath,swfUrl,mode,swfLogs,slXap,slUrl,slLogs,multiple){var that=this;if(typeof(mode)=="string"&&typeof(this[mode])=="function"){this.engine=mode}else{this.engine="html4";var k=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){k=new XMLHttpRequest();if(typeof(k.upload)=="undefined"){k=null}}if(k!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||k===false){var k=swfobject.getFlashPlayerVersion();if(k.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}k=null}if(typeof(p)=="string"){p=document.getElementById(p)}this._upload_mp=(typeof(multiple)!="undefined"?multiple==true:true);this._upload_dnd=true;this._swf_file_url=swfPath||"";this._swf_upolad_url=swfUrl||"";this._swf_logs=swfLogs;this._sl_xap=slXap;this._sl_upload_url=slUrl;this._sl_logs=slLogs;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";p.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!that._enabled){return}if(!that._uploading){that._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!that._enabled){return}that._uploadStop();that._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!that._enabled){return}that.clear()},tooltip:"Clear list"}};this.buttons={};for(var a in this.b_opts){var k=document.createElement("DIV");k.innerHTML="&nbsp;";k.className="dhx_file_uploader_button button_"+a;k.onclick=this.b_opts[a].onclick;if(this.b_opts[a].tooltip){k.title=this.b_opts[a].tooltip}this.p_controls.appendChild(k);this.buttons[a]=k;k=null}this.buttons.cancel.style.display="none"};this._readableSize=function(t){var i=false;var b=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var q=0;q<b.length;q++){if(t>1024){t=t/1024}else{if(i===false){i=q}}}if(i===false){i=b.length-1}return Math.round(t*100)/100+" "+b[i]};this._beforeAddFileToList=function(name,size){return(this.callEvent("onBeforeFileAdd",[name,size])===true)};this._addFileToList=function(id,name,size,state,progress){this._checkTitleScreen();var t=document.createElement("DIV");t._idd=id;t.className="dhx_file dhx_file_"+state;t.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+progress+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(t);t.childNodes[0].style.width=t.offsetWidth-127+"px";this._items[id]=t;this._updateFileNameSize(id);t.childNodes[2].onclick=function(){if(!that._enabled){return}var id=this.parentNode._idd;that._removeFileFromQueue(id)};this.callEvent("onFileAdd",[name])};this._removeFileFromList=function(id){if(!this._items[id]){return}this._items[id].childNodes[2].onclick=null;this._items[id].parentNode.removeChild(this._items[id]);this._items[id]=null;delete this._items[id];if(this._data[id]){this._data[id]=null;delete this._data[id]}this._checkTitleScreen()};this._updateFileNameSize=function(id){this._items[id].childNodes[0].innerHTML=this._files[id].name+(!isNaN(this._files[id].size)?" ("+this._readableSize(this._files[id].size)+")":"&nbsp;");this._items[id].childNodes[0].title=this._files[id].name+(!isNaN(this._files[id].size)?" ("+this._readableSize(this._files[id].size)+")":"")};this._updateFileInList=function(id,state,progress){if(!this._items[id]){return}this._items[id].className="dhx_file dhx_file_"+state;this._updateProgress(id,state,progress);this._updateFileNameSize(id)};this._updateProgress=function(id,state,progress){if(state=="uploading"&&progress<100&&this._progress_type=="loader"){this._items[id].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[id].childNodes[1].innerHTML="&nbsp;"}else{this._items[id].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[id].childNodes[1].innerHTML=progress+"%"}this._updateFileNameSize(id)};this._removeFilesByState=function(state){for(var a in this._files){if(state===true||this._files[a].state==state){this._removeFileFromQueue(a)}}};this._switchButton=function(state){if(state==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var t=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(t>0){this.callEvent("onUploadComplete",[t])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var a in this._files){if(this._files[a].state=="fail"){this._files[a].state="added";this._updateFileInList(a,"added",0)}}}this._uploading=true;var t=false;for(var a in this._files){if(!t&&[this._files[a].state]=="added"){t=true;this._files[a].state="uploading";this._updateFileInList(a,"uploading",0);this._doUploadFile(a)}}if(!t){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(id,serverName,r,extra){if(typeof(r)!="undefined"&&this.engine=="flash"){dhx4.temp=null;try{eval("dhx4.temp="+r.data)}catch(e){dhx4.temp=null}var t=dhx4.temp;dhx4.temp=null;if(t!=null&&t.state==true&&t.name!=null){serverName=t.name;if(t.extra!=null){extra=t.extra}}else{this._onUploadFail(id,(t!=null&&t.extra!=null?t.extra:null));return}}this._uploaded_count++;this._data[id]={realName:this._files[id].name,serverName:serverName};this._files[id].state="uploaded";this._updateFileInList(id,"uploaded",100);this.callEvent("onUploadFile",[this._files[id].name,serverName,extra]);if(this._autoRemove){this._removeFileFromQueue(id)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(id,extra){this._files[id].state="fail";this._updateFileInList(id,"fail",0);this.callEvent("onUploadFail",[this._files[id].name,extra]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(id){this._uploading=false;this._files[id].state="added";this._updateFileInList(id,"added",0);this.callEvent("onUploadCancel",[this._files[id].name])};this._checkTitleScreen=function(){var k=0;for(var a in this._files){k++}if(k==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((k>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(state){this._autoStart=(state==true)};this.setAutoRemove=function(state){this._autoRemove=(state==true)};this.enableTitleScreen=function(state){this._titleScreen=(state==true);this._checkTitleScreen()};this.setTitleText=function(text){this._titleText=text;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(url){this._url=url};this.setSWFURL=function(url){this._swf_upolad_url=url};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var t=0;for(var a in this._files){if(this._files[a].state!="uploaded"){return -1}t=1}return t};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){that._uploadStop()}that._switchButton(false);that._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var a in this.buttons){this.buttons[a].onclick=null;this.buttons[a].parentNode.removeChild(this.buttons[a]);this.buttons[a]=null;delete this.buttons[a]}this.buttons=null;for(var a in this.b_opts){this.b_opts[a].onclick=null;this.b_opts[a]=null;delete this.b_opts[a]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var a in this){this[a]=null}that=a=null};var e=new this[this.engine]();for(var a in e){this[a]=e[a];e[a]=null}a=e=p=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var c=this;this.buttons.browse.onclick=function(){if(c._enabled){c.f.click()}};this._progress_type="percentage";var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&&a.match(/AppleWebKit/gi)!=null&&a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault()};this.p.ondragover=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault()};this.p.ondrop=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault();if(c._enabled){c._parseFilesInInput(d.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=""}}},_doUploadFile:function(id){var that=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(e){if(that._files[this._idd].state=="uploading"){that._updateFileInList(this._idd,"uploading",Math.round(e.loaded*100/e.total))}};this._loader.onload=function(e){dhx4.temp=null;try{eval("dhx4.temp="+this.responseText)}catch(e){}var r=dhx4.temp;dhx4.temp=null;if(typeof(r)=="object"&&r!=null&&typeof(r.state)!="undefined"&&r.state==true){that._onUploadSuccess(this.upload._idd,r.name,null,r.extra);r=null}else{that._onUploadFail(this.upload._idd,(r!=null&&r.extra!=null?r.extra:null))}};this._loader.onerror=function(e){that._onUploadFail(this.upload._idd)};this._loader.onabort=function(e){that._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=id;var form=new FormData();form.append("file",this._files[id].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+new Date().getTime(),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(form)},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(c){for(var a=0;a<c.length;a++){this._addFileToQueue(c[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var c=(a._idd||window.dhx4.newId());this._files[c]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(c,a.name,a.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(f){if(!this._files[f]){return}var c=this._files[f].name;var d=(this._data!=null&&this._data[f]!=null?this._data[f].serverName:null);if(this.callEvent("onBeforeFileRemove",[c,d])!==true){return}var a=false;if(this._uploading&&f==this._loader.upload._idd&&this._files[f].state=="uploading"){this._uploadStop();a=true}this._files[f].file=null;this._files[f].name=null;this._files[f].size=null;this._files[f].state=null;this._files[f]=null;delete this._files[f];this._removeFileFromList(f);this.callEvent("onFileRemove",[c,d]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this;var d=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var c=document.createElement("DIV");c.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+d+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(c);c.firstChild.lastChild._idd=d;c.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";a._addForm()};c=null},_onLoad:function(){if(this._uploading){dhx4.temp=null;try{eval("dhx4.temp="+this.fr.contentWindow.document.body.innerHTML)}catch(e){}var r=dhx4.temp;dhx4.temp=null;if(typeof(r)=="object"&&r!=null){if(typeof(r.state)!="undefined"){if(r.state=="cancelled"){this._onUploadAbort(this.fr._idd);r=null;return}else{if(r.state==true){if(typeof(r.size)!="undefined"&&!isNaN(r.size)){this._files[this.fr._idd].size=r.size}this._onUploadSuccess(this.fr._idd,r.name,null,r.extra);r=null;return}}}}this._onUploadFail(this.fr._idd,(r!=null&&r.extra!=null?r.extra:null))}},_addFileToQueue:function(c){var a=c.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=c.value}this._files[c._idd]={name:a,form:c.parentNode,node:c.parentNode.parentNode,input:c,state:"added"};this._addFileToList(c._idd,c.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){var a=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[a,c])!==true){return}this._files[d].input.onchange=null;this._files[d].form.removeChild(this._files[d].input);this._files[d].node.removeChild(this._files[d].form);this._files[d].node.parentNode.removeChild(this._files[d].node);this._files[d].input=null;this._files[d].name=null;this._files[d].form=null;this._files[d].node=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[a,c])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+new Date().getTime()},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXFileUploaderSWFObjects){window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(g,d,f){return window.dhtmlXFileUploaderSWFObjects.items[g].uploader[d].apply(window.dhtmlXFileUploaderSWFObjects.items[g].uploader,f)}}}var c=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,c){return(this.callEvent("onBeforeFileAdd",[a,c])===true)},_addFileToQueue:function(f,c,d){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT";a.style.position="absolute";a.style.left="0px";a.style.top=window.dhx4.absTop(this.buttons.browse)+"px";a.style.width="10px";document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[f]={name:c,size:d,state:"added"};this._addFileToList(f,c,d,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(f){if(!this._files[f]){return}var c=this._files[f].name;var d=(this._data!=null&&this._data[f]!=null?this._data[f].serverName:null);if(this.callEvent("onBeforeFileRemove",[c,d])!==true){return}var a=false;if(this._uploading&&this._files[f].state=="uploading"){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(f);this._files[f].name=null;this._files[f].size=null;this._files[f].state=null;this._files[f]=null;delete this._files[f];this._removeFileFromList(f);this.callEvent("onFileRemove",[c,d]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(d){for(var c in this._files){if(this._files[c].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null;delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(d,a,c){window.dhtmlXFileUploaderSLObjects.items[d].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[d].uploader,c)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(d,a,c){this._files[d]={name:a,size:c,state:"added"};this._addFileToList(d,a,c,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){if(!this._files[c]){return}var a=false;if(this._uploading&&this._files[c].state=="uploading"){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(c);this._files[c].name=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);if(a){this._uploadStart()}},_doUploadFile:function(a){document.getElementById(this._sl_obj_id).Content.a.upload(a,this._sl_upload_url,"&mode=sl&dhxr"+new Date().getTime())},_uploadStop:function(d){this._uploading=false;for(var c in this._files){if(this._files[c].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var c=new ActiveXObject("AgControl.AgControl");if(c!=null){var g=4,f=0;while(c.isVersionSupported([g,f].join("."))){a=[g,f];if(++f>9){g++;f=0}}}c=null}catch(d){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){a=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return a};if(!window.dhtmlx){window.dhtmlx={}}(function(){var m=null;function o(v,s){var u=v.callback;n(false);v.box.parentNode.removeChild(v.box);m=v.box=null;if(u){u(s)}}function a(u){if(m){u=u||event;var s=u.which||event.keyCode;if(dhtmlx.message.keyboard){if(s==13||s==32){o(m,true)}if(s==27){o(m,false)}}if(u.preventDefault){u.preventDefault()}return !(u.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",a)}else{document.addEventListener("keydown",a,true)}function n(u){if(!n.cover){n.cover=document.createElement("DIV");n.cover.onkeydown=a;n.cover.className="dhx_modal_cover";document.body.appendChild(n.cover)}var s=document.body.scrollHeight;n.cover.style.display=u?"inline-block":"none"}function h(u,s){return"<div class='dhtmlx_popup_button' result='"+s+"' ><div>"+u+"</div></div>"}function d(u){if(!q.area){q.area=document.createElement("DIV");q.area.className="dhtmlx_message_area";q.area.style[q.position]="5px";document.body.appendChild(q.area)}q.hide(u.id);var s=document.createElement("DIV");s.innerHTML="<div>"+u.text+"</div>";s.className="dhtmlx-info dhtmlx-"+u.type;s.onclick=function(){q.hide(u.id);u=null};if(q.position=="bottom"&&q.area.firstChild){q.area.insertBefore(s,q.area.firstChild)}else{q.area.appendChild(s)}if(u.expire>0){q.timers[u.id]=window.setTimeout(function(){q.hide(u.id)},u.expire)}q.pull[u.id]=s;s=null;return u.id}function j(u,w,A){var y=document.createElement("DIV");y.className=" dhtmlx_modal_box dhtmlx-"+u.type;y.setAttribute("dhxbox",1);var s="";if(u.width){y.style.width=u.width}if(u.height){y.style.height=u.height}if(u.title){s+='<div class="dhtmlx_popup_title">'+u.title+"</div>"}s+='<div class="dhtmlx_popup_text"><span>'+(u.content?"":u.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(w){s+=h(u.ok||"OK",true)}if(A){s+=h(u.cancel||"Cancel",false)}if(u.buttons){for(var v=0;v<u.buttons.length;v++){s+=h(u.buttons[v],v)}}s+="</div>";y.innerHTML=s;if(u.content){var x=u.content;if(typeof x=="string"){x=document.getElementById(x)}if(x.style.display=="none"){x.style.display=""}y.childNodes[u.title?1:0].appendChild(x)}y.onclick=function(D){D=D||event;var C=D.target||D.srcElement;if(!C.className){C=C.parentNode}if(C.className=="dhtmlx_popup_button"){var B=C.getAttribute("result");B=(B=="true")||(B=="false"?false:B);o(u,B)}};u.box=y;if(w||A){m=u}return y}function r(u,v,A){var w=u.tagName?u:j(u,v,A);if(!u.hidden){n(true)}document.body.appendChild(w);var s=u.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-w.offsetWidth)/2));var B=u.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-w.offsetHeight)/2));if(u.position=="top"){w.style.top="-3px"}else{w.style.top=B+"px"}w.style.left=s+"px";w.onkeydown=a;w.focus();if(u.hidden){dhtmlx.modalbox.hide(w)}return w}function l(s){return r(s,true,false)}function c(s){return r(s,true,true)}function g(s){return r(s)}function k(u,s,v){if(typeof u!="object"){if(typeof s=="function"){v=s;s=""}u={text:u,type:s,callback:v}}return u}function f(v,u,s,w){if(typeof v!="object"){v={text:v,type:u,expire:s,id:w}}v.id=v.id||q.uid();v.expire=v.expire||q.expire;return v}dhtmlx.alert=function(){var s=k.apply(this,arguments);s.type=s.type||"confirm";return l(s)};dhtmlx.confirm=function(){var s=k.apply(this,arguments);s.type=s.type||"alert";return c(s)};dhtmlx.modalbox=function(){var s=k.apply(this,arguments);s.type=s.type||"alert";return g(s)};dhtmlx.modalbox.hide=function(s){while(s&&s.getAttribute&&!s.getAttribute("dhxbox")){s=s.parentNode}if(s){s.parentNode.removeChild(s);n(false)}};var q=dhtmlx.message=function(w,v,u,x){w=f.apply(this,arguments);w.type=w.type||"info";var s=w.type.split("-")[0];switch(s){case"alert":return l(w);case"confirm":return c(w);case"modalbox":return g(w);default:return d(w);break}};q.seed=(new Date()).valueOf();q.uid=function(){return q.seed++};q.expire=4000;q.keyboard=true;q.position="top";q.pull={};q.timers={};q.hideAll=function(){for(var s in q.pull){q.hide(s)}};q.hide=function(u){var s=q.pull[u];if(s&&s.parentNode){window.setTimeout(function(){s.parentNode.removeChild(s);s=null},2000);s.className+=" hidden";if(q.timers[u]){window.clearTimeout(q.timers[u])}delete q.pull[u]}}})();
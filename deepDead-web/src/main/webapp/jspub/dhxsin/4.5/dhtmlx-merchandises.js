/*
Product Name: dhtmlxSuite 
Version: 4.5 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.5",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(d,e){var c=document.createElement("DIV");c.className=d;if(document.body.firstChild!=null){document.body.insertBefore(c,document.body.firstChild)}else{document.body.appendChild(c)}var a=c[e||"offsetWidth"];c.parentNode.removeChild(c);c=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var d=this.first();for(var c in this.data){d=Math.max(d,this.data[c])}return d},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var d=0,c=0;while(a){d=d+parseInt(a.offsetTop);c=c+parseInt(a.offsetLeft);a=a.offsetParent}return{top:d,left:c}},_aOfsRect:function(e){var h=e.getBoundingClientRect();var j=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||j.scrollTop;var f=window.pageXOffset||c.scrollLeft||j.scrollLeft;var g=c.clientTop||j.clientTop||0;var k=c.clientLeft||j.clientLeft||0;var l=h.top+a-g;var d=h.left+f-k;return{top:Math.round(l),left:Math.round(d)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(e){if(this._isObj(e)){var d={};for(var c in e){if(typeof(e[c])=="object"&&e[c]!=null){d[c]=this._copyObj(e[c])}else{d[c]=e[c]}}}else{var d=[];for(var c=0;c<e.length;c++){if(typeof(e[c])=="object"&&e[c]!=null){d[c]=this._copyObj(e[c])}else{d[c]=e[c]}}}return d},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var c={};c.left=document.body.scrollLeft;c.right=c.left+(window.innerWidth||document.body.clientWidth);c.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);c.bottom=c.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return c},selectTextRange:function(f,h,c){f=(typeof(f)=="string"?document.getElementById(f):f);var a=f.value.length;h=Math.max(Math.min(h,a),0);c=Math.min(c,a);if(f.setSelectionRange){try{f.setSelectionRange(h,c)}catch(g){}}else{if(f.createTextRange){var d=f.createTextRange();d.moveStart("character",h);d.moveEnd("character",c-a);try{d.select()}catch(g){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var d={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var c in d){if(this.transData.transProp==false&&document.documentElement.style[c]!=null){this.transData.transProp=c;this.transData.transEv=d[c]}}d=null}return this.transData},_xmlNodeValue:function(a){var d="";for(var c=0;c<a.childNodes.length;c++){d+=(a.childNodes[c].nodeValue!=null?a.childNodes[c].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return d}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(c,d,a){return c.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var h=arguments[1];var g=window.dhx4.trim(arguments[3]);var j=null;var f=[d[h]];if(g.length>0){g=g.split(":");var e=[];for(var l=0;l<g.length;l++){if(l>0&&e[e.length-1].match(/\\$/)!=null){e[e.length-1]=e[e.length-1].replace(/\\$/,"")+":"+g[l]}else{e.push(g[l])}}j=e[0];for(var l=1;l<e.length;l++){f.push(e[l])}}if(typeof(j)=="string"&&typeof(window.dhx4.template[j])=="function"){return window.dhx4.template[j].apply(window.dhx4.template,f)}if(h.length>0&&typeof(d[h])!="undefined"){if(a==true){return window.dhx4.trim(d[h])}return String(d[h])}return""})};window.dhx4.template.date=function(a,c){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,c)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),c)}return a}}return""};window.dhx4.template.maxlength=function(c,a){return String(c).substr(0,a)};window.dhx4.template.number_format=function(e,f,d,a){var c=window.dhx4.template._parseFmt(f,d,a);if(c==false){return e}return window.dhx4.template._getFmtValue(e,c)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(j,d,a){var e=j.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(e==null||e.length!=4){return false}var c={i_len:false,i_sep:(typeof(d)=="string"?d:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(e[1])=="string"?e[1]:""),s_aft:(typeof(e[3])=="string"?e[3]:"")};var h=e[2].split(".");if(h[1]!=null){c.d_len=h[1].length}var g=h[0].split(",");if(g.length>1){c.i_len=g[g.length-1].length}return c};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(g,e,a){if(e==null||typeof(e)=="undefnied"){e=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefnied"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(g instanceof Date){var f=function(h){return(String(h).length==1?"0"+String(h):h)};var c=function(k){switch(k){case"%d":return f(g.getDate());case"%j":return g.getDate();case"%D":return a.dayShortName[g.getDay()];case"%l":return a.dayFullName[g.getDay()];case"%m":return f(g.getMonth()+1);case"%n":return g.getMonth()+1;case"%M":return a.monthShortName[g.getMonth()];case"%F":return a.monthFullName[g.getMonth()];case"%y":return f(g.getYear()%100);case"%Y":return g.getFullYear();case"%g":return(g.getHours()+11)%12+1;case"%h":return f((g.getHours()+11)%12+1);case"%G":return g.getHours();case"%H":return f(g.getHours());case"%i":return f(g.getMinutes());case"%s":return f(g.getSeconds());case"%a":return(g.getHours()>11?"pm":"am");case"%A":return(g.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return g.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var n=g.getTimezoneOffset();var l=Math.abs(Math.floor(n/60));var j=Math.abs(n)-l*60;return(n>0?"-":"+")+f(l)+":"+f(j);default:return k}};var d=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,c)}return(d||String(g))};window.dhx4.str2date=function(h,x,B){if(x==null||typeof(x)=="undefnied"){x=window.dhx4.dateFormat[window.dhx4.dateLang]}if(B==null||typeof(B)=="undefnied"){B=window.dhx4.dateStrings[window.dhx4.dateLang]}x=x.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var A=[];var m=[];x=x.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":m.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":m.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":m.push(e);return"(\\d{1,2})";case"%Y":m.push(e);return"(\\d{4})";case"%a":m.push(e);return"([a|p]m)";case"%A":m.push(e);return"([A|P]M)";case"%u":m.push(e);return"(\\d{1,6})";case"%P":m.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var C=new RegExp(x,"i");var n=h.match(C);if(n==null||n.length-1!=m.length){return"Invalid Date"}for(var c=1;c<n.length;c++){A.push(n[c])}var d={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var o={};var l={};for(var c=0;c<m.length;c++){if(typeof(d[m[c]])!="undefined"){var g=d[m[c]];if(!o[g]){o[g]=[];l[g]=[]}o[g].push(A[c]);l[g].push(m[c])}}A=[];m=[];for(var c=1;c<=7;c++){if(o[c]!=null){for(var u=0;u<o[c].length;u++){A.push(o[c][u]);m.push(l[c][u])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var s=function(k,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==k){return f}}return -1};for(var c=0;c<A.length;c++){switch(m[c]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(A[c])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[m[c]]](Number(A[c])+(m[c]=="%m"||m[c]=="%n"?-1:0))}break;case"%M":case"%F":var j=s(A[c].toLowerCase(),B[{"%M":"monthShortName","%F":"monthFullName"}[m[c]]]);if(j>=0){a.setMonth(j)}break;case"%y":if(!isNaN(A[c])){var y=Number(A[c]);a.setFullYear(y+(y>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(A[c])){var y=Number(A[c]);if(y<=12&&y>=0){a.setHours(y+(s("pm",A)>=0?(y==12?0:12):(y==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=A[c]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var c=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var c=new window.ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(a)}}return c},xmltop:function(a,f,d){if(typeof f.status=="undefined"||f.status<400){xml=(!f.responseXML)?dhx4.ajax.parse(f.responseText||f):(f.responseXML||f);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(c){}}}if(d!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],d])}return document.createElement("DIV")},xpath:function(d,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(d)||[]}catch(g){return[]}}else{var f=[];var h;var c=(a.ownerDocument||a).evaluate(d,a,null,XPathResult.ANY_TYPE,null);while(h=c.iterateNext()){f.push(h)}return f}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,c){return this._call("GET",a,null,true,c)},getSync:function(a){return this._call("GET",a,null,false)},put:function(c,a,d){return this._call("PUT",c,a,true,d)},del:function(c,a,d){return this._call("DELETE",c,a,true,d)},post:function(c,a,d){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){d=a;a=""}else{a=String(a)}}return this._call("POST",c,a,true,d)},postSync:function(c,a){a=(a==null?"":String(a));return this._call("POST",c,a,false)},getLong:function(a,c){this._call("GET",a,null,true,c,{url:a})},postLong:function(c,a,d){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){d=a;a=""}this._call("POST",c,a,true,d,{url:c,postData:a})},_call:function(a,c,d,f,h,l,e){var k=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var g=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(f==true){k.onreadystatechange=function(){if((k.readyState==4)||(g==true&&k.readyState==3)){if(k.status!=200||k.responseText==""){if(!dhx4.callEvent("onAjaxError",[{xmlDoc:k,filePath:c,async:f}])){return}}window.setTimeout(function(){if(typeof(h)=="function"){h.apply(window,[{xmlDoc:k,filePath:c,async:f}])}if(l!=null){if(typeof(l.postData)!="undefined"){dhx4.ajax.postLong(l.url,l.postData,h)}else{dhx4.ajax.getLong(l.url,h)}}h=null;k=null},1)}}}if(a=="GET"&&this.cache!=true){c+=(c.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"}k.open(a,c,f);if(e!=null){for(var j in e){k.setRequestHeader(j,e[j])}}else{if(a=="POST"||a=="PUT"||a=="DELETE"){k.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){d=null}}}k.setRequestHeader("X-Requested-With","XMLHttpRequest");k.send(d);return{xmlDoc:k,filePath:c,async:f}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(h,d,g,f,j){if(j=="clear"){for(var c in h._dhxdataload){h._dhxdataload[c]=null;delete h._dhxdataload[c]}h._loadData=null;h._dhxdataload=null;h.load=null;h.loadStruct=null;h=null;return}h._dhxdataload={initObj:d,xmlToJson:g,xmlRootTag:f,onBeforeXLS:null};h._loadData=function(q,r,s){if(arguments.length==2){s=r;r=null}var o=null;if(arguments.length==3){s=arguments[2]}if(typeof(q)=="string"){var n=q.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var w=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(w.test(n.replace(/^<\?xml[^\?]*\?>\s*/,""))){o=dhx4.ajax.parse(q);if(o!=null){o=this[this._dhxdataload.xmlToJson].apply(this,[o])}}if(o==null&&(n.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||n.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){o=dhx4.s2j(n)}if(o==null){this.callEvent("onXLS",[]);var m=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var n=this._dhxdataload.onBeforeXLS.apply(this,[q]);if(n!=null&&typeof(n)=="object"){if(n.url!=null){q=n.url}if(n.params!=null){for(var u in n.params){m.push(u+"="+encodeURIComponent(n.params[u]))}}}}var v=this;var l=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=v[v._dhxdataload.xmlToJson].apply(v,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){v[v._dhxdataload.initObj].apply(v,[k,q])}v.callEvent("onXLE",[]);if(s!=null){if(typeof(s)=="function"){s.apply(v,[])}else{if(typeof(window[s])=="function"){window[s].apply(v,[])}}}l=s=null;k=a=v=null};m=m.join("&")+(typeof(r)=="string"?"&"+r:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(q,m,l)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(q+(m.length>0?(q.indexOf("?")>0?"&":"?")+m:""),l)}}return}}else{if(typeof(q.documentElement)=="object"||(typeof(q.tagName)!="undefined"&&typeof(q.getElementsByTagName)!="undefined"&&q.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){o=this[this._dhxdataload.xmlToJson].apply(this,[q])}else{o=window.dhx4._copyObj(q)}}if(o!=null){this[this._dhxdataload.initObj].apply(this,[o])}if(s!=null){if(typeof(s)=="function"){s.apply(this,[])}else{if(typeof(window[s])=="function"){window[s].apply(this,[])}}s=null}};if(j!=null){var e={struct:"loadStruct",data:"load"};for(var c in j){if(j[c]==true){h[e[c]]=function(){return this._loadData.apply(this,arguments)}}}}h=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,c){if(c=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(d,f){d=String(d).toLowerCase();if(!this.dhxevs.data[d]){this.dhxevs.data[d]={}}var e=window.dhx4.newId();this.dhxevs.data[d][e]=f;return e};a.detachEvent=function(g){for(var e in this.dhxevs.data){var f=0;for(var d in this.dhxevs.data[e]){if(d==g){this.dhxevs.data[e][d]=null;delete this.dhxevs.data[e][d]}else{f++}}if(f==0){this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}}};a.checkEvent=function(d){d=String(d).toLowerCase();return(this.dhxevs.data[d]!=null)};a.callEvent=function(e,g){e=String(e).toLowerCase();if(this.dhxevs.data[e]==null){return true}var f=true;for(var d in this.dhxevs.data[e]){f=this.dhxevs.data[e][d].apply(this,g)&&f}return f};a.detachAllEvents=function(){for(var e in this.dhxevs.data){for(var d in this.dhxevs.data[e]){this.dhxevs.data[e][d]=null;delete this.dhxevs.data[e][d]}this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(c){var a=c.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var c=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31)||false},isValidTime:function(c){var a=c.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var c=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&&!!(c[1]<=255&&c[2]<=255&&c[3]<=255&&c[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,e,d){var c=window[a];if(!c){return}window[a]=function(h){if(h&&typeof h=="object"&&!h.tagName){var g=c.apply(this,(e._init?e._init(h):arguments));for(var f in dhtmlx){if(e[f]){this[e[f]](dhtmlx[f])}}for(var f in h){if(e[f]){this[e[f]](h[f])}else{if(f.indexOf("on")===0){this.attachEvent(f,h[f])}}}}else{var g=c.apply(this,arguments)}if(e._patch){e._patch(this)}return g||this};window[a].prototype=c.prototype;if(d){dhtmlx.extend(window[a].prototype,d)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,c){a.onmousedown=this.preCreateDragCopy;a.dragStarter=c;this.addDragLanding(a,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,c){a.dragLanding=c};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(d){if(!d){d=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,d);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(d,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var c=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var g=document.createElement("Div");g.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=g.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=d.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=d.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!d.srcElement){var f=d.target}else{f=d.srcElement}dragger.checkLanding(f,d)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(f){if(window.name){var d=parent.frames[window.name].frameElement.offsetParent;var e=0;var c=0;while(d){e+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);e+=a.split("_")[0]*1;c+=a.split("_")[1]*1}if(f){return e+"_"+c}else{this.fx=e}this.fy=c}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(c,a){if((c)&&(c.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=c;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((c)&&(c.tagName!="BODY")){this.checkLanding(c.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(c,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:c.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(d){if(d){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=d)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(c){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=d)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(c){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(d,f){if(d){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=d.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=d.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=d.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=d.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(f))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=d)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(c){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=d)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!d||f)?1:0))}}catch(c){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(c,d,a){if(c.addEventListener){c.addEventListener(d,a,false)}else{if(c.attachEvent){c.attachEvent("on"+d,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var e;var f;var c,a;dhtmlxEvent(document.body,"touchstart",function(g){f=g.touches[0].target;c=g.touches[0].clientX;a=g.touches[0].clientY;e=window.setTimeout(d,dhtmlxEvent.touchDelay)});function d(){if(f){var g=document.createEvent("HTMLEvents");g.initEvent("dblclick",true,true);f.dispatchEvent(g);e=f=null}}dhtmlxEvent(document.body,"touchmove",function(g){if(e){if(Math.abs(g.touches[0].clientX-c)>50||Math.abs(g.touches[0].clientY-a)>50){window.clearTimeout(e);e=f=false}}});dhtmlxEvent(document.body,"touchend",function(g){if(e){window.clearTimeout(e);e=f=false}});dhtmlxEvent.initTouch=function(){}}}if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(c,a){if(!c){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(g,d){if(!g._event_check){g._event_check={};g._event_check_size={}}for(var c in d){g._event_check[c.toLowerCase()]=d[c];var f=-1;for(var e in d[c]){f++}g._event_check_size[c.toLowerCase()]=f}};dhtmlx.assert_method_info=function(f,c,e,g){var a=[];for(var d=0;d<g.length;d++){a.push(g[d][0]+" : "+g[d][1]+"\n   "+g[d][2].describe()+(g[d][3]?"; optional":""))}return f.name+"."+c+"\n"+e+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(d,a){for(var c in a){dhtmlx.assert_method_process(d,c,a[c].descr,a[c].args,(a[c].min||99),a[c].skip)}};dhtmlx.assert_method_process=function(g,c,f,h,d,e){var a=g[c];if(!e){g[c]=function(){if(arguments.length!=h.length&&arguments.length<d){dhtmlx.log("warn","Incorrect count of parameters\n"+g[c].describe()+"\n\nExpecting "+h.length+" but have only "+arguments.length)}else{for(var j=0;j<h.length;j++){if(!h[j][3]&&!h[j][2](arguments[j])){dhtmlx.log("warn","Incorrect method call\n"+g[c].describe()+"\n\nActual value of "+(j+1)+" parameter: {"+(typeof arguments[j])+"} "+arguments[j])}}}return a.apply(this,arguments)}}g[c].describe=function(){return dhtmlx.assert_method_info(g,c,f,h)}};dhtmlx.assert_event_call=function(d,c,a){if(d._event_check){if(!d._event_check[c]){dhtmlx.log("warn","Not expected event call :"+c)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+c)}else{if(d._event_check_size[c]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+d._event_check_size[c]+" parameter(s), but have "+a.length+" parameter(s), for "+c+" event")}}}}};dhtmlx.assert_event_attach=function(c,a){if(c._event_check&&!c._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(c,a){if(!c._settings_check){c._settings_check={}}dhtmlx.extend(c._settings_check,a)};dhtmlx.assert_check=function(d,c){if(typeof d=="object"){for(var a in d){dhtmlx.assert_settings(a,d[a],c)}}};dhtmlx.assert_settings=function(j,f,e){e=e||this._settings_check;if(e){if(!e[j]){return dhtmlx.log("warn","Unknown propery: "+j)}var h="";var c="";var a=false;for(var d=0;d<e[j].length;d++){var g=e[j][d];if(typeof g=="string"){continue}if(typeof g=="function"){a=a||g(f)}else{if(typeof g=="object"&&typeof g[1]=="function"){a=a||g[1](f);if(a&&g[2]){dhtmlx.assert_check(f,g[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(j,e)+"\nActual value: {"+(typeof f)+"} "+f)}}};dhtmlx.assert_info=function(c,g){var a=g[c];var f="";var e=[];for(var d=0;d<a.length;d++){if(typeof rule=="string"){f=a[d]}else{if(a[d].describe){e.push(a[d].describe())}else{if(a[d][1]&&a[d][1].describe){e.push(a[d][1].describe())}}}}return"Property: "+c+", "+f+" \nExpected value: \n - "+e.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,c){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(c){var a=function(d){return c[d]};a.describe=function(){var e=[];for(var d in c){e.push(d)}return"{String} can take one of next values: "+e.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(d,c){var e=function(a){if(d(a)||c(a)){return true}return false};e.describe=function(){return d.describe()};return e}}dhtmlx.codebase="./";dhtmlx.copy=function(c){var a=dhtmlx.copy._function;a.prototype=c;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(c,a){for(var d in a){c[d]=a[d]}if(dhtmlx.assert_enabled()&&a._assert){c._assert();c._assert=null}dhtmlx.assert(c,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){c._init()}return c};dhtmlx.proto_extend=function(){var g=arguments;var d=g[0];var c=[];for(var f=g.length-1;f>0;f--){if(typeof g[f]=="function"){g[f]=g[f].prototype}for(var e in g[f]){if(e=="_init"){c.push(g[f][e])}else{if(!d[e]){d[e]=g[f][e]}}}}if(g[0]._init){c.push(g[0]._init)}d._init=function(){for(var h=0;h<c.length;h++){c[h].apply(this,arguments)}};d.base=g[1];var a=function(h){this._init(h);if(this._parseSettings){this._parseSettings(h,this.defaults)}};a.prototype=d;d=g=null;return a};dhtmlx.bind=function(c,a){return function(){return c.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,d,c){return function(){var e=false;e=a[d].apply(a,arguments);return e}};dhtmlx.isNotDefined=function(c){return typeof c=="undefined"};dhtmlx.delay=function(e,c,d,a){setTimeout(function(){var f=e.apply(c,d);e=c=d=null;return f},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(e,d,a,c){e=dhtmlx.toNode(e);var f=dhtmlx.uid();dhtmlx._events[f]=[e,d,a];if(c){a=dhtmlx.bind(a,c)}if(e.addEventListener){e.addEventListener(d,a,false)}else{if(e.attachEvent){e.attachEvent("on"+d,a)}}return f};dhtmlx.eventRemove=function(c){if(!c){return}dhtmlx.assert(this._events[c],"Removing non-existing event");var a=dhtmlx._events[c];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[c]};dhtmlx.log=function(c,d,a){if(window.console&&console.log){c=c.toLowerCase();if(window.console[c]){window.console[c](d||"unknown error")}else{window.console.log(c+": "+d)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var c=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var d="_start_time_log"+a;if(!dhtmlx[d]){dhtmlx[d]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var c=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx[d].valueOf())/1000+"s");dhtmlx[d]=null}};dhtmlx.error=function(c,a){dhtmlx.log("error",c,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(d,f){if(this._events._block){return true}d=d.toLowerCase();dhtmlx.assert_event_call(this,d,f);var e=this._events[d.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+d,f)}if(e){for(var c=0;c<e.length;c++){if(e[c].apply(this,(f||[]))===false){a=false}}}if(this._map[d]&&!this._map[d].callEvent(d,f)){a=false}return a},attachEvent:function(c,a,e){c=c.toLowerCase();dhtmlx.assert_event_attach(this,c);e=e||dhtmlx.uid();a=dhtmlx.toFunctor(a);var d=this._events[c]||dhtmlx.toArray();d.push(a);this._events[c]=d;this._handlers[e]={f:a,t:c};return e},detachEvent:function(e){if(this._handlers[e]){var c=this._handlers[e].t;var a=this._handlers[e].f;var d=this._events[c];d.remove(a);delete this._handlers[e]}}};dhtmlx.PowerArray={removeAt:function(c,a){if(c>=0){this.splice(c,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,d){if(!d&&d!==0){this.push(c)}else{var a=this.splice(d,(this.length-d));this[d]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,d){for(var c=0;c<this.length;c++){a.call((d||this),this[c])}},map:function(a,d){for(var c=0;c<this.length;c++){this[c]=a.call((d||this),this[c])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var f=document.createElement("DIV");var e;for(var c=0;c<a.names.length;c++){while(p=a[a.names[c]].pop()){if(typeof f.style[p]!="undefined"){dhtmlx.env[a.names[c]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(c,a,d){a=a||{};var e=document.createElement(c);for(var f in a){e.setAttribute(f,a[f])}if(a.style){e.style.cssText=a.style}if(a["class"]){e.className=a["class"]}if(d){e.innerHTML=d}return e},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}}else{if(c&&c.parentNode){c.parentNode.removeChild(c)}}},insertBefore:function(c,d,a){if(!c){return}if(d){d.parentNode.insertBefore(c,d)}else{a.appendChild(c)}},locate:function(c,f){c=c||event;var a=c.target||c.srcElement;while(a){if(a.getAttribute){var d=a.getAttribute(f);if(d){return d}}a=a.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var h=e.getBoundingClientRect();var j=document.body;var c=document.documentElement;var a=window.pageYOffset||c.scrollTop||j.scrollTop;var f=window.pageXOffset||c.scrollLeft||j.scrollLeft;var g=c.clientTop||j.clientTop||0;var k=c.clientLeft||j.clientLeft||0;var l=h.top+a-g;var d=h.left+f-k;return{y:Math.round(l),x:Math.round(d)}}else{var l=0,d=0;while(e){l=l+parseInt(e.offsetTop,10);d=d+parseInt(e.offsetLeft,10);e=e.offsetParent}return{y:l,x:d}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var c=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+c.scrollLeft-c.clientLeft,y:a.clientY+c.scrollTop-c.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(c,a){c.className+=" "+a},removeCss:function(c,a){c.className=c.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var d=0;d<dhtmlx.destructors.length;d++){dhtmlx.destructors[d].destructor()}dhtmlx.destructors=[]}for(var c in dhtmlx._events){var e=dhtmlx._events[c];if(e[0].removeEventListener){e[0].removeEventListener(e[1],e[2],false)}else{if(e[0].detachEvent){e[0].detachEvent("on"+e[1],e[2])}}delete dhtmlx._events[c]}});dhtmlx.ajax=function(a,c,d){if(arguments.length!==0){var e=new dhtmlx.ajax();if(d){e.master=d}e.get(a,null,c)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(f,k,h){var c=this.getXHR();if(typeof h=="function"){h=[h]}if(typeof k=="object"){var g=[];for(var d in k){var j=k[d];if(j===null||j===dhtmlx.undefined){j=""}g.push(d+"="+encodeURIComponent(j))}k=g.join("&")}if(k&&!this.post){f=f+(f.indexOf("?")!=-1?"&":"?")+k;k=null}c.open(this.post?"POST":"GET",f,!this._sync);if(this.post){c.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var e=this;c.onreadystatechange=function(){if(!c.readyState||c.readyState==4){if(h&&e){for(var a=0;a<h.length;a++){if(h[a]){h[a].call((e.master||e),c.responseText,c.responseXML,c)}}}e.master=null;h=e=null}};c.send(k||null);return c},get:function(a,d,c){this.post=false;return this.send(a,d,c)},post:function(a,d,c){this.post=true;return this.send(a,d,c)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,c){this.callEvent("onXLS",[]);if(typeof c=="string"){this.data.driver=dhtmlx.DataDriver[c];c=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}dhtmlx.ajax(a,[this._onLoad,c],this)},parse:function(c,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(c,null)},_onLoad:function(f,c,a){var d=this.data.driver;var e=d.getRecords(d.toObject(f,c))[0];this.data=(d?d.getDetails(e):f);this.callEvent("onXLE",[])},_check_data_feed:function(c){if(!this._settings.dataFeed||this._ignore_feed||!c){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(c.id||c),c)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(c.id||c);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(e,d){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(e)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&a.data){a=a.data}if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(c){if(typeof c=="string"){var a=null;if(c.indexOf("<")==-1){a=dhtmlx.toNode(c)}if(!a){a=document.createElement("DIV");a.innerHTML=c}return a.getElementsByTagName(this.tag)}return c},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(d){var a={};for(var c=0;c<d.length;c++){a["data"+c]=d[c]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(d){d=this.stringToArray(d);var a={};for(var c=0;c<d.length;c++){a["data"+c]=d[c]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(c){c=c.split(this.cell);for(var a=0;a<c.length;a++){c[a]=c[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return c},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(c,a){if(a&&(a=this.checkResponse(c,a))){return a}if(typeof c=="string"){return this.fromString(c)}return c},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(f,l){if(window.XPathResult){var d=f;if(f.nodeName.indexOf("document")==-1){f=f.ownerDocument}var j=[];var c=f.evaluate(l,d,null,XPathResult.ANY_TYPE,null);var k=c.iterateNext();while(k){j.push(k);k=c.iterateNext()}return j}else{var h=true;try{if(typeof(f.selectNodes)=="undefined"){h=false}}catch(g){}if(h){return f.selectNodes(l)}else{var a=l.split("/").pop();return f.getElementsByTagName(a)}}},tagToObject:function(d,k){k=k||{};var f=false;var e=d.attributes;if(e&&e.length){for(var h=0;h<e.length;h++){k[e[h].name]=e[h].value}f=true}var c=d.childNodes;var j={};for(var h=0;h<c.length;h++){if(c[h].nodeType==1){var g=c[h].tagName;if(typeof k[g]!="undefined"){if(!(k[g] instanceof Array)){k[g]=[k[g]]}k[g].push(this.tagToObject(c[h],{}))}else{k[c[h].tagName]=this.tagToObject(c[h],{})}f=true}}if(!f){return this.nodeValue(d)}k.value=this.nodeValue(d);return k},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(c){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(c,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(c);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(e,d){if(d&&(d.firstChild&&d.firstChild.tagName!="parsererror")){return d}var c=this.fromString(e.replace(/^[\s]+/,""));if(c){return c}dhtmlx.error("xml can't be parsed",e)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,c){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(e,d){if(this._load_count){return this._load_count=[e,d]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+e+"&count="+d,function(){var f=this._load_count;this._load_count=false;if(typeof f=="object"){this.data.feed.apply(this,f)}})}}},_onLoad:function(d,c,a){this.data._parse(this.data.driver.toObject(d,c));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(h,g){if(this._settings.dataFeed){var f={};if(!h&&!f){return}if(typeof h=="function"){if(!g){return}h(g,f)}else{f={text:g}}this.clearAll();var c=this._settings.dataFeed;if(typeof c=="function"){return c.call(this,g,f)}var e=[];for(var d in f){e.push("dhx_filter["+d+"]="+encodeURIComponent(f[d]))}this.load(c+(c.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(f){this.callEvent("onParse",[this.driver,f]);if(this._filter_order){this.filter()}var g=this.driver.getInfo(f);if(g._key){dhtmlx.security_key=g._key}var e=this.driver.getRecords(f);var k=(g._from||0)*1;if(k===0&&this.order[0]){k=this.order.length}var c=0;for(var d=0;d<e.length;d++){var a=this.driver.getDetails(e[d]);var h=this.id(a);if(!this.pull[h]){this.order[c+k]=h;c++}this.pull[h]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var d=0;d<g._size;d++){if(!this.order[d]){var h=dhtmlx.uid();var a={id:h,$template:"loading"};this.pull[h]=a;this.order[d]=h}}this.callEvent("onStoreLoad",[this.driver,f]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(c,a){dhtmlx.assert(this.pull[c],"Can't change id, for non existing item: "+c);this.pull[a]=this.pull[c];this.pull[a].id=a;this.order[this.order.find(c)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(c)]=a}this.callEvent("onIdChange",[c,a]);if(this._render_change_id){this._render_change_id(c,a)}},get:function(a){return this.item(a)},set:function(c,a){return this.update(c,a)},item:function(a){return this.pull[a]},update:function(c,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[c,a])===false){return false}this.pull[c]=a;this.refresh(c)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(e,d){if(e){e=this.indexById(e)}else{e=this.startOffset||0}if(d){d=this.indexById(d)}else{d=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(d<0){d=0}}if(e>d){var c=d;d=e;e=c}return this.getIndexRange(e,d)},getIndexRange:function(e,d){d=Math.min((d||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var c=(e||0);c<=d;c++){a.push(this.item(this.order[c]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,e){if(a<0||e<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var d=this.idByIndex(a);var c=this.item(d);this.order.removeAt(a);this.order.insertAt(d,Math.min(this.order.length,e));this.callEvent("onStoreUpdated",[d,c,"move"])},scheme:function(a){this._scheme=a},sync:function(f,e,a){if(typeof e!="function"){a=e;e=null}if(dhtmlx.debug_bind){this.debug_sync_master=f;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var d=f;if(f.name!="DataStore"){f=f.data}var c=dhtmlx.bind(function(j,g,h){if(h!="update"||e){j=null}if(!j){this.order=dhtmlx.toArray([].concat(f.order));this._filter_order=null;this.pull=f.pull;if(e){this.silent(e)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(j)}else{a=false}},this);f.attachEvent("onStoreUpdated",c);this.feed=function(h,g){d.loadNext(g,h)};c()},add:function(f,a){if(this._scheme){f=f||{};for(var c in this._scheme){f[c]=f[c]||this._scheme[c]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(f)}else{if(this._scheme.$update){this._scheme.$update(f)}}}}var g=this.id(f);var e=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=e}if(a>e){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[g,f,a])===false){return false}if(this.exists(g)){return dhtmlx.error("Not unique ID")}this.pull[g]=f;this.order.insertAt(g,a);if(this._filter_order){var d=this._filter_order.length;if(!a&&this.order.length){d=0}this._filter_order.insertAt(g,d)}this.callEvent("onafterAdd",[g,a]);this.callEvent("onStoreUpdated",[g,f,"add"]);return g},remove:function(d){if(d instanceof Array){for(var a=0;a<d.length;a++){this.remove(d[a])}return}if(this.callEvent("onBeforeDelete",[d])===false){return false}if(!this.exists(d)){return dhtmlx.error("Not existing ID",d)}var c=this.item(d);this.order.remove(d);if(this._filter_order){this._filter_order.remove(d)}delete this.pull[d];this.callEvent("onafterdelete",[d]);this.callEvent("onStoreUpdated",[d,c,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(c){var a=this.order.find(c);return a},next:function(c,a){return this.order[this.indexById(c)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(c,a){return this.order[this.indexById(c)-(a||1)]},sort:function(g,c,a){var d=g;if(typeof g=="function"){d={as:g,dir:c}}else{if(typeof g=="string"){d={by:g,dir:c,as:a}}}var f=[d.by,d.dir,d.as];if(!this.callEvent("onbeforesort",f)){return}if(this.order.length){var h=dhtmlx.sort.create(d);var e=this.getRange(this.first(),this.last());e.sort(h);this.order=e.map(function(j){return this.id(j)},this)}this.refresh();this.callEvent("onaftersort",f)},filter:function(f,e){if(!this.callEvent("onBeforeFilter",[f,e])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(f){var c=f;e=e||"";if(typeof f=="string"){f=dhtmlx.Template.fromHTML(f);e=e.toString().toLowerCase();c=function(j,h){return f(j).toLowerCase().indexOf(h)!=-1}}var d=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var g=this.order[a];if(c(this.item(g),e)){d.push(g)}}this._filter_order=this.order;this.order=d}this.refresh();this.callEvent("onAfterFilter",[])},each:function(d,c){for(var a=0;a<this.order.length;a++){d.call((c||this),this.item(this.order[a]))}},provideApi:function(e,c){this.debug_bind_master=e;if(c){this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,onbeforeupdate:e})}var d=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<d.length;a++){e[d[a]]=dhtmlx.methodPush(this,d[a])}if(dhtmlx.assert_enabled()){this.assert_event(e)}},serialize:function(){var d=this.order;var a=[];for(var c=0;c<d.length;c++){a.push(this.pull[d[c]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(d,c){d=d*1;c=c*1;return d>c?1:(d<c?-1:0)},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:(d<c?-1:0)},string:function(d,c){d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:(d<c?-1:0)}},by:function(c,a){if(!c){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}c=dhtmlx.Template.fromHTML(c);return function(e,d){return a(c(e),c(d))}},dir:function(c,a){if(c=="asc"){return a}return function(e,d){return a(e,d)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(c){c=c||event;var a=c.which||c.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,c.ctrlKey,c.shiftKey,c])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var c=dhtmlx.html.locate(a,this._id);if(c&&!this.callEvent("onBeforeContextMenu",[c,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(h,g,c){h=h||event;var a=h.target||h.srcElement;var d="";var j=null;var f=false;while(a&&a.parentNode){if(!f&&a.getAttribute){j=a.getAttribute(this._id);if(j){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[j,a,h])}if(!this.callEvent("on"+c,[j,h,a])){return}f=true}}d=a.className;if(d){d=d.split(" ");d=d[0]||d[1];if(g[d]){return g[d].call(this,h,j||dhtmlx.html.locate(h,this._id),a)}}a=a.parentNode}return f}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(c,a){if(typeof c=="object"){return this._parseSeetingColl(c)}return this._define(c,a)},_define:function(c,a){dhtmlx.assert_settings.call(this,c,a);var d=this[c+"_setter"];return this._settings[c]=d?d.call(this,a):a},_parseSeetingColl:function(d){if(d){for(var c in d){this._define(c,d[c])}}},_parseSettings:function(d,a){var c=dhtmlx.extend({},a);if(typeof d=="object"&&!d.tagName){dhtmlx.extend(c,d)}this._parseSeetingColl(c)},_mergeSettings:function(a,d){for(var c in d){switch(typeof a[c]){case"object":a[c]=this._mergeSettings((a[c]||{}),d[c]);break;case"undefined":a[c]=d[c];break;default:break}}return a},_parseContainer:function(c,a,d){if(typeof c=="object"&&!c.tagName){c=c.container}this._obj=this.$view=dhtmlx.toNode(c);if(!this._obj&&d){this._obj=d(c)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(c){var a=dhtmlx.Template.setter(c);var d=this;return function(){return a.apply(d,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(d,c){if(!d.types&&d.prototype.types){d=d.prototype}if(dhtmlx.assert_enabled()){this.assert_event(c)}var a=c.name||"default";this._template(c);this._template(c,"edit");this._template(c,"loading");d.types[a]=dhtmlx.extend(dhtmlx.extend({},(d.types[a]||this._default)),c);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(d,a){a="template"+(a?("_"+a):"");var c=d[a];if(c&&(typeof c=="string")){if(c.indexOf("->")!=-1){c=c.split("->");switch(c[0]){case"html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case"http":c=new dhtmlx.ajax().sync().get(c[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}d[a]=dhtmlx.Template.fromHTML(c)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,c){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=c.y+this._settings.dy+"px";this._obj.style.left=c.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(c){var a=new dhtmlx.ui.Tooltip(c);this.attachEvent("onMouseMove",function(f,d){a.show(this.get(f),dhtmlx.html.pos(d))});this.attachEvent("onMouseOut",function(f,d){a.hide()});this.attachEvent("onMouseMoving",function(f,d){a.hide()});return a}};dhtmlx.compat=function(a,c){if(dhtmlx.compat[a]){dhtmlx.compat[a](c)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(c,a){var f=document.createElement("DIV");f.id="CustomObject_"+dhtmlx.uid();f.style.width="100%";f.style.height="100%";f.cmp="grid";document.body.appendChild(f);this.attachObject(f.id);a.container=f.id;var e=this.vs[this.av];e.grid=new window[c](a);e.gridId=f.id;e.gridObj=f;e.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var d="_viewRestore";return this.vs[this[d]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(d,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=d;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var c=document.createElement("DIV");c.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(c);c=null;this._updateIdx=function(){for(var e in this.conf.idx){this.conf.idx[e]=null;delete this.conf.idx[e]}for(var h=0;h<this.cell.childNodes.length;h++){var f=this.cell.childNodes[h].className;for(var e in this.conf.idx_data){var g=new RegExp(this.conf.idx_data[e]);if(f.match(g)!=null){this.conf.idx[e]=h}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var e in this.dataNodes){if(this.dataNodes[e]!=null&&typeof(this.dataNodes[e].setSizes)=="function"){this.dataNodes[e].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(o,m,q,j,k,l,f,g){if(this.conf.size==null){this.conf.size={}}if(g==null){g={}}var r={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=o;this.conf.size.y=m;this.conf.size.w=Math.max(q,0);this.conf.size.h=Math.max(j,0);for(var n in r){var e=(g[n]||n);this.cell.style[e]=this.conf.size[r[n]]+"px"}this.callEvent("_onSetSize",[]);if(l!==true){this._adjustCont(k,f)}else{this._adjustAttached(k)}this._adjustProgress()};this._adjustCont=function(l,h){var j=this.cell.childNodes[this.conf.idx.cont];var g=0;for(var e in this.conf.ofs_nodes.t){var f=this.conf.ofs_nodes.t[e];g+=(f=="func"?this[e]():(f==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}var m=0;for(var e in this.conf.ofs_nodes.b){var f=this.conf.ofs_nodes.b[e];m+=(f=="func"?this[e]():(f==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}j.style.left="0px";j.style.top=g+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};j.style.width=this.cell.offsetWidth+"px";j.style.height=Math.max(this.cell.offsetHeight-g-m,0)+"px";this.conf.cells_cont.w=parseInt(j.style.width)-j.offsetWidth;this.conf.cells_cont.h=parseInt(j.style.height)-j.offsetHeight}j.style.left="0px";j.style.top=g+"px";j.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";j.style.height=Math.max(this.conf.size.h-g-m+this.conf.cells_cont.h,0)+"px";j=null;this._adjustAttached(l);if(h=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var f=["menu","toolbar","ribbon"];for(var h=0;h<f.length;h++){if(this.conf.idx[f[h]]!=null){var j=this.cell.childNodes[this.conf.idx[f[h]]];var g="dhx_cell_"+f[h]+"_no_borders";var e="dhx_cell_"+f[h]+"_def";j.className=j.className.replace(new RegExp(this.conf.borders?g:e),this.conf.borders?e:g);j=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(g){this.views[g]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var h=this.cell.childNodes[this.conf.idx.cont];while(h.childNodes.length>0){this.views[g].cellCont.push(h.firstChild);h.removeChild(h.firstChild)}h=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var f in this.dataNodes){for(var e in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[e][f])!="undefined"){this.views[g].ofs_nodes[e][f]=this.conf.ofs_nodes[e][f];this.conf.ofs_nodes[e][f]=null;delete this.conf.ofs_nodes[e][f]}}this.views[g].dataNodesCont[f]=this.cell.childNodes[this.conf.idx[f]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[f]]);this.views[g].dataNodes[f]=this.dataNodes[f];this.dataNodes[f]=null;delete this.dataNodes[f];this._updateIdx()}this.callEvent("_onViewSave",[g])};this._viewRestore=function(g){if(this.views[g]==null){return}this.dataObj=this.views[g].dataObj;this.dataType=this.views[g].dataType;this.conf.url_data=this.views[g].url_data;for(var h=0;h<this.views[g].cellCont.length;h++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[g].cellCont[h])}for(var f in this.views[g].dataNodes){this.dataNodes[f]=this.views[g].dataNodes[f];if(f=="menu"){this.cell.insertBefore(this.views[g].dataNodesCont[f],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(f=="toolbar"){this.cell.insertBefore(this.views[g].dataNodesCont[f],this.cell.childNodes[this.conf.idx.cont])}if(f=="ribbon"){this.cell.insertBefore(this.views[g].dataNodesCont[f],this.cell.childNodes[this.conf.idx.cont])}if(f=="sb"){this.cell.appendChild(this.views[g].dataNodesCont[f])}this._updateIdx()}for(var f in this.views[g].ofs_nodes){for(var e in this.views[g].ofs_nodes[f]){this.conf.ofs_nodes[f][e]=this.views[g].ofs_nodes[f][e]}}if(this.conf.borders!=this.views[g].borders){this[this.views[g].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[g]);this._viewDelete(g)};this._viewDelete=function(g){if(this.views[g]==null){return}this.views[g].borders=null;for(var f in this.views[g].ofs_nodes){for(var e in this.views[g].ofs_nodes[f]){this.views[g].ofs_nodes[f][e]=null}this.views[g].ofs_nodes[f]=null}this.views[g].dataType=null;this.views[g].dataObj=null;this.views[g].url_data=null;for(var h=0;h<this.views[g].cellCont.length;h++){this.views[g].cellCont[h]=null}this.views[g].cellCont=null;for(var f in this.views[g].dataNodes){this.views[g].dataNodes[f]=null;this.views[g].dataNodesCont[f]=null}this.views[g].dataNodes=this.views[g].dataNodesCont=null;this.views[g]=null;delete this.views[g]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var c=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return c};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(e){if(e==this.conf.view){var f=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=f;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[e]==null){return}var d=this.views[e];for(var c in d.dataNodes){if(typeof(d.dataNodes[c].unload)=="function"){d.dataNodes[c].unload()}d.dataNodes[c]=null;d.dataNodesCont[c]=null}if(d.dataType=="url"){if(d.cellCont!=null&&d.cellCont[0]!="null"){this._detachURLEvents(d.cellCont[0])}}else{if(d.dataObj!=null){if(typeof(d.dataObj.unload)=="function"){d.dataObj.unload()}else{if(typeof(d.dataObj.destructor)=="function"){d.dataObj.destructor()}}d.dataObj=null}}d=null;this._viewDelete(e);if(typeof(this.conf.views_loaded[e])!="undefined"){delete this.conf.views_loaded[e]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var c=document.createElement("DIV");c.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");a.className=this.conf.idx_data.pr2;if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(c,a);c=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var c=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){a.style.width=c.offsetWidth+"px";a.style.height=c.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=c.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=c.offsetHeight-this.conf.pr.ofs.h+"px";c=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var c in this.views){this.unloadView(c)}this.conf=null;for(var c in this){this[c]=null}};dhtmlXCellObject.prototype.attachObject=function(e,d){if(window.dhx4.s2b(d)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){d=false}if(typeof(e)=="string"){e=document.getElementById(e)}if(e.parentNode==this.cell.childNodes[this.conf.idx.cont]){e=null;return}if(d){e.style.display="";var a=e.offsetWidth;var c=e.offsetHeight}this._attachObject(e);this.dataType="obj";e.style.display="";e=null;if(d){this._adjustByCont(a,c)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(c,a){this._detachObject(null,c,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(c,l,d){if(d==true){d={}}var e=(typeof(d)!="undefined"&&d!=false&&d!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=c;this.conf.url_data.ajax=(l==true);this.conf.url_data.post_data=(d==true?{}:(d||null));if(l==true){var k=this;if(e){var f="";for(var j in d){f+="&"+encodeURIComponent(j)+"="+encodeURIComponent(d[j])}dhx4.ajax.post(c,f,function(a){k.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(k._doOnFrameContentLoaded)=="function"){k._doOnFrameContentLoaded()}k.dataType="url-ajax";k=a=null})}else{dhx4.ajax.get(c,function(a){k.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(k._doOnFrameContentLoaded)=="function"){k._doOnFrameContentLoaded()}k.dataType="url-ajax";k=a=null})}}else{if(this.dataType=="url"){var g=this.getFrame()}else{var g=document.createElement("IFRAME");g.frameBorder=0;g.border=0;g.style.width="100%";g.style.height="100%";g.style.position="relative";this._attachObject(g);this.dataType="url";this._attachURLEvents()}if(e){var h=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(h){this._attachURLEvents()}g.src="about:blank"}else{g.src=c+(window.dhx4.ajax.cache!=true?(c.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime():"")}g=null}g=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,h,c,e){e=e||window.scheduler;var f=false;if(c){var g=document.getElementById(c);if(g){f=true}}if(!f){var d=c||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var g=document.createElement("DIV");g.id="dhxSchedObj_"+new Date().getTime();g.style.width="100%";g.style.height="100%";g.style.position="relative";g.style.overflow="hidden";g.className="dhx_cal_container";g.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+d+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(g);this.dataType="scheduler";this.dataObj=e;this.dataObj.setSizes=function(){this.update_view()};e.init(g.id,a,h);g=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(c,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};c=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(j,e,g,a,f){if(typeof(f)!="undefined"){j=f}else{var c=e||{};var k=(typeof(c.text)=="string"&&c.text.length>0?c.text:"&nbsp;");var d=(typeof(c.height)=="number"?c.height:false);var j=document.createElement("DIV");j.className="dhx_cell_statusbar_def";j.innerHTML="<div class='"+(c.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+k+"</div>";if(d!=false){j.firstChild.style.height=j.firstChild.style.lineHeight=d+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(j,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(j)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return j};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(c){this.childNodes[0].innerHTML=c};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(c){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(c,a){if(!this.dataNodes[c]){return}this.cell.childNodes[this.conf.idx[c]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var d=this;var c=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(f){d.callEvent("_onContentMouseDown",[c,f||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(d._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",d._doOnFrameMouseDown,false)}}catch(f){}try{if(typeof(d._doOnFrameContentLoaded)=="function"){d._doOnFrameContentLoaded()}}catch(f){}}}else{a.onreadystatechange=function(f){if(this.readyState=="complete"){try{if(typeof(d._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",d._doOnFrameMouseDown)}}catch(g){}try{if(typeof(d._doOnFrameContentLoaded)=="function"){d._doOnFrameContentLoaded()}}catch(g){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var j=this.getFrame().contentWindow.document;var h=j.createElement("FORM");h.method="POST";h.action=this.conf.url_data.url;j.body.appendChild(h);var e={};if(window.dhx4.ajax.cache!=true){e["dhxr"+new Date().getTime()]="1"}for(var c in this.conf.url_data.post_data){e[c]=this.conf.url_data.post_data[c]}for(var c in e){var g=j.createElement("INPUT");g.type="hidden";g.name=c;g.value=e[c];h.appendChild(g);g=null}this.conf.url_data.post_ifr=false;h.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(c){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(c){}}a=null};dhtmlXCellObject.prototype._attachObject=function(f,c,e,a,d){if(typeof(f)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[f]==1){return this["_createNode_"+f].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(e)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=e}else{this.cell.childNodes[this.conf.idx.cont].appendChild(f)}f=null};dhtmlXCellObject.prototype._detachObject=function(f,c,a){this.callEvent("_onBeforeContentDetach",[]);if(f=="menu"||f=="toolbar"||f=="ribbon"||f=="sb"){var e=this.cell.childNodes[this.conf.idx[f]];e.parentNode.removeChild(e);e=null;this.conf.ofs_nodes[f=="sb"?"b":"t"][f]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(c==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var e=this.cell.childNodes[this.conf.idx.cont];while(e.childNodes.length>0){if(a===false){e.removeChild(e.lastChild)}else{e.firstChild.style.display="none";a.appendChild(e.firstChild)}}if(this.conf.append_mode){e.style.overflow="";this.conf.append_mode=false}var d=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=e=null;if(this.conf.unloading!=true&&d){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(c){this.detachObject(true);var e="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){e="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&c instanceof window.dhtmlXWindowsCell&&c.wins.w[c._idd].conf.parked){c.wins._winCellSetOpacity(c._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&c instanceof window.dhtmlXAccordionCell&&c.conf.opened==false){c._cellSetOpacity("open",false)}for(var d in c.dataNodes){this._attachObject(d,null,null,null,c.cell.childNodes[c.conf.idx[d]]);this.dataNodes[d]=c.dataNodes[d];c.dataNodes[d]=null;c.conf.ofs_nodes[d=="sb"?"b":"t"][d]=false;c._updateIdx()}this._mtbUpdBorder();if(c.dataType!=null&&c.dataObj!=null){this.dataType=c.dataType;this.dataObj=c.dataObj;while(c.cell.childNodes[c.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild)}c.dataType=null;c.dataObj=null;if(this.dataType=="grid"){if(e=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(c.cell.childNodes[c.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(c.cell.childNodes[c.conf.idx.cont].firstChild)}}this.conf.view=c.conf.view;c.conf.view="def";for(var d in c.views){this.views[d]=c.views[d];c.views[d]=null;delete c.views[d]}c._updateIdx();c._adjustCont();this._updateIdx();this._adjustCont();if(c.conf.progress==true){c.progressOff();this.progressOn()}else{this.progressOff()}if(e=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(f,c){if(arguments.length==0||typeof(f)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(f==document.body){this.conf.fs_mode=true;this.base=f;if(this.base==document.body){var d={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=(d[this.conf.skin]!=null?d[this.conf.skin]:d.dhx_skyblue)}}else{this.base=(typeof(f)=="string"?document.getElementById(f):f)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(c!=null){this.setOffsets(c,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(g){}}}this._adjustCont=function(){var j=this.conf.ofs.t;for(var h in this.conf.ofs_nodes.t){j+=(this.conf.ofs_nodes.t[h]==true?this.dataNodes[h].offsetHeight:0)}var e=this.conf.ofs.b;for(var h in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[h]==true?this.dataNodes[h].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=j+"px";this.cont.style.height=this.base.clientHeight-j-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};f=null}dhtmlXCellTop.prototype.setOffsets=function(g,f){var e=false;for(var c in g){var d=c.charAt(0);if(typeof(this.conf.ofs[d])!="undefined"&&!isNaN(g[c])){this.conf.ofs[d]=parseInt(g[c]);e=true}}if(f!==false&&typeof(this.setSizes)=="function"&&e==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var c=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){c.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(c){this.childNodes[0].innerHTML=c};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(c){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(c,a){if(this.dataNodes[c]==null){return}this.dataNodes[c].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(c,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var c=document.createElement("DIV");c.className="dhxcelltop_progress";this.base.appendChild(c);var a=document.createElement("DIV");a.className="dhxcelltop_progress_img";this.base.appendChild(a);c=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var e={dhxcelltop_progress:true,dhxcelltop_progress_img:true};for(var d=0;d<this.base.childNodes.length;d++){if(typeof(this.base.childNodes[d].className)!="undefined"&&e[this.base.childNodes[d].className]==true){e[this.base.childNodes[d].className]=this.base.childNodes[d]}}for(var c in e){if(e[c]!=true){this.base.removeChild(e[c])}e[c]=null}this.conf.progress=false;e=null};dhtmlXCellTop.prototype.attachHeader=function(c,a){if(this.dataNodes.haObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||c.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(c);c.style.visibility="visible";c=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(d,a){if(this.dataNodes.faObj!=null){return}if(typeof(d)!="object"){d=document.getElementById(d)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||d.offsetHeight)+"px";var c=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==c){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,c.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(d);d.style.visibility="visible";c=d=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXPopup(d){var e=this;this.conf=d||{};d=null;this.mode=(this.conf.mode||"bottom");this.conf.zi=window.dhx4.newId();this.conf.context=(this.conf.context==null?true:window.dhx4.s2b(this.conf.context));this.conf.IE6_display_fix=(this.conf.IE6_display_fix==null?false:window.dhx4.s2b(this.conf.IE6_display_fix));this.conf.last_p_click=this.conf.last_body_click=null;this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.p.oncontextmenu=function(a){if(e.conf.context==false){a=a||event;a.returnValue=false;return false}};this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.ontouchstart=this.p.onclick=function(g){g=g||event;var f=(e.conf.last_p_click!=null&&e.conf.last_p_click!=g.type);e.conf.last_p_click=g.type;if(f==true){return}e._clearClick=true;if(e._nodeObj!=null){e.callEvent("onContentClick",[]);return true}var a=(g.target||g.srcElement);var h=null;while(a!=e.p&&a!=null){if(typeof(a._idd)!="undefined"&&!a._isSeparator){h=a._idd;a=null}else{a=a.parentNode}}a=null;if(h!=null){e.callEvent("onClick",[h]);if(e!=null&&e.isVisible!=null&&e.isVisible()&&e.callEvent("onBeforeHide",["select",g,h])===true){g.cancelBubble=true;e.hide()}}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=function(a){this.tpl=a.split(",")};this.show=function(f){var a=null;if(arguments.length==1){if(!f){f=this.conf.id[0]}else{if(!this._idExists(f)){return}}if(this.conf.toolbar){a=this.conf.toolbar._getItemDim(f)}if(this.conf.ribbon){a=this.conf.ribbon._getItemDim(f)}if(this.conf.form){a=this.conf.form._getItemDim(f)}}else{if(arguments.length==4){this._clearClick=true;a={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};f=null}}if(!a){return}this.p.style.visibility="hidden";this.p.style.display="";this._setPos(a);this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this.p.style.visibility="visible";this._lastId=f;this.callEvent("onShow",[f])};this._setPos=function(D,j){var r=D.left;var o=D.top;var u=D.width;var G=D.height;this._posData={left:r,top:o,width:u,height:G};var I=window.dhx4.screenDim();var B=j||this.mode;if(typeof(j)=="undefined"){j=false}var K={top:(o-this.p.offsetHeight)-I.top,bottom:I.bottom-(o+G+this.p.offsetHeight),left:r-this.p.offsetWidth-I.left,right:I.right-(r+u+this.p.offsetWidth)};if(!j&&K[B]<0){var E=this._getAvailPos(B,K);if(E!==false){this._setPos(D,E);return}}if(B=="top"||B=="bottom"){var v=this.skinParams[this.conf.skin].t2;var s=this.skinParams[this.conf.skin].t3;var n=Math.round(this.p.offsetWidth/2);var a=Math.round(this.p.lastChild.offsetWidth/2);if(r<I.left){var H=Math.min(r+u,I.left);u=r+u-H;r=H}if(r+u>I.right){u=I.right-r}var q=Math.round(r+u/2);var g=q-n;var F=q-v-a;var m=q+a+v-this.p.offsetWidth;if(g<I.left-s){g=Math.min(I.left-s,F)}else{if(g+this.p.offsetWidth>I.right+s){g=Math.max(m,I.right+s-this.p.offsetWidth)}}this.p.style.left=g+"px";this.p.style.top=(B=="top"?o-this.p.offsetHeight:o+G)+"px";q=q-g-a;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+B;this.p.lastChild.style.top=(B=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=q+"px"}if(B=="left"||B=="right"){var v=this.skinParams[this.conf.skin].t0;var s=this.skinParams[this.conf.skin].t1;var l=Math.round(this.p.offsetHeight/2);var M=Math.round(this.p.lastChild.offsetHeight/2);if(o<I.top){var f=Math.min(o+G,I.top);G=o+G-f;o=f}if(o+G>I.bottom){G=I.bottom-o}var q=Math.round(o+G/2);var C=q-l;var L=q-v-M;var J=q+M+v-this.p.offsetHeight;if(C<I.top-s){C=Math.min(I.top-s,L)}else{if(C+this.p.offsetHeight>I.bottom+s){C=Math.max(J,I.bottom+s-this.p.offsetHeight)}}this.p.style.left=(B=="left"?r-this.p.offsetWidth:r+u)+"px";this.p.style.top=C+"px";q=q-C-M;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+B;this.p.lastChild.style.left=(B=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=q+"px"}if(this._IEDisp&&this._nodeId!=null){var A=document.getElementById(this._nodeId);if(this.conf.IE6_display_fix==true){A.style.visibility="hidden"}window.setTimeout(function(){A.style.visibility="visible";A=null},1)}};this._getAvailPos=function(l,k){var g={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]};var h=null;for(var j=0;j<g[l].length;j++){if(h==null&&k[g[l][j]]>0){h=g[l][j]}}if(h==null){h="bottom";for(var f in k){if(k[f]>k[h]){h=f}}}if(h==l){return false}return h};this._repaint=function(){if(this.isVisible()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(window.dhx4.isIE&&typeof(window.dhtmlXLayoutObject)!="undefined"&&this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var f=0;f<this._nodeObjEv.length;f++){this.detachEvent(this._nodeObjEv[f])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var a=this.p.firstChild.firstChild.firstChild;while(a.childNodes.length>0){a.removeChild(a.lastChild)}a=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null;this.callEvent("onHide",[a]);this.conf.last_p_click=this.conf.last_body_click=null}};this.isVisible=function(){return(this.p.style.display=="")};this.itemData={};this.getItemData=function(a){if(!a){return this.itemData}if(this.itemData[a]){return this.itemData[a]}return{}};this.setSkin=function(a){this.conf.skin=a;this.p.className="dhx_popup_"+this.conf.skin;if(this._nodeObj!=null&&typeof(this._nodeObj.setSkin)=="function"){this._nodeObj.setSkin(this.conf.skin)}this._repaint()};this.attachList=function(g,l){this._setTemplate(g);this.clear();var h=this.p.firstChild.firstChild.firstChild;for(var k=0;k<l.length;k++){var j=document.createElement("TR");if(l[k]!=this.separator){if(typeof(l[k].id)=="undefined"||l[k].id==null){j._idd=window.dhx4.newId();while(this.itemData[j._idd]!=null){j._idd=window.dhx4.newId()}}else{j._idd=l[k].id}this.itemData[j._idd]=l[k]}h.appendChild(j);if(l[k]==this.separator){j.className="dhx_popup_sep";j._isSeparator=true;var m=document.createElement("TD");m.className="dhx_popup_sep";m.colSpan=this.tpl.length;m.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";j.appendChild(m);m=null}else{for(var a=0;a<this.tpl.length;a++){var f="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||a==0||a==this.tpl.length-1)){if(this.tpl.length==1){f+=" dhx_popup_td_single"}else{f+=(a==0?" dhx_popup_td_first":" dhx_popup_td_last")}}var m=document.createElement("TD");m.className=f;m.innerHTML=l[k][this.tpl[a]]||"&nbsp;";j.appendChild(m);m=null}if(this._IEHover){j._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}j=null}h=null;this._repaint()};this._attachNode=function(h,g){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild;var f=document.createElement("TR");f.className="dhxnode";a.appendChild(f);var j=document.createElement("TD");j.className="dhx_popup_td";j.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(g.width){j.firstChild.style.width=g.width+"px"}if(g.height){j.firstChild.style.height=g.height+"px"}f.appendChild(j);j=f=a=null;if(typeof(this["_attach_init_"+h])=="function"){this["_attach_init_"+h](g);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("touchstart",this._doOnClick,false);window.removeEventListener("click",this._doOnClick,false);window.removeEventListener("keyup",this._doOnKeyUp,false);window.removeEventListener("unload",this._doOnUnload,false)}else{document.body.detachEvent("onclick",this._doOnClick,false);document.body.detachEvent("onkeyup",this._doOnKeyUp,false);document.body.detachEvent("onunload",this._doOnUnload,false)}window.dhx4.detachEvent(this.conf.ev_grid_click);this.clear();if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){if(this.conf.toolbar.detachEvent!=null){this.conf.toolbar.detachEvent(this.conf.toolbarEvent)}else{this.conf.toolbar._getItemDim=null}}if(this.conf.ribbonEvent!=null&&this.conf.ribbon!=null){if(this.conf.ribbon.detachEvent!=null){this.conf.ribbon.detachEvent(this.conf.ribbonEvent)}else{this.conf.ribbon._getItemDim=null}}if(this.conf.slider!=null){for(var g=0;g<this.conf.slider_events.length;g++){this.conf.slider.detachEvent(this.conf.slider_events[g])}this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);this.p=null;for(var f in this.conf){this.conf[f]=null}for(var f in this){this[f]=null}e=null};window.dhx4._eventable(this);this._doOnClick=function(n){n=n||event;var a=(e.conf.last_body_click!=null&&e.conf.last_body_click!=n.type);e.conf.last_body_click=n.type;if(a==true){return}if(e._clearClick==true){e._clearClick=false;return}if(e.conf.form!=null){var h;var o=(n.target||n.srcElement);if((o.tagName||"").toLowerCase()=="option"){o=o.parentNode}if(o.className!=null&&o.className.search("dhxform")>=0){if(o.parentNode!=null&&o.parentNode.parentNode!=null&&o.parentNode.parentNode._idd!=null){h=o.parentNode.parentNode._idd;if(o.parentNode.parentNode._type=="ra"){h=[o.parentNode.parentNode._group,o.parentNode.parentNode._value]}}}else{var l=true;var m=false;while(l&&!m){var j=(o.className||"").toLowerCase();if(j.length>0){m=(j=="dhxform_btn"||j.search(/dhxeditor_inside/gi)>=0||j=="dhxcombo_input"||j.search(/dhxcombolist/gi)>=0)}o=o.parentNode;l=(o!=null)}if(m){return}}o=null;if(h!=null&&e._idExists(h)){return}}if(typeof(window.dhtmlXForm)!="undefined"&&e._nodeObj instanceof window.dhtmlXForm){var q={};var j=0;var g=e._nodeObj;g.forEachItem(function(f){if(g.getItemType(f)=="combo"){q[g.getCombo(f).list._listId]=true;j++}});g=null;if(j>0){var o=(n.target||n.srcElement);var l=true;var m=false;while(l==true&&m!=true){var j=(o.className||"").toLowerCase();if(j.length>0&&j.search(/^dhxcombolist/gi)>=0&&o._listId!=null&&q[o._listId]==true){m=true;o=null}else{o=o.parentNode;l=(o!=null)}}if(m==true){return}}}if(e.isVisible()&&e.callEvent("onBeforeHide",["click",n])===true){e.hide()}};this._doOnKeyUp=function(a){a=a||event;if(a.keyCode==27){if(e.isVisible()&&e.callEvent("onBeforeHide",["esc",a])===true){e.hide()}}};this._doOnUnload=function(){e.unload()};if(typeof(window.addEventListener)=="function"){window.addEventListener("touchstart",this._doOnClick,false);window.addEventListener("click",this._doOnClick,false);window.addEventListener("keyup",this._doOnKeyUp,false);window.addEventListener("unload",this._doOnUnload,false)}else{document.body.attachEvent("onclick",this._doOnClick,false);document.body.attachEvent("onkeyup",this._doOnKeyUp,false);document.body.attachEvent("onunload",this._doOnUnload,false)}this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(f,a){if(e._nodeObj!=null&&e._nodeObj==a){return}e._clearClick=false;e._doOnClick(f)});this._idExists=function(g){var a=false;for(var f=0;f<this.conf.id.length;f++){if(this.conf.id[f] instanceof Array){a=a||(this.conf.id[f][0]==g[0]&&this.conf.id[f][1]==g[1])}else{a=a||this.conf.id[f]==g}}return a};this._IEDisp=(window.dhx4.isIE6||document.compatMode!="CSS1Compat");this._IEHover=(window.dhx4.isIE6==true);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var a=event.srcElement;while(a!=this&&a._IEHover!=true){a=a.parentNode}if(a._IEHover){if(e._IEHoverTM){window.clearTimeout(e._IEHoverTM)}if(e._lastIEHover==a){return}e._IEHoverRender(a);a=null}};this.p.onmouseout=function(){if(e._IEHoverTM){window.clearTimeout(e._IEHoverTM)}e._IEHoverTM=window.setTimeout(function(){e._IEHoverRender(null)},1)};this._IEHoverRender=function(a){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,"");this._lastIEHover=null}}if(a!=null&&a.className.search(/tr_hover/gi)<0){a.className+=" tr_hover";e._lastIEHover=a}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8);this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var f=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"});var a=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(f,a)}};if(typeof(window.dhtmlXToolbarObject)!="undefined"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.conf.skin;this._doOnToolbarClick=function(f){for(var a=0;a<e.conf.id.length;a++){if(f==e.conf.id[a]){if(f!=e._lastId){e.show(f);e._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)=="undefined"){dhtmlXToolbarObject.prototype._getItemDim=function(g){var a=this.objPull[this.idPrefix+g];var f={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};a=null;return f}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)!="undefined"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.ribbon.conf.skin;this._doOnRibbonClick=function(f){for(var a=0;a<e.conf.id.length;a++){if(f==e.conf.id[a]){if(f!=e._lastId){e.show(f);e._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)=="undefined"){dhtmlXRibbon.prototype._getItemDim=function(g){var a=this._items[g].base;var f={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return f}}this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)!="undefined"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)=="undefined"){dhtmlXForm.prototype._getItemDim=function(a,f){return this.doWithItem(a,"_getDim")};for(var c in {input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[c]!=null){dhtmlXForm.prototype.items[c]._getDim=function(f){var a=f;if({ta:true,pw:true,se:true,calendar:true,colorpicker:1,editor:true}[f._type]){a=f.childNodes[f._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[f._type]){a=f.childNodes[f._ll?1:0].childNodes[1]}if({bt:true}[f._type]){a=f.firstChild}if({combo:true}[f._type]){a=f._combo.DOMParent.firstChild}var g={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return g}}}}}if(typeof(window.dhtmlXSlider)!="undefined"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider){if(!this.conf.mode){this.mode="top"}this.conf.slider_tm=null;this._sliderShow=function(){if(e.conf.slider_tm){window.clearTimeout(e.conf.slider_tm)}var a=e.conf.slider._r_actv;if(a!=null){var f={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};e.show(f.left,f.top,f.width,f.height);a=null}};this._sliderHide=function(){e.conf.slider_tm=window.setTimeout(function(){e.hide()},200)};this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]}this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue");return this}dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj=(typeof(a.obj)=="string"?document.getElementById(a.obj):a.obj);a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})};dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(c,a){return this._attachNode("form",{struct:c,width:a})};dhtmlXPopup.prototype._attach_init_form=function(c){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,c.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){a._clearClick=true});if(this.conf.editorEv!=null&&this.checkEvent(this.conf.editorEv)==false){this.conf.editorEv=null}if(dhtmlXForm.prototype.items.editor!=null&&this.conf.editorEv==null){this.conf.editorEv=this.attachEvent("onShow",function(){var f=dhtmlXForm.prototype.items.editor.editor;for(var d in f){var g=f[d].base;var e=false;while(g!=null){if(g==this.p){e=true;g=null}else{g=g.parentNode}}g=null;if(e==true){f[d].cell.conf.cells_cont=null;f[d].setSizes()}}f=null;this.detachEvent(this.conf.editorEv);this.conf.editorEv=null});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(this.conf.editorEv)}};dhtmlXPopup.prototype.attachCalendar=function(a){return this._attachNode("calendar",a||{})};dhtmlXPopup.prototype._attach_init_calendar=function(a){if(a["double"]==true){this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId);this._nodeObj.leftCalendar.setSkin(this.conf.skin);this._nodeObj.rightCalendar.setSkin(this.conf.skin)}else{this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)}this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(c,a){return this._attachNode("grid",{width:c||400,height:a||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(d,c,a){return this._attachNode("tree",{width:d||400,height:c||200,rootId:a||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",(a.rootId))};dhtmlXPopup.prototype.attachLayout=function(c,a,d){return this._attachNode("layout",{width:c||400,height:a||200,pattern:d||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(d,a,c){return this._attachNode("accordion",{width:d||400,height:a||200,conf:c||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(a.conf)};dhtmlXPopup.prototype.attachTabbar=function(d,a,c){if(typeof(c)=="string"){c={mode:c}}else{if(typeof(c)!="object"||c==null){c={}}}return this._attachNode("tabbar",{width:d||400,height:a||200,conf:c})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(a.conf)};dhtmlXPopup.prototype.attachSidebar=function(d,a,c){if(c==null){c={}}return this._attachNode("sidebar",{width:d||400,height:a||200,conf:c})};dhtmlXPopup.prototype._attach_init_sidebar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(a.conf)};dhtmlXPopup.prototype.attachEditor=function(d,a,c){return this._attachNode("editor",{width:d||400,height:a||200,conf:c||{}})};dhtmlXPopup.prototype._attach_init_editor=function(c){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;c.conf.parent=this._nodeId;if(c.conf.skin==null){c.conf.skin=this.conf.skin}this._nodeObj=new dhtmlXEditor(c.conf);var a=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(a)};dhtmlXPopup.prototype.attachColorPicker=function(a){if(typeof(a)!="object"||a==null){a={}}return this._attachNode("colorpicker",{conf:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin;a.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.conf)};dhtmlXPopup.prototype.attachCarousel=function(d,a,c){if(c==null){c={}}return this._attachNode("carousel",{width:d||400,height:a||300,conf:c})};dhtmlXPopup.prototype._attach_init_carousel=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(a.conf)};function dhtmlXToolbarObject(c,d){var a=this;this.conf={skin:(d||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue"),align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null};if(typeof(c)=="object"&&c!=null&&typeof(c.tagName)=="undefined"){if(c.icons_path!=null||c.icon_path!=null){this.conf.icons_path=(c.icons_path||c.icon_path)}if(c.icons_size!=null){this.conf.icons_size_autoload=c.icons_size}if(c.json!=null){this.conf.json_autoload=c.json}if(c.xml!=null){this.conf.xml_autoload=c.xml}if(c.onload!=null){this.conf.onload_autoload=c.onload}if(c.onclick!=null||c.onClick!=null){this.conf.auto_onclick=(c.onclick||c.onClick)}if(c.items!=null){this.conf.items_autoload=c.items}if(c.skin!=null){this.conf.skin=c.skin}if(c.align!=null){this.conf.align_autostart=c.align}c=c.parent}this.cont=(typeof(c)!="object")?document.getElementById(c):c;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}c=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);if(window.dhx4.isIPad){this.cont.ontouchstart=function(f){f=f||event;if((String(f.target.tagName||"").toLowerCase()=="input")){return true}if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}this.setSkin(this.conf.skin);this.objPull={};this.anyUsed="none";this._genStr=function(e){var f="dhxId_";var h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var g=0;g<e;g++){f+=h.charAt(Math.round(Math.random()*(h.length-1)))}return f};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(h,e){var f=null;for(var g=0;g<h.childNodes.length;g++){if(h.childNodes[g].tagName!=null){if(String(h.childNodes[g].tagName).toLowerCase()==String(e).toLowerCase()){f=h.childNodes[g]}}}return f};this._addImgObj=function(f){var e=document.createElement("IMG");if(f.childNodes.length>0){f.insertBefore(e,f.childNodes[0])}else{f.appendChild(e)}return e};this._setItemImage=function(h,f,e){if(e==true){h.imgEn=f}else{h.imgDis=f}if((!h.state&&e==true)||(h.state&&e==false)){return}var g=this._getObj(h.obj,"img");if(g==null){g=this._addImgObj(h.obj)}g.src=this.conf.icons_path+f};this._clearItemImage=function(g,e){if(e==true){g.imgEn=""}else{g.imgDis=""}if((!g.state&&e==true)||(g.state&&e==false)){return}var f=this._getObj(g.obj,"img");if(f!=null){f.parentNode.removeChild(f)}};this._setItemText=function(e,g){var f=this._getObj(e.obj,"div");if(g==null||g.length==0){if(f!=null){f.parentNode.removeChild(f)}return}if(f==null){f=document.createElement("DIV");f.className="dhxtoolbar_text";e.obj.appendChild(f)}f.innerHTML=g};this._getItemText=function(e){var f=this._getObj(e.obj,"div");if(f!=null){return f.innerHTML}return""};this._enableItem=function(f){if(f.state){return}f.state=true;if(this.objPull[f.id]["type"]=="buttonTwoState"&&this.objPull[f.id]["obj"]["pressed"]==true){f.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";f.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{f.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";f.obj.renderAs=f.obj.className}if(f.arw){f.arw.className=String(f.obj.className).replace("btn","arw")}var e=this._getObj(f.obj,"img");if(f.imgEn!=""){if(e==null){e=this._addImgObj(f.obj)}e.src=this.conf.icons_path+f.imgEn}else{if(e!=null){e.parentNode.removeChild(e)}}};this._disableItem=function(f){if(!f.state){return}f.state=false;f.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[f.id]["type"]=="buttonTwoState"&&f.obj.pressed?"pres_":"")+"dis";f.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(f.arw){f.arw.className=String(f.obj.className).replace("btn","arw")}var e=this._getObj(f.obj,"img");if(f.imgDis!=""){if(e==null){e=this._addImgObj(f.obj)}e.src=this.conf.icons_path+f.imgDis}else{if(e!=null){e.parentNode.removeChild(e)}}if(f.polygon!=null){if(f.polygon.style.display!="none"){window.dhx4.zim.clear(f.polygon._idd);f.polygon.style.display="none";if(f.polygon._ie6cover){f.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(f.id,true)}this.callEvent("onButtonSelectHide",[f.obj.idd])}}this.anyUsed="none"};this.clearAll=function(){for(var e in this.objPull){this._removeItem(String(e).replace(this.idPrefix,""))}};this._doOnClick=function(f){if(a&&a.forEachItem){a.forEachItem(function(g){if(a.objPull[a.idPrefix+g]["type"]=="buttonSelect"){var e=a.objPull[a.idPrefix+g];if(e.arw._skip===true){e.arw._skip=false}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");a.anyUsed="none";window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(a.conf.skin=="dhx_terrace"){a._improveTerraceButtonSelect(e.id,true)}a.callEvent("onButtonSelectHide",[e.obj.idd])}}}})}};if(window.dhx4.isIPad){document.addEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}if(typeof(this.conf.auto_onclick)=="function"){this.attachEvent("onClick",this.conf.auto_onclick)}else{if(typeof(this.conf.auto_onclick)=="string"&&typeof(window[this.conf.auto_onclick])=="function"){this.attachEvent("onClick",window[this.conf.auto_onclick])}}return this}dhtmlXToolbarObject.prototype.addSpacer=function(d){var c=this.idPrefix+d;if(this._spacer!=null){if(this._spacer.idd==d){return}if(this._spacer==this.objPull[c].obj.parentNode){var a=true;while(a){var h=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(h==d||this._spacer.childNodes.length==0){if(this.objPull[c].arw!=null){this.base.appendChild(this.objPull[c].arw)}a=false}}this._spacer.idd=d;this._fixSpacer();return}if(this.base==this.objPull[c].obj.parentNode){var a=true;var g=(this.objPull[c].arw!=null);while(a){var e=this.base.childNodes.length-1;if(g==true){if(this.base.childNodes[e]==this.objPull[c].arw){a=false}}if(this.base.childNodes[e].idd==d){a=false}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[e],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[e])}}}this._spacer.idd=d;this._fixSpacer();return}}else{var f=null;for(var e=0;e<this.base.childNodes.length;e++){if(this.base.childNodes[e]==this.objPull[this.idPrefix+d].obj){f=e;if(this.objPull[this.idPrefix+d].arw!=null){f=e+1}}}if(f!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=d;while(this.base.childNodes.length>f+1){this._spacer.appendChild(this.base.childNodes[f+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(d){var e=this.getParentId(d);if(e!=null){var c=null;var a=this.objPull[this.idPrefix+e]._listOptions[d];if(a!=null){if(a.sep!=null){c="buttonSelectSeparator"}else{c="buttonSelectButton"}}return c}else{if(this.objPull[this.idPrefix+d]==null){return null}return this.objPull[this.idPrefix+d]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(c){var a=this.getType(c);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button"}else{a="separator"}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(d,c){for(var a=0;a<d.length;a++){if(d[a]==c){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(e){var f=null;for(var d in this.objPull){if(this.objPull[d]._listOptions){for(var c in this.objPull[d]._listOptions){if(c==e){f=String(d).replace(this.idPrefix,"")}}}}return f};dhtmlXToolbarObject.prototype._addItem=function(a,c){if(typeof(a.text)=="string"){a.text=window.dhx4.trim(a.text);if(a.text.length==0){a.text=null}}this._addItemToStorage(a,c);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(f,e,c,a,d){this._addItem({id:f,type:"button",text:c,img:a,imgdis:d},e)};dhtmlXToolbarObject.prototype.addText=function(d,c,a){this._addItem({id:d,type:"text",text:a},c)};dhtmlXToolbarObject.prototype.addButtonSelect=function(e,j,m,a,c,k,h,o,f,g){var n=[];for(var d=0;d<a.length;d++){var l={};if(a[d] instanceof Array){l.id=a[d][0];l.type=(a[d][1]=="obj"?"button":"separator");l.text=(a[d][2]||null);l.img=(a[d][3]||null)}else{if(a[d] instanceof Object&&a[d]!=null&&typeof(a[d].id)!="undefined"&&typeof(a[d].type)!="undefined"){l.id=a[d].id;l.type=(a[d].type=="obj"?"button":"separator");l.text=a[d].text;l.img=a[d].img}}n.push(l)}this._addItem({id:e,type:"buttonSelect",text:m,img:c,imgdis:k,renderSelect:h,openAll:o,options:n,maxOpen:f,mode:g},j)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(f,e,c,a,d){this._addItem({id:f,type:"buttonTwoState",img:a,imgdis:d,text:c},e)};dhtmlXToolbarObject.prototype.addSeparator=function(c,a){this._addItem({id:c,type:"separator"},a)};dhtmlXToolbarObject.prototype.addSlider=function(c,h,f,e,k,d,g,a,j){this._addItem({id:c,type:"slider",length:f,valueMin:e,valueMax:k,valueNow:d,textMin:g,textMax:a,toolTip:j},h)};dhtmlXToolbarObject.prototype.addInput=function(e,d,c,a){this._addItem({id:e,type:"buttonInput",value:c,width:a},d)};dhtmlXToolbarObject.prototype.forEachItem=function(d){for(var c in this.objPull){if(this.inArray(this.rootTypes,this.objPull[c]["type"])){d(this.objPull[c]["id"].replace(this.idPrefix,""))}}};(function(){var g="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var d=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var c=function(h,j){return function(m,l,k){m=this.idPrefix+m;if(this.objPull[m][h]!=null){return this.objPull[m][h].call(this.objPull[m],l,k)}else{return j}}};for(var f=0;f<g.length;f++){var a=g[f];var e=d[f];dhtmlXToolbarObject.prototype[a]=c(a,e)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(f,d){if(this.objPull[this.idPrefix+f]==null){return null}var e=null;var a=0;for(var c=0;c<this.base.childNodes.length;c++){if(this.base.childNodes[c].idd!=null){if(this.base.childNodes[c].idd==f){e=a}a++}}if(!e&&this._spacer!=null){for(var c=0;c<this._spacer.childNodes.length;c++){if(this._spacer.childNodes[c].idd!=null){if(this._spacer.childNodes[c].idd==f){e=a}a++}}}return e};dhtmlXToolbarObject.prototype.setPosition=function(a,c){this._setPosition(a,c)};dhtmlXToolbarObject.prototype._setPosition=function(f,e){if(this.objPull[this.idPrefix+f]==null){return}if(isNaN(e)){e=this.base.childNodes.length}if(e<0){e=0}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}var d=this.objPull[this.idPrefix+f];this.base.removeChild(d.obj);if(d.arw){this.base.removeChild(d.arw)}var c=this._getIdByPosition(e,true);if(c[0]==null){this.base.appendChild(d.obj);if(d.arw){this.base.appendChild(d.arw)}}else{this.base.insertBefore(d.obj,this.base.childNodes[c[1]]);if(d.arw){this.base.insertBefore(d.arw,this.base.childNodes[c[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(g,c){var f=null;var a=0;var d=0;for(var e=0;e<this.base.childNodes.length;e++){if(this.base.childNodes[e]["idd"]!=null&&f==null){if((a++)==g){f=this.base.childNodes[e]["idd"]}}if(f==null){d++}}d=(f==null?null:d);return(c==true?new Array(f,d):f)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(f){var d=this.getType(f);f=this.idPrefix+f;var e=this.objPull[f];if(d=="button"){e.obj._doOnMouseOver=null;e.obj._doOnMouseOut=null;e.obj._doOnMouseUp=null;e.obj._doOnMouseUpOnceAnywhere=null;e.obj.onclick=null;e.obj.onmouseover=null;e.obj.onmouseout=null;e.obj.onmouseup=null;e.obj.onmousedown=null;e.obj.onselectstart=null;e.obj.renderAs=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.state=null;e.img=null;e.imgEn=null;e.imgDis=null;e.type=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemText=null;e.getItemText=null;e.setItemImage=null;e.clearItemImage=null;e.setItemImageDis=null;e.clearItemImageDis=null;e.setItemToolTip=null;e.getItemToolTip=null}if(d=="buttonTwoState"){e.obj._doOnMouseOver=null;e.obj._doOnMouseOut=null;e.obj.onmouseover=null;e.obj.onmouseout=null;e.obj.onmousedown=null;e.obj.onselectstart=null;e.obj.renderAs=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.state=null;e.img=null;e.imgEn=null;e.imgDis=null;e.type=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemText=null;e.getItemText=null;e.setItemImage=null;e.clearItemImage=null;e.setItemImageDis=null;e.clearItemImageDis=null;e.setItemToolTip=null;e.getItemToolTip=null;e.setItemState=null;e.getItemState=null}if(d=="buttonSelect"){for(var c in e._listOptions){this.removeListOption(f,c)}e._listOptions=null;if(e.polygon._ie6cover){document.body.removeChild(e.polygon._ie6cover);e.polygon._ie6cover=null}e.p_tbl.removeChild(e.p_tbody);e.polygon.removeChild(e.p_tbl);e.polygon.onselectstart=null;document.body.removeChild(e.polygon);e.p_tbody=null;e.p_tbl=null;e.polygon=null;e.obj.onclick=null;e.obj.onmouseover=null;e.obj.onmouseout=null;e.obj.onmouseup=null;e.obj.onmousedown=null;e.obj.onselectstart=null;e.obj.idd=null;e.obj.iddPrefix=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.arw.onclick=null;e.arw.onmouseover=null;e.arw.onmouseout=null;e.arw.onmouseup=null;e.arw.onmousedown=null;e.arw.onselectstart=null;e.arw.parentNode.removeChild(e.arw);e.arw=null;e.renderSelect=null;e.state=null;e.type=null;e.id=null;e.img=null;e.imgEn=null;e.imgDis=null;e.openAll=null;e._isListButton=null;e._separatorButtonSelectObject=null;e._buttonButtonSelectObject=null;e.setWidth=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemText=null;e.getItemText=null;e.setItemImage=null;e.clearItemImage=null;e.setItemImageDis=null;e.clearItemImageDis=null;e.setItemToolTip=null;e.getItemToolTip=null;e.addListOption=null;e.removeListOption=null;e.showListOption=null;e.hideListOption=null;e.isListOptionVisible=null;e.enableListOption=null;e.disableListOption=null;e.isListOptionEnabled=null;e.setListOptionPosition=null;e.getListOptionPosition=null;e.setListOptionImage=null;e.getListOptionImage=null;e.clearListOptionImage=null;e.setListOptionText=null;e.getListOptionText=null;e.setListOptionToolTip=null;e.getListOptionToolTip=null;e.forEachListOption=null;e.getAllListOptions=null;e.setListOptionSelected=null;e.getListOptionSelected=null}if(d=="buttonInput"){e.obj.childNodes[0].onkeydown=null;e.obj.removeChild(e.obj.childNodes[0]);e.obj.w=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemToolTip=null;e.getItemToolTip=null;e.setWidth=null;e.getWidth=null;e.setValue=null;e.getValue=null;e.setItemText=null;e.getItemText=null}if(d=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",e.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",e.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",e.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",e.pen._doOnMouseMoveEnd)}}e.pen.allowMove=null;e.pen.initXY=null;e.pen.maxX=null;e.pen.minX=null;e.pen.nowX=null;e.pen.newNowX=null;e.pen.valueMax=null;e.pen.valueMin=null;e.pen.valueNow=null;e.pen._definePos=null;e.pen._detectLimits=null;e.pen._doOnMouseMoveStart=null;e.pen._doOnMouseMoveEnd=null;e.pen.onmousedown=null;e.obj.removeChild(e.pen);e.pen=null;e.label.tip=null;document.body.removeChild(e.label);e.label=null;e.obj.onselectstart=null;e.obj.idd=null;while(e.obj.childNodes.length>0){e.obj.removeChild(e.obj.childNodes[0])}e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.state=null;e.enableItem=null;e.disableItem=null;e.isEnabled=null;e.setItemToolTipTemplate=null;e.getItemToolTipTemplate=null;e.setMaxValue=null;e.setMinValue=null;e.getMaxValue=null;e.getMinValue=null;e.setValue=null;e.getValue=null;e.showItem=null;e.hideItem=null;e.isVisible=null}if(d=="separator"){e.obj.onselectstart=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.showItem=null;e.hideItem=null;e.isVisible=null}if(d=="text"){e.obj.onselectstart=null;e.obj.idd=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setWidth=null;e.setItemText=null;e.getItemText=null}d=null;e=null;this.objPull[this.idPrefix+f]=null;delete this.objPull[this.idPrefix+f]};(function(){var e="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var c=function(f){return function(m,h,g,l,k,j){m=this.idPrefix+m;if(this.objPull[m]==null){return}if(this.objPull[m]["type"]!="buttonSelect"){return}return this.objPull[m][f].call(this.objPull[m],h,g,l,k,j)}};for(var d=0;d<e.length;d++){var a=e[d];dhtmlXToolbarObject.prototype[a]=c(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(c,a){return c+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,d,c){this.id=a.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(c.hidden!=null?"none":"");this.obj.idd=String(d);this.obj.title=(c.title||"");this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(a,d,c){this.id=a.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(c.hidden!=null?"none":"");this.obj.idd=String(d);this.obj.title=(c.title||"");this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};if(window.dhx4.isIPad){this.obj.ontouchstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}}this.obj.innerHTML=(c.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(e){this.obj.innerHTML=e};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(e){this.obj.style.width=e+"px"};this.setItemToolTip=function(e){this.obj.title=e};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(a,e,c){this.id=a.idPrefix+e;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img||"");this.imgDis=(c.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(c.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(c.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=(c.title||"");this.obj.pressed=false;this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(c.text!=null?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""));var d=this;this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=true;if(d.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){this.allowClick=false;if(d.state==false){return}if(a.anyUsed!="none"){return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.renderAs};this.obj.onclick=function(f){if(d.state==false){return}if(this.allowClick==false){return}f=f||event;var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g)}catch(f){}}if(a&&a.callEvent){a.callEvent("onClick",[g])}};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){if(d.state==false){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}f.cancelBubble=true;return false}if(a.anyUsed!="none"){return}a.anyUsed=this.idd;this.className="dhx_toolbar_btn dhxtoolbar_btn_pres";this.pressed=true;this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){a.anyUsed="none";this._doOnMouseOut()};return false};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(h){if(d.state==false){return}if(a.anyUsed!="none"){if(a.anyUsed!=this.idd){return}}var g=a.anyUsed;this._doOnMouseUp();if(window.dhx4.isIPad&&g!="none"){if(this.extAction){var f=this;window.setTimeout(function(){try{window[f.extAction](e)}catch(j){}f=null},1)}a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")])}};if(window.dhx4.isIPad){this.obj.ontouchmove=function(f){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){a.anyUsed="none";this.className=this.renderAs;this.pressed=false};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(f){a._setItemText(this,f)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(f){a._setItemImage(this,f,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(f){a._setItemImage(this,f,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(d,g,f){this.id=d.idPrefix+g;this.state=(f.enabled!=null?(f.enabled=="true"?true:false):true);this.imgEn=(f.img||"");this.imgDis=(f.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(f.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!f.text||f.text.length==0){f.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(f.openAll)==true);this.renderSelect=(f.renderSelect==null?true:window.dhx4.s2b(f.renderSelect))}this.maxOpen=(!isNaN(f.maxOpen?f.maxOpen:"")?f.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!d._sbw){var j=document.createElement("DIV");j.className="dhxtoolbar_maxopen_test";document.body.appendChild(j);var h=document.createElement("DIV");h.className="dhxtoolbar_maxopen_test2";j.appendChild(h);d._sbw=j.offsetWidth-h.offsetWidth;j.removeChild(h);h=null;document.body.removeChild(j);j=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(f.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(f.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};this.obj.idd=String(g);this.obj.title=(f.title||"");this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=d._rtlParseBtn((this.img!=""?"<img src='"+d.conf.icons_path+this.img+"'>":""),(f.text!=null?"<div class='dhxtoolbar_text'>"+f.text+"</div>":""));d.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};d.base.appendChild(this.arw);var a=this;this.obj.onmouseover=function(h){h=h||event;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw")};this.obj.onmouseout=function(){a.obj.allowClick=false;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");a.callEvent=false};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(h){h=h||event;if(!a.obj.allowClick){return}if(!a.state){return}if(d.anyUsed!="none"){return}var j=a.obj.idd.replace(d.idPrefix,"");if(a.obj.extAction){try{window[a.obj.extAction](j)}catch(h){}}d.callEvent("onClick",[j])};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(h){h=h||event;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.allowClick=true;a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.callEvent=true};this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(j){j=j||event;j.cancelBubble=true;if(d.anyUsed!="none"){return}if(!a.state){return}a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");if(window.dhx4.isIPad){if(this.extAction){var h=this;window.setTimeout(function(){try{window[h.extAction](l)}catch(k){}h=null},1)}if(a.callEvent){var l=a.obj.idd.replace(d.idPrefix,"");d.callEvent("onClick",[l])}}}}if(window.dhx4.isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(k){k=k||event;var r=(this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling);if(r._skip){k=k||event;k.cancelBubble=true}else{r._skip=true}r=null;if(!a.state){return}if(d.anyUsed==a.obj.idd){a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");d.anyUsed="none";window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,true)}d.callEvent("onButtonSelectHide",[a.obj.idd])}else{if(d.anyUsed!="none"){if(d.objPull[d.idPrefix+d.anyUsed]["type"]=="buttonSelect"){var q=d.objPull[d.idPrefix+d.anyUsed];if(q.polygon.style.display!="none"){q.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";q.obj.className=q.obj.renderAs;q.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(q.polygon._idd);q.polygon.style.display="none";if(q.polygon._ie6cover){q.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(q.id,true)}d.callEvent("onButtonSelectHide",[q.obj.idd])}}}a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";d.anyUsed=a.obj.idd;a.polygon.style.top="0px";a.polygon.style.visibility="hidden";a.polygon.style.zIndex=window.dhx4.zim.reserve(a.polygon._idd);a.polygon.style.display="";if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,false)}a._fixMaxOpenHeight(a.maxOpen||null);d._autoDetectVisibleArea();var l=window.dhx4.absTop(a.obj)+a.obj.offsetHeight+d.conf.sel_ofs_y;var n=a.polygon.offsetHeight;if(l+n>d.tY2){var m=(a.maxOpen!=null?Math.floor((d.tY2-l)/22):0);if(m>=1){a._fixMaxOpenHeight(m)}else{l=window.dhx4.absTop(a.obj)-n-d.conf.sel_ofs_y;if(l<0){l=0}}}a.polygon.style.top=l+"px";if(d.rtl){a.polygon.style.left=window.dhx4.absLeft(a.obj)+a.obj.offsetWidth-a.polygon.offsetWidth+d.conf.sel_ofs_x+"px"}else{var j=document.body.scrollLeft;var h=j+(window.innerWidth||document.body.clientWidth);var o=window.dhx4.absLeft(a.obj)+d.conf.sel_ofs_x;if(o+a.polygon.offsetWidth>h){o=window.dhx4.absLeft(a.arw)+a.arw.offsetWidth-a.polygon.offsetWidth}a.polygon.style.left=Math.max(o,5)+"px"}a.polygon.style.visibility="visible";if(a.polygon._ie6cover){a.polygon._ie6cover.style.left=a.polygon.style.left;a.polygon._ie6cover.style.top=a.polygon.style.top;a.polygon._ie6cover.style.width=a.polygon.offsetWidth+"px";a.polygon._ie6cover.style.height=a.polygon.offsetHeight+"px";a.polygon._ie6cover.style.display=""}d.callEvent("onButtonSelectShow",[a.obj.idd])}return false};this.arw.onclick=function(h){h=h||event;h.cancelBubble=true};this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(h){h=h||event;h.cancelBubble=true};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(window.dhx4.isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend}}this.obj.iddPrefix=d.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(n){var m="auto";var l=false;if(n!==null){var k=0;for(var j in this._listOptions){k++}if(k>n){this._ph=22*n;m=this._ph+"px"}else{l=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!l&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+d._sbw+"px";this.polygon.style.height=m}};this._separatorButtonSelectObject=function(k,h,j){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};if(isNaN(j)){j=a.p_tbody.childNodes.length+1}else{if(j<1){j=1}}if(j>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[j-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(l){l=l||event;if(l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[k]=this.obj;return this};this._buttonButtonSelectObject=function(m,k,l){var j=true;if(typeof(k.enabled)!="undefined"){j=window.dhx4.s2b(k.enabled)}else{if(typeof(k.disabled)!="undefined"){j=window.dhx4.s2b(k.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=j;this.obj.tr.extAction=(k.action||null);this.obj.tr._selected=(k.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}return false};this.obj.tr.idd=String(m);if(isNaN(l)){l=a.p_tbody.childNodes.length+1}else{if(l<1){l=1}}if(l>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[l-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(n){n=n||event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}return false};if(d.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(k.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+d.conf.icons_path+k.img+"' border='0'>";this.obj.tr._img=k.img}else{this.obj.td_a.innerHTML="&nbsp;"}var h=(k.text!=null?k.text:(k.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+h+"</div>";this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){if(!this.en||(this._selected&&a.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(){if(!this.en){return}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(n){n=n||event;n.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(d.idPrefix,""));a.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,true)}d.anyUsed="none";d.callEvent("onButtonSelectHide",[a.obj.idd]);var o=this.idd.replace(d.idPrefix,"");if(this.extAction){try{window[this.extAction](o)}catch(n){}}d.callEvent("onClick",[o])};a._listOptions[m]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+d.conf.skin+" dhxtoolbar_icons_"+d.conf.iconSize;this.polygon.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};this.polygon.onmousedown=function(h){h=h||event;h.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();if(window.dhx4.isIPad){this.polygon.ontouchstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}h.cancelBubble=true;return false}}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(f.options!=null){for(var e=0;e<f.options.length;e++){var c="_"+(f.options[e].type||"")+"ButtonSelectObject";if(f.options[e].id==null){f.options[e].id=d._genStr(24)}if(typeof(this[c])=="function"){new this[c](f.options[e].id,f.options[e])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(h){this.obj.style.width=h-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){d._enableItem(this)};this.disableItem=function(){d._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(h){d._setItemText(this,h)};this.getItemText=function(){return d._getItemText(this)};this.setItemImage=function(h){d._setItemImage(this,h,true)};this.clearItemImage=function(){d._clearItemImage(this,true)};this.setItemImageDis=function(h){d._setItemImage(this,h,false)};this.clearItemImageDis=function(){d._clearItemImage(this,false)};this.setItemToolTip=function(h){this.obj.title=h;this.arw.title=h};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(n,m,k,l,h){if(!(k=="button"||k=="separator")){return}var j={id:n,type:k,text:l,img:h};new this["_"+k+"ButtonSelectObject"](n,j,m)};this.removeListOption=function(k){if(!this._isListButton(k,true)){return}var h=this._listOptions[k];if(h.td_a!=null&&h.td_b!=null){h.td_a.onselectstart=null;h.td_b.onselectstart=null;while(h.td_a.childNodes.length>0){h.td_a.removeChild(h.td_a.childNodes[0])}while(h.td_b.childNodes.length>0){h.td_b.removeChild(h.td_b.childNodes[0])}h.tr.onselectstart=null;h.tr.onmouseover=null;h.tr.onmouseout=null;h.tr.onclick=null;while(h.tr.childNodes.length>0){h.tr.removeChild(h.tr.childNodes[0])}h.tr.parentNode.removeChild(h.tr);h.td_a=null;h.td_b=null;h.tr=null}else{h.sep.onselectstart=null;h.td.onselectstart=null;h.tr.onselectstart=null;while(h.td.childNodes.length>0){h.td.removeChild(h.td.childNodes[0])}while(h.tr.childNodes.length>0){h.tr.removeChild(h.tr.childNodes[0])}h.tr.parentNode.removeChild(h.tr);h.sep=null;h.td=null;h.tr=null}h=null;this._listOptions[k]=null;try{delete this._listOptions[k]}catch(j){}};this.showListOption=function(h){if(!this._isListButton(h,true)){return}this._listOptions[h].tr.style.display=""};this.hideListOption=function(h){if(!this._isListButton(h,true)){return}this._listOptions[h].tr.style.display="none"};this.isListOptionVisible=function(h){if(!this._isListButton(h,true)){return}return(this._listOptions[h].tr.style.display!="none")};this.enableListOption=function(h){if(!this._isListButton(h)){return}this._listOptions[h].tr.en=true;this._listOptions[h].tr.className="tr_btn"+(this._listOptions[h].tr._selected&&d.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(h){if(!this._isListButton(h)){return}this._listOptions[h].tr.en=false;this._listOptions[h].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.en};this.setListOptionPosition=function(k,j){if(!this._listOptions[k]||this.getListOptionPosition(k)==j||isNaN(j)){return}if(j<1){j=1}var h=this._listOptions[k].tr;this.p_tbody.removeChild(h);if(j>this.p_tbody.childNodes.length){this.p_tbody.appendChild(h)}else{this.p_tbody.insertBefore(h,this.p_tbody.childNodes[j-1])}h=null};this.getListOptionPosition=function(k){var j=-1;if(!this._listOptions[k]){return j}for(var h=0;h<this.p_tbody.childNodes.length;h++){if(this.p_tbody.childNodes[h]==this._listOptions[k].tr){j=h+1}}return j};this.setListOptionImage=function(k,h){if(!this._isListButton(k)){return}var j=this._listOptions[k].tr.childNodes[(d.rtl?1:0)];j.innerHTML="<img src='"+d.conf.icons_path+h+"' class='btn_sel_img'>";j=null};this.getListOptionImage=function(k){if(!this._isListButton(k)){return}var j=this._listOptions[k].tr.childNodes[(d.rtl?1:0)];var h=null;if(j.childNodes.length>0){h=j.childNodes[0].src}j=null;return h};this.clearListOptionImage=function(j){if(!this._isListButton(j)){return}var h=this._listOptions[j].tr.childNodes[(d.rtl?1:0)];while(h.childNodes.length>0){h.removeChild(h.childNodes[0])}h.innerHTML="&nbsp;";h=null};this.setListOptionText=function(j,h){if(!this._isListButton(j)){return}this._listOptions[j].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML=h};this.getListOptionText=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(j,h){if(!this._isListButton(j)){return}this._listOptions[j].tr.title=h};this.getListOptionToolTip=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.title};this.forEachListOption=function(j){for(var h in this._listOptions){j(h)}};this.getAllListOptions=function(){var j=new Array();for(var h in this._listOptions){j[j.length]=h}return j};this.setListOptionSelected=function(k){for(var h in this._listOptions){var j=this._listOptions[h];if(j.td_a!=null&&j.td_b!=null&&j.tr.en){if(h==k){j.tr._selected=true;j.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(j.tr._img){this.setItemImage(j.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(k))}}else{j.tr._selected=false;j.tr.className="tr_btn"}}j=null}};this.getListOptionSelected=function(){var j=null;for(var h in this._listOptions){if(this._listOptions[h].tr._selected==true){j=h}}return j};this._isListButton=function(j,h){if(this._listOptions[j]==null){return false}if(!h&&this._listOptions[j].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(h){this._ph=null;if(typeof(h)=="number"){this.maxOpen=h;this._maxOpenTest();return}this.maxOpen=null};if(f.width){this.setWidth(f.width)}if(this.mode=="select"&&typeof(f.selected)!="undefined"){this.setListOptionSelected(f.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(d,f,e){this.id=d.idPrefix+f;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(e.hidden!=null?"none":"");this.obj.idd=String(f);this.obj.w=(e.width!=null?e.width:100);this.obj.title=(e.title!=null?e.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(e.value!=null?" value='"+e.value+"'":"")+">";var c=d;var a=this;this.obj.childNodes[0].onkeydown=function(g){g=g||event;if(g.keyCode==13){c.callEvent("onEnter",[a.obj.idd,this.value])}};d.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(g){this.obj.childNodes[0].value=g};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(g){this.obj.w=g;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(g){this.obj.title=g};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(e.enabled)!="undefined"&&window.dhx4.s2b(e.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,e,c){this.id=a.idPrefix+e;this.state=(c.enabled!=null?false:true);this.imgEn=(c.img!=null?c.img:"");this.imgDis=(c.imgdis!=null?c.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(c.selected!=null);this.obj.extAction=(c.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(c.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=(c.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.conf.icons_path+this.img+"'>":""),(c.text!=null?"<div class='dhxtoolbar_text'>"+c.text+"</div>":""));a.base.appendChild(this.obj);var d=this;this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(d.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_over";this.renderAs=this.className};this.obj._doOnMouseOut=function(){if(d.state==false){return}if(a.anyUsed!="none"){return}if(this.pressed){this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";return}this.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.renderAs=this.className};this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){if(a.checkEvent("onBeforeStateChange")){if(!a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed])){return}}if(d.state==false){return}if(a.anyUsed!="none"){return}this.pressed=!this.pressed;this.className=(this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs);var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g,this.pressed)}catch(f){}}a.callEvent("onStateChange",[g,this.pressed]);return false};this.setItemState=function(f,h){if(this.obj.pressed!=f){if(f==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis");this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.renderAs=this.obj.className}if(h==true){var j=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](j,this.obj.pressed)}catch(g){}}a.callEvent("onStateChange",[j,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){a._enableItem(this)};this.disableItem=function(){a._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(f){a._setItemText(this,f)};this.getItemText=function(){return a._getItemText(this)};this.setItemImage=function(f){a._setItemImage(this,f,true)};this.clearItemImage=function(){a._clearItemImage(this,true)};this.setItemImageDis=function(f){a._setItemImage(this,f,false)};this.clearItemImageDis=function(){a._clearItemImage(this,false)};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(e,g,f){this.id=e.idPrefix+g;this.state=(f.enabled!=null?(f.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(f.hidden!=null?"none":"");this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};this.obj.idd=String(g);this.obj.len=(f.length!=null?Number(f.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(f.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(f.textMax||"")+"</div>";e.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var d=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+e.conf.skin+(e.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(f.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var c=this.label;this.pen.valueMin=(f.valueMin!=null?Number(f.valueMin):0);this.pen.valueMax=(f.valueMax!=null?Number(f.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(f.valueNow!=null?Number(f.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(h){if(a.state==false){return}h=h||event;this.initXY=(window.dhx4.isIPad?h.touches[0].clientX:h.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(c.tip!=""){c.style.visibility="hidden";c.style.display="";c.innerHTML=c.tip.replace("%v",this.valueNow);c.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-c.offsetWidth/2)+"px";c.style.top=window.dhx4.absTop(this)-c.offsetHeight-3+"px";c.style.visibility="";c.style.zIndex=window.dhx4.zim.reserve(c._zi)}};this.pen._doOnMouseMoveStart=function(j){j=j||event;if(!d.allowMove){return}var h=(window.dhx4.isIPad?j.touches[0].clientX:j.clientX);var k=h-d.initXY;if(h<window.dhx4.absLeft(d)+Math.round(d.offsetWidth/2)&&d.nowX==d.minX){return}if(h>window.dhx4.absLeft(d)+Math.round(d.offsetWidth/2)&&d.nowX==d.maxX){return}d.newNowX=d.nowX+k;if(d.newNowX<d.minX){d.newNowX=d.minX}if(d.newNowX>d.maxX){d.newNowX=d.maxX}d.nowX=d.newNowX;d.style.left=d.nowX+"px";d.initXY=h;d.newValueNow=Math.round((d.valueMax-d.valueMin)*(d.newNowX-d.minX)/(d.maxX-d.minX)+d.valueMin);if(c.tip!=""){c.innerHTML=c.tip.replace(/%v/gi,d.newValueNow);c.style.left=Math.round(window.dhx4.absLeft(d)+d.offsetWidth/2-c.offsetWidth/2)+"px";c.style.top=window.dhx4.absTop(d)-c.offsetHeight-3+"px"}j.cancelBubble=true;if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!d.allowMove){return}d.className="dhxtoolbar_sl_pen";d.allowMove=false;d.nowX=d.newNowX;d.valueNow=d.newValueNow;if(c.tip!=""){c.style.display="none";window.dhx4.zim.clear(c._zi)}e.callEvent("onValueChange",[a.obj.idd.replace(e.idPrefix,""),d.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",d._doOnMouseMoveStart,false);document.addEventListener("touchend",d._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",d._doOnMouseMoveStart,false);window.addEventListener("mouseup",d._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",d._doOnMouseMoveStart);document.body.attachEvent("onmouseup",d._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(h,j){h=Number(h);if(h<this.pen.valueMin){h=this.pen.valueMin}if(h>this.pen.valueMax){h=this.pen.valueMax}this.pen.valueNow=h;this.pen._definePos();if(j==true){e.callEvent("onValueChange",[this.obj.idd.replace(e.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(j,h){j=Number(j);if(j>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=h;this.obj.childNodes[0].style.display=(h.length>0?"":"none");this.pen.valueMin=j;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(j,h){j=Number(j);if(j<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=h;this.obj.childNodes[4].style.display=(h.length>0?"":"none");this.pen.valueMax=j;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var h=this.obj.childNodes[0].innerHTML;var j=this.pen.valueMin;return new Array(j,h)};this.getMaxValue=function(){var h=this.obj.childNodes[4].innerHTML;var j=this.pen.valueMax;return new Array(j,h)};this.setItemToolTipTemplate=function(h){this.label.tip=h};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(this.conf.isIPad){document.removeEventListener("touchstart",this._doOnClick,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype._initObj=function(c){for(var a=0;a<c.length;a++){this._addItemToStorage(c[a])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(n){var l=[];var v=n.getElementsByTagName("toolbar");if(v!=null&&v[0]!=null){v=v[0];var o=function(e){var h=e.getElementsByTagName("itemText");if(h!=null&&h[0]!=null){return window.dhx4._xmlNodeValue(h[0])}return null};var A=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var d=["id","type","enabled","disabled","action","selected","img","text"];for(var c=0;c<v.childNodes.length;c++){if(v.childNodes[c].tagName=="item"){var j={};for(var x=0;x<A.length;x++){var f=v.childNodes[c].getAttribute(A[x]);if(f!=null){j[A[x]]=f}}for(var s=0;s<v.childNodes[c].childNodes.length;s++){if(v.childNodes[c].childNodes[s].tagName=="item"&&j.type=="buttonSelect"){var y={};for(var x=0;x<d.length;x++){var f=v.childNodes[c].childNodes[s].getAttribute(d[x]);if(f!=null){y[d[x]]=f}}var m=v.childNodes[c].childNodes[s].getElementsByTagName("userdata");for(var x=0;x<m.length;x++){if(!y.userdata){y.userdata={}}var a={};try{a.name=m[x].getAttribute("name")}catch(g){a.name=null}try{a.value=m[x].firstChild.nodeValue}catch(g){a.value=""}if(a.name!=null){y.userdata[a.name]=a.value}}y.text=o(v.childNodes[c].childNodes[s])||y.text;if(j.options==null){j.options=[]}j.options.push(y)}if(v.childNodes[c].childNodes[s].tagName=="userdata"){if(j.userdata==null){j.userdata={}}var y={};try{y.name=v.childNodes[c].childNodes[s].getAttribute("name")}catch(g){y.name=null}try{y.value=v.childNodes[c].childNodes[s].firstChild.nodeValue}catch(g){y.value=""}if(y.name!=null){j.userdata[y.name]=y.value}}}j.text=o(v.childNodes[c])||j.text;l.push(j)}}o=null}return l};dhtmlXToolbarObject.prototype._addItemToStorage=function(g,j){var h=(g.id||this._genStr(24));var e=(g.type||"");if(e=="spacer"){this.addSpacer(this._lastId)}else{this._lastId=h}if(e!=""&&this["_"+e+"Object"]!=null){if(e=="buttonSelect"){if(g.options!=null){for(var f=0;f<g.options.length;f++){if(g.options[f].type=="obj"){g.options[f].type="button"}if(g.options[f].type=="sep"){g.options[f].type="separator"}}}}if(e=="slider"){var d={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var c in d){if(g[d[c]]==null&&g[c]!=null){g[d[c]]=g[c]}}}if(e=="buttonInput"){if(g.value==null&&g.text!=null){g.value=g.text}}if(e=="buttonTwoState"){if(typeof(g.selected)=="undefined"&&typeof(g.pressed)!="undefined"&&window.dhx4.s2b(g.pressed)){g.selected=true}}if(typeof(g.enabled)=="undefined"&&typeof(g.disabled)!="undefined"&&window.dhx4.s2b(g.disabled)){g.enabled=false}if(g.imgDis==null&&g.img_disabled!=null){g.imgdis=g.img_disabled}if((typeof(g.openAll)=="undefined"||g.openAll==null)&&this.conf.skin=="dhx_terrace"){g.openAll=true}this.objPull[this.idPrefix+h]=new this["_"+e+"Object"](this,h,g);this.objPull[this.idPrefix+h]["type"]=e;this.setPosition(h,j)}if(g.userdata!=null){for(var c in g.userdata){this.setUserData(h,c,g.userdata[c])}}if(g.options!=null){for(var f=0;f<g.options.length;f++){if(g.options[f].userdata!=null){for(var c in g.options[f].userdata){this.setListOptionUserData(g.id,g.options[f].id,c,g.options[f].userdata[c])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(f,d){if(d===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=f;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}for(var c in this.objPull){var e=this.objPull[c];if(e.type=="slider"){e.pen._detectLimits();e.pen._definePos();e.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(e.type=="buttonSelect"){e.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize}}if(f=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align=(a=="right"?"right":"left");this.base.className=(a=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(a=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(d,a,c){d=this.idPrefix+d;if(this.objPull[d]!=null){if(this.objPull[d].userData==null){this.objPull[d].userData={}}this.objPull[d].userData[a]=c}};dhtmlXToolbarObject.prototype.getUserData=function(c,a){c=this.idPrefix+c;if(this.objPull[c]!=null&&this.objPull[c].userData!=null){return this.objPull[c].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,d){if(this.objPull[this.idPrefix+a]==null){return false}var c=this.objPull[this.idPrefix+a];if(c.type!="buttonSelect"){return false}if(c._listOptions[d]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,f,c,e){if(!this._isListOptionExists(a,f)){return}var d=this.objPull[this.idPrefix+a]._listOptions[f];if(d.userData==null){d.userData={}}d.userData[c]=e};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,e,c){if(!this._isListOptionExists(a,e)){return null}var d=this.objPull[this.idPrefix+a]._listOptions[e];if(!d.userData){return null}return(d.userData[c]?d.userData[c]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var d=[];var f={separator:true,text:true};var h=[this.base];if(this._spacer!=null){h.push(this._spacer)}for(var k=0;k<h.length;k++){d[k]=[];for(var c=0;c<h[k].childNodes.length;c++){if(h[k].childNodes[c].idd!=null&&h[k].childNodes[c].style.display!="none"){var j=this.idPrefix+h[k].childNodes[c].idd;if(this.objPull[j]!=null&&this.objPull[j].obj==h[k].childNodes[c]){d[k].push({a:j,type:this.objPull[j].type,node:this.objPull[j][this.objPull[j].type=="buttonSelect"?"arw":"obj"]})}}}h[k]=null}for(var k=0;k<d.length;k++){for(var c=0;c<d[k].length;c++){var l=d[k][c];var m=false;var g=false;if(!f[l.type]){if(c==d[k].length-1||(d[k][c+1]!=null&&f[d[k][c+1].type])){m=true}if(c==0||(c-1>=0&&d[k][c-1]!=null&&f[d[k][c-1].type])){g=true}}l.node.style.borderRightWidth=(m?"1px":"0px");l.node.style.borderTopRightRadius=l.node.style.borderBottomRightRadius=(m?this.conf.terrace_radius:"0px");if(l.type=="buttonSelect"){l.node.previousSibling.style.borderTopLeftRadius=l.node.previousSibling.style.borderBottomLeftRadius=(g?this.conf.terrace_radius:"0px");l.node.previousSibling._br=m;l.node.previousSibling._bl=g}else{l.node.style.borderTopLeftRadius=l.node.style.borderBottomLeftRadius=(g?this.conf.terrace_radius:"0px")}l.node._br=m;l.node._bl=g}}for(var k=0;k<d.length;k++){for(var c=0;c<d[k].length;c++){for(var j in d[k][c]){d[k][c][j]=null}d[k][c]=null}d[k]=null}d=h=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(d,c){var a=this.objPull[d];if(c==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.conf.terrace_radius:"0px");a.arw.style.borderBottomRightRadius=(a.obj._br?this.conf.terrace_radius:"0px")}else{a.obj.style.borderBottomLeftRadius="0px";a.arw.style.borderBottomRightRadius="0px"}a=null};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_toolbar=function(f,c,e,a,d){if(typeof(d)!="undefined"){f=d}else{f=document.createElement("DIV");f.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");f.appendChild(document.createElement("DIV"));f.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(f,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return f};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["toolbar"]);if(typeof(a)=="undefined"){a={}}else{if(typeof(a)=="string"){a={skin:a}}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(!this.dataNodes.toolbar){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}}function dhtmlXEditor(d,e){var c=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:(navigator.userAgent.match(/Mobile/gi)!=null&&navigator.userAgent.match(/iPad/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null)};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(d)=="object"&&d!=null&&d.tagName==null){e=d.skin;if(d.content!=null){this.conf.content=d.content}if(d.contentHTML!=null){this.conf.contentHTML=d.contentHTML}if(d.iconsPath!=null){this.conf.iconsPath=d.iconsPath}if(d.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(d.toolbar)}if(d.onFocusChanged!=null){this._doOnFocusChanged=d.onFocusChanged}if(d.onAccess!=null){this._doOnAccess=d.onAccess}d=d.parent}this.conf.skin=(e||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue");if(typeof(d)=="string"){d=document.getElementById(d)}this.base=d;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var f=(window.dhx4.isIE?this.base.currentStyle.position:(window.getComputedStyle!=null?window.getComputedStyle(this.base,null).getPropertyValue("position"):""));if(!(f=="relative"||f=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}this.setSizes();var a=this.editor;if(typeof(window.addEventListener)!="undefined"){a.onload=function(){for(var g=0;g<c.conf.evs.length;g++){a.contentWindow.addEventListener(c.conf.evs[g],c._ev,false)}}}else{a.onreadystatechange=function(g){if(typeof(a.readyState)!="undefined"&&a.readyState=="complete"){try{for(var h=0;h<c.conf.evs.length;h++){a.contentWindow.document.body.attachEvent("on"+c.conf.evs[h],c._ev)}}catch(j){}}}}this._ev=function(h){h=h||event;var g=h.type;if(c.conf.iOSfix==true&&g=="touchend"){c.editor.contentWindow.focus();return}c.callEvent("onAccess",[g,h]);if(typeof(c._doOnAccess)=="function"){c._doOnAccess(g,h)}else{if(typeof(c._doOnAccess)=="string"&&typeof(window[c._doOnAccess])=="function"){window[c._doOnAccess](g,h)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(j,l){var h="";if(j===true&&this.getContent!=null){h=this.getContent()}var g=this.editor.contentWindow.document;g.open("text/html","replace");if(window.dhx4.isOpera){g.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(l!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){g.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(l!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){g.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none; } </style></head><body "+(l!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{g.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(l!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}g.close();if(window.dhx4.isIE){g.contentEditable=(l!==true)}else{g.designMode=(l!==true?"On":"Off")}if(window.dhx4.isFF){try{g.execCommand("useCSS",false,true)}catch(k){}}if(j===true&&this.setContent!=null){this.setContent(h)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(c.conf.resizeTM);c.conf.resizeTM=window.setTimeout(function(){if(c.setSizes){c.setSizes()}},c.conf.resizeTMTime)};this._runCommand=function(j,l){if(this.conf.roMode===true){return}if(arguments.length<2){l=null}if(window.dhx4.isIE){this.edWin.focus()}try{var h=this.editor.contentWindow.document;h.execCommand(j,false,l)}catch(k){}if(window.dhx4.isIE){this.edWin.focus();var g=this;window.setTimeout(function(){g.edWin.focus();g=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat");var g=this.getContent();g=g.replace(/<\/?h\d>/gi,"");this.setContent(g)};this._doOnClick=function(j){var h=j||window.event;var g=h.target||h.srcElement;c._showInfo(g)};this._doOnMouseDown=function(j){var h=j||window.event;var g=h.target||h.srcElement;c._showInfo(g)};this._doOnKeyUp=function(k){var j=k||window.event;var g=j.keyCode;var h=j.target||j.srcElement;if({37:1,38:1,39:1,40:1,13:1}[g]==1){c._showInfo(h)}};this._getParentByTag=function(g,j){j=j.toLowerCase();var h=g;do{if(j==""||h.nodeName.toLowerCase()==j){return h}}while(h=h.parentNode);return g};this._isStyleProperty=function(h,k,g,j){k=k.toLowerCase();var l=h;do{if((l.nodeName.toLowerCase()==k)&&(l.style[g]==j)){return true}}while(l=l.parentNode);return false};this._setStyleProperty=function(g,j){this.style[j]=false;var h=this._getParentByTag(g,j);if(h&&(h.tagName.toLowerCase()==j)){this.style[j]=true}if(j=="del"&&this._getParentByTag(g,"strike")&&this._getParentByTag(g,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(h){var h=(this._getSelectionBounds().end)?this._getSelectionBounds().end:h;if(!h||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var g=this.edWin.getComputedStyle(h,null);var j=((g.getPropertyValue("font-weight")==401)?700:g.getPropertyValue("font-weight"));this.style={fontStyle:g.getPropertyValue("font-style"),fontSize:g.getPropertyValue("font-size"),textDecoration:g.getPropertyValue("text-decoration"),fontWeight:j,fontFamily:g.getPropertyValue("font-family"),textAlign:g.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=g.getPropertyValue("font-style");this.style.vAlign=g.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(h,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(h,"span","textDecoration","underline")}}else{var g=h.currentStyle;this.style={fontStyle:g.fontStyle,fontSize:g.fontSize,textDecoration:g.textDecoration,fontWeight:g.fontWeight,fontFamily:g.fontFamily,textAlign:g.textAlign}}this._setStyleProperty(h,"h1");this._setStyleProperty(h,"h2");this._setStyleProperty(h,"h3");this._setStyleProperty(h,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(h,"del");this._setStyleProperty(h,"sub");this._setStyleProperty(h,"sup");this._setStyleProperty(h,"u")}this.callEvent("onFocusChanged",[this.style,g])}catch(k){return null}};this._getSelectionBounds=function(){var l,j,n,h;if(this.edWin.getSelection){var m=this.edWin.getSelection();if(window.dhx4.isEdge&&m.rangeCount==0){return{root:null,start:null,end:null}}l=m.getRangeAt(m.rangeCount-1);n=l.startContainer;h=l.endContainer;j=l.commonAncestorContainer;if(n.nodeName=="#text"){j=j.parentNode}if(n.nodeName=="#text"){n=n.parentNode}if(n.nodeName.toLowerCase()=="body"){n=n.firstChild}if(h.nodeName=="#text"){h=h.parentNode}if(h.nodeName.toLowerCase()=="body"){h=h.lastChild}if(n==h){j=n}return{root:j,start:n,end:h}}else{if(this.edWin.document.selection){l=this.edDoc.selection.createRange();if(!l.duplicate){return null}j=l.parentElement();var k=l.duplicate();var g=l.duplicate();k.collapse(true);g.moveToElementText(k.parentElement());g.setEndPoint("EndToStart",k);n=k.parentElement();k=l.duplicate();g=l.duplicate();g.collapse(false);k.moveToElementText(g.parentElement());k.setEndPoint("StartToEnd",g);h=g.parentElement();if(n.nodeName.toLowerCase()=="body"){n=n.firstChild}if(h.nodeName.toLowerCase()=="body"){h=h.lastChild}if(n==h){j=n}return{root:j,start:n,end:h}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(j){j=j||"";if(this.edDoc.body){var h=false;if(window.dhx4.isFF){var g=navigator.userAgent.match(/Firefox\/(\d*)/);h=(g!=null&&g[1]<28)}if(h){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=j}else{this.editor.contentWindow.document.body.innerHTML="";if(j.length==0){j=" "}this._runCommand("InsertHTML",j)}}else{this.editor.contentWindow.document.body.innerHTML=j}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=j;this._onFirstLoad=function(){c.setContent(c.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){c.edWin.removeEventListener("load",c._onFirstLoad,false)}else{c.edWin.detachEvent("onload",c._onFirstLoad)}c.conf.firstLoadData=null;c.conf.firstLoadEv=false;c._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(g){window.dhx4.ajax.get(g,function(h){if(h.xmlDoc.responseText!=null){c.setContent(h.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(g){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(g)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](g)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var g=0;g<c.conf.evs.length;g++){a.contentWindow.removeEventListener(c.conf.evs[g],c._ev,false)}if(this.tb!=null&&this.conf.iOSfix==true){this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,false);this._doOnIOSFix=null}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var g=0;g<c.conf.evs.length;g++){a.contentWindow.document.body.detachEvent("on"+c.conf.evs[g],c._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;c=a=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath);if(this.conf.iOSfix==true){this._doOnIOSFix=function(){c.editor.contentWindow.focus()};this.tb.cont.addEventListener("touchend",this._doOnIOSFix,false)}}this.setIconsPath=function(g){this.conf.iconsPath=g};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);if(this.editor!=null){this.editor.style.left="5px";this.editor.style.width=this.base.clientWidth-5+"px"}};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=(a===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(a){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};window.dhtmlXEditorCell=function(d,a){dhtmlXCellObject.apply(this,[d,"_editor"]);var c=this;this.editor=a;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;c=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var h=this;var g=document.createElement("DIV");g.className="dhx_cell_stb";this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.cont]);g.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var f={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var e in f){var c=document.createElement("A");c.href="javascript:void(0);";c.tabIndex=-1;g.appendChild(c);c.onmousedown=c.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var j=document.createElement("DIV");j.className="dhx_cell_stb_button btn_"+e;j._actv=e.charAt(0);j._cmd=f[e];c.appendChild(j);j.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};j.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}h.editor[this._cmd]();h.editor.callEvent("onToolbarClick",[this._actv])};j=c=null}g=null;this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];a.onselectstart=null;while(a.childNodes.length>0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=h=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXCellObject.prototype.attachEditor=function(a){this.callEvent("_onBeforeContentAttach",["editor"]);var d=document.createElement("DIV");d.style.width="100%";d.style.height="100%";d.style.position="relative";d.style.overflow="hidden";this._attachObject(d);if(!(typeof(a)=="object"&&a!=null)){a={}}a.parent=d;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);d=null;a.parent=null;a=null;if(typeof(window.dhtmlXPortalCell)!="undefined"&&this instanceof window.dhtmlXPortalCell){if(this.portal.conf.editor_ev==null){var e=this.portal.attachEvent("onBeforeDrag",function(f){if(this.cdata[f].dataType=="editor"){this.cdata[f].conf.editor_cont=this.cdata[f].dataObj.getContent()}return true});var c=this.portal.attachEvent("onDrop",function(f){if(this.cdata[f].dataType=="editor"){this.cdata[f].dataObj.setContent(this.cdata[f].conf.editor_cont);this.cdata[f].dataObj._prepareContent(true);this.cdata[f].conf.editor_cont=null}});this.portal.conf.editor_ev=[e,c]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){this.detachEvent(this.conf.editor_ev);this.conf.editor_ev=null;if(this instanceof window.dhtmlXPortalCell){var g=false;for(var f in this.portal.cdata){if(this.portal.cdata[f]!=this&&this.portal.cdata[f].dataType=="editor"){g=true}}if(g==false){for(var h=0;h<this.portal.conf.editor_ev.length;h++){this.portal.detachEvent(this.portal.conf.editor_ev[h])}this.portal.conf.editor_ev=null}}})}this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXEditor.prototype.attachToolbar=function(c){if(this.tb!=null){return}if(c!=null){this.conf.iconsPath=c}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var g=0;g<this._availFonts.length;g++){var e=String(this._availFonts[g]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+e+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(e).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var d in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+d+":"+this._availSizes[d]+'" text="'+this._availSizes[d]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(j){if(!j.h1&&!j.h2&&!j.h3&&!j.h4){var a=(String(j.fontWeight).search(/bold/i)!=-1)||(Number(j.fontWeight)>=700);this.tb.setItemState("applyBold",a)}else{this.tb.setItemState("applyBold",false)}var h="alignLeft";if(String(j.textAlign).search(/center/)!=-1){h="alignCenter"}if(String(j.textAlign).search(/right/)!=-1){h="alignRight"}if(String(j.textAlign).search(/justify/)!=-1){h="alignJustify"}this.tb.setItemState(h,true);this._checkAlign(h);this.tb.setItemState("applyH1",j.h1);this.tb.setItemState("applyH2",j.h2);this.tb.setItemState("applyH3",j.h3);this.tb.setItemState("applyH4",j.h4);if(window._KHTMLrv){j.sub=(j.vAlign=="sub");j.sup=(j.vAlign=="super")}this.tb.setItemState("applyItalic",(j.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",j.del);this.tb.setItemState("applySub",j.sub);this.tb.setItemState("applySuper",j.sup);this.tb.setItemState("applyUnderscore",j.u)};this._doOnToolbarClick=function(h){var a=String(h).split(":");if(this[a[0]]!=null){if(typeof(this[a[0]])=="function"){this[a[0]](a[1]);this.callEvent("onToolbarClick",[h])}}};this._doOnStateChange=function(h,a){this[h]();switch(h){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(h);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(h);break}this.callEvent("onToolbarClick",[h])};this._doOnBeforeStateChange=function(h,a){if((h=="alignLeft"||h=="alignCenter"||h=="alignRight"||h=="alignJustify")&&a==true){return false}return true};var f=this;this.tb.attachEvent("onClick",function(a){f._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(h,a){f._doOnStateChange(h,a)});this.tb.attachEvent("onBeforeStateChange",function(h,a){return f._doOnBeforeStateChange(h,a)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false);var a=this.getContent();a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)}};function xmlPointer(a){this.d=a}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var a=new XMLSerializer();return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?(this.d.firstChild.wholeText||this.d.firstChild.data):""},each:function(e,j,h,g){var d=this.d.childNodes;var k=new xmlPointer();if(d.length){for(g=g||0;g<d.length;g++){if(d[g].tagName==e){k.d=d[g];if(j.apply(h,[k,g])==-1){return}}}}},get_all:function(){var d={};var c=this.d.attributes;for(var e=0;e<c.length;e++){d[c[e].name]=c[e].value}return d},sub:function(e){var d=this.d.childNodes;var g=new xmlPointer();if(d.length){for(var f=0;f<d.length;f++){if(d[f].tagName==e){g.d=d[f];return g}}}},up:function(a){return new xmlPointer(this.d.parentNode)},set:function(a,c){this.d.setAttribute(a,c)},clone:function(a){return new xmlPointer(this.d)},sub_exists:function(d){var c=this.d.childNodes;if(c.length){for(var e=0;e<c.length;e++){if(c[e].tagName==d){return true}}}return false},through:function(d,j,m,g,n){var k=this.d.childNodes;if(k.length){for(var e=0;e<k.length;e++){if(k[e].tagName==d&&k[e].getAttribute(j)!=null&&k[e].getAttribute(j)!=""&&(!m||k[e].getAttribute(j)==m)){var h=new xmlPointer(k[e]);g.apply(n,[h,e])}var l=this.d;this.d=k[e];this.through(d,j,m,g,n);this.d=l}}}};function dhtmlXTreeObject(h,f,c,a){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(g){}}if(typeof(h)!="object"){this.parentObject=document.getElementById(h)}else{this.parentObject=h}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix(true);this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=f;this.height=c;this.rootId=a;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="24px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._dynDeleteBranches={};this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhx4._eventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden"}var d=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(j){return d._doContClick(j||window.event,true)}}this.allTree.onmousedown=function(j){return d._doContClick(j||window.event)};this.XMLLoader=this._parseXMLTree;if(_isIE){this.preventIECashing(true)}this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="&nbsp;";this.selectionBar.style.display="none";this.allTree.appendChild(this.selectionBar);if(window.addEventListener){window.addEventListener("unload",function(){try{d.destructor()}catch(j){}},false)}if(window.attachEvent){window.attachEvent("onunload",function(){try{d.destructor()}catch(j){}})}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"dhx_skyblue");return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};dhtmlXTreeObject.prototype._doContClick=function(h,a){if(!a&&h.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu()}else{this.cMenu._contextEnd()}}return true}var c=(_isIE?h.srcElement:h.target);while((c)&&(c.tagName!="BODY")){if(c.parentObject){break}c=c.parentNode}if((!c)||(!c.parentObject)){return true}var f=c.parentObject;if(!this.callEvent("onRightClick",[f.id,h])){(h.srcElement||h.target).oncontextmenu=function(l){(l||event).cancelBubble=true;return false}}this._acMenu=(f.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[f.id]))){return true}if(!_isMacOS){(h.srcElement||h.target).oncontextmenu=function(l){(l||event).cancelBubble=true;return false}}if(this._acMenu.showContextMenu){var e=window.document.documentElement;var d=window.document.body;var j=new Array((e.scrollLeft||d.scrollLeft),(e.scrollTop||d.scrollTop));if(_isIE){var k=h.clientX+j[0];var g=h.clientY+j[1]}else{var k=h.pageX;var g=h.pageY}this._acMenu.showContextMenu(k-1,g-1);this.contextID=f.id;h.cancelBubble=true;this._acMenu._skip_hide=true}else{c.contextMenuId=f.id;c.contextMenu=this._acMenu;c.a=this._acMenu._contextStart;c.a(c,h);c.a=null}return false}return true};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){if(!a){this._getImg=function(c){return document.createElement((c==this.rootId)?"div":"img")};this._setSrc=function(d,c){d.src=c};this._getSrc=function(c){return c.src}}else{this._getImg=function(){var c=document.createElement("DIV");c.innerHTML="&nbsp;";c.className="dhx_bg_img_fix";return c};this._setSrc=function(d,c){d.style.backgroundImage="url("+c+")"};this._getSrc=function(c){var d=c.style.backgroundImage;return d.substr(4,d.length-5).replace(/(^")|("$)/g,"")}}};dhtmlXTreeObject.prototype.destructor=function(){for(var c in this._idpull){var d=this._idpull[c];if(!d){continue}d.parentObject=null;d.treeNod=null;d.childNodes=null;d.span=null;d.tr.nodem=null;d.tr=null;d.htmlNode.objBelong=null;d.htmlNode=null;this._idpull[c]=null}this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var c in this){this[c]=null}};function cObject(){return this}cObject.prototype=new Object;cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a()};function dhtmlXTreeItemObject(g,c,d,a,e,f){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=a;this.label=c;this.parentObject=d;this.actionHandler=e;this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]);this.id=a._globalIdStorageAdd(g,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,f)}else{this.htmlNode=this.treeNod._createItem(0,this,f)}this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(c,a){if(this._globalIdStorageFind(c,1,1)){c=c+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(c,a)}this._idpull[c]=a;this._pullSize++;return c};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){if(this._idpull[a]){this._unselectItem(this._idpull[a]);this._idpull[a]=null;this._pullSize--}if((this._locker)&&(this._locker[a])){this._locker[a]=false}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(g,a,d,e){var f=this._idpull[g];if(f){if((f.unParsed)&&(!d)){this.reParse(f,0)}if(this._srnd&&!f.htmlNode){this._buildSRND(f,d)}if((e)&&(this._edsbpsA)){for(var c=0;c<this._edsbpsA.length;c++){if(this._edsbpsA[c][2]==g){dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",g]);return null}}}return f}if((this.slowParse)&&(g!=0)&&(!a)){return this.preParse(g)}else{return null}};dhtmlXTreeObject.prototype._getSubItemsXML=function(a){var c=[];a.each("item",function(d){c.push(d.get("id"))},this);return c.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(a){this.slowParse=dhx4.s2b(a)};dhtmlXTreeObject.prototype.findXML=function(c,a,d){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(c,a,e){var d=[];if(e==2){c.through("item","checked",-1,function(f){d.push(f.get("id"))},this)}if(e==1){c.through("item","id",null,function(f){if(f.get("checked")&&(f.get("checked")!=-1)){d.push(f.get("id"))}},this)}if(e==0){c.through("item","id",null,function(f){if(!f.get("checked")||f.get("checked")==0){d.push(f.get("id"))}},this)}if(d.length){return a+(a?this.dlmtr:"")+d.join(this.dlmtr)}if(a){return a}else{return""}};dhtmlXTreeObject.prototype._setSubCheckedXML=function(a,c){var d=a?"1":"";c.through("item","id",null,function(e){if(!e.get("disabled")||e.get("disabled")==0){e.set("checked",d)}},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(d,a){var e=[];var c=function(f){if(!f.sub_exists("item")){e.push(f.get("id"))}else{f.each("item",c,this)}};c(d);return e.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(d,a){var e=[];var c=function(f){if(!f.sub_exists("item")){return}e.push(f.get("id"));f.each("item",c,this)};c(d);return e.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(d,c,a){var c=[];a.through("item","id",null,function(e){c.push(e.get("id"))},this);return c.join(",")};dhtmlXTreeObject.prototype.reParse=function(d){var g=this;if(!this.parsCount){g.callEvent("onXLS",[g,d.id])}this.xmlstate=1;var e=d.unParsed;d.unParsed=0;this.XMLloadingWarning=1;var a=this.parsingOn;var h=this.waitUpdateXML;var j=this.parsedArray;this.parsedArray=new Array();this.waitUpdateXML=false;this.parsingOn=d.id;this.parsedArray=new Array();this.setCheckList="";this._parse(e,d.id,2);var k=this.setCheckList.split(this.dlmtr);for(var f=0;f<this.parsedArray.length;f++){d.htmlNode.childNodes[0].appendChild(this.parsedArray[f])}if(e.get("order")&&e.get("order")!="none"){this._reorderBranch(d,e.get("order"),true)}this.oldsmcheck=this.smcheck;this.smcheck=false;for(var c=0;c<k.length;c++){if(k[c]){this.setCheck(k[c],1)}}this.smcheck=this.oldsmcheck;this.parsingOn=a;this.waitUpdateXML=h;this.parsedArray=j;this.XMLloadingWarning=0;this._redrawFrom(this,d);if(this._srnd&&!d._sready){this.prepareSR(d.id)}this.xmlstate=0;return true};dhtmlXTreeObject.prototype.preParse=function(c){if(!c||!this._p){return null}var a=false;this._p.clone().through("item","id",c,function(e){this._globalIdStorageFind(e.up().get("id"));return a=true},this);if(a){var d=this._globalIdStorageFind(c,true,false);if(!d){dhx4.callEvent("ongetItemError",["The item "+c+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",c])}}return d};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;break;case"utf8":return encodeURIComponent(a);break;default:return escape(a);break}};dhtmlXTreeObject.prototype._drawNewTr=function(f,d){var e=document.createElement("tr");var c=document.createElement("td");var a=document.createElement("td");c.appendChild(document.createTextNode(" "));a.colSpan=3;a.appendChild(f);e.appendChild(c);e.appendChild(a);return e};dhtmlXTreeObject.prototype.parse=function(e,d,a){if(typeof d=="string"){a=d;d=null}if(a==="json"){return this._loadJSONObject(e,d)}else{if(a==="csv"){return this._loadCSVString(e,d)}else{if(a==="jsarray"){return this._loadJSArray(e,d)}}}var c=this;if(!this.parsCount){this.callEvent("onXLS",[c,null])}this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(e)},d)};dhtmlXTreeObject.prototype.loadXMLString=function(){if(window.console&&window.console.info){window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this.parse.apply(this,arguments)};dhtmlXTreeObject.prototype.load=function(c,f,d){if(typeof f=="string"){d=f;f=null}d=d||this._datamode;if(d==="json"){return this._loadJSON(c,f)}else{if(d==="csv"){return this._loadCSV(c,f)}else{if(d==="jsarray"){return this._loadJSArrayFile(xmlString,f)}}}var e=this;if(!this.parsCount){this.callEvent("onXLS",[e,this._ld_id])}this._ld_id=null;this.xmlstate=1;this.XMLLoader=this._parseXMLTree;var a=this;dhx4.ajax.get(c,function(g){a.XMLLoader(g.xmlDoc,f);a=null})};dhtmlXTreeObject.prototype.loadXML=function(){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this.load.apply(this,arguments)};dhtmlXTreeObject.prototype._attachChildNode=function(h,g,e,j,x,w,v,k,d,o,q){if(o&&o.parentObject){h=o.parentObject}if(((h.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){h.XMLload=1;this._loadDynXML(h.id)}var l=h.childsCount;var y=h.childNodes;if(q&&q.tr.previousSibling){if(q.tr.previousSibling.previousSibling){o=q.tr.previousSibling.nodem}else{k=k.replace("TOP","")+",TOP"}}if(o){var f,u;for(f=0;f<l;f++){if(y[f]==o){for(u=l;u!=f;u--){y[1+u]=y[u]}break}}f++;l=f}if(k){var r=k.split(",");for(var s=0;s<r.length;s++){switch(r[s]){case"TOP":if(h.childsCount>0){o=new Object;o.tr=h.childNodes[0].tr.previousSibling}h._has_top=true;for(f=l;f>0;f--){y[f]=y[f-1]}l=0;break}}}var m;if(!(m=this._idpull[g])||m.span!=-1){m=y[l]=new dhtmlXTreeItemObject(g,e,h,this,j,1);g=y[l].id;h.childsCount++}if(!m.htmlNode){m.label=e;m.htmlNode=this._createItem((this.checkBoxOff?1:0),m);m.htmlNode.objBelong=m}if(x){m.images[0]=x}if(w){m.images[1]=w}if(v){m.images[2]=v}var c=this._drawNewTr(m.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){m.htmlNode.parentNode.parentNode.style.display="none"}if((o)&&o.tr&&(o.tr.nextSibling)){h.htmlNode.childNodes[0].insertBefore(c,o.tr.nextSibling)}else{if(this.parsingOn==h.id){this.parsedArray[this.parsedArray.length]=c}else{h.htmlNode.childNodes[0].appendChild(c)}}if((o)&&(!o.span)){o=null}if(this.XMLsource){if((d)&&(d!=0)){m.XMLload=0}else{m.XMLload=1}}m.tr=c;c.nodem=m;if(h.itemId==0){c.childNodes[0].className="hiddenRow"}if((h._r_logic)||(this._frbtr)){this._setSrc(m.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0])}if(k){var r=k.split(",");for(var s=0;s<r.length;s++){switch(r[s]){case"SELECT":this.selectItem(g,false);break;case"CALL":this.selectItem(g,true);break;case"CHILD":m.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+g}else{this.setCheck(g,1)}break;case"HCHECKED":this._setCheck(m,"unsure");break;case"OPEN":m.openMe=1;break}}}if(!this.XMLloadingWarning){if((this._getOpenState(h)<0)&&(!this._hAdI)){this.openItem(h.id)}if(o){this._correctPlus(o);this._correctLine(o)}this._correctPlus(h);this._correctLine(h);this._correctPlus(m);if(h.childsCount>=2){this._correctPlus(y[h.childsCount-2]);this._correctLine(y[h.childsCount-2])}if(h.childsCount!=2){this._correctPlus(y[0])}if(this.tscheck){this._correctCheckStates(h)}if(this._onradh){if(this.xmlstate==1){var a=this.onXLE;this.onXLE=function(n){this._onradh(g);if(a){a(n)}}}else{this._onradh(g)}}}return m};dhtmlXTreeObject.prototype.enableContextMenu=function(a){if(a){this.cMenu=a}};dhtmlXTreeObject.prototype.setItemContextMenu=function(f,e){var a=f.toString().split(this.dlmtr);for(var d=0;d<a.length;d++){var c=this._globalIdStorageFind(a[d]);if(!c){continue}c.cMenu=e}};dhtmlXTreeObject.prototype.insertNewItem=function(e,j,l,d,h,g,f,c,a){var m=this._globalIdStorageFind(e);if(!m){return(-1)}var k=this._attachChildNode(m,j,l,d,h,g,f,c,a);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(m)}return k};dhtmlXTreeObject.prototype.insertNewChild=function(e,j,k,d,h,g,f,c,a){return this.insertNewItem(e,j,k,d,h,g,f,c,a)};dhtmlXTreeObject.prototype._parseXMLTree=function(a,d){var c=new xmlPointer(dhx4.ajax.xmltop("tree",a));this._parse(c);this._p=c;if(d){d.call(this,a)}};dhtmlXTreeObject.prototype._parseItem=function(g,l,f,j){var d;if(this._srnd&&(!this._idpull[d=g.get("id")]||!this._idpull[d].span)){this._addItemSRND(l.id,d,g);return}var h=g.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[h.id])){this._parse(g,h.id,1);return}if((h.text===null)||(typeof(h.text)=="undefined")){h.text=g.sub("itemtext");if(h.text){h.text=h.text.content()}}var n=[];if(h.select){n.push("SELECT")}if(h.top){n.push("TOP")}if(h.call){this.nodeAskingCall=h.id}if(h.checked==-1){n.push("HCHECKED")}else{if(h.checked){n.push("CHECKED")}}if(h.open){n.push("OPEN")}if(this.waitUpdateXML){if(this._globalIdStorageFind(h.id)){var k=this.updateItem(h.id,h.text,h.im0,h.im1,h.im2,h.checked,h.child)}else{if(this.npl==0){n.push("TOP")}else{f=l.childNodes[this.npl]}var k=this._attachChildNode(l,h.id,h.text,0,h.im0,h.im1,h.im2,n.join(","),h.child,0,f);h.id=k.id;f=null}}else{var k=this._attachChildNode(l,h.id,h.text,0,h.im0,h.im1,h.im2,n.join(","),h.child,(j||0),f)}if(h.tooltip){k.span.parentNode.parentNode.title=h.tooltip}if(h.style){if(k.span.style.cssText){k.span.style.cssText+=(";"+h.style)}else{k.span.setAttribute("style",k.span.getAttribute("style")+"; "+h.style)}}if(h.radio){k._r_logic=true}if(h.nocheckbox){var m=k.span.parentNode.previousSibling.previousSibling;m.style.display="none";k.nocheckbox=true}if(h.disabled){if(h.checked!=null){this._setCheck(k,h.checked)}this.disableCheckbox(k,1)}k._acc=h.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,g,h,(l?l.id:0))}this.setItemColor(k,h.aCol,h.sCol);if(h.locked=="1"){this.lockItem(k.id,true,true)}if((h.imwidth)||(h.imheight)){this.setIconSize(h.imwidth,h.imheight,k)}if((h.closeable=="0")||(h.closeable=="1")){this.setItemCloseable(k,h.closeable)}var e="";if(h.topoffset){this.setItemTopOffset(k,h.topoffset)}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(g.sub_exists("item")){e=this._parse(g,h.id,1)}}else{if((!k.childsCount)&&g.sub_exists("item")){k.unParsed=g.clone()}g.each("userdata",function(a){this.setUserData(h.id,a.get("name"),a.content())},this)}if(e!=""){this.nodeAskingCall=e}g.each("userdata",function(a){this.setUserData(g.get("id"),a.get("name"),a.content())},this)};dhtmlXTreeObject.prototype._parse=function(d,g,a,c){if(this._srnd&&!this.parentObject.offsetHeight){var q=this;return window.setTimeout(function(){q._parse(d,g,a,c)},100)}if(!d.exists()){return}this.skipLock=true;if(!g){g=d.get("id");if(this._dynDeleteBranches[g]){this.deleteChildItems(g);this._dynDeleteBranches[g]--;if(!this._dynDeleteBranches[g]){delete this._dynDeleteBranches[g]}}var m=d.get("dhx_security");if(m){dhtmlx.security_key=m}if(d.get("radio")){this.htmlNode._r_logic=true}this.parsingOn=g;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall=""}var o=this._globalIdStorageFind(g);if(!o){return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"])}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((o.childsCount)&&(!c)&&(!this._edsbps)&&(!o._has_top)){var h=0}else{var h=0}this.npl=0;d.each("item",function(r,n){o.XMLload=1;this._parseItem(r,o,0,h);if((this._edsbps)&&(this.npl==this._edsbpsC)){this._distributedStart(d,n+1,g,a,o.childsCount);return -1}this.npl++},this,c);if(!a){d.each("userdata",function(n){this.setUserData(d.get("id"),n.get("name"),n.content())},this);o.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var f=o.childsCount-1;f>=0;f--){if(o.childNodes[f]._dmark){this.deleteItem(o.childNodes[f].id)}}}var k=this._globalIdStorageFind(this.parsingOn);for(var f=0;f<this.parsedArray.length;f++){o.htmlNode.childNodes[0].appendChild(this.parsedArray[f])}this.parsedArray=[];this.lastLoadedXMLId=g;this.XMLloadingWarning=0;var l=this.setCheckList.split(this.dlmtr);for(var e=0;e<l.length;e++){if(l[e]){this.setCheck(l[e],1)}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(o.id!=this.rootId)){if(o.checkstate===0){this._setSubChecked(0,o)}else{if(o.checkstate===1){this._setSubChecked(1,o)}}}this._redrawFrom(this,null,c);if(d.get("order")&&d.get("order")!="none"){this._reorderBranch(o,d.get("order"),true)}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()])}if(this._branchUpdate){this._branchUpdateNext(d)}}if(this.parsCount==1){this.parsingOn=null;if(this._srnd&&o.id!=this.rootId){this.prepareSR(o.id);if(this.XMLsource){this.openItem(o.id)}}d.through("item","open",null,function(n){this.openItem(n.get("id"))},this);if((!this._edsbps)||(!this._edsbpsA.length)){var j=this;window.setTimeout(function(){j.callEvent("onXLE",[j,g])},1);this.xmlstate=0}this.skipLock=false}this.parsCount--;var j=this;if(this._edsbps){window.setTimeout(function(){j._distributedStep(g)},this._edsbpsD)}if(!a&&this.onXLE){this.onXLE(this,g)}return this.nodeAskingCall};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(e){var d=e.get("id");if(this._idpull[d]&&(!this._idpull[d].XMLload)){return}this._branchUpdate++;this.smartRefreshItem(e.get("id"),e)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(c,d){if((c.nodeType==1)&&(c.tagName=="userdata")){var a=c.getAttribute("name");if((a)&&(c.childNodes[0])){this.setUserData(d,a,c.childNodes[0].data)}}};dhtmlXTreeObject.prototype._redrawFrom=function(j,c,h,d){if(!c){var f=j._globalIdStorageFind(j.lastLoadedXMLId);j.lastLoadedXMLId=-1;if(!f){return 0}}else{f=c}var g=0;for(var e=(h?h-1:0);e<f.childsCount;e++){if((!this._branchUpdate)||(this._getOpenState(f)==1)){if((!c)||(d==1)){f.childNodes[e].htmlNode.parentNode.parentNode.style.display=""}}if(f.childNodes[e].openMe==1){this._openItem(f.childNodes[e]);f.childNodes[e].openMe=0}j._redrawFrom(j,f.childNodes[e]);if(this.childCalc!=null){if((f.childNodes[e].unParsed)||((!f.childNodes[e].XMLload)&&(this.XMLsource))){if(f.childNodes[e]._acc){f.childNodes[e].span.innerHTML=f.childNodes[e].label+this.htmlcA+f.childNodes[e]._acc+this.htmlcB}else{f.childNodes[e].span.innerHTML=f.childNodes[e].label}}if((f.childNodes[e].childNodes.length)&&(this.childCalc)){if(this.childCalc==1){f.childNodes[e].span.innerHTML=f.childNodes[e].label+this.htmlcA+f.childNodes[e].childsCount+this.htmlcB}if(this.childCalc==2){var a=f.childNodes[e].childsCount-(f.childNodes[e].pureChilds||0);if(a){f.childNodes[e].span.innerHTML=f.childNodes[e].label+this.htmlcA+a+this.htmlcB}if(f.pureChilds){f.pureChilds++}else{f.pureChilds=1}}if(this.childCalc==3){f.childNodes[e].span.innerHTML=f.childNodes[e].label+this.htmlcA+f.childNodes[e]._acc+this.htmlcB}if(this.childCalc==4){var a=f.childNodes[e]._acc;if(a){f.childNodes[e].span.innerHTML=f.childNodes[e].label+this.htmlcA+a+this.htmlcB}}}else{if(this.childCalc==4){g++}}g+=f.childNodes[e]._acc;if(this.childCalc==3){g++}}}if((!f.unParsed)&&((f.XMLload)||(!this.XMLsource))){f._acc=g}j._correctLine(f);j._correctPlus(f);if((this.childCalc)&&(!c)){j._fixChildCountLabel(f)}};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};dhtmlXTreeObject.prototype._xcloseAll=function(c){if(c.unParsed){return}if(this.rootId!=c.id){if(!c.htmlNode){return}var e=c.htmlNode.childNodes[0].childNodes;var a=e.length;for(var d=1;d<a;d++){e[d].style.display="none"}this._correctPlus(c)}for(var d=0;d<c.childsCount;d++){if(c.childNodes[d].childsCount){this._xcloseAll(c.childNodes[d])}}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var c=0;c<a.childsCount;c++){this._xopenAll(a.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(c){if(!c.htmlNode){return}var d=c.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var f=c.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var a=this.lineArray;if((this.XMLsource)&&(!c.XMLload)){var a=this.plusArray;this._setSrc(f,this.iconURL+c.images[2]);if(this._txtimg){return(d.innerHTML="[+]")}}else{if((c.childsCount)||(c.unParsed)){if((c.htmlNode.childNodes[0].childNodes[1])&&(c.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!c.wsign){var a=this.minusArray}this._setSrc(f,this.iconURL+c.images[1]);if(this._txtimg){return(d.innerHTML="[-]")}}else{if(!c.wsign){var a=this.plusArray}this._setSrc(f,this.iconURL+c.images[2]);if(this._txtimg){return(d.innerHTML="[+]")}}}else{this._setSrc(f,this.iconURL+c.images[0])}}var e=2;if(!c.treeNod.treeLinesOn){this._setSrc(d,this.imPath+a[3])}else{if(c.parentObject){e=this._getCountStatus(c.id,c.parentObject)}this._setSrc(d,this.imPath+a[e])}};dhtmlXTreeObject.prototype._correctLine=function(c){if(!c.htmlNode){return}var a=c.parentObject;if(a){if((this._getLineStatus(c.id,a)==0)||(!this.treeLinesOn)){for(var d=1;d<=c.childsCount;d++){if(!c.htmlNode.childNodes[0].childNodes[d]){break}c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage="";c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat=""}}else{for(var d=1;d<=c.childsCount;d++){if(!c.htmlNode.childNodes[0].childNodes[d]){break}c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";c.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat="repeat-y"}}}};dhtmlXTreeObject.prototype._getCountStatus=function(c,a){if(a.childsCount<=1){if(a.id==this.rootId){return 4}else{return 0}}if(a.childNodes[0].id==c){if(a.id==this.rootId){return 2}else{return 1}}if(a.childNodes[a.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._getLineStatus=function(c,a){if(a.childNodes[a.childsCount-1].id==c){return 0}return 1};dhtmlXTreeObject.prototype._HideShow=function(c,f){if((this.XMLsource)&&(!c.XMLload)){if(f==1){return}c.XMLload=1;this._loadDynXML(c.id);return}if(c.unParsed){this.reParse(c)}var e=c.htmlNode.childNodes[0].childNodes;var a=e.length;if(a>1){if(((e[1].style.display!="none")||(f==1))&&(f!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none"}else{nodestyle=""}for(var d=1;d<a;d++){e[d].style.display=nodestyle}}this._correctPlus(c)};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode){return 0}var c=a.htmlNode.childNodes[0].childNodes;if(c.length<=1){return 0}if(c[1].style.display!="none"){return 1}else{return -1}};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a])){return false}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}return false};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])){return 0}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject)}else{a._HideShow(this.parentObject,2)}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe}}};dhtmlXTreeObject.prototype._epnFHe=function(c,d,a){if(d!=this.rootId){this.callEvent("onOpenEnd",[d,c.getOpenState(d)])}c.onXLE=c._oie_onXLE.pop();if(!a&&!c._oie_onXLE.length){if(c.onXLE){c.onXLE(c,d)}}};dhtmlXTreeObject.prototype.onRowClickDown=function(c){c=c||window.event;var a=this.parentObject.treeNod;a._selectItem(this.parentObject,c)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var c=new Array();for(var a=0;a<this._selected.length;a++){c[a]=this._selected[a].id}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._selectItem=function(h,j){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}if((!this._amsel)||(!j)||((!j.ctrlKey)&&(!j.metaKey)&&(!j.shiftKey))){this._unselectItems()}if((h.i_sel)&&(this._amsel)&&(j)&&(j.ctrlKey||j.metaKey)){this._unselectItem(h)}else{if((!h.i_sel)&&((!this._amselS)||(this._selected.length==0)||(this._selected[0].parentObject==h.parentObject))){if((this._amsel)&&(j)&&(j.shiftKey)&&(this._selected.length!=0)&&(this._selected[this._selected.length-1].parentObject==h.parentObject)){var f=this._getIndex(this._selected[this._selected.length-1]);var d=this._getIndex(h);if(d<f){var l=f;f=d;d=l}for(var g=f;g<=d;g++){if(!h.parentObject.childNodes[g].i_sel){this._markItem(h.parentObject.childNodes[g])}}}else{this._markItem(h)}}}if(this.checkEvent("onSelect")){var k=this.getSelectedItemId();if(k!=this._onSSCFold){this.callEvent("onSelect",[k])}}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.scolor){a.span.style.color=a.scolor}a.span.className="selectedTreeRow";a.i_sel=true;this._selected[this._selected.length]=a};dhtmlXTreeObject.prototype.getIndexById=function(c){var a=this._globalIdStorageFind(c);if(!a){return null}return this._getIndex(a)};dhtmlXTreeObject.prototype._getIndex=function(a){var d=a.parentObject;for(var c=0;c<d.childsCount;c++){if(d.childNodes[c]==a){return c}}};dhtmlXTreeObject.prototype._unselectItem=function(c){if((c)&&(c.i_sel)){c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false;for(var a=0;a<this._selected.length;a++){if(!this._selected[a].i_sel){this._selected.splice(a,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var c=this._selected[a];c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=false}this._selected=new Array()};dhtmlXTreeObject.prototype.onRowSelect=function(f,d,h){f=f||window.event;var c=this.parentObject;if(d){c=d.parentObject}var a=c.treeNod;var g=a.getSelectedItemId();if((!f)||(!f.skipUnSel)){a._selectItem(c,f)}if(!h){if(c.actionHandler){c.actionHandler(c.id,g)}else{a.callEvent("onClick",[c.id,g])}}};dhtmlXTreeObject.prototype._correctCheckStates=function(f){if(!this.tscheck){return}if(!f){return}if(f.id==this.rootId){return}var d=f.childNodes;var c=0;var a=0;if(f.childsCount==0){return}for(var e=0;e<f.childsCount;e++){if(d[e].dscheck){continue}if(d[e].checkstate==0){c=1}else{if(d[e].checkstate==1){a=1}else{c=1;a=1;break}}}if((c)&&(a)){this._setCheck(f,"unsure")}else{if(c){this._setCheck(f,false)}else{this._setCheck(f,true)}}this._correctCheckStates(f.parentObject)};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return}if(this.parentObject.dscheck){return true}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject)}else{this.treeNod._setSubChecked(true,this.parentObject)}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false)}else{this.treeNod._setCheck(this.parentObject,true)}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])};dhtmlXTreeObject.prototype._createItem=function(n,m,j){var o=document.createElement("table");o.cellSpacing=0;o.cellPadding=0;o.border=0;if(this.hfMode){o.style.tableLayout="fixed"}o.style.margin=0;o.style.padding=0;var h=document.createElement("tbody");var l=document.createElement("tr");var e=document.createElement("td");e.className="standartTreeImage";if(this._txtimg){var f=document.createElement("div");e.appendChild(f);f.className="dhx_tree_textSign"}else{var f=this._getImg(m.id);f.border="0";if(f.tagName=="IMG"){f.align="absmiddle"}e.appendChild(f);f.style.padding=0;f.style.margin=0;f.style.width=this.def_line_img_x}var d=document.createElement("td");var k=this._getImg(this.cBROf?this.rootId:m.id);k.checked=0;this._setSrc(k,this.imPath+this.checkArray[0]);k.style.width="18px";k.style.height="18px";if(!n){d.style.display="none"}d.appendChild(k);if((!this.cBROf)&&(k.tagName=="IMG")){k.align="absmiddle"}k.onclick=this.onCheckBoxClick;k.treeNod=this;k.parentObject=m;if(!window._KHTMLrv){d.width="20px"}else{d.width="16px"}var c=document.createElement("td");c.className="standartTreeImage";var g=this._getImg(this.timgen?m.id:this.rootId);g.onmousedown=this._preventNsDrag;g.ondragstart=this._preventNsDrag;g.border="0";if(this._aimgs){g.parentObject=m;if(g.tagName=="IMG"){g.align="absmiddle"}g.onclick=this.onRowSelect}if(!j){this._setSrc(g,this.iconURL+this.imageArray[0])}c.appendChild(g);g.style.padding=0;g.style.margin=0;if(this.timgen){c.style.width=g.style.width=this.def_img_x;g.style.height=this.def_img_y}else{g.style.width="0px";g.style.height="0px";if(_isOpera||window._KHTMLrv){c.style.display="none"}}var a=document.createElement("td");a.className="standartTreeRow";m.span=document.createElement("span");m.span.className="standartTreeRow";if(this.mlitems){m.span.style.width=this.mlitems;m.span.style.display="block"}else{a.noWrap=true}if(dhx4.isIE8){a.style.width="99999px"}else{if(!window._KHTMLrv){a.style.width="100%"}}m.span.innerHTML=m.label;a.appendChild(m.span);a.parentObject=m;e.parentObject=m;a.onclick=this.onRowSelect;e.onclick=this.onRowClick;a.ondblclick=this.onRowClick2;if(this.ettip){l.title=m.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(c,this);c.parentObject=m}this.dragger.addDraggableItem(a,this)}m.span.style.paddingLeft="5px";m.span.style.paddingRight="5px";a.style.verticalAlign="";a.style.fontSize="10pt";a.style.cursor=this.style_pointer;l.appendChild(e);l.appendChild(d);l.appendChild(c);l.appendChild(a);h.appendChild(l);o.appendChild(h);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){l.onmousemove=this._itemMouseIn;l[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut}return o};dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a;this.iconURL=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype._getLeafCount=function(e){var d=0;for(var c=0;c<e.childsCount;c++){if(e.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype._getChildCounterValue=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}if((a.unParsed)||((!a.XMLload)&&(this.XMLsource))){return a._acc}switch(this.childCalc){case 1:return a.childsCount;break;case 2:return this._getLeafCount(a);break;case 3:return a._acc;break;case 4:return a._acc;break}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(g,e){if(this.childCalc==null){return}if((g.unParsed)||((!g.XMLload)&&(this.XMLsource))){if(g._acc){g.span.innerHTML=g.label+this.htmlcA+g._acc+this.htmlcB}else{g.span.innerHTML=g.label}return}switch(this.childCalc){case 1:if(g.childsCount!=0){g.span.innerHTML=g.label+this.htmlcA+g.childsCount+this.htmlcB}else{g.span.innerHTML=g.label}break;case 2:var f=this._getLeafCount(g);if(f!=0){g.span.innerHTML=g.label+this.htmlcA+f+this.htmlcB}else{g.span.innerHTML=g.label}break;case 3:if(g.childsCount!=0){var d=0;for(var c=0;c<g.childsCount;c++){if(!g.childNodes[c]._acc){g.childNodes[c]._acc=0}d+=g.childNodes[c]._acc*1}d+=g.childsCount*1;g.span.innerHTML=g.label+this.htmlcA+d+this.htmlcB;g._acc=d}else{g.span.innerHTML=g.label;g._acc=0}if((g.parentObject)&&(g.parentObject!=this.htmlNode)){this._fixChildCountLabel(g.parentObject)}break;case 4:if(g.childsCount!=0){var d=0;for(var c=0;c<g.childsCount;c++){if(!g.childNodes[c]._acc){g.childNodes[c]._acc=1}d+=g.childNodes[c]._acc*1}g.span.innerHTML=g.label+this.htmlcA+d+this.htmlcB;g._acc=d}else{g.span.innerHTML=g.label;g._acc=1}if((g.parentObject)&&(g.parentObject!=this.htmlNode)){this._fixChildCountLabel(g.parentObject)}break}};dhtmlXTreeObject.prototype.setChildCalcMode=function(a){switch(a){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(c,a){this.htmlcA=c;this.htmlcB=a};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}this._xopenAll(a)};dhtmlXTreeObject.prototype.getOpenState=function(c){var a=this._globalIdStorageFind(c);if(!a){return""}return this._getOpenState(a)};dhtmlXTreeObject.prototype.closeAllItems=function(c){if(c===window.undefined){c=this.rootId}var a=this._globalIdStorageFind(c);if(!a){return 0}this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(e,c,d){var a=this._globalIdStorageFind(e,0,true);if(!a){return}if(c=="hint"){a.htmlNode.childNodes[0].childNodes[0].title=d}if(typeof(a.userData["t_"+c])=="undefined"){if(!a._userdatalist){a._userdatalist=c}else{a._userdatalist+=","+c}}a.userData["t_"+c]=d};dhtmlXTreeObject.prototype.getUserData=function(d,c){var a=this._globalIdStorageFind(d,0,true);if(!a){return}return a.userData["t_"+c]};dhtmlXTreeObject.prototype.getItemColor=function(d){var a=this._globalIdStorageFind(d);if(!a){return 0}var c=new Object();if(a.acolor){c.acolor=a.acolor}if(a.scolor){c.scolor=a.scolor}return c};dhtmlXTreeObject.prototype.setItemColor=function(d,c,e){if((d)&&(d.span)){var a=d}else{var a=this._globalIdStorageFind(d)}if(!a){return 0}else{if(a.i_sel){if(e){a.span.style.color=e}}else{if(c){a.span.style.color=c}}if(e){a.scolor=e}if(c){a.acolor=c}}};dhtmlXTreeObject.prototype.getItemText=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}return(a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML)};dhtmlXTreeObject.prototype.getParentId=function(c){var a=this._globalIdStorageFind(c);if((!a)||(!a.parentObject)){return""}return a.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(c,d){if(c==d){return}var a=this._globalIdStorageFind(c);if(!a){return 0}a.id=d;a.span.contextMenuId=d;this._idpull[d]=this._idpull[c];delete this._idpull[c]};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut()}this.nodeCut=(new Array()).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c._cimgs=new Array();c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(d){var a=this._globalIdStorageFind(d);if(!a){return 0}for(var c=0;c<this.nodeCut.length;c++){if(this._checkPNodes(a,this.nodeCut[c])){continue}this._moveNode(this.nodeCut[c],a)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var c=this.nodeCut[a];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=new Array()};dhtmlXTreeObject.prototype._moveNode=function(a,c){var g=this.dadmodec;if(g==1){var f=c;if(this.dadmodefix<0){while(true){f=this._getPrevNode(f);if((f==-1)){f=this.htmlNode;break}if((f.tr==0)||(f.tr.style.display=="")||(!f.parentObject)){break}}var e=f;var d=c}else{if((f.tr)&&(f.tr.nextSibling)&&(f.tr.nextSibling.nodem)&&(this._getOpenState(f)<1)){f=f.tr.nextSibling.nodem}else{f=this._getNextNode(f);if((f==-1)){f=this.htmlNode}}var d=f;var e=c}if(this._getNodeLevel(e,0)>this._getNodeLevel(d,0)){if(!this.dropLower){return this._moveNodeTo(a,e.parentObject)}else{if(d.id!=this.rootId){return this._moveNodeTo(a,d.parentObject,d)}else{return this._moveNodeTo(a,this.htmlNode,null)}}}else{return this._moveNodeTo(a,d.parentObject,d)}}else{return this._moveNodeTo(a,c)}};dhtmlXTreeObject.prototype._fixNodesCollection=function(j,g){var c=0;var e=0;var h=j.childNodes;var a=j.childsCount-1;if(g==h[a]){return}for(var f=0;f<a;f++){if(h[f]==h[a]){h[f]=h[f+1];h[f+1]=h[a]}}for(var f=0;f<a+1;f++){if(c){var d=h[f];h[f]=c;c=d}else{if(h[f]==g){c=h[f];h[f]=h[a]}}}};dhtmlXTreeObject.prototype._recreateBranch=function(g,j,f,a){var c;var k="";if(f){for(c=0;c<j.childsCount;c++){if(j.childNodes[c]==f){break}}if(c!=0){f=j.childNodes[c-1]}else{k="TOP";f=""}}var d=this._onradh;this._onradh=null;var h=this._attachChildNode(j,g.id,g.label,0,g.images[0],g.images[1],g.images[2],k,0,f);h._userdatalist=g._userdatalist;h.userData=g.userData.clone();if(g._attrs){h._attrs={};for(var e in g._attrs){h._attrs[e]=g._attrs[e]}}h.XMLload=g.XMLload;if(d){this._onradh=d;this._onradh(h.id)}if(g.treeNod.dpcpy){g.treeNod._globalIdStorageFind(g.id)}else{h.unParsed=g.unParsed}this._correctPlus(h);for(var c=0;c<g.childsCount;c++){this._recreateBranch(g.childNodes[c],h,0,1)}if((!a)&&(this.childCalc)){this._redrawFrom(this,j)}return h};dhtmlXTreeObject.prototype._moveNodeTo=function(n,q,m){if(n.treeNod._nonTrivialNode){return n.treeNod._nonTrivialNode(this,q,m,n)}if(this._checkPNodes(q,n)){return false}if(q.mytype){var h=(n.treeNod.lWin!=q.lWin)}else{var h=(n.treeNod.lWin!=q.treeNod.lWin)}if(!this.callEvent("onDrag",[n.id,q.id,(m?m.id:null),n.treeNod,q.treeNod])){return false}if((q.XMLload==0)&&(this.XMLsource)){q.XMLload=1;this._loadDynXML(q.id)}this.openItem(q.id);var d=n.treeNod;var k=n.parentObject.childsCount;var l=n.parentObject;if((h)||(d.dpcpy)){var e=n.id;n=this._recreateBranch(n,q,m);if(!d.dpcpy){d.deleteItem(e)}}else{var f=q.childsCount;var o=q.childNodes;if(f==0){q._open=true}d._unselectItem(n);o[f]=n;n.treeNod=q.treeNod;q.childsCount++;var j=this._drawNewTr(o[f].htmlNode);if(!m){q.htmlNode.childNodes[0].appendChild(j);if(this.dadmode==1){this._fixNodesCollection(q,m)}}else{q.htmlNode.childNodes[0].insertBefore(j,m.tr);this._fixNodesCollection(q,m);o=q.childNodes}}if((!d.dpcpy)&&(!h)){var a=n.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){a.parentNode.removeChild(a)},250)}else{n.parentObject.htmlNode.childNodes[0].removeChild(n.tr)}if((!m)||(q!=n.parentObject)){for(var g=0;g<l.childsCount;g++){if(l.childNodes[g].id==n.id){l.childNodes[g]=0;break}}}else{l.childNodes[l.childsCount-1]=0}d._compressChildList(l.childsCount,l.childNodes);l.childsCount--}if((!h)&&(!d.dpcpy)){n.tr=j;j.nodem=n;n.parentObject=q;if(d!=q.treeNod){if(n.treeNod._registerBranch(n,d)){return}this._clearStyles(n);this._redrawFrom(this,n.parentObject);if(this._onradh){this._onradh(n.id)}}this._correctPlus(q);this._correctLine(q);this._correctLine(n);this._correctPlus(n);if(m){this._correctPlus(m)}else{if(q.childsCount>=2){this._correctPlus(o[q.childsCount-2]);this._correctLine(o[q.childsCount-2])}}this._correctPlus(o[q.childsCount-1]);if(this.tscheck){this._correctCheckStates(q)}if(d.tscheck){d._correctCheckStates(l)}}if(k>1){d._correctPlus(l.childNodes[k-2]);d._correctLine(l.childNodes[k-2])}d._correctPlus(l);d._correctLine(l);this._fixChildCountLabel(q);d._fixChildCountLabel(l);this.callEvent("onDrop",[n.id,q.id,(m?m.id:null),d,q.treeNod]);return n.id};dhtmlXTreeObject.prototype._clearStyles=function(a){if(!a.htmlNode){return}var e=a.htmlNode.childNodes[0].childNodes[0].childNodes[1];var c=e.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=false;if(a._aimgs){this.dragger.removeDraggableItem(e.nextSibling)}if(this.checkBoxOff){e.childNodes[0].style.display="";e.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(e.childNodes[0],this.imPath+this.checkArray[a.checkstate])}else{e.style.display="none"}e.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(c);if(this.dragAndDropOff){this.dragger.addDraggableItem(c,this)}if(this._aimgs){this.dragger.addDraggableItem(e.nextSibling,this)}c.childNodes[0].className="standartTreeRow";c.onclick=this.onRowSelect;c.ondblclick=this.onRowClick2;e.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var d=0;d<a.childsCount;d++){this._clearStyles(a.childNodes[d])}};dhtmlXTreeObject.prototype._registerBranch=function(c,a){if(a){a._globalIdStorageSub(c.id)}c.id=this._globalIdStorageAdd(c.id,c);c.treeNod=this;for(var d=0;d<c.childsCount;d++){this._registerBranch(c.childNodes[d],a)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=true;this.attachEvent("onMouseIn",a)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=true;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(c,a){this.checkBoxOff=dhx4.s2b(c);this.cBROf=(!(this.checkBoxOff||dhx4.s2b(a)))};dhtmlXTreeObject.prototype.setStdImages=function(a,d,c){this.imageArray[0]=a;this.imageArray[1]=d;this.imageArray[2]=c};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setImageArrays=function(e,a,g,f,d,c){switch(e){case"plus":this.plusArray[0]=a;this.plusArray[1]=g;this.plusArray[2]=f;this.plusArray[3]=d;this.plusArray[4]=c;break;case"minus":this.minusArray[0]=a;this.minusArray[1]=g;this.minusArray[2]=f;this.minusArray[3]=d;this.minusArray[4]=c;break}};dhtmlXTreeObject.prototype.openItem=function(c){this.skipLock=true;var a=this._globalIdStorageFind(c);if(!a){return 0}else{return this._openItem(a)}this.skipLock=false};dhtmlXTreeObject.prototype._openItem=function(a){var c=this._getOpenState(a);if((c<0)||(((this.XMLsource)&&(!a.XMLload)))){if(!this.callEvent("onOpenStart",[a.id,c])){return 0}this._HideShow(a,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,a.id,true)}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)])}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe}}}else{if(this._srnd){this._HideShow(a,2)}}if(a.parentObject&&!this._skip_open_parent){this._openItem(a.parentObject)}};dhtmlXTreeObject.prototype.closeItem=function(c){if(this.rootId==c){return 0}this.skipLock=true;var a=this._globalIdStorageFind(c);if(!a){return 0}if(a.closeble){this._HideShow(a,1)}this.skipLock=false};dhtmlXTreeObject.prototype.getLevel=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}return this._getNodeLevel(a,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(d,a){a=dhx4.s2b(a);if((d)&&(d.span)){var c=d}else{var c=this._globalIdStorageFind(d)}if(!c){return 0}c.closeble=a};dhtmlXTreeObject.prototype._getNodeLevel=function(a,c){if(a.parentObject){return this._getNodeLevel(a.parentObject,c+1)}return(c)};dhtmlXTreeObject.prototype.hasChildren=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0}else{if((this.XMLsource)&&(!a.XMLload)){return true}else{return a.childsCount}}};dhtmlXTreeObject.prototype._getLeafCount=function(e){var d=0;for(var c=0;c<e.childsCount;c++){if(e.childNodes[c].childsCount==0){d++}}return d};dhtmlXTreeObject.prototype.setItemText=function(e,d,c){var a=this._globalIdStorageFind(e);if(!a){return 0}a.label=d;a.span.innerHTML=d;if(this.childCalc){this._fixChildCountLabel(a)}a.span.parentNode.parentNode.title=c||""};dhtmlXTreeObject.prototype.getItemTooltip=function(c){var a=this._globalIdStorageFind(c);if(!a){return""}return(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"")};dhtmlXTreeObject.prototype.refreshItem=function(c){if(!c){c=this.rootId}var a=this._globalIdStorageFind(c);this._dynDeleteBranches[c]=(this._dynDeleteBranches[c]||0)+1;this._loadDynXML(c)};dhtmlXTreeObject.prototype.setItemImage2=function(e,a,f,d){var c=this._globalIdStorageFind(e);if(!c){return 0}c.images[1]=f;c.images[2]=d;c.images[0]=a;this._correctPlus(c)};dhtmlXTreeObject.prototype.setItemImage=function(d,a,e){var c=this._globalIdStorageFind(d);if(!c){return 0}if(e){c.images[1]=a;c.images[2]=e}else{c.images[0]=a}this._correctPlus(c)};dhtmlXTreeObject.prototype.getSubItems=function(d){var a=this._globalIdStorageFind(d,0,1);if(!a){return 0}if(a.unParsed){return(this._getSubItemsXML(a.unParsed))}var c="";for(i=0;i<a.childsCount;i++){if(!c){c=""+a.childNodes[i].id}else{c+=this.dlmtr+a.childNodes[i].id}}return c};dhtmlXTreeObject.prototype._getAllScraggyItems=function(d){var e="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(d.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(d.childNodes[c])}if(a){if(e){e+=this.dlmtr+a}else{e=a}}}else{if(!e){e=""+d.childNodes[c].id}else{e+=this.dlmtr+d.childNodes[c].id}}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(d){var e="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(!e){e=""+d.childNodes[c].id}else{e+=this.dlmtr+d.childNodes[c].id}if(d.childNodes[c].unParsed){var a=this._getAllFatItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(d.childNodes[c])}if(a){e+=this.dlmtr+a}}}return e};dhtmlXTreeObject.prototype._getAllSubItems=function(g,f,e){if(e){c=e}else{var c=this._globalIdStorageFind(g)}if(!c){return 0}f="";for(var d=0;d<c.childsCount;d++){if(!f){f=""+c.childNodes[d].id}else{f+=this.dlmtr+c.childNodes[d].id}var a=this._getAllSubItems(0,f,c.childNodes[d]);if(a){f+=this.dlmtr+a}}if(c.unParsed){f=this._getAllSubItemsXML(g,f,c.unParsed)}return f};dhtmlXTreeObject.prototype.selectItem=function(e,d,c){d=dhx4.s2b(d);var a=this._globalIdStorageFind(e);if((!a)||(!a.parentObject)){return 0}if(this.XMLloadingWarning){a.parentObject.openMe=1}else{this._openItem(a.parentObject)}var f=null;if(c){f=new Object;f.ctrlKey=true;if(a.i_sel){f.skipUnSel=true}}if(d){this.onRowSelect(f,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],false)}else{this.onRowSelect(f,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],true)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var c=new Array();for(var a=0;a<this._selected.length;a++){c[a]=this._selected[a].span.innerHTML}return(c.join(this.dlmtr))};dhtmlXTreeObject.prototype._compressChildList=function(a,d){a--;for(var c=0;c<a;c++){if(d[c]==0){d[c]=d[c+1];d[c+1]=0}}};dhtmlXTreeObject.prototype._deleteNode=function(h,f,k){if((!f)||(!f.parentObject)){return 0}var a=0;var c=0;if(f.tr.nextSibling){a=f.tr.nextSibling.nodem}if(f.tr.previousSibling){c=f.tr.previousSibling.nodem}var g=f.parentObject;var d=g.childsCount;var j=g.childNodes;for(var e=0;e<d;e++){if(j[e].id==h){if(!k){g.htmlNode.childNodes[0].removeChild(j[e].tr)}j[e]=0;break}}this._compressChildList(d,j);if(!k){g.childsCount--}if(a){this._correctPlus(a);this._correctLine(a)}if(c){this._correctPlus(c);this._correctLine(c)}if(this.tscheck){this._correctCheckStates(g)}if(!k){this._globalIdStorageRecSub(f)}};dhtmlXTreeObject.prototype.setCheck=function(d,c){var a=this._globalIdStorageFind(d,0,1);if(!a){return}if(c==="unsure"){this._setCheck(a,c)}else{c=dhx4.s2b(c);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(c,a)}else{this._setCheck(a,c)}}if(this.smcheck){this._correctCheckStates(a.parentObject)}};dhtmlXTreeObject.prototype._setCheck=function(a,d){if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(d)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0)}this._frbtrL=a}else{for(var c=0;c<a.parentObject.childsCount;c++){this._setCheck(a.parentObject.childNodes[c],0)}}}var e=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(d=="unsure"){a.checkstate=2}else{if(d){a.checkstate=1}else{a.checkstate=0}}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(e,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.setSubChecked=function(d,c){var a=this._globalIdStorageFind(d);this._setSubChecked(c,a);this._correctCheckStates(a.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(d,a){d=dhx4.s2b(d);if(!a){return}if(((a.parentObject._r_logic)||(this._frbtr))&&(d)){for(var c=0;c<a.parentObject.childsCount;c++){this._setSubChecked(0,a.parentObject.childNodes[c])}}if(a.unParsed){this._setSubCheckedXML(d,a.unParsed)}if(a._r_logic||this._frbtr){this._setSubChecked(d,a.childNodes[0])}else{for(var c=0;c<a.childsCount;c++){this._setSubChecked(d,a.childNodes[c])}}var e=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(d){a.checkstate=1}else{a.checkstate=0}if(a.dscheck){a.checkstate=a.dscheck}this._setSrc(e,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate])};dhtmlXTreeObject.prototype.isItemChecked=function(c){var a=this._globalIdStorageFind(c);if(!a){return}return a.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(e){var a=this._globalIdStorageFind(e);if(!a){return}var c=a.childsCount;for(var d=0;d<c;d++){this._deleteNode(a.childNodes[0].id,a.childNodes[0])}};dhtmlXTreeObject.prototype.deleteItem=function(d,a){if((!this._onrdlh)||(this._onrdlh(d))){var c=this._deleteItem(d,a);if(c){this._fixChildCountLabel(c)}}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(g,c,f){c=dhx4.s2b(c);var a=this._globalIdStorageFind(g);if(!a){return}var d=this.getParentId(g);var e=a.parentObject;this._deleteNode(g,a,f);if(this._editCell&&this._editCell.id==g){this._editCell=null}this._correctPlus(e);this._correctLine(e);if((c)&&(d!=this.rootId)){this.selectItem(d,1)}return e};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var c=0;c<a.childsCount;c++){this._globalIdStorageRecSub(a.childNodes[c]);this._globalIdStorageSub(a.childNodes[c].id)}this._globalIdStorageSub(a.id);var d=a;d.span=null;d.tr.nodem=null;d.tr=null;d.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(j,m,l,d,g,f,e,c,a){var h=this._globalIdStorageFind(j);if((!h)||(!h.parentObject)){return(0)}var k=this._attachChildNode(0,m,l,d,g,f,e,c,a,h);if((!this.XMLloadingWarning)&&(this.childCalc)){this._fixChildCountLabel(h.parentObject)}return k};dhtmlXTreeObject.prototype.getItemIdByIndex=function(d,a){var c=this._globalIdStorageFind(d);if((!c)||(a>=c.childsCount)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(d,a){var c=this._globalIdStorageFind(d);if((!c)||(a>=c.childsCount)){return null}return c.childNodes[a].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null}this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(c,a){if(c=="temporary_disabled"){this.dADTempOff=false;c=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(c);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this)}if(arguments.length>1){this._ddronr=(!dhx4.s2b(a))}};dhtmlXTreeObject.prototype._setMove=function(f,d,h){if(f.parentObject.span){var e=dhx4.absTop(f);var c=dhx4.absTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(this.dadmode==2){var g=h-e+(document.body.scrollTop||document.documentElement.scrollTop)-2-f.offsetHeight/2;if((Math.abs(g)-f.offsetHeight/6)>0){this.dadmodec=1;if(g<0){this.dadmodefix=0-f.offsetHeight}}else{this.dadmodec=0}}if(this.dadmodec==0){var a=f.parentObject.span;a.className+=" dragAndDropRow";this._lastMark=a}else{this._clearMove();this.selectionBar.style.top=(e-c+((parseInt(f.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix)+"px";this.selectionBar.style.left="5px";if(this.allTree.offsetWidth>20){this.selectionBar.style.width=(this.allTree.offsetWidth-(_isFF?30:25))+"px"}this.selectionBar.style.display=""}this._autoScroll(null,e,c)}};dhtmlXTreeObject.prototype._autoScroll=function(d,c,a){if(this.autoScroll){if(d){c=dhx4.absTop(d);a=dhx4.absTop(this.allTree)-this.allTree.scrollTop}if((c-a-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if((c-a)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(g,f){if(!this.dADTempOff){return null}var d=g.parentObject;if(!this.callEvent("onBeforeDrag",[d.id,f])){return null}if(!d.i_sel){this._selectItem(d,f)}this._checkMSelectionLogic();var c=document.createElement("div");var h=new Array();if(this._itim_dg){for(var a=0;a<this._selected.length;a++){h[a]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[a].span.innerHTML+"</td></tr></table>"}}else{h=this.getSelectedItemText().split(this.dlmtr)}c.innerHTML=h.join("");c.style.position="absolute";c.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return c};dhtmlXTreeObject.prototype._focusNode=function(a){var c=dhx4.absTop(a.htmlNode)-dhx4.absTop(this.allTree);if((c>(this.allTree.offsetHeight-30))||(c<0)){this.allTree.scrollTop=c+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(a){if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlXTreeObject.prototype._drag=function(h,j,a){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}if(!a.parentObject){a=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0}this._clearMove();var g=h.parentObject.treeNod;if((g)&&(g._clearMove)){g._clearMove("")}if((!this.dragMove)||(this.dragMove())){if((!g)||(!g._clearMove)||(!g._dragged)){var e=new Array(h.parentObject)}else{var e=g._dragged}var c=a.parentObject;for(var f=0;f<e.length;f++){var d=this._moveNode(e[f],c);if((this.dadmodec)&&(d!==false)){c=this._globalIdStorageFind(d,true,true)}if((d)&&(!this._sADnD)){this.selectItem(d,0,1)}}}if(g){g._dragged=new Array()}};dhtmlXTreeObject.prototype._dragIn=function(e,c,g,f){if(!this.dADTempOff){return 0}var h=c.parentObject;var a=e.parentObject;if((!a)&&(this._ddronr)){return}if(!this.callEvent("onDragIn",[h.id,a?a.id:null,h.treeNod,this])){if(a){this._autoScroll(e)}return 0}if(!a){this.allTree.className+=" selectionBox"}else{if(h.childNodes==null){this._setMove(e,g,f);return e}var k=h.treeNod;for(var d=0;d<k._dragged.length;d++){if(this._checkPNodes(a,k._dragged[d])){this._autoScroll(e);return 0}}this.selectionBar.parentNode.removeChild(this.selectionBar);a.span.parentNode.appendChild(this.selectionBar);this._setMove(e,g,f);if(this._getOpenState(a)<=0){var j=this;this._autoOpenId=a.id;this._autoOpenTimer=window.setTimeout(function(){j._autoOpenItem(null,j);j=null},1000)}}return e};dhtmlXTreeObject.prototype._autoOpenItem=function(c,a){a.openItem(a._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer)}};dhtmlXTreeObject.prototype._getNextNode=function(a,c){if((!c)&&(a.childsCount)){return a.childNodes[0]}if(a==this.htmlNode){return -1}if((a.tr)&&(a.tr.nextSibling)&&(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem}return this._getNextNode(a.parentObject,true)};dhtmlXTreeObject.prototype._lastChild=function(a){if(a.childsCount){return this._lastChild(a.childNodes[a.childsCount-1])}else{return a}};dhtmlXTreeObject.prototype._getPrevNode=function(a,c){if((a.tr)&&(a.tr.previousSibling)&&(a.tr.previousSibling.nodem)){return this._lastChild(a.tr.previousSibling.nodem)}if(a.parentObject){return a.parentObject}else{return -1}};dhtmlXTreeObject.prototype.findItem=function(a,d,c){var e=this._findNodeByLabel(a,d,(c?this.htmlNode:null));if(e){this.selectItem(e.id,true);this._focusNode(e);return e.id}else{return null}};dhtmlXTreeObject.prototype.findItemIdByLabel=function(a,d,c){var e=this._findNodeByLabel(a,d,(c?this.htmlNode:null));if(e){return e.id}else{return null}};dhtmlXTreeObject.prototype.findStrInXML=function(c,d,f){if(!c.childNodes&&c.item){return this.findStrInJSON(c,d,f)}if(!c.childNodes){return false}for(var a=0;a<c.childNodes.length;a++){if(c.childNodes[a].nodeType==1){var e=c.childNodes[a].getAttribute(d);if(!e&&c.childNodes[a].tagName=="itemtext"){e=c.childNodes[a].firstChild.data}if((e)&&(e.toLowerCase().search(f)!=-1)){return true}if(this.findStrInXML(c.childNodes[a],d,f)){return true}}}return false};dhtmlXTreeObject.prototype.findStrInJSON=function(c,d,f){for(var a=0;a<c.item.length;a++){var e=c.item[a].text;if((e)&&(e.toLowerCase().search(f)!=-1)){return true}if(c.item[a].item&&this.findStrInJSON(c.item[a],d,f)){return true}}return false};dhtmlXTreeObject.prototype._findNodeByLabel=function(a,f,e){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!e){e=this._selected[0];if(!e){e=this.htmlNode}}var c=e;if(!f){if((e.unParsed)&&(this.findStrInXML(e.unParsed.d,"text",a))){this.reParse(e)}e=this._getNextNode(c);if(e==-1){e=this.htmlNode.childNodes[0]}}else{var d=this._getPrevNode(c);if(d==-1){d=this._lastChild(this.htmlNode)}if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d);e=this._getPrevNode(c)}else{e=d}if(e==-1){e=this._lastChild(this.htmlNode)}}while((e)&&(e!=c)){if((e.label)&&(e.label.search(a)!=-1)){return(e)}if(!f){if(e==-1){if(c==this.htmlNode){break}e=this.htmlNode.childNodes[0]}if((e.unParsed)&&(this.findStrInXML(e.unParsed.d,"text",a))){this.reParse(e)}e=this._getNextNode(e);if(e==-1){e=this.htmlNode}}else{var d=this._getPrevNode(e);if(d==-1){d=this._lastChild(this.htmlNode)}if((d.unParsed)&&(this.findStrInXML(d.unParsed.d,"text",a))){this.reParse(d);e=this._getPrevNode(e)}else{e=d}if(e==-1){e=this._lastChild(this.htmlNode)}}}return null};dhtmlXTreeObject.prototype.moveItem=function(j,c,k,a){var f=this._globalIdStorageFind(j);if(!f){return(0)}var g=null;switch(c){case"right":alert("Not supported yet");break;case"item_child":var d=(a||this)._globalIdStorageFind(k);if(!d){return(0)}g=(a||this)._moveNodeTo(f,d,0);break;case"item_sibling":var d=(a||this)._globalIdStorageFind(k);if(!d){return(0)}g=(a||this)._moveNodeTo(f,d.parentObject,d);break;case"item_sibling_next":var d=(a||this)._globalIdStorageFind(k);if(!d){return(0)}if((d.tr)&&(d.tr.nextSibling)&&(d.tr.nextSibling.nodem)){g=(a||this)._moveNodeTo(f,d.parentObject,d.tr.nextSibling.nodem)}else{g=(a||this)._moveNodeTo(f,d.parentObject)}break;case"left":if(f.parentObject.parentObject){g=this._moveNodeTo(f,f.parentObject.parentObject,f.parentObject)}break;case"up":var h=this._getPrevNode(f);if((h==-1)||(!h.parentObject)){return null}g=this._moveNodeTo(f,h.parentObject,h);break;case"up_strict":var h=this._getIndex(f);if(h!=0){g=this._moveNodeTo(f,f.parentObject,f.parentObject.childNodes[h-1])}break;case"down_strict":var h=this._getIndex(f);var e=f.parentObject.childsCount-2;if(h==e){g=this._moveNodeTo(f,f.parentObject)}else{if(h<e){g=this._moveNodeTo(f,f.parentObject,f.parentObject.childNodes[h+2])}}break;case"down":var h=this._getNextNode(this._lastChild(f));if((h==-1)||(!h.parentObject)){return}if(h.parentObject==f.parentObject){var h=this._getNextNode(h)}if(h==-1){g=this._moveNodeTo(f,f.parentObject)}else{if((h==-1)||(!h.parentObject)){return}g=this._moveNodeTo(f,h.parentObject,h)}break}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}return g};dhtmlXTreeObject.prototype.setDragBehavior=function(c,a){this._sADnD=(!dhx4.s2b(a));switch(c){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2;break}};dhtmlXTreeObject.prototype._loadDynXML=function(d,c){c=c||this.XMLsource;var a=(new Date()).valueOf();this._ld_id=d;if(this.xmlalb=="function"){if(c){c(this._escape(d))}}else{if(this.xmlalb=="name"){this.load(c+this._escape(d))}else{if(this.xmlalb=="xmlname"){this.load(c+this._escape(d)+".xml?uid="+a)}else{this.load(c+dhtmlx.url(c)+"uid="+a+"&id="+this._escape(d))}}}};dhtmlXTreeObject.prototype.enableMultiselection=function(c,a){this._amsel=dhx4.s2b(c);this._amselS=dhx4.s2b(a)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){var d=new Array();for(var c=0;c<this._selected.length;c++){for(var a=0;a<this._selected.length;a++){if((c!=a)&&(this._checkPNodes(this._selected[a],this._selected[c]))){d[d.length]=this._selected[a]}}}for(var c=0;c<d.length;c++){this._unselectItem(d[c])}};dhtmlXTreeObject.prototype._checkPNodes=function(c,a){if(this._dcheckf){return false}if(a==c){return 1}if(c.parentObject){return this._checkPNodes(c.parentObject,a)}else{return 0}};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(d,c,a){this._edsbps=dhx4.s2b(d);this._edsbpsA=new Array();this._edsbpsC=c||10;this._edsbpsD=a||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return(!((!this._edsbpsA)||(!this._edsbpsA.length)))};dhtmlXTreeObject.prototype.getItemParsingState=function(d){var c=this._globalIdStorageFind(d,true,true);if(!c){return 0}if(this._edsbpsA){for(var a=0;a<this._edsbpsA.length;a++){if(this._edsbpsA[a][2]==d){return -1}}}return 1};dhtmlXTreeObject.prototype._distributedStart=function(c,f,e,d,a){if(!this._edsbpsA){this._edsbpsA=new Array()}this._edsbpsA[this._edsbpsA.length]=[c,f,e,d,a]};dhtmlXTreeObject.prototype._distributedStep=function(e){var c=this;if((!this._edsbpsA)||(!this._edsbpsA.length)){c.XMLloadingWarning=0;return}var f=this._edsbpsA[0];this.parsedArray=new Array();this._parse(f[0],f[2],f[3],f[1]);var a=this._globalIdStorageFind(f[2]);this._redrawFrom(this,a,f[4],this._getOpenState(a));var d=this.setCheckList.split(this.dlmtr);for(var g=0;g<d.length;g++){if(d[g]){this.setCheck(d[g],1)}}this._edsbpsA=(new Array()).concat(this._edsbpsA.slice(1));if((!this._edsbpsA.length)){window.setTimeout(function(){if(c.onXLE){c.onXLE(c,e)}c.callEvent("onXLE",[c,e])},1);c.xmlstate=0}};dhtmlXTreeObject.prototype.enableTextSigns=function(a){this._txtimg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.preventIECaching=function(a){dhx4.ajax.cache=!a};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(d,c){if(typeof(d)!="object"){var a=this._globalIdStorageFind(d,0,1)}else{var a=d}if(!a){return}a.dscheck=dhx4.s2b(c)?(((a.checkstate||0)%3)+3):((a.checkstate>2)?(a.checkstate-3):a.checkstate);this._setCheck(a);if(a.dscheck<3){a.dscheck=false}};dhtmlXTreeObject.prototype.smartRefreshBranch=function(c,a){this._branchUpdate=1;this.smartRefreshItem(c,a)};dhtmlXTreeObject.prototype.smartRefreshItem=function(e,d){var a=this._globalIdStorageFind(e);for(var c=0;c<a.childsCount;c++){a.childNodes[c]._dmark=true}this.waitUpdateXML=true;if(d&&d.exists){this._parse(d,e)}else{this._loadDynXML(e,d)}};dhtmlXTreeObject.prototype.refreshItems=function(c,d){var e=c.toString().split(this.dlmtr);this.waitUpdateXML=new Array();for(var a=0;a<e.length;a++){this.waitUpdateXML[e[a]]=true}this.load((d||this.XMLsource)+dhtmlx.url(d||this.XMLsource)+"ids="+this._escape(c))};dhtmlXTreeObject.prototype.updateItem=function(h,g,e,d,c,f,j){var a=this._globalIdStorageFind(h);a.userData=new cObject();if(g){a.label=g}a.images=new Array(e||this.imageArray[0],d||this.imageArray[1],c||this.imageArray[2]);this.setItemText(h,g);if(f){this._setCheck(a,true)}if(j=="1"&&!this.hasChildren(h)){a.XMLload=0}this._correctPlus(a);a._dmark=false;return a};dhtmlXTreeObject.prototype.setDropHandler=function(a){this.attachEvent("onDrop",a)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(a){this.attachEvent("onXLS",a)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(a){this.attachEvent("onXLE",a)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(a){this.xmlalb=a};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(a){this.smcheck=dhx4.s2b(a)};dhtmlXTreeObject.prototype.getXMLState=function(){return(this.xmlstate==1)};dhtmlXTreeObject.prototype.setItemTopOffset=function(g,e){var d;if(typeof(g)!="object"){d=this._globalIdStorageFind(g)}else{d=g}var f=d.span.parentNode.parentNode;d.span.style.paddingBottom="1px";for(var c=0;c<f.childNodes.length;c++){if(c!=0){if(_isIE){f.childNodes[c].style.height="18px";f.childNodes[c].style.paddingTop=parseInt(e)+"px"}else{f.childNodes[c].style.height=18+parseInt(e)+"px"}}else{var a=f.childNodes[c].firstChild;if(f.childNodes[c].firstChild.tagName!="DIV"){a=document.createElement("DIV");f.childNodes[c].insertBefore(a,f.childNodes[c].firstChild)}if((d.parentObject.id!=this.rootId||d.parentObject.childNodes[0]!=d)&&this.treeLinesOn){f.childNodes[c].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"}a.innerHTML="&nbsp;";a.style.overflow="hidden"}a.style.verticalAlign=f.childNodes[c].style.verticalAlign="bottom";if(_isIE){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"}}};dhtmlXTreeObject.prototype.setIconSize=function(e,c,f){if(f){if((f)&&(f.span)){var a=f}else{var a=this._globalIdStorageFind(f)}if(!a){return(0)}var d=a.span.parentNode.previousSibling.childNodes[0];if(e){d.style.width=e+"px";if(window._KHTMLrv){d.parentNode.style.width=e+"px"}}if(c){d.style.height=c+"px";if(window._KHTMLrv){d.parentNode.style.height=c+"px"}}}else{this.def_img_x=e;this.def_img_y=c}};dhtmlXTreeObject.prototype.getItemImage=function(f,e,c){var d=this._globalIdStorageFind(f);if(!d){return""}var a=d.images[e||0];if(c){a=this.iconURL+a}return a};dhtmlXTreeObject.prototype.enableRadioButtons=function(e,d){if(arguments.length==1){this._frbtr=dhx4.s2b(e);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}var c=this._globalIdStorageFind(e);if(!c){return""}d=dhx4.s2b(d);if((d)&&(!c._r_logic)){c._r_logic=true;for(var a=0;a<c.childsCount;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}if((!d)&&(c._r_logic)){c._r_logic=false;for(var a=0;a<c.childsCount;a++){this._setCheck(c.childNodes[a],c.childNodes[a].checkstate)}}};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(a){this._frbtrs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdded=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.openOnItemAdding=function(a){this._hAdI=!dhx4.s2b(a)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(a){if(a===true){this.mlitems="100%"}else{this.mlitems=a}};dhtmlXTreeObject.prototype.enableAutoTooltips=function(a){this.ettip=dhx4.s2b(a)};dhtmlXTreeObject.prototype.clearSelection=function(a){if(a){this._unselectItem(this._globalIdStorageFind(a))}else{this._unselectItems()}};dhtmlXTreeObject.prototype.showItemSign=function(e,c){var a=this._globalIdStorageFind(e);if(!a){return 0}var d=a.span.parentNode.previousSibling.previousSibling.previousSibling;if(!dhx4.s2b(c)){this._openItem(a);a.closeble=false;a.wsign=true}else{a.closeble=true;a.wsign=false}this._correctPlus(a)};dhtmlXTreeObject.prototype.showItemCheckbox=function(f,e){if(!f){for(var c in this._idpull){this.showItemCheckbox(this._idpull[c],e)}}if(typeof(f)!="object"){f=this._globalIdStorageFind(f,0,0)}if(!f){return 0}f.nocheckbox=!dhx4.s2b(e);var d=f.span.parentNode.previousSibling.previousSibling.childNodes[0];d.parentNode.style.display=(!f.nocheckbox)?"":"none"};dhtmlXTreeObject.prototype.setListDelimeter=function(a){this.dlmtr=a};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=true;this.ehlta=dhx4.s2b(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;a.callEvent("onMouseOut",[c.id]);if(c.id==a._l_onMSI){a._l_onMSI=null}if(!a.ehlta){return}c.span.className=c.span.className.replace("_lor","")};dhtmlXTreeObject.prototype._itemMouseIn=function(){var c=this.childNodes[3].parentObject;var a=c.treeNod;if(a._l_onMSI!=c.id){a.callEvent("onMouseIn",[c.id])}a._l_onMSI=c.id;if(!a.ehlta){return}c.span.className=c.span.className.replace("_lor","");c.span.className=c.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=dhx4.s2b(a)};dhtmlXTreeObject.prototype.focusItem=function(c){var a=this._globalIdStorageFind(c);if(!a){return(0)}this._focusNode(a)};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(d){var e="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(d.childNodes[c].unParsed){var a=this._getAllScraggyItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllScraggyItems(d.childNodes[c])}if(a){if(e){e+=this.dlmtr+a}else{e=a}}}else{if(!e){e=""+d.childNodes[c].id}else{e+=this.dlmtr+d.childNodes[c].id}}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(d){var e="";for(var c=0;c<d.childsCount;c++){if((d.childNodes[c].unParsed)||(d.childNodes[c].childsCount>0)){if(!e){e=""+d.childNodes[c].id}else{e+=this.dlmtr+d.childNodes[c].id}if(d.childNodes[c].unParsed){var a=this._getAllFatItemsXML(d.childNodes[c].unParsed,1)}else{var a=this._getAllFatItems(d.childNodes[c])}if(a){e+=this.dlmtr+a}}}return e};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){if(a){a=this._globalIdStorageFind(a)}return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)];var c=this._getAllChecked("","",2);if(c){a.push(c)}return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(e,d,f){if(!e){e=this.htmlNode}if(e.checkstate==f){if(!e.nocheckbox){if(d){d+=this.dlmtr+e.id}else{d=""+e.id}}}var a=e.childsCount;for(var c=0;c<a;c++){d=this._getAllChecked(e.childNodes[c],d,f)}if(e.unParsed){d=this._getAllCheckedXML(e.unParsed,d,f)}if(d){return d}else{return""}};dhtmlXTreeObject.prototype.setItemStyle=function(e,d,c){var c=c||false;var a=this._globalIdStorageFind(e);if(!a){return 0}if(!a.span.style.cssText){a.span.setAttribute("style",a.span.getAttribute("style")+"; "+d)}else{a.span.style.cssText=c?d:a.span.style.cssText+";"+d}};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=dhx4.s2b(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+a;if(a=="dhx_terrace"||a=="dhx_web"){this.enableTreeLines(false)}};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,(a.width||"100%"),(a.height||"100%"),(a.root_id||0)]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(e,g,c){var d=dhx4.ajax.xpath(".//item",e);var f=d[0].getAttribute("text");this.obj.insertNewItem(c,g,f,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(e,g,c){var d=dhx4.ajax.xpath(".//item",e);var f=d[0].getAttribute("text");this.obj.setItemText(g,f);if(this.obj.getParentId(g)!=c){this.obj.moveItem(g,"item_child",c)}this.setUpdated(g,true,"updated")});a.attachEvent("deleteCallback",function(d,e,c){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.deleteItem(e,false)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(c,d){if(c==3){a.setUpdated(d,true)}return true});this.attachEvent("onDrop",function(g,f,e,d,c){if(d==c){a.setUpdated(g,true)}});this._onrdlh=function(c){var d=a.getState(c);if(d=="inserted"){a.set_invalid(c,false);a.setUpdated(c,false);return true}if(d=="true_deleted"){a.setUpdated(c,false);return true}a.setUpdated(c,true,"deleted");return false};this._onradh=function(c){a.setUpdated(c,true,"inserted")};a._getRowData=function(f){var e={};var g=this.obj._globalIdStorageFind(f);var d=g.parentObject;var c=0;for(c=0;c<d.childsCount;c++){if(d.childNodes[c]==g){break}}e.tr_id=g.id;e.tr_pid=d.id;e.tr_order=c;e.tr_text=g.span.innerHTML;d=(g._userdatalist||"").split(",");for(c=0;c<d.length;c++){e[d[c]]=g.userData["t_"+d[c]]}return e}};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachTree=function(a){this.callEvent("_onBeforeContentAttach",["tree"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);this.dataType="tree";this.dataObj=new dhtmlXTreeObject(c,"100%","100%",(a||0));this.dataObj.setSkin(this.conf.skin);this.dataObj.allTree.childNodes[0].style.marginTop="2px";this.dataObj.allTree.childNodes[0].style.marginBottom="2px";c=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXTreeObject.prototype.makeDraggable=function(c,a){if(typeof(c)!="object"){c=document.getElementById(c)}dragger=new dhtmlDragAndDropObject();dropper=new dhx_dragSomethingInTree();dragger.addDraggableItem(c,dropper);c.dragLanding=null;c.ondragstart=dropper._preventNsDrag;c.onselectstart=new Function("return false;");c.parentObject=new Object;c.parentObject.img=c;c.parentObject.treeNod=dropper;dropper._customDrop=a};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(c){var d=document.getElementsByTagName("div");for(var a=0;a<d.length;a++){if(d[a].getAttribute("dragInDhtmlXTree")){this.makeDragable(d[a],c)}}};function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(c){var a=document.createElement("div");a.style.position="absolute";a.innerHTML=(c.innerHTML||c.value);a.className="dragSpanDiv";return a};this._preventNsDrag=function(a){(a||window.event).cancelBubble=true;if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};this._nonTrivialNode=function(c,d,a,e){if(this._customDrop){return this._customDrop(c,e.img.id,d.id,a?a.id:null)}var f=(e.img.getAttribute("image")||"");var h=e.img.id||"new";var g=(e.img.getAttribute("text")||(_isIE?e.img.innerText:e.img.textContent));c[a?"insertNewNext":"insertNewItem"](a?a.id:d.id,h,g,"",f,f,f)}}dhtmlXTreeObject.prototype.enableItemEditor=function(a){this._eItEd=dhx4.s2b(a);if(!this._eItEdFlag){this._edn_click_IE=true;this._edn_dblclick=true;this._ie_aFunc=this.aFunc;this._ie_dblclickFuncHandler=this.dblclickFuncHandler;this.setOnDblClickHandler(function(d,c){if(this._edn_dblclick){this._editItem(d,c)}return true});this.setOnClickHandler(function(d,c){this._stopEditItem(d,c);if((this.ed_hist_clcik==d)&&(this._edn_click_IE)){this._editItem(d,c)}this.ed_hist_clcik=d;return true});this._eItEdFlag=true}};dhtmlXTreeObject.prototype.setOnEditHandler=function(a){this.attachEvent("onEdit",a)};dhtmlXTreeObject.prototype.setEditStartAction=function(a,c){this._edn_click_IE=dhx4.s2b(a);this._edn_dblclick=dhx4.s2b(c)};dhtmlXTreeObject.prototype._stopEdit=function(c,g){if(this._editCell){this.dADTempOff=this.dADTempOffEd;if(this._editCell.id!=c){var e=true;if(!g){e=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value])}else{e=false;this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])}if(e===true){e=this._editCell.span.childNodes[0].value}else{if(e===false){e=this._editCell._oldValue}}var f=(e!=this._editCell._oldValue);this._editCell.span.innerHTML=e;this._editCell.label=this._editCell.span.innerHTML;var d=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=d;this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var h=this._editCell.id;if(this.childCalc){this._fixChildCountLabel(this._editCell)}this._editCell=null;if(!g){this.callEvent("onEdit",[3,h,this,f])}if(this._enblkbrd){this.parentObject.lastChild.focus();this.parentObject.lastChild.focus()}}}};dhtmlXTreeObject.prototype._stopEditItem=function(c,a){this._stopEdit(c)};dhtmlXTreeObject.prototype.stopEdit=function(a){if(this._editCell){this._stopEdit(this._editCell.id+"_non",a)}};dhtmlXTreeObject.prototype.editItem=function(a){this._editItem(a,this)};dhtmlXTreeObject.prototype._editItem=function(f,a){if(this._eItEd){this._stopEdit();var d=this._globalIdStorageFind(f);if(!d){return}var e=this.callEvent("onEdit",[0,f,this,d.span.innerHTML]);if(e===true){e=(typeof d.span.innerText!="undefined"?d.span.innerText:d.span.textContent)}else{if(e===false){return}}this.dADTempOffEd=this.dADTempOff;this.dADTempOff=false;this._editCell=d;d._oldValue=e;d.span.innerHTML="<input type='text' class='intreeeditRow' />";d.span.style.paddingRight=d.span.style.paddingLeft="0px";d.span.onclick=d.span.ondblclick=function(g){(g||event).cancelBubble=true};d.span.childNodes[0].value=e;d.span.childNodes[0].onselectstart=function(g){(g||event).cancelBubble=true;return true};d.span.childNodes[0].onmousedown=function(g){(g||event).cancelBubble=true;return true};d.span.childNodes[0].focus();d.span.childNodes[0].focus();d.span.onclick=function(g){(g||event).cancelBubble=true;return false};d.span.className="";d.span.parentNode.className="";var c=this;d.span.childNodes[0].onkeydown=function(g){if(!g){g=window.event}if(g.keyCode==13){g.cancelBubble=true;c._stopEdit(window.undefined)}else{if(g.keyCode==27){c._stopEdit(window.undefined,true)}}(g||event).cancelBubble=true};this.callEvent("onEdit",[1,f,this])}};function jsonPointer(c,a){this.d=c;this.dp=a}jsonPointer.prototype={text:function(){var a=function(f){var e=[];for(var d=0;d<f.length;d++){e.push("{"+c(f[d])+"}")}return e.join(",")};var c=function(f){var e=[];for(var d in f){if(typeof(f[d])=="object"){if(d.length){e.push('"'+d+'":['+a(f[d])+"]")}else{e.push('"'+d+'":{'+c(f[d])+"}")}}else{e.push('"'+d+'":"'+f[d]+'"')}}return e.join(",")};return"{"+c(this.d)+"}"},get:function(a){return this.d[a]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(e,j,h){var d=this.d[e];var k=new jsonPointer();if(d){for(var g=0;g<d.length;g++){k.d=d[g];j.apply(h,[k,g])}}},get_all:function(){return this.d},sub:function(a){return new jsonPointer(this.d[a],this.d)},sub_exists:function(a){return !!this.d[a]},each_x:function(e,k,j,h,g){var d=this.d[e];var l=new jsonPointer(0,this.d);if(d){for(g=g||0;g<d.length;g++){if(d[g][k]){l.d=d[g];if(j.apply(h,[l,g])==-1){return}}}}},up:function(a){return new jsonPointer(this.dp,this.d)},set:function(a,c){this.d[a]=c},clone:function(a){return new jsonPointer(this.d,this.dp)},through:function(d,j,m,g,n){var k=this.d[d];if(k.length){for(var e=0;e<k.length;e++){if(k[e][j]!=null&&k[e][j]!=""&&(!m||k[e][j]==m)){var h=new jsonPointer(k[e],this.d);g.apply(n,[h,e])}var l=this.d;this.d=k[e];if(this.sub_exists(d)){this.through(d,j,m,g,n)}this.d=l}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,c){if(window.console&&window.console.info){window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArrayFile(a,c)};dhtmlXTreeObject.prototype._loadJSArrayFile=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){eval("var z="+xml.responseText);this._loadJSArray(z);if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.loadCSV=function(a,c){if(window.console&&window.console.info){window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSV(a,c)};dhtmlXTreeObject.prototype._loadCSV=function(a,d){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=function(e,f){this._loadCSVString(e.responseText);if(f){f.call(this,e)}};dhx4.ajax.get(a,function(e){c.XMLLoader(e.xmlDoc,d)})};dhtmlXTreeObject.prototype.loadJSArray=function(a,c){if(window.console&&window.console.info){window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSArray(a,c)};dhtmlXTreeObject.prototype._loadJSArray=function(a,e){var h=[];for(var c=0;c<a.length;c++){if(!h[a[c][1]]){h[a[c][1]]=[]}h[a[c][1]].push({id:a[c][0],text:a[c][2]})}var g={id:this.rootId};var d=function(m,l){if(h[m.id]){m.item=h[m.id];for(var k=0;k<m.item.length;k++){l(m.item[k],l)}}};d(g,d);this._loadJSONObject(g,e)};dhtmlXTreeObject.prototype.loadCSVString=function(a,c){if(window.console&&window.console.info){window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadCSVString(a,c)};dhtmlXTreeObject.prototype._loadCSVString=function(a,h){var k=[];var c=a.split("\n");for(var e=0;e<c.length;e++){var d=c[e].split(",");if(!k[d[1]]){k[d[1]]=[]}k[d[1]].push({id:d[0],text:d[2]})}var j={id:this.rootId};var g=function(n,m){if(k[n.id]){n.item=k[n.id];for(var l=0;l<n.item.length;l++){m(n.item[l],m)}}};g(j,g);this._loadJSONObject(j,h)};dhtmlXTreeObject.prototype.loadJSONObject=function(a,c){if(window.console&&window.console.info){window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSONObject(a,c)};dhtmlXTreeObject.prototype._loadJSONObject=function(a,c){if(!this.parsCount){this.callEvent("onXLS",[this,null])}this.xmlstate=1;var d=new jsonPointer(a);this._parse(d);this._p=d;if(c){c()}};dhtmlXTreeObject.prototype.loadJSON=function(a,c){if(window.console&&window.console.info){window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}return this._loadJSON(a,c)};dhtmlXTreeObject.prototype._loadJSON=function(file,callback){if(!this.parsCount){this.callEvent("onXLS",[this,this._ld_id])}this._ld_id=null;this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){try{eval("var t="+xml.responseText)}catch(e){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",(xml),this]);return}var p=new jsonPointer(t);this._parse(p);this._p=p;if(callback){callback.call(this,xml)}};dhx4.ajax.get(file,function(obj){that.XMLLoader(obj.xmlDoc,callback)})};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){var a=['{"id":"'+this.rootId+'", "item":['];var d=[];for(var c=0;c<this.htmlNode.childsCount;c++){d.push(this._serializeItemJSON(this.htmlNode.childNodes[c]))}a.push(d.join(","));a.push("]}");return a.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(h){var a=[];if(h.unParsed){return(h.unParsed.text())}if(this._selected.length){var d=this._selected[0].id}else{d=""}var g=h.span.innerHTML;g=g.replace(/\"/g,'\\"',g);if(!this._xfullXML){a.push('{ "id":"'+h.id+'", '+(this._getOpenState(h)==1?' "open":"1", ':"")+(d==h.id?' "select":"1",':"")+' "text":"'+g+'"'+(((this.XMLsource)&&(h.XMLload==0))?', "child":"1" ':""))}else{a.push('{ "id":"'+h.id+'", '+(this._getOpenState(h)==1?' "open":"1", ':"")+(d==h.id?' "select":"1",':"")+' "text":"'+g+'", "im0":"'+h.images[0]+'", "im1":"'+h.images[1]+'", "im2":"'+h.images[2]+'" '+(h.acolor?(', "aCol":"'+h.acolor+'" '):"")+(h.scolor?(', "sCol":"'+h.scolor+'" '):"")+(h.checkstate==1?', "checked":"1" ':(h.checkstate==2?', "checked":"-1"':""))+(h.closeable?', "closeable":"1" ':"")+(((this.XMLsource)&&(h.XMLload==0))?', "child":"1" ':""))}if((this._xuserData)&&(h._userdatalist)){a.push(', "userdata":[');var f=h._userdatalist.split(",");var e=[];for(var c=0;c<f.length;c++){e.push('{ "name":"'+f[c]+'" , "content":"'+h.userData["t_"+f[c]]+'" }')}a.push(e.join(","));a.push("]")}if(h.childsCount){a.push(', "item":[');var e=[];for(var c=0;c<h.childsCount;c++){e.push(this._serializeItemJSON(h.childNodes[c]))}a.push(e.join(","));a.push("]\n")}a.push("}\n");return a.join("")};function dhtmlXTreeFromHTML(obj){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var n=obj;var id=n.id;var cont="";for(var j=0;j<obj.childNodes.length;j++){if(obj.childNodes[j].nodeType=="1"){if(obj.childNodes[j].tagName=="XMP"){var cHead=obj.childNodes[j];for(var m=0;m<cHead.childNodes.length;m++){cont+=cHead.childNodes[m].data}}else{if(obj.childNodes[j].tagName.toLowerCase()=="ul"){cont=dhx_li2trees(obj.childNodes[j],new Array(),0)}}break}}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0);var z_all=new Array();for(b in t){z_all[b.toLowerCase()]=b}var atr=obj.attributes;for(var a=0;a<atr.length;a++){if((atr[a].name.indexOf("set")==0)||(atr[a].name.indexOf("enable")==0)){var an=atr[a].name;if(!t[an]){an=z_all[atr[a].name]}t[an].apply(t,atr[a].value.split(","))}}if(typeof(cont)=="object"){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);if(cont[i][2]){t._setCheck(n,cont[i][2])}}t.XMLloadingWarning=0;t.lastLoadedXMLId=0;t._redrawFrom(t)}else{t.parse("<tree id='0'>"+cont+"</tree>")}window[id]=t;var oninit=obj.getAttribute("oninit");if(oninit){eval(oninit)}return t}function dhx_init_trees(){var c=document.getElementsByTagName("div");for(var a=0;a<c.length;a++){if(c[a].className=="dhtmlxTree"){dhtmlXTreeFromHTML(c[a])}}}function dhx_li2trees(n,g,d){for(var h=0;h<n.childNodes.length;h++){var m=n.childNodes[h];if((m.nodeType==1)&&(m.tagName.toLowerCase()=="li")){var l="";var k=null;var a=m.getAttribute("checked");for(var f=0;f<m.childNodes.length;f++){var e=m.childNodes[f];if(e.nodeType==3){l+=e.data}else{if(e.tagName.toLowerCase()!="ul"){l+=dhx_outer_html(e)}else{k=e}}}g[g.length]=[d,l,a,(m.id||(g.length+1))];if(k){g=dhx_li2trees(k,g,(m.id||g.length))}}}return g}function dhx_outer_html(c){if(c.outerHTML){return c.outerHTML}var a=document.createElement("DIV");a.appendChild(c.cloneNode(true));a=a.innerHTML;return a}if(window.addEventListener){window.addEventListener("load",dhx_init_trees,false)}else{if(window.attachEvent){window.attachEvent("onload",dhx_init_trees)}}function dhtmlXForm(f,e,g){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var d=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(a=="dhx_terrace"?"13px":"12px");this._updateBlocks();this.forEachItem(function(j){var h=d.getItemType(j);if(typeof(d.items[h])!="undefined"&&typeof(d.items[h].setSkin)=="function"){d.doWithItem(j,"setSkin",a)}})};this.skin=(g||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(f)=="object"?f:document.getElementById(f));if(!f._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="dhx_terrace"?"13px":"12px");this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(h){h=(h||event);if(h.keyCode==13){var a=(h.target||h.srcElement);if(typeof(a.tagName)!="undefined"&&String(a.tagName).toLowerCase()=="textarea"&&!h.ctrlKey){return}d.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(n,o){if(this.b_index==null){this.b_index=0}else{this.b_index++}var j=null;var h=null;if(o!=null){if(o<0){o=0}var l=0;for(var a=0;a<this.cont.childNodes.length;a++){for(var m=0;m<this.cont.childNodes[a].childNodes.length;m++){if(h==null&&this.cont.childNodes[a].childNodes[m]._isNestedForm!=true){if(l==o){j=this.cont.childNodes[a].nextSibling;h=this.cont.childNodes[a].childNodes[m]}l++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(n)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+n+"px!important;"}if(j!=null){this.cont.insertBefore(this.base[this.b_index],j);j=null}else{this.cont.appendChild(this.base[this.b_index])}if(h!=null){while(h!=null){var k=h;h=h.nextSibling;this.base[this.b_index].appendChild(k);k=null}}};this.setSizes=function(){};this._mergeSettings=function(m){var j=-1;var k={type:"settings"};for(var h in this.idef){k[h]=this.idef[h]}for(var l=0;l<m.length;l++){if(typeof(m[l])!="undefined"&&m[l].type=="settings"){for(var h in m[l]){k[h]=m[l][h]}j=l}}m[j>=0?j:m.length]=k;return m};this._genStr=function(a){var h="dhxId_";var k="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var j=0;j<a;j++){h+=k.charAt(Math.floor(Math.random()*k.length))}return h};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":f._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(A,m,s,o,x,B,v){if(this.items[A]._index){this.getForm()._indexId.push(m);this.getForm()._idIndex[m]={ind:this.getForm()._indexId.length-1}}if(!A){A=this._type}if(A=="list"&&x!=null&&this.itemPull[this.idPrefix+x]!=null&&typeof(this.itemPull[this.idPrefix+x]._addSubListNode)=="function"){var y=this.itemPull[this.idPrefix+x]._addSubListNode()}else{if(A=="newcolumn"){var y={}}else{var n=this.base[this.b_index];var h=null;if(typeof(B)!="undefined"&&!isNaN(B)&&A!="list"){B=Math.max(parseInt(B),0)+1;for(var D=0;D<this.cont.childNodes.length;D++){for(var j=0;j<this.cont.childNodes[D].childNodes.length;j++){if(h==null&&this.cont.childNodes[D].childNodes[j]._isNestedForm!=true){B--;if(B==0){h=this.cont.childNodes[D].childNodes[j];n=this.cont.childNodes[D]}}}}}else{if(A=="list"){for(var C in this.itemPull){if(C==this.idPrefix+m){h=this.itemPull[C].nextSibling;if(this.itemPull[C]._listBase!=null&&this.itemPull[C]._listBase.length>0){h=this.itemPull[C]._listBase[this.itemPull[C]._listBase.length-1]}}}}}var y=document.createElement("DIV");if(v==true&&h!=null){h=h.nextSibling}if(h!=null){n.insertBefore(y,h)}else{n.appendChild(y)}}}y._idd=m;y._rId=this._rId;if(typeof(y.style)!="undefined"){if(typeof(s.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){s.offsetLeft=this.idef.offsetLeft}if(typeof(s.offsetTop)=="undefined"&&this.idef.offsetTop>0){s.offsetTop=this.idef.offsetTop}var r="";if(typeof(s.offsetLeft)!="undefined"){r+=" padding-left:"+s.offsetLeft+"px!important;"}if(typeof(s.offsetTop)!="undefined"){r+=" padding-top:"+s.offsetTop+"px!important;"}y.style.cssText+=r}if(A=="block"){if(isNaN(s.blockOffset)){s.blockOffset=this.idef.blockOffset}}if(A=="list"){if(typeof(y._ofsNested)=="undefined"){y._ofsNested=this.idef_const.offsetNested}if(o!=null){y._sId=o}var u=this.items[A].render(y,this.skin);if(!this.itemPull[this.idPrefix+m]._listObj){this.itemPull[this.idPrefix+m]._listObj=[]}if(!this.itemPull[this.idPrefix+m]._list){this.itemPull[this.idPrefix+m]._list=[]}if(!this.itemPull[this.idPrefix+m]._listBase){this.itemPull[this.idPrefix+m]._listBase=[]}(this.itemPull[this.idPrefix+m]._listObj).push(u[0]);(this.itemPull[this.idPrefix+m]._list).push(u[1]);(this.itemPull[this.idPrefix+m]._listBase).push(y);u[1].checkEvent=function(a){return d.checkEvent(a)};u[1].callEvent=function(a,k){return d.callEvent(a,k)};u[1].getForm=function(){return d.getForm()};u[1]._initObj(this._mergeSettings(s));if(y._inBlcok){y.className+=" in_block"}return u[1]}if(A=="newcolumn"){this._prepare(s.offset,B);return}if(A=="label"&&this._ic++==0){s._isTopmost=true}s.position=this.apos_css[(!s.position||!this.apos_css[s.position]?this.idef.position:s.position)];y.className=s.position+(typeof(s.className)=="string"?" "+s.className:"");if(!s.labelWidth){s.labelWidth=this.idef.labelWidth}if(!s.labelHeight){s.labelHeight=this.idef.labelHeight}if(typeof(s.wrap)!="undefined"){s.wrap=window.dhx4.s2b(s.wrap)}s.labelAlign=(this.align_css[s.labelAlign]?this.align_css[s.labelAlign]:this.align_css[this.idef.labelAlign]);s.inputWidth=(s.width?s.width:(s.inputWidth?s.inputWidth:this.idef.inputWidth));if(!s.inputHeight){s.inputHeight=this.idef.inputHeight}if(typeof(s.note)!="undefined"){if(s.note.length!=null&&s.note[0]!=null){s.note=s.note[0]}if(typeof(s.note.width)=="undefined"){s.note.width=this.idef.noteWidth}if(s.note.width=="auto"){s.note.width=s.inputWidth}}y.checkEvent=function(a){return d.checkEvent(a)};y.callEvent=function(a,k){return d.callEvent(a,k)};y.getForm=function(){return d.getForm()};y._autoCheck=function(a){d._autoCheck(a)};if(typeof(s.readonly)=="string"){s.readonly=window.dhx4.s2b(s.readonly)}if(typeof(s.autoStart)=="string"){s.autoStart=window.dhx4.s2b(s.autoStart)}if(typeof(s.autoRemove)=="string"){s.autoRemove=window.dhx4.s2b(s.autoRemove)}if(typeof(s.titleScreen)=="string"){s.titleScreen=window.dhx4.s2b(s.titleScreen)}if(typeof(s.info)=="string"){s.info=window.dhx4.s2b(s.info)}if(typeof(s.hidden)=="string"){s.hidden=window.dhx4.s2b(s.hidden)}if(typeof(s.checked)=="string"){s.checked=window.dhx4.s2b(s.checked)}if(typeof(s.userdata)!="undefined"){for(var C in s.userdata){this.getForm().setUserData(m,C,s.userdata[C])}}if(s.validate){if(typeof(s.validate!="undefined")&&(typeof(s.validate)=="function"||typeof(window[s.validate])=="function")){y._validate=[s.validate]}else{y._validate=String(s.validate).split(this.separator)}}if(typeof(s.required)!="undefined"){if(typeof(s.required)=="string"){s.required=window.dhx4.s2b(s.required)}y._required=(s.required==true)}if(y._required){if(!y._validate){y._validate=[]}var l=false;for(j=0;j<y._validate.length;j++){l=(l||(y._validate[j]=="NotEmpty"))}if(!l){y._validate.push("NotEmpty")}}y._ll=(s.position==this.apos_css["label-left"]||s.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+m]=this.items[A].render(y,s);this.itemPull[this.idPrefix+m]=y};this._initObj=function(l,j){if(typeof(l.data)!="undefined"){var m=null;if(typeof(j)!="undefined"){m=j.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(m!=null&&m[0]!=null){m=m[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[m,window.dhx4._copyObj(l.data)])===true){this.formId=m;this._last_load_data=l;this.setFormData(l.data);this.resetDataProcessor("updated")}return}this._prepare();for(var k=0;k<l.length;k++){if(typeof(l[k])!="undefined"&&l[k].type=="settings"){for(var h in l[k]){this.idef[h]=l[k][h]}}}for(var k=0;k<l.length;k++){this._prepareItem(l[k])}this._autoCheck()};this._prepareItem=function(l,o,k){var j=(l!=null&&l.type!=null?l.type:"");if(this.items[j]){if(!l.name){l.name=this._genStr(12)}var n=l.name;if(this.objPull[this.idPrefix+n]!=null||j=="radio"){n=this._genStr(12)}var m=l;m.label=m.label||"";m.value=m.value;m.checked=window.dhx4.s2b(m.checked);m.disabled=window.dhx4.s2b(m.disabled);m.name=m.name||this._genStr(12);m.options=m.options||[];m.rows=m.rows||"none";m.uid=this._genStr(12);this._addItem(j,n,m,null,null,o,k);o=null;if(this._parentEnabled===false){this._disableItem(n)}for(var h=0;h<m.options.length;h++){if(m.options[h].list!=null){if(!m.options[h].value){m.options[h].value=this._genStr()}var a=this._addItem("list",n,m.options[h].list,m.options[h].value,null);a._subSelect=true;a._subSelectId=m.options[h].value}}if(l.list!=null){if(!l.listParent){l.listParent=m.name}var a=this._addItem("list",n,l.list,null,l.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(x,h){if(typeof(h)=="undefined"){h=true}if(h){var A=x.getElementsByTagName("items");A=(A!=null&&A[0]!=null?A[0]:null);var j=x.getElementsByTagName("data");j=(j!=null&&j[0]!=null?j[0]:null)}else{A=x}var u=(h?[]:{});if(A!=null){for(var m=0;m<A.childNodes.length;m++){if(typeof(A.childNodes[m].tagName)!="undefined"){var n=A.childNodes[m].tagName;if(this._xmlSubItems[n]!=null){var o=this._xmlSubItems[n];if(typeof(u[o])=="undefined"){u[o]=[]}var v=A.childNodes[m];var s={};for(var E=0;E<v.attributes.length;E++){var B=v.attributes[E].name;var y=v.attributes[E].value;s[B]=y}if(o=="note"){s.text=v.firstChild.nodeValue}if(o=="_userdata"){s.value=(v.firstChild!=null&&v.firstChild.nodeValue!=null?v.firstChild.nodeValue:"")}var r=this._xmlToObject(v,false);for(var C in r){if(C=="_userdata"){if(!s.userdata){s.userdata={}}for(var E=0;E<r[C].length;E++){s.userdata[r[C][E].name]=r[C][E].value}}else{s[C]=r[C]}}v=null;if(h){u.push(s)}else{u[o].push(s)}}}}}if(j!=null){u={data:{}};for(var m=0;m<j.childNodes.length;m++){if(typeof(j.childNodes[m].tagName)!="undefined"){var l=j.childNodes[m].tagName;var D=(j.childNodes[m].firstChild!=null?j.childNodes[m].firstChild.nodeValue:"");u.data[l]=D}}}return u};this._autoCheck=function(m){if(this._locked===true){m=false}else{if(typeof(m)=="undefined"){m=true}}for(var k in this.itemPull){var n=(m&&(this.itemPull[k]._udis!==true));this[n?"_enableItem":"_disableItem"](this.itemPull[k]._idd);if(this.getForm()._idIndex[this.itemPull[k]._idd]!=null){this.getForm()._idIndex[this.itemPull[k]._idd].enabled=n}var j=(n&&(typeof(this.itemPull[k]._checked)=="boolean"?this.itemPull[k]._checked:true));if(this.itemPull[k]._list){for(var r=0;r<this.itemPull[k]._list.length;r++){var o=true;if(this.itemPull[k]._list[r]._subSelect==true){o=false;var l=this.getItemValue(this.itemPull[k]._idd);if(!(typeof(l)=="object"&&typeof(l.length)=="number")){l=[l]}for(var h=0;h<l.length;h++){o=(l[h]==this.itemPull[k]._list[r]._subSelectId)||o}this.itemPull[k]._listObj[r][o?"show":"hide"](this.itemPull[k]._listBase[r])}this.itemPull[k]._list[r]._autoCheck(j&&o)}}}};this.doWithItem=function(l,h,u,s,r,o){if(typeof(l)=="object"){var w=l[0];var v=l[1];var x=null;var n=null;for(var m in this.itemPull){if((this.itemPull[m]._value==v||v===null)&&this.itemPull[m]._group==w){return this.objPull[m][h](this.itemPull[m],u,s,r,o)}if(this.itemPull[m]._list!=null&&!n){for(var j=0;j<this.itemPull[m]._list.length;j++){n=this.itemPull[m]._list[j].doWithItem(l,h,u,s,r)}}}if(n!=null){return n}else{if(h=="getType"){return this.doWithItem(l[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+l]){var n=null;for(var m in this.itemPull){if(this.itemPull[m]._list&&!n){for(var j=0;j<this.itemPull[m]._list.length;j++){if(n==null){n=this.itemPull[m]._list[j].doWithItem(l,h,u,s,r,o)}}}}return n}else{return this.objPull[this.idPrefix+l][h](this.itemPull[this.idPrefix+l],u,s,r,o)}}};this._removeItem=function(h,a){if(a!=null){h=this.doWithItem([h,a],"destruct")}else{this.doWithItem(h,"destruct")}this._clearItemData(h)};this._clearItemData=function(l){if(this.itemPull[this.idPrefix+l]){l=this.idPrefix+l;try{this.objPull[l]=null;this.itemPull[l]=null;delete this.objPull[l];delete this.itemPull[l]}catch(j){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var h=0;h<this.itemPull[a]._list.length;h++){this.itemPull[a]._list[h]._clearItemData(l)}}}}};this.isItem=function(h,a){if(a!=null){h=[h,a]}return this.doWithItem(h,"isExist")};this.getItemType=function(h,a){h=[h,(a||null)];return this.doWithItem(h,"getType")};this.forEachItem=function(j){for(var h in this.objPull){if(this.objPull[h].t=="radio"){j(this.itemPull[h]._group,this.itemPull[h]._value)}else{j(String(h).replace(this.idPrefix,""))}if(this.itemPull[h]._list){for(var k=0;k<this.itemPull[h]._list.length;k++){this.itemPull[h]._list[k].forEachItem(j)}}}};this.setItemLabel=function(j,a,h){if(h!=null){j=[j,a]}else{h=a}this.doWithItem(j,"setText",h)};this.getItemLabel=function(h,a){if(a!=null){h=[h,a]}return this.doWithItem(h,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"check");this._autoCheck()};this.uncheckItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"unCheck");this._autoCheck()};this.isItemChecked=function(h,a){if(a!=null){h=[h,a]}return this.doWithItem(h,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(m,l){for(var h in this.itemPull){if(this.itemPull[h]._group==m&&(l==null||this.itemPull[h]._value==l)){return this.itemPull[h]._idd}if(this.itemPull[h]._list!=null){for(var k=0;k<this.itemPull[h]._list.length;k++){var j=this.itemPull[h]._list[k]._getRGroup(m,l);if(j!=null){return j}}}}return null};this.setItemValue=function(h,a){this.resetValidateCss(h,a);if(this.getItemType(h)=="radio"){if(this._getRGroup(h,a)!=null){this.checkItem(h,a)}else{this.uncheckItem(h,this.getCheckedValue(h))}return null}return this.doWithItem(h,"setValue",a)};this.getItemValue=function(h,a){if(this.getItemType(h)=="radio"){return this.getCheckedValue(h)}return this.doWithItem(h,"getValue",a)};this.updateValues=function(){this._updateValues()};this.showItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"show")};this.hideItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"hide")};this.isItemHidden=function(h,a){if(a!=null){h=[h,a]}return this.doWithItem(h,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(h,a){this.doWithItem(h,"setWidth",a)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(h,a){this.doWithItem(h,"setHeight",a)};this.setItemFocus=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"setFocus")};this._updateValues=function(){for(var h in this.itemPull){if(this.objPull[h]&&typeof(this.objPull[h].updateValue)=="function"){this.objPull[h].updateValue(this.itemPull[h])}if(this.itemPull[h]._list){for(var j=0;j<this.itemPull[h]._list.length;j++){this.itemPull[h]._list[j]._updateValues()}}}};this._getItemByName=function(l){for(var h in this.itemPull){if(this.itemPull[h]._idd==l){return this.itemPull[h]}if(this.itemPull[h]._list!=null){for(var k=0;k<this.itemPull[h]._list.length;k++){var j=this.itemPull[h]._list[k]._getItemByName(l);if(j!=null){return j}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,k,j){var h=this[this.getItemType(a)=="radio"?"_getRGroup":"_getItemByName"](a);if(!h){return}if(h._vcss!=null){this._resetValidateCss(h)}h._vcss=(typeof(j)=="string"?j:"validate_"+(k===true?"ok":"error"));h.className+=" "+h._vcss};this.resetValidateCss=function(j){for(var h in this.itemPull){if(this.itemPull[h]._vcss!=null){this._resetValidateCss(this.itemPull[h])}if(this.itemPull[h]._list!=null){for(var k=0;k<this.itemPull[h]._list.length;k++){this.itemPull[h]._list[k].resetValidateCss()}}}};this.validate=function(h){if(this.callEvent("onBeforeValidate",[])==false){return}var a=true;this.forEachItem(function(l,m){if(typeof(m)!="undefined"){l=[l,m]}var j=d.doWithItem(l,"_validate");if(typeof(j)!="boolean"){j=true}a=j&&a});this.callEvent("onAfterValidate",[a]);return a};this.validateItem=function(a,h){if(typeof(h)!="undefined"){a=[a,h]}return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(h,a){this.doWithItem(h,"setReadonly",a)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(h){for(var l=0;l<this._indexId.length;l++){var a=true;if(h==true){var j=this.getItemType(this._indexId[l]);if(!dhtmlXForm.prototype.items[j].setFocus){a=false}}if(a&&this._idIndex[this._indexId[l]].enabled){return this._indexId[l]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"userEnable");this._autoCheck()};this.disableItem=function(h,a){if(a!=null){h=[h,a]}this.doWithItem(h,"userDisable");this._autoCheck()};this.isItemEnabled=function(h,a){if(a!=null){h=[h,a]}return this.doWithItem(h,"isUserEnabled")};this.clear=function(){var h={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var j in this.itemPull){var k=this.itemPull[j]._idd;if(this.itemPull[j]._type=="ch"){this.uncheckItem(k)}if(this.itemPull[j]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(k,"")}if(this.itemPull[j]._type=="combo"){this.itemPull[j]._apiChange=true;var o=this.getCombo(k);o.selectOption(0);o=null;this.itemPull[j]._apiChange=false}if(this.itemPull[j]._type=="se"){var m=this.getOptions(k);if(m.length>0){m[0].selected=true}}if(this.itemPull[j]._type=="ra"){var l=this.itemPull[j]._group;if(!h[l]){this.checkItem(l,this.doWithItem(k,"_getFirstValue"));h[l]=true}}if(this.itemPull[j]._list){for(var n=0;n<this.itemPull[j]._list.length;n++){this.itemPull[j]._list[n].clear()}}if(this["setFormData_"+this.itemPull[j]._type]){this["setFormData_"+this.itemPull[j]._type](k,"")}}h=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var h in this.objPull){this._removeItem(String(h).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var j=0;j<this.base.length;j++){while(this.base[j].childNodes.length>0){this.base[j].removeChild(this.base[j].childNodes[0])}if(this.base[j].parentNode){this.base[j].parentNode.removeChild(this.base[j])}this.base[j]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var h in this){this[h]=null}d=null};for(var c in this.items){this.items[c].t=c;if(typeof(this.items[c]._index)=="undefined"){this.items[c]._index=true}if(!this.items[c].show){this.items[c].show=function(a){a.style.display="";if(a._listObj){for(var h=0;h<a._listObj.length;h++){a._listObj[h].show(a._listBase[h])}}}}if(!this.items[c].hide){this.items[c].hide=function(a){a.style.display="none";if(a._listObj){for(var h=0;h<a._listObj.length;h++){a._listObj[h].hide(a._listBase[h])}}}}if(!this.items[c].isHidden){this.items[c].isHidden=function(a){return(a.style.display=="none")}}if(!this.items[c].userEnable){this.items[c].userEnable=function(a){a._udis=false}}if(!this.items[c].userDisable){this.items[c].userDisable=function(a){a._udis=true}}if(!this.items[c].isUserEnabled){this.items[c].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[c].getType){this.items[c].getType=function(){return this.t}}if(!this.items[c].isExist){this.items[c].isExist=function(){return true}}if(!this.items[c]._validate){this.items[c]._validate=function(j){if(!j._validate||!j._enabled){return true}if(j._type=="ch"){var m=(this.isChecked(j)?this.getValue(j):0)}else{var m=this.getValue(j)}var h=true;for(var l=0;l<j._validate.length;l++){var a="is"+j._validate[l];if((m==null||m.length==0)&&a!="isNotEmpty"&&j._type!="container"){}else{var k=dhtmlxValidation[a];if(j._type=="container"&&typeof(k)=="function"){k=function(){return true}}if(typeof(k)!="function"&&typeof(j._validate[l])=="function"){k=j._validate[l]}if(typeof(k)!="function"&&typeof(window[j._validate[l]])=="function"){k=window[j._validate[l]]}h=((typeof(k)=="function"?k(m,j._idd):new RegExp(j._validate[l]).test(m))&&h);k=null}}if(!(j.callEvent("onValidate"+(h?"Success":"Error"),[j._idd,m,h])===false)){j.getForm().setValidateCss(j._idd,h)}return h}}}this._locked=false;this._doLock=function(h){var a=(h===true?true:false);if(this._locked==a){return}else{this._locked=a}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(k,h,a,j){return this.doWithItem(k,"setNumberFormat",h,a,j)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,h){this.callEvent("onButtonClick",[a,h])});this._updateBlocks=function(){this.forEachItem(function(a){if(d.getItemType(a)=="block"||d.getItemType(a)=="combo"){d.doWithItem(a,"_setCss",d.skin,d.cont.style.fontSize)}})};this._isObj=function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")};this._copyObj=function(k){if(this._isObj(k)){var j={};for(var h in k){if(typeof(k[h])=="object"&&k[h]!=null){j[h]=this._copyObj(k[h])}else{j[h]=k[h]}}}else{var j=[];for(var h=0;h<k.length;h++){if(typeof(k[h])=="object"&&k[h]!=null){j[h]=this._copyObj(k[h])}else{j[h]=k[h]}}}return j};if(e!=null&&typeof(e)=="object"){this._initObj(this._copyObj(e))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(a,c){a._type="ch";a._enabled=true;a._checked=false;a._value=(typeof(c.value)=="undefined"?null:String(c.value));a._ro=(c.readonly==true);if(c._autoInputWidth!==false){c.inputWidth=14}this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","TEXT",true,true,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var d=document.createElement("DIV");d.className="dhxform_img chbx0";a.appendChild(d);if(!isNaN(c.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(c.inputTop)+"px"}a.childNodes[a._ll?1:0].appendChild(d);a.childNodes[a._ll?1:0].firstChild.value=String(c.value);a._updateImgNode=function(f,g){var e=f.childNodes[f._ll?1:0].lastChild;e.className=(g?"dhxform_actv_c":"dhxform_img")+" "+(f._checked?"chbx1":"chbx0");f=e=null};a._doOnFocus=function(e){e.getForm().callEvent("onFocus",[e._idd])};a._doOnBlur=function(e){e.getForm().callEvent("onBlur",[e._idd])};a._doOnKeyUpDown=function(f,e){this.callEvent(f,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])};if(c.checked==true){this.check(a)}if(c.hidden==true){this.hide(a)}if(c.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(c,d){var a=document.createElement("DIV");a.className="dhxform_label "+d.labelAlign;if(d.wrap==true){a.style.whiteSpace="normal"}if(c._ll){c.insertBefore(a,c.firstChild)}else{c.appendChild(a)}if(typeof(d.tooltip)!="undefined"){a.title=d.tooltip}a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(d.labelWidth)){a.firstChild.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.firstChild.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}},doAddInput:function(o,e,c,k,l,f,g){var a=document.createElement("DIV");a.className="dhxform_control";if(o._ll){o.appendChild(a)}else{o.insertBefore(a,o.firstChild)}var n=document.createElement(c);n.className=g;n.name=o._idd;n._idd=o._idd;n.id=e.uid;if(typeof(k)=="string"){n.type=k}if(c=="INPUT"||c=="TEXTAREA"){n.onkeyup=function(q){q=q||event;o.callEvent("onKeyUp",[this,q,this._idd])};n.onkeydown=function(q){q=q||event;o.callEvent("onKeyDown",[this,q,this._idd])}}a.appendChild(n);if(e.readonly){this.setReadonly(o,true)}if(e.hidden==true){this.hide(o)}if(e.disabled==true){this.userDisable(o)}if(l){if(!isNaN(e.inputLeft)){a.style.left=parseInt(e.inputLeft)+"px"}if(!isNaN(e.inputTop)){a.style.top=parseInt(e.inputTop)+"px"}}var m="";var h=false;if(f){if(!isNaN(e.inputWidth)){m+="width:"+parseInt(e.inputWidth)+"px;";h=true}if(!isNaN(e.inputHeight)){m+="height:"+parseInt(e.inputHeight)+"px;"}}if(typeof(e.style)=="string"){m+=e.style}n.style.cssText=m;if(e.maxLength){n.setAttribute("maxLength",e.maxLength)}if(e.connector){n.setAttribute("connector",e.connector)}var d=(dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==true:false);if(h&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||d)){if(dhtmlXForm.prototype.items[this.t]._dim==null){dhtmlXForm.prototype.items[this.t]._dim=o.getForm()._checkDim(a,n)}n.style.width=parseInt(n.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(e.note)=="object"){var j=document.createElement("DIV");j.className="dhxform_note";j.style.width=(isNaN(e.note.width)?n.offsetWidth:parseInt(e.note.width))+"px";j._w=e.note.width;j.innerHTML=e.note.text;a.appendChild(j);j=null}},doUnloadNestedLists:function(a){if(!a._list){return}for(var c=0;c<a._list.length;c++){a._list[c].unload();a._list[c]=null;a._listObj[c]=null;a._listBase[c].parentNode.removeChild(a._listBase[c]);a._listBase[c]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}var d=(f.target||f.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(d.className)!="undefined"&&d.className=="dhxform_note")){f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}a.doClick(this.parentNode)};c.childNodes[c._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}if(!this.parentNode.parentNode._enabled){f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}var d=f.target||f.srcElement;if(typeof(d.className)!="undefined"&&d.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,f]);f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==true){return}}this.setChecked(a,!a._checked);a._autoCheck();a.callEvent("onChange",[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&&a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value=""}},setChecked:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,true)},unCheck:function(a){this.setChecked(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;if(a._updateImgNode!=null){a._updateImgNode(a,false)}a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,c){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,c){this.setChecked(a,(c===true||parseInt(c)==1||c=="true"||a._value===c))},getValue:function(a,c){if(c=="realvalue"){return a._value}return((typeof(a._value)=="undefined"||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,c){a._ro=(c===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(d,e,c){d._type="ra";d._enabled=true;d._checked=false;d._group=e.name;d._value=e.value;d._uid=c;d._ro=(e.readonly==true);d._rName=d._rId+d._group;this.r[d._idd]=d;e.inputWidth=14;this.doAddLabel(d,e);this.doAddInput(d,e,"INPUT","TEXT",true,true,"dhxform_textarea");d.childNodes[d._ll?1:0].className+=" dhxform_img_node";var f=document.createElement("DIV");f.className="dhxform_img rdbt0";d.appendChild(f);if(!isNaN(e.inputLeft)){d.childNodes[d._ll?1:0].style.left=parseInt(e.inputLeft)+"px"}if(!isNaN(e.inputTop)){d.childNodes[d._ll?1:0].style.top=parseInt(e.inputTop)+"px"}d.childNodes[d._ll?1:0].appendChild(f);d.childNodes[d._ll?1:0].firstChild.name="";d.childNodes[d._ll?1:0].firstChild.value="";d._updateImgNode=function(h,j){var g=h.childNodes[h._ll?1:0].lastChild;g.className=(j?"dhxform_actv_r":"dhxform_img")+" "+(h._checked?"rdbt1":"rdbt0");h=g=null};d._doOnFocus=function(g){g.getForm().callEvent("onFocus",[g._group,g._value])};d._doOnBlur=function(g){g.getForm().callEvent("onBlur",[g._group,g._value])};d._doOnKeyUpDown=function(h,g){this.callEvent(h,[this.childNodes[this._ll?0:1].childNodes[0],g,this._group,this._value])};if(this.input[d._rName]==null){var a=document.createElement("INPUT");a.type="HIDDEN";a.name=e.name;a.firstValue=d._value;d.appendChild(a);this.input[d._rName]=a}if(!this.firstValue[d._rName]){this.firstValue[d._rName]=e.value}if(e.checked==true){this.check(d)}if(e.hidden==true){this.hide(d)}if(e.disabled==true){this.userDisable(d)}this.doAttachEvents(d);return this},destruct:function(e,f){if(e.lastChild==this.input[e._rName]){var d=false;for(var c in this.r){if(!d&&this.r[c]._group==e._group&&this.r[c]._idd!=e._idd){this.r[c].appendChild(this.input[e._rName]);d=true}}if(!d){this.input[e._rName].parentNode.removeChild(this.input[e._rName]);this.input[e._rName]=null;this.firstValue[e._rName]=null}}var g=e._idd;e._doOnFocus=e._doOnBlur=e._updateImgNode=null;this.doUnloadNestedLists(e);this.doDestruct(e);return g},doClick:function(c){c.childNodes[c._ll?0:1].childNodes[0].focus();if(!(c._enabled&&!c._checked)){return}if(c._ro){return}var a=[c._group,c._value,true];if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",a)!==true){return}}this.setChecked(c,true);c.getForm()._autoCheck();c.callEvent("onChange",a)},doCheckValue:function(d){var e=null;for(var c in this.r){if(this.r[c]._checked&&this.r[c]._group==d._group&&this.r[c]._rId==d._rId){e=this.r[c]._value}}if(e!=null&&this.r[c]._enabled){this.input[d._rName].name=String(d._group);this.input[d._rName].value=e}else{this.input[d._rName].name="";this.input[d._rName].value=""}this.input[d._rName]._value=e},setChecked:function(f,g){g=(g===true);for(var c in this.r){if(this.r[c]._group==f._group&&this.r[c]._rId==f._rId){var e=false;if(this.r[c]._idd==f._idd){if(this.r[c]._checked!=g){this.r[c]._checked=g;e=true}}else{if(this.r[c]._checked){this.r[c]._checked=false;e=true}}if(e){var d=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];d.className=d.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[c]._checked?" rdbt1":" rdbt0");d=null}}}this.doCheckValue(f)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,c){}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.select={render:function(a,c){a._type="se";a._enabled=true;a._value=null;a._newValue=null;this.doAddLabel(a,c);this.doAddInput(a,c,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,c);if(c.connector!=null){this.doLoadOptsConnector(a,c.connector)}if(typeof(c.value)!="undefined"&&c.value!=null){this.setValue(a,c.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(c,d){var a=document.createElement("DIV");a.className="dhxform_label "+d.labelAlign;a.innerHTML="<label for='"+d.uid+"'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(c._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(d.wrap==true){a.style.whiteSpace="normal"}if(typeof(d.tooltip)!="undefined"){a.title=d.tooltip}c.appendChild(a);if(typeof(d.label)=="undefined"||d.label==null||d.label.length==0){a.style.display="none"}if(!isNaN(d.labelWidth)){a.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}if(d.info){a.onclick=function(g){g=g||event;var f=g.target||g.srcElement;if(typeof(f.className)!="undefined"&&f.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd,g]);g.cancelBubble=true;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false}}}},doAttachEvents:function(d){var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onclick=function(){c.doOnChange(this)};a.onkeydown=function(f){f=f||event;c.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,f,this.parentNode.parentNode._idd])};a.onchange=function(){c.doOnChange(this)};a.onkeyup=function(f){f=f||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,f,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(d)},doAttachChangeLS:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.onfocus=function(){var d=this.parentNode.parentNode;d.getForm()._ccActivate(d._idd,this,d.getForm().getItemValue(d._idd,true));d.getForm().callEvent("onFocus",[d._idd]);d=null};a.onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);d.getForm().callEvent("onBlur",[d._idd]);d=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(h,f,l){var j=h.childNodes[h._ll?1:0].childNodes[0];var a=f.options;var e=false;for(var c=0;c<a.length;c++){var g=a[c].text||a[c].label;if(!g||typeof(g)=="undefined"){g=""}var d=new Option(g,a[c].value);if(typeof(a[c].img_src)=="string"){d.setAttribute("img_src",a[c].img_src)}j.options.add(d);if(typeof(a[c].selected)!="undefined"&&window.dhx4.s2b(a[c].selected)==true){d.selected=true;h._value=a[c].value;e=true}if(typeof(a[c].checked)!="undefined"&&window.dhx4.s2b(a[c].checked)==true){d.setAttribute("checked","1")}if(typeof(a[c].img)!="undefined"){d.setAttribute("img",a[c].img)}if(typeof(a[c].img_dis)!="undefined"){d.setAttribute("img_dis",a[c].img_dis)}if(typeof(a[c].css)!="undefined"){d.setAttribute("css",a[c].css)}}if(!e&&j.selectedIndex>=0){h._value=j.options[j.selectedIndex].value}if(l===true){h.callEvent("onOptionsLoaded",[h._idd])}this._checkNoteWidth(h)},doLoadOptsConnector:function(d,a){var c=this;d._connector_working=true;window.dhx4.ajax.get(a,function(h){h=h.xmlDoc.responseXML;if(h==null){return}var e=h.getElementsByTagName("data");if(e==null||e[0]==null){return}e=e[0];var g=[];for(var j=0;j<e.childNodes.length;j++){if(typeof(e.childNodes[j].tagName)!="undefined"&&String(e.childNodes[j].tagName).toLowerCase()=="item"){var f=e.childNodes[j];g.push({label:f.getAttribute("label"),value:f.getAttribute("value"),selected:(f.getAttribute("selected")!=null)});f=null}}c.doLoadOpts(d,{options:g},true);d._connector_working=false;if(d._connector_value!=null){c.setValue(d,d._connector_value);d._connector_value=null}c=d=null})},doOnChange:function(d){var a=d.parentNode.parentNode;a._newValue=(d.selectedIndex>=0?d.options[d.selectedIndex].value:null);if(a._newValue!=a._value){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])!==true){for(var c=0;c<d.options.length;c++){if(d.options[c].value==a._value){d.options[c].selected=true}}return}}a._value=a._newValue;a.callEvent("onChange",[a._idd,a._value]);if(a._type=="se"&&a.getForm().live_validate){this._validate(a)}}a._autoCheck()},setText:function(a,c){if(!c){c=""}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=c+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?0:1].style.display=(c.length==0||c==null?"none":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(c,e){if(c._connector_working){c._connector_value=e;return}var a=this.getOptions(c);for(var d=0;d<a.length;d++){if(a[d].value==e){a[d].selected=true;c._value=a[d].value}}if(c._list!=null&&c._list.length>0){c.getForm()._autoCheck()}c.getForm()._ccReload(c._idd,c._value)},getValue:function(d){var a=-1;var c=this.getOptions(d);for(var e=0;e<c.length;e++){if(c[e].selected){a=c[e].value}}return a},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(c){var a;if(c.childNodes[c._ll?1:0].childNodes[1]!=null){a=c.childNodes[c._ll?1:0].childNodes[1];if(a.className!=null&&a.className.search(/dhxform_note/gi)>=0&&a._w=="auto"){a.style.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth+"px"}}a=null}};(function(){for(var c in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(e,g,h){var c=e.childNodes[e._ll?1:0].childNodes[0];c.multiple=true;if(!isNaN(g.size)){c.size=Number(g.size)}e._value=[];e._newValue=[];var d=g.options;for(var f=0;f<d.length;f++){var a=new Option(d[f].text||d[f].label,d[f].value);c.options.add(a);if(d[f].selected==true||d[f].selected=="true"){a.selected=true;e._value.push(d[f].value)}}if(h===true){e.callEvent("onOptionsLoaded",[e._idd])}this._checkNoteWidth(e)},doAttachEvents:function(d){var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onfocus=function(){c.doOnChange(this);var e=this.parentNode.parentNode;e.getForm().callEvent("onFocus",[e._idd]);e=null};a.onblur=function(){c.doOnChange(this);var e=this.parentNode.parentNode;e.getForm().callEvent("onBlur",[e._idd]);e=null};a.onclick=function(){c.doOnChange(this);var e=this.parentNode.parentNode;e._autoCheck();e=null}},doOnChange:function(e){var c=e.parentNode.parentNode;c._newValue=[];for(var d=0;d<e.options.length;d++){if(e.options[d].selected){c._newValue.push(e.options[d].value)}}if((c._value).sort().toString()!=(c._newValue).sort().toString()){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,c._newValue])!==true){var a={};for(var d=0;d<c._value.length;d++){a[c._value[d]]=true}for(var d=0;d<e.options.length;d++){e.options[d].selected=(a[e.options[d].value]==true)}a=null;return}}c._value=[];for(var d=0;d<c._newValue.length;d++){c._value.push(c._newValue[d])}c.callEvent("onChange",[c._idd,c._value])}c._autoCheck()},setValue:function(d,f){var a={};if(typeof(f)=="string"){f=f.split(",")}if(typeof(f)!="object"){f=[f]}for(var e=0;e<f.length;e++){a[f[e]]=true}var c=this.getOptions(d);for(var e=0;e<c.length;e++){c[e].selected=(a[c[e].value]==true)}d._autoCheck()},getValue:function(d){var a=[];var c=this.getOptions(d);for(var e=0;e<c.length;e++){if(c[e].selected){a.push(c[e].value)}}return a}};(function(){for(var c in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[c]){dhtmlXForm.prototype.items.multiselect[c]=dhtmlXForm.prototype.items.select[c]}}})();dhtmlXForm.prototype.items.input={render:function(g,h){var f=(!isNaN(h.rows));g._type="ta";g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,(f?"TEXTAREA":"INPUT"),(f?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(g);if(f){g.childNodes[g._ll?1:0].childNodes[0].rows=Number(h.rows)+(window.dhx4.isIE6?1:0)}if(typeof(h.numberFormat)!="undefined"){var e,d=null,j=null;if(typeof(h.numberFormat)!="string"){e=h.numberFormat[0];d=h.numberFormat[1]||null;j=h.numberFormat[2]||null}else{e=h.numberFormat;if(typeof(h.groupSep)=="string"){d=h.groupSep}if(typeof(h.decSep)=="string"){j=h.decSep}}this.setNumberFormat(g,e,d,j,false)}this.setValue(g,h.value);return this},doAttachEvents:function(c){var a=this;if(c._type=="ta"||c._type=="se"||c._type=="pw"){c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){var d=this.parentNode.parentNode;if(d._df!=null){this.value=d._value||""}d.getForm()._ccActivate(d._idd,this,this.value);d.getForm().callEvent("onFocus",[d._idd]);d=null}}c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);a.updateValue(d,true);if(d.getForm().live_validate){a._validate(d)}d.getForm().callEvent("onBlur",[d._idd]);d=null}},updateValue:function(f,a){var g=f.childNodes[f._ll?1:0].childNodes[0].value;var e=f.getForm();var c=(e._ccActive==true&&e._formLS!=null&&e._formLS[f._idd]!=null);e=null;if(!c&&f._df!=null&&g==window.dhx4.template._getFmtValue(f._value,f._df)){return}if(!a&&f._df!=null&&f._value==g&&g==window.dhx4.template._getFmtValue(g,f._df)){return}var d=this;if(f._value!=g){if(f.checkEvent("onBeforeChange")){if(f.callEvent("onBeforeChange",[f._idd,f._value,g])!==true){if(f._df!=null){d.setValue(f,f._value)}else{f.childNodes[f._ll?1:0].childNodes[0].value=f._value}return}}if(f._df!=null&&a){d.setValue(f,g)}else{f._value=g}f.callEvent("onChange",[f._idd,g]);return}if(f._df!=null&&a){this.setValue(f,f._value)}},setValue:function(d,e){d._value=(typeof(e)!="undefined"&&e!=null?e:"");var c=(String(d._value)||"");var a=d.childNodes[d._ll?1:0].childNodes[0];if(d._df!=null){c=window.dhx4.template._getFmtValue(c,d._df)}if(a.value!=c){a.value=c;d.getForm()._ccReload(d._idd,c)}a=null},getValue:function(a){var c=a.getForm();if(c._formLS&&c._formLS[a._idd]!=null){this.updateValue(a)}c=null;return(typeof(a._value)!="undefined"&&a._value!=null?a._value:"")},setReadonly:function(a,c){a._ro=(c===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(e,f,d,g,c){if(typeof(c)!="boolean"){c=true}if(f==""){e._df=null;if(c){this.setValue(e,e._value)}return true}if(typeof(f)!="string"){return}var a=window.dhx4.template._parseFmt(f,d,g);if(a==false){return false}else{e._df=a}if(c){this.setValue(e,e._value)}return true}};(function(){for(var c in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.password={render:function(a,c){a._type="pw";a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,c.value);return this}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.file={render:function(d,e){d._type="fl";d._enabled=true;this.doAddLabel(d,e);this.doAddInput(d,e,"INPUT","FILE",true,false,"dhxform_textarea");var a=d.childNodes[d._ll?1:0].childNodes[0];var c=this;a.onfocus=function(){var f=this.parentNode.parentNode;f.getForm().callEvent("onFocus",[f._idd]);f=null};a.onblur=function(){var f=this.parentNode.parentNode;if(f.getForm().live_validate){c._validate(f)}f.getForm().callEvent("onBlur",[f._idd]);f=null};a=null;d.childNodes[d._ll?1:0].childNodes[0].onchange=function(){d.callEvent("onChange",[d._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var c in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(c,d){c._type="lb";c._enabled=true;c._checked=true;var a=document.createElement("DIV");a.className="dhxform_txt_label2"+(d._isTopmost?" topmost":"");a.innerHTML=d.label;c.appendChild(a);if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}if(!isNaN(d.labelWidth)){a.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){a.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){a.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){a.style.top=parseInt(d.labelTop)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false},setText:function(a,c){a.firstChild.innerHTML=c},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.button={render:function(c,d){c._type="bt";c._enabled=true;c._name=d.name;c.className=String(c.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");c._doOnKeyUpDown=function(f,e){this.callEvent(f,[this.childNodes[0].childNodes[0],e,this._idd])};c.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+d.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(d.width)){var a=Math.max(d.width,10);if(dhtmlXForm.prototype.items[this.t]._dim==null){c.firstChild.style.width=a+"px";dhtmlXForm.prototype.items[this.t]._dim=c.getForm()._checkDim(c,c.firstChild)}c.firstChild.style.width=a-dhtmlXForm.prototype.items[this.t]._dim+"px";c.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}if(!isNaN(d.inputLeft)){c.childNodes[0].style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.childNodes[0].style.top=parseInt(d.inputTop)+"px"}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}if(typeof(d.tooltip)!="undefined"){c.firstChild.title=d.tooltip}c.onselectstart=function(f){f=f||event;f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.firstChild.onselectstart=function(f){f=f||event;f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false};c.firstChild.onkeypress=function(f){f=f||event;if((f.keyCode==32||f.charCode==32||f.keyCode==13||f.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};c.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};c.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};c.firstChild.onkeyup=function(f){this.parentNode._doOnKeyUpDown("onKeyUp",f||event)};c.firstChild.onkeydown=function(f){this.parentNode._doOnKeyUpDown("onKeyDown",f||event)};c.firstChild.onmouseover=function(){var e=this.parentNode;if(!e._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";e=null};c.firstChild.onmouseout=function(){var e=this.parentNode;if(!e._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;e=null};c.firstChild.ontouchstart=c.firstChild.onmousedown=function(g){g=g||event;if(g.type=="touchstart"&&g.preventDefault){g.preventDefault()}if(g.button>=2){return}if(this._pressed){return}var f=this.parentNode;if(!f._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;f=null};c.firstChild.ontouchend=c.firstChild.onmouseup=function(g){g=g||event;if(g.button>=2){return}if(!this._pressed){return}var f=this.parentNode;if(!f._enabled){return}f._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){f.callEvent("_onButtonClick",[f._name,f._cmd])}this._allowClick=false;this._pressed=false;f=null};c._doOnFocus=function(e){e.getForm().callEvent("onFocus",[e._idd])};c._doOnBlur=function(e){e.getForm().callEvent("onBlur",[e._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(c,d){c.style.display="none";c._name=d.name;c._type="hd";c._enabled=true;var a=document.createElement("INPUT");a.type="HIDDEN";a.name=d.name;a.value=(d.value||"");c.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,c){a.childNodes[0].value=c},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(a,c){a._type="list";a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,c)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(c,e){c._type="fs";if(typeof(parseInt(e.inputWidth))=="number"){}c._width=e.width;c._enabled=true;c._checked=true;c.className="fs_"+e.position+(typeof(e.className)=="string"?" "+e.className:"");var d=document.createElement("FIELDSET");d.className="dhxform_fs";var g=String(e.labelAlign).replace("align_","");d.innerHTML="<legend class='fs_legend' align='"+g+"' style='text-align:"+g+"'>"+e.label+"</legend>";c.appendChild(d);if(!isNaN(e.inputLeft)){d.style.left=parseInt(e.inputLeft)+"px"}if(!isNaN(e.inputTop)){d.style.top=parseInt(e.inputTop)+"px"}if(e.inputWidth!="auto"){if(!isNaN(e.inputWidth)){d.style.width=parseInt(e.inputWidth)+"px";var a=parseInt(d.style.width);if(d.offsetWidth>a){d.style.width=a+(a-d.offsetWidth)+"px"}}}c._addSubListNode=function(){var f=document.createElement("DIV");f._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(f);return f};if(e.hidden==true){this.hide(c)}if(e.disabled==true){this.userDisable(c)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){a.childNodes[0].childNodes[0].innerHTML=c},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}},setWidth:function(c,a){c.childNodes[0].style.width=a+"px";c._width=a},getWidth:function(a){return a._width}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(c,d){c._type="bl";c._width=d.width;c._enabled=true;c._checked=true;c.className="block_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block";a.style.fontSize=c.getForm().cont.style.fontSize;if(d.style){a.style.cssText=d.style}if(typeof(d.id)!="undefined"){a.id=d.id}c.appendChild(a);if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}if(!isNaN(d.blockOffset)){c._ofsNested=d.blockOffset}c._addSubListNode=function(){var e=document.createElement("DIV");e._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){e._ofsNested=this._ofsNested}this.childNodes[0].appendChild(e);return e};if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}return this},_setCss:function(a,d,c){a.firstChild.className="dhxform_obj_"+d+" dhxform_block";a.firstChild.style.fontSize=c}};(function(){for(var c in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[c]=dhtmlXForm.prototype.items.fieldset[c]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(c,d){var a=(!isNaN(d.rows));c._type="tp";c._enabled=true;if(d.format!=null){if(typeof(d.format)=="function"){c.format=d.format}else{if(typeof(d.format)=="string"&&typeof(window[d.format])=="function"){c.format=window[d.format]}}}if(c.format==null){c.format=function(e,f){return f}}this.doAddLabel(c,d);this.doAddInput(c,d,"DIV",null,true,true,"dhxform_item_template");this.setValue(c,d.value||"");return this},destruct:function(a){a.format=null;this.d2(a);a=null},setValue:function(a,c){a._value=c;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype._ulToObject=function(g,k){var h=[];for(var c=0;c<g.childNodes.length;c++){if(String(g.childNodes[c].tagName||"").toLowerCase()=="li"){var d={};var m=g.childNodes[c];for(var l=0;l<k.length;l++){if(m.getAttribute(k[l])!=null){d[String(k[l]).replace("ftype","type")]=m.getAttribute(k[l])}}if(!d.label){try{d.label=m.firstChild.nodeValue}catch(j){}}var f=m.getElementsByTagName("UL");if(f[0]!=null){d[(d.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(f[0],k)}for(var l=0;l<m.childNodes.length;l++){if(String(m.childNodes[l].tagName||"").toLowerCase()=="userdata"){if(!d.userdata){d.userdata={}}d.userdata[m.childNodes[l].getAttribute("name")]=m.childNodes[l].firstChild.nodeValue}}h[h.length]=d}if(String(g.childNodes[c].tagName||"").toLowerCase()=="div"){var d={};d.type="label";try{d.label=g.childNodes[c].firstChild.nodeValue}catch(j){}h[h.length]=d}}return h};dhtmlXForm.prototype.setUserData=function(f,d,e,a){if(typeof(a)!="undefined"){var c=this.doWithItem([f,d],"_getId");if(c!=null){f=c;d=e;e=a}}if(!this._userdata){this._userdata={}}this._userdata[f]=(this._userdata[f]||{});this._userdata[f][d]=e};dhtmlXForm.prototype.getUserData=function(e,d,a){if(typeof(a)!="undefined"){var c=this.doWithItem([e,d],"_getId");if(c!=null){e=c;d=a}}if(this._userdata!=null&&typeof(this._userdata[e])!="undefined"&&typeof(this._userdata[e][d])!="undefined"){return this._userdata[e][d]}return""};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(f,c){if(typeof(c)=="object"){var a=c[1];c=c[0]}if(document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent(c,true,false);f.dispatchEvent(d)}else{if(document.createEventObject){var d=document.createEventObject();d.button=1;f.fireEvent("on"+c,d)}}if(a){window.setTimeout(function(){_dhxForm_doClick(f,a)},100)}};dhtmlXForm.prototype.setFormData=function(d){for(var c in d){var e=this.getItemType(c);switch(e){case"checkbox":this[d[c]==true||parseInt(d[c])==1||d[c]=="true"||d[c]==this.getItemValue(c,"realvalue")?"checkItem":"uncheckItem"](c);break;case"radio":this.checkItem(c,d[c]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(c,d[c]);break;default:if(this["setFormData_"+e]){this["setFormData_"+e](c,d[c])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,c,d[c])}break}}};dhtmlXForm.prototype.getFormData=function(o,g){var c={};var l=this;for(var n in this.itemPull){var j=this.itemPull[n]._idd;var s=this.itemPull[n]._type;if(s=="ch"){c[j]=(this.isItemChecked(j)?this.getItemValue(j):0)}if(s=="ra"&&!c[this.itemPull[n]._group]){c[this.itemPull[n]._group]=this.getCheckedValue(this.itemPull[n]._group)}if(s in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[j]=this.getItemValue(j,o)}if(this["getFormData_"+s]){c[j]=this["getFormData_"+s](j)}if(s=="up"){var f=this.getItemValue(j);for(var e in f){c[e]=f[e]}}if(this.itemPull[n]._list){for(var d=0;d<this.itemPull[n]._list.length;d++){var h=this.itemPull[n]._list[d].getFormData(o,g);for(var m in h){c[m]=h[m]}}}}if(!g&&this.hId&&this._userdata[this.hId]){for(var n in this._userdata[this.hId]){if(!c[n]){c[n]=this._userdata[this.hId][n]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var g=0;var f=-1;for(var h=0;h<this.base.length;h++){g+=this.base[h].firstChild.offsetWidth;if(this.base[h].offsetHeight>f){f=this.base[h].offsetHeight}}var d=false;try{d=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(d){var a=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(j){}if(d&&typeof(a)!="undefined"){if(g>0){a.setWidth(g+10)}if(f>0){a.setHeight(f+a.firstChild.firstChild.offsetHeight+5)}d=a=null;return}var c=false;try{c=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(c){var k=this.cont.parentNode.parentNode;if(typeof(k.callEvent)=="function"){this.cont.style.display="none";k.callEvent("_setCellSize",[g+15,f+15]);this.cont.style.display=""}}}catch(j){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(c,h,j,e){if(typeof h=="function"){j=h;h="post"}else{h=(h=="get"?"get":"post")}if(e!==true&&!this.validate()){return}var g=this.getFormData(true);var f=[];for(var d in g){f.push(d+"="+encodeURIComponent(g[d]))}var a=function(k){if(j){j.call(this,k,k.xmlDoc.responseText)}};if(h=="get"){window.dhx4.ajax.get(c+(c.indexOf("?")==-1?"?":"&")+f.join("&"),a)}else{window.dhx4.ajax.post(c,f.join("&"),a)}};dhtmlXForm.prototype.save=function(a,c){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(c,a){this.formId=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(e,c){var d=this.obj.getFormData(true);d[this.action_param]=this.obj.getUserData(e,this.action_param);return d};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(d,e,f,c){if(e=="inserted"||e=="updated"){this.obj.resetDataProcessor("updated");this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,c]);return true});a.autoUpdate=false;a.setTransactionMode("POST",true);this.dp=a;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,a)};dhtmlXForm.prototype._ccActivate=function(d,a,c){if(!this._formLS){this._formLS={}}if(!this._formLS[d]){this._formLS[d]={input:a,value:c}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var c in this._formLS){var f=this._formLS[c].input;if(String(f.tagName).toLowerCase()=="select"){var d="";if(f.selectedIndex>=0&&f.selectedIndex<f.options.length){d=f.options[f.selectedIndex].value}}else{var d=f.value}if(d!=this._formLS[c].value){this._formLS[c].value=d;this.callEvent("onInputChange",[f._idd,d,this])}f=null}if(this._ccActive){var e=this;this._ccTm=window.setTimeout(function(){e._ccDo();e=null},100)}};dhtmlXForm.prototype._ccReload=function(c,a){if(this._formLS&&this._formLS[c]){this._formLS[c].value=a}};dhtmlXForm.prototype._checkDim=function(h,g){var e=document.createElement("DIV");e.className="dhxform_obj_"+this.skin;e.style.cssText+=(dhx4.isIE6==true?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;");document.body.appendChild(e);var f=h.parentNode;var c=h.nextSibling;e.appendChild(h);var d=parseInt(g.style.width);var a=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?g.offsetWidth:g.clientWidth);var j=a-d;if(c!=null){f.insertBefore(h,c)}else{f.appendChild(h)}e.parentNode.removeChild(e);f=c=e=h=g=null;return j};dhtmlXForm.prototype._autoload=function(){var c=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];var d=document.getElementsByTagName("UL");var e=[];for(var h=0;h<d.length;h++){if(d[h].className=="dhtmlxForm"){var g=document.createElement("DIV");e[e.length]={nodeUL:d[h],nodeForm:g,data:dhtmlXForm.prototype._ulToObject(d[h],c),name:(d[h].getAttribute("name")||null)}}}for(var h=0;h<e.length;h++){e[h].nodeUL.parentNode.insertBefore(e[h].nodeForm,e[h].nodeUL);var j=new dhtmlXForm(e[h].nodeForm,e[h].data);if(e[h].name!==null){window[e[h].name]=j}var f=(e[h].nodeUL.getAttribute("oninit")||null);e[h].nodeUL.parentNode.removeChild(e[h].nodeUL);e[h].nodeUL=null;e[h].nodeForm=null;e[h].data=null;e[h]=null;if(f){if(typeof(f)=="function"){f()}else{if(typeof(window[f])=="function"){window[f]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(c)}else{c.style.overflow="auto"}this._attachObject(c);this.dataType="form";this.dataObj=new dhtmlXForm(c,a);this.dataObj.setSkin(this.conf.skin);c=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXForm.prototype.items.combo={render:function(c,d){c._type="combo";c._enabled=true;c._value=null;c._newValue=null;this.doAddLabel(c,d);this.doAddInput(c,d,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(c);this.doLoadOpts(c,d);c.onselectstart=function(f){return true};c.childNodes[c._ll?1:0].childNodes[0].setAttribute("mode",d.comboType||"");if(d.comboImagePath){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("imagePath",d.comboImagePath)}if(d.comboDefaultImage){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImage",d.comboDefaultImage)}if(d.comboDefaultImageDis){c.childNodes[c._ll?1:0].childNodes[0].setAttribute("defaultImageDis",d.comboDefaultImageDis)}c._combo=new dhtmlXComboFromSelect(c.childNodes[c._ll?1:0].childNodes[0]);c._combo.setSkin(c.getForm().skin);c._combo._currentComboValue=c._combo.getSelectedValue();c._combo.getInput().id=d.uid;var a=this;c._combo.attachEvent("onChange",function(){a.doOnChange(this)});if(d.connector){this.doLoadOptsConnector(c,d.connector)}if(d.filtering){c._combo.enableFilteringMode(true)}else{if(d.serverFiltering){c._combo.enableFilteringMode(true,d.serverFiltering,d.filterCache,d.filterSubLoad)}}if(d.readonly==true){this.setReadonly(c,true)}if(d.style){c._combo.DOMelem_input.style.cssText+=d.style}c._combo.attachEvent("onFocus",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if(g.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}g.callEvent("onFocus",[e._idd]);g=e=null});c._combo.attachEvent("onBlur",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if(g.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}g.callEvent("onBlur",[e._idd]);g=e=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a);a=null},doAttachEvents:function(c){var a=this;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(c){var a=c.base.parentNode.parentNode.parentNode;if(a._apiChange){return}c._newComboValue=c.getSelectedValue();if(c._newComboValue!=c._currentComboValue){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,c._currentComboValue,c._newComboValue])!==true){window.setTimeout(function(){c.setComboValue(c._currentComboValue)},1);return false}}c._currentComboValue=c._newComboValue;a.callEvent("onChange",[a._idd,c._currentComboValue])}a._autoCheck(a._enabled)},doLoadOptsConnector:function(e,a){var d=this;var c=e;e._connector_working=true;e._apiChange=true;e._combo.load(a,function(){c.callEvent("onOptionsLoaded",[c._idd]);c._connector_working=false;if(c._connector_value!=null){d.setValue(c,c._connector_value);c._connector_value=null}c._apiChange=false;d=c=null})},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,c){if(a._connector_working){a._connector_value=c;return}a._apiChange=true;a._combo.setComboValue(c);a._combo._currentComboValue=a._combo.getActualValue();a._apiChange=false},getValue:function(a){return a._combo.getActualValue()},setWidth:function(c,a){c.childNodes[c._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,c){if(!a._combo){return}a._combo_ro=c;a._combo.readonly(a._combo_ro)},isReadonly:function(a,c){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,d,c){a._combo.setFontSize(c,c)}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[c]=dhtmlXForm.prototype.items.select[c]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(d,g){var c=this;d._type="calendar";d._enabled=true;var h=navigator.userAgent;var a=(h.indexOf("MSIE 6.0")>=0||h.indexOf("MSIE 7.0")>=0||h.indexOf("MSIE 8.0")>=0);this.doAddLabel(d,g);this.doAddInput(d,g,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(d);if(a){d.childNodes[d._ll?1:0].childNodes[0].onfocus2=d.childNodes[d._ll?1:0].childNodes[0].onfocus;d.childNodes[d._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}d.childNodes[d._ll?1:0].childNodes[0]._idd=d._idd;d.childNodes[d._ll?1:0].childNodes[0].onblur=function(){var j=this.parentNode.parentNode;if(j._c.base._formMouseDown){j._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;j=null;return true}var k=j.getForm();k._ccDeactivate(j._idd);c.checkEnteredValue(this.parentNode.parentNode);if(k.live_validate){c._validate(j)}k.callEvent("onBlur",[j._idd]);if(!j._c.isVisible()){j._tempValue=null}k=j=null};d._f=(g.dateFormat||null);d._f0=(g.serverDateFormat||d._f);var e=d.getForm();d._c=new dhtmlXCalendarObject(d.childNodes[d._ll?1:0].childNodes[0],g.skin||e.skin||"dhx_skyblue");d._c._nullInInput=true;d._c.enableListener(d.childNodes[d._ll?1:0].childNodes[0]);if(d._f!=null){d._c.setDateFormat(d._f)}if(!window.dhx4.s2b(g.enableTime)){d._c.hideTime()}if(window.dhx4.s2b(g.showWeekNumbers)){d._c.showWeekNumbers()}if(!isNaN(g.weekStart)){d._c.setWeekStartDay(g.weekStart)}if(typeof(g.calendarPosition)!="undefined"){d._c.setPosition(g.calendarPosition)}if(g.minutesInterval!=null){d._c.setMinutesInterval(g.minutesInterval)}d._c._itemIdd=d._idd;d._c.attachEvent("onBeforeChange",function(f){if(d._value!=f){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,f])!==true){return false}}d._tempValue=d._value=f;c.setValue(d,f,false);d.callEvent("onChange",[this._itemIdd,d._value])}return true});d._c.attachEvent("onClick",function(){d._tempValue=null});d._c.attachEvent("onHide",function(){d._tempValue=null});if(a){d._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(d,g.value);e=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,c){a._c.setSkin(c)},setValue:function(c,d,a){if(!d||d==null||typeof(d)=="undefined"||d==""){c._value=null;c.childNodes[c._ll?1:0].childNodes[0].value=""}else{c._value=(d instanceof Date?d:c._c._strToDate(d,c._f0||c._c._dateFormat));c.childNodes[c._ll?1:0].childNodes[0].value=c._c._dateToStr(c._value,c._f||c._c._dateFormat)}if(a!==false){c._c.setDate(c._value)}},getValue:function(c,a){var e=c._tempValue||c._c.getDate();if(a===true&&e==null){return""}return(a===true?c._c._dateToStr(e,c._f0||c._c._dateFormat):e)},setDateFormat:function(c,a,d){c._f=a;c._f0=(d||c._f);c._c.setDateFormat(c._f);this.setValue(c,this.getValue(c))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(c){}a._f=null;try{delete a._f}catch(c){}a._f0=null;try{delete a._f0}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.d2(a);a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(c,a,d){this.doWithItem(c,"setDateFormat",a,d)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,c){a._checked=(c===true?true:false);a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};(function(){for(var c in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[c]){dhtmlXForm.prototype.items.btn2state[c]=dhtmlXForm.prototype.items.checkbox[c]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(a,c){c._autoInputWidth=false;this.render2(a,c);a._type="btn2state";a._cssName=(typeof(c.cssName)=="undefined"?"btn2state":c.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(e,d,f){this.callEvent(e,[this.childNodes[this._ll?0:1].childNodes[0],d,this._idd])};this.setChecked(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,c){this[c==true||parseInt(c)==1||c=="true"||c==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.isItemChecked(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(d,e){var c=this;d._type="colorpicker";d._enabled=true;this.doAddLabel(d,e);this.doAddInput(d,e,"INPUT","TEXT",true,true,"dhxform_textarea");d._value=(e.value||"");d.childNodes[d._ll?1:0].childNodes[0].value=d._value;var a={input:d.childNodes[d._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(e.enableCustomColors)==true),skin:d.getForm().skin};this.colorpicker[d._idd]=new dhtmlXColorPicker(a);this.colorpicker[d._idd]._nodes[0].valueColor=null;this.colorpicker[d._idd].base.className+=" dhtmlxcp_in_form";if(typeof(e.customColors)!="undefined"){this.colorpicker[d._idd].setCustomColors(e.customColors)}if(typeof(e.cpPosition)=="string"){this.colorpicker[d._idd].setPosition(e.cpPosition)}this.colorpicker[d._idd].attachEvent("onSelect",function(f){if(d._value!=f){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,f])!==true){d.childNodes[d._ll?1:0].childNodes[0].value=d._value;return}}d._value=f;c.setValue(d,f);d.callEvent("onChange",[d._idd,d._value])}});this.colorpicker[d._idd].attachEvent("onHide",function(f){var g=d.childNodes[d._ll?1:0].childNodes[0];if(g.value!=d._value){g.value=d._value}g=null});d.childNodes[d._ll?1:0].childNodes[0]._idd=d._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(c){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a);a=null},setSkin:function(a,c){this.colorpicker[a._idd].setSkin(c)}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[c]=dhtmlXForm.prototype.items.input[c]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(a,c){a._type="container";a._enabled=true;this.doAddLabel(a,c);this.doAddInput(a,c,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var c in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[c]){dhtmlXForm.prototype.items.container[c]=dhtmlXForm.prototype.items.input[c]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(d,e){var a=(!isNaN(e.rows));d._type="editor";d._enabled=true;d._editor_id=d.getForm().idPrefix+d._idd;this.doAddLabel(d,e);this.doAddInput(d,e,"DIV",null,true,true,"dhxform_item_template");d._value=(e.value||"");var c=this;this.editor[d._editor_id]=new dhtmlXEditor({parent:d.childNodes[d._ll?1:0].childNodes[0],content:d._value,iconsPath:e.iconsPath,toolbar:e.toolbar});this.editor[d._editor_id].attachEvent("onAccess",function(g,h){d.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(g=="blur"){c.doOnBlur(d,this);d.callEvent("onBlur",[d._idd]);if(d.getForm().skin=="dhx_terrace"){var f=d.childNodes[d._ll?1:0].className;if(f.indexOf("dhxeditor_focus")>=0){d.childNodes[d._ll?1:0].className=(f).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{d.callEvent("onEditorAccess",[d._idd,g,h,this,d.getForm()]);d.callEvent("onFocus",[d._idd]);if(d.getForm().skin=="dhx_terrace"){var f=d.childNodes[d._ll?1:0].className;if(f.indexOf("dhxeditor_focus")==-1){d.childNodes[d._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[d._editor_id].attachEvent("onToolbarClick",function(f){d.callEvent("onEditorToolbarClick",[d._idd,f,this,d.getForm()])});if(e.readonly){this.setReadonly(d,true)}d.childNodes[d._ll?0:1].childNodes[0].removeAttribute("for");d.childNodes[d._ll?0:1].childNodes[0].onclick=function(){c.editor[d._editor_id]._focus()};return this},doOnBlur:function(d,c){var a=c.getContent();if(d._value!=a){if(d.checkEvent("onBeforeChange")){if(d.callEvent("onBeforeChange",[d._idd,d._value,a])!==true){c.setContent(d._value);return}}d._value=a;d.callEvent("onChange",[d._idd,a])}},setValue:function(a,c){if(a._value==c){return}a._value=c;this.editor[a._editor_id].setContent(a._value)},getValue:function(a){a._value=this.editor[a._editor_id].getContent();return a._value},enable:function(a){if(this.isEnabled(a)!=true){this.editor[a._editor_id].setReadonly(false);this.doEn(a)}},disable:function(a){if(this.isEnabled(a)==true){this.editor[a._editor_id].setReadonly(true);this.doDis(a)}},setReadonly:function(a,c){this.editor[a._editor_id].setReadonly(c)},getEditor:function(a){return(this.editor[a._editor_id]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._editor_id].unload();this.editor[a._editor_id]=null;this.d2(a);a=null},setFocus:function(a){this.editor[a._editor_id]._focus()}};(function(){for(var c in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[c]=dhtmlXForm.prototype.items.template[c]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:true,render:function(f,g){f._type="image";f._enabled=true;f._fr_name="dhxform_image_"+window.dhx4.newId();f._url=g.url;if(g.inputWidth=="auto"){g.inputWidth=120}if(g.inputHeight=="auto"){g.inputHeight=g.inputWidth}this.doAddLabel(f,g);this.doAddInput(f,g,"DIV",null,true,true,"dhxform_image");var c=f.childNodes[f._ll?1:0].childNodes[0];c.style.height=parseInt(c.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var a=(typeof(g.imageWidth)!="undefined"?parseInt(g.imageWidth):g.inputWidth);var d=(typeof(g.imageHeight)!="undefined"?parseInt(g.imageHeight):g.inputHeight);if(d=="auto"){d=a}f._dim={mw:g.inputWidth-this._dim,mh:g.inputHeight-this._dim,w:a,h:d};c.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+f._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+f._url+"' method='POST' enctype='multipart/form-data' target='"+f._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+f._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(f);c.childNodes[2].firstChild.lastChild.onchange=function(){f._is_uploading=true;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress"};var e=this;if(window.navigator.userAgent.indexOf("MSIE")>=0){c.childNodes[1].onreadystatechange=function(){if(this.readyState=="complete"){e.doOnUpload(f)}}}else{c.childNodes[1].onload=function(){e.doOnUpload(f)}}this._moreClear=function(){e=null};this.setValue(f,g.value||"");c=null;return this},destruct:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];a.childNodes[2].firstChild.lastChild.onchange=null;a.childNodes[1].onreadystatechange=null;a.childNodes[1].onload=null;this._moreClear();this.d2(c);c=null},doAttachEvents:function(){},setValue:function(d,f){d._value=(f==null?"":f);var c=d._url+(d._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(d._idd)+"&itemValue="+encodeURIComponent(d._value)+(window.dhx4.ajax.cache!=true?"&dhxr"+new Date().getTime()+"=1":"");var e=d.childNodes[d._ll?1:0].childNodes[0].firstChild;if(e.nextSibling.tagName.toLowerCase()=="img"){e.nextSibling.src=c}else{var a=document.createElement("IMG");a.className="dhxform_image_img";a.style.visibility="hidden";a.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null};a.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};e.parentNode.insertBefore(a,e);a.src=c;a=null;this.adjustImage(d)}e=null},getValue:function(a){return a._value},doOnUpload:function(d){if(d._is_uploading==true){var a=d.childNodes[d._ll?1:0].childNodes[0].lastChild.previousSibling;var c=dhx4.s2j(a.contentWindow.document.body.innerHTML);if(typeof(c)=="object"&&c!=null&&c.state==true&&c.itemId==d._idd){this.setValue(d,c.itemValue,true);d.getForm().callEvent("onImageUploadSuccess",[c.itemId,c.itemVaule,c.extra])}else{d.getForm().callEvent("onImageUploadFail",[d._idd,(c?c.extra:null)])}c=a=null;window.setTimeout(function(){d.childNodes[d._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";d._is_uploading=false},50)}},adjustImage:function(e){var c=e.childNodes[e._ll?1:0].childNodes[0].firstChild;var a=Math.min(e._dim.mw,e._dim.w);var d=Math.min(e._dim.mh,e._dim.h);c.style.width=a+"px";c.style.height=d+"px";c.style.marginLeft=Math.max(0,Math.round(e._dim.mw/2-a/2))+"px";c.style.marginTop=Math.max(0,Math.round(e._dim.mh/2-d/2))+"px";c=e=null}};(function(){for(var c in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.image[c]){dhtmlXForm.prototype.items.image[c]=dhtmlXForm.prototype.items.input[c]}}})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(a,c){this.setItemValue(a,c)};dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)};dhtmlXForm.prototype.items.upload={render:function(c,d){c._type="up";c._enabled=true;c._checked=true;c.className=d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");c.appendChild(a);if(!isNaN(d.inputLeft)){c.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}c._uploader=new dhtmlXFileUploader(a,d.swfPath||"",d.swfUrl||"",d.mode||null,d.swfLogs,d.slXap||"",d.slUrl||"",d.slLogs||"",d.multiple);c._uploader.setURL(d.url||"");c._uploader.callEvent=c.callEvent;if(typeof(d.autoStart)!="undefined"){c._uploader.setAutoStart(d.autoStart)}if(typeof(d.autoRemove)!="undefined"){c._uploader.setAutoRemove(d.autoRemove)}if(typeof(d.titleScreen)!="undefined"){c._uploader.enableTitleScreen(d.titleScreen)}if(typeof(d.titleText)!="undefined"){c._uploader.setTitleText(d.titleText)}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}if(!(d.inputHeight=="auto"||parseInt(d.inputHeight)==NaN)){c._uploader.p_files.style.height=parseInt(d.inputHeight)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=function(){return true};a._uploader.unload();a._uploader.callEvent=null;a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,c){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._uploader.disable()},setWidth:function(c,a){c.childNodes[0].style.width=a+"px";c._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(g){var e=g._uploader.getData();var f={};var d=0;for(var c in e){f[g._idd+"_r_"+d]=e[c].realName;f[g._idd+"_s_"+d]=e[c].serverName;d++}f[g._idd+"_count"]=d;return f},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var c in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[c]=dhtmlXForm.prototype.items.checkbox[c]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};function dhtmlXFileUploader(c,j,h,l,o,g,r,f,s){var m=this;if(typeof(l)=="string"&&typeof(this[l])=="function"){this.engine=l}else{this.engine="html4";var d=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){d=new XMLHttpRequest();if(typeof(d.upload)=="undefined"){d=null}}if(d!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||d===false){var d=swfobject.getFlashPlayerVersion();if(d.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}d=null}if(typeof(c)=="string"){c=document.getElementById(c)}this._upload_mp=(typeof(s)!="undefined"?s==true:true);this._upload_dnd=true;this._swf_file_url=j||"";this._swf_upolad_url=h||"";this._swf_logs=o;this._sl_xap=g;this._sl_upload_url=r;this._sl_logs=f;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";c.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!m._enabled){return}if(!m._uploading){m._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!m._enabled){return}m._uploadStop();m._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!m._enabled){return}m.clear()},tooltip:"Clear list"}};this.buttons={};for(var e in this.b_opts){var u=document.createElement("DIV");u.innerHTML="&nbsp;";u.className="dhx_file_uploader_button button_"+e;u.onclick=this.b_opts[e].onclick;if(this.b_opts[e].tooltip){u.title=this.b_opts[e].tooltip}this.p_controls.appendChild(u);this.buttons[e]=u;u=null}this.buttons.cancel.style.display="none"};this._readableSize=function(k){var e=false;var a=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var u=0;u<a.length;u++){if(k>1024){k=k/1024}else{if(e===false){e=u}}}if(e===false){e=a.length-1}return Math.round(k*100)/100+" "+a[e]};this._beforeAddFileToList=function(a,e){return(this.callEvent("onBeforeFileAdd",[a,e])===true)};this._addFileToList=function(w,e,u,v,a){this._checkTitleScreen();var k=document.createElement("DIV");k._idd=w;k.className="dhx_file dhx_file_"+v;k.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+a+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(k);k.childNodes[0].style.width=k.offsetWidth-127+"px";this._items[w]=k;this._updateFileNameSize(w);k.childNodes[2].onclick=function(){if(!m._enabled){return}var x=this.parentNode._idd;m._removeFileFromQueue(x)};this.callEvent("onFileAdd",[e])};this._removeFileFromList=function(a){if(!this._items[a]){return}this._items[a].childNodes[2].onclick=null;this._items[a].parentNode.removeChild(this._items[a]);this._items[a]=null;delete this._items[a];if(this._data[a]){this._data[a]=null;delete this._data[a]}this._checkTitleScreen()};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"&nbsp;");this._items[a].childNodes[0].title=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"")};this._updateFileInList=function(k,e,a){if(!this._items[k]){return}this._items[k].className="dhx_file dhx_file_"+e;this._updateProgress(k,e,a);this._updateFileNameSize(k)};this._updateProgress=function(k,e,a){if(e=="uploading"&&a<100&&this._progress_type=="loader"){this._items[k].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[k].childNodes[1].innerHTML="&nbsp;"}else{this._items[k].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[k].childNodes[1].innerHTML=a+"%"}this._updateFileNameSize(k)};this._removeFilesByState=function(k){for(var e in this._files){if(k===true||this._files[e].state==k){this._removeFileFromQueue(e)}}};this._switchButton=function(e){if(e==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var a=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(a>0){this.callEvent("onUploadComplete",[a])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var e in this._files){if(this._files[e].state=="fail"){this._files[e].state="added";this._updateFileInList(e,"added",0)}}}this._uploading=true;var k=false;for(var e in this._files){if(!k&&[this._files[e].state]=="added"){k=true;this._files[e].state="uploading";this._updateFileInList(e,"uploading",0);this._doUploadFile(e)}}if(!k){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(v,u,k,a){if(typeof(k)!="undefined"&&this.engine=="flash"){var e=dhx4.s2j(k.data);if(e!=null&&e.state==true&&e.name!=null){u=e.name;if(e.extra!=null){a=e.extra}}else{this._onUploadFail(v,(e!=null&&e.extra!=null?e.extra:null));return}}this._uploaded_count++;this._data[v]={realName:this._files[v].name,serverName:u};this._files[v].state="uploaded";this._updateFileInList(v,"uploaded",100);this.callEvent("onUploadFile",[this._files[v].name,u,a]);if(this._autoRemove){this._removeFileFromQueue(v)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(e,a){this._files[e].state="fail";this._updateFileInList(e,"fail",0);this.callEvent("onUploadFail",[this._files[e].name,a]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(a){this._uploading=false;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var u=0;for(var e in this._files){u++}if(u==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((u>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(a){this._autoStart=(a==true)};this.setAutoRemove=function(a){this._autoRemove=(a==true)};this.enableTitleScreen=function(a){this._titleScreen=(a==true);this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var k=0;for(var e in this._files){if(this._files[e].state!="uploaded"){return -1}k=1}return k};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){m._uploadStop()}m._switchButton(false);m._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var e in this.buttons){this.buttons[e].onclick=null;this.buttons[e].parentNode.removeChild(this.buttons[e]);this.buttons[e]=null;delete this.buttons[e]}this.buttons=null;for(var e in this.b_opts){this.b_opts[e].onclick=null;this.b_opts[e]=null;delete this.b_opts[e]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var e in this){this[e]=null}m=e=null};var n=new this[this.engine]();for(var q in n){this[q]=n[q];n[q]=null}q=n=c=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var c=this;this.buttons.browse.onclick=function(){if(c._enabled){c.f.click()}};this._progress_type="percentage";var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&&a.match(/AppleWebKit/gi)!=null&&a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault()};this.p.ondragover=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault()};this.p.ondrop=function(d){if(!d.dataTransfer){return}d.stopPropagation();d.preventDefault();if(c._enabled){c._parseFilesInInput(d.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=""}}},_doUploadFile:function(d){var c=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(f){if(c._files[this._idd].state=="uploading"){c._updateFileInList(this._idd,"uploading",Math.round(f.loaded*100/f.total))}};this._loader.onload=function(g){var f=dhx4.s2j(this.responseText);if(typeof(f)=="object"&&f!=null&&typeof(f.state)!="undefined"&&f.state==true){c._onUploadSuccess(this.upload._idd,f.name,null,f.extra);f=null}else{c._onUploadFail(this.upload._idd,(f!=null&&f.extra!=null?f.extra:null))}};this._loader.onerror=function(f){c._onUploadFail(this.upload._idd)};this._loader.onabort=function(f){c._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=d;var a=new FormData();a.append("file",this._files[d].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+new Date().getTime(),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(a)},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(c){for(var a=0;a<c.length;a++){this._addFileToQueue(c[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var c=(a._idd||window.dhx4.newId());this._files[c]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(c,a.name,a.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(e){if(!this._files[e]){return}var c=this._files[e].name;var d=(this._data!=null&&this._data[e]!=null?this._data[e].serverName:null);if(this.callEvent("onBeforeFileRemove",[c,d])!==true){return}var a=false;if(this._uploading&&e==this._loader.upload._idd&&this._files[e].state=="uploading"){this._uploadStop();a=true}this._files[e].file=null;this._files[e].name=null;this._files[e].size=null;this._files[e].state=null;this._files[e]=null;delete this._files[e];this._removeFileFromList(e);this.callEvent("onFileRemove",[c,d]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this;var d=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var c=document.createElement("DIV");c.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+d+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(c);c.firstChild.lastChild._idd=d;c.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";a._addForm()};c=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof(a)=="object"&&a!=null){if(typeof(a.state)!="undefined"){if(a.state=="cancelled"){this._onUploadAbort(this.fr._idd);a=null;return}else{if(a.state==true){if(typeof(a.size)!="undefined"&&!isNaN(a.size)){this._files[this.fr._idd].size=a.size}this._onUploadSuccess(this.fr._idd,a.name,null,a.extra);a=null;return}}}}this._onUploadFail(this.fr._idd,(a!=null&&a.extra!=null?a.extra:null))}},_addFileToQueue:function(c){var a=c.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=c.value}this._files[c._idd]={name:a,form:c.parentNode,node:c.parentNode.parentNode,input:c,state:"added"};this._addFileToList(c._idd,c.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){var a=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[a,c])!==true){return}this._files[d].input.onchange=null;this._files[d].form.removeChild(this._files[d].input);this._files[d].node.removeChild(this._files[d].form);this._files[d].node.parentNode.removeChild(this._files[d].node);this._files[d].input=null;this._files[d].name=null;this._files[d].form=null;this._files[d].node=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[a,c])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+new Date().getTime()},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXFileUploaderSWFObjects){window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(f,d,e){return window.dhtmlXFileUploaderSWFObjects.items[f].uploader[d].apply(window.dhtmlXFileUploaderSWFObjects.items[f].uploader,e)}}}var c=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,c){return(this.callEvent("onBeforeFileAdd",[a,c])===true)},_addFileToQueue:function(e,c,d){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT";a.style.position="absolute";a.style.left="0px";a.style.top=window.dhx4.absTop(this.buttons.browse)+"px";a.style.width="10px";document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[e]={name:c,size:d,state:"added"};this._addFileToList(e,c,d,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(e){if(!this._files[e]){return}var c=this._files[e].name;var d=(this._data!=null&&this._data[e]!=null?this._data[e].serverName:null);if(this.callEvent("onBeforeFileRemove",[c,d])!==true){return}var a=false;if(this._uploading&&this._files[e].state=="uploading"){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(e);this._files[e].name=null;this._files[e].size=null;this._files[e].state=null;this._files[e]=null;delete this._files[e];this._removeFileFromList(e);this.callEvent("onFileRemove",[c,d]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(d){for(var c in this._files){if(this._files[c].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null;delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(d,a,c){window.dhtmlXFileUploaderSLObjects.items[d].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[d].uploader,c)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(d,a,c){this._files[d]={name:a,size:c,state:"added"};this._addFileToList(d,a,c,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){if(!this._files[c]){return}var a=false;if(this._uploading&&this._files[c].state=="uploading"){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(c);this._files[c].name=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);if(a){this._uploadStart()}},_doUploadFile:function(c){var a=this._sl_upload_url.split("?");a=(a[1]!=null?"&"+a[1]:"");document.getElementById(this._sl_obj_id).Content.a.upload(c,this._sl_upload_url,a+"&mode=sl&dhxr"+new Date().getTime())},_uploadStop:function(d){this._uploading=false;for(var c in this._files){if(this._files[c].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(c)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var c=new ActiveXObject("AgControl.AgControl");if(c!=null){var g=4,f=0;while(c.isVersionSupported([g,f].join("."))){a=[g,f];if(++f>9){g++;f=0}}}c=null}catch(d){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){a=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return a};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.addItem=function(d,a,h,e){var c=null;if(d instanceof Array){c=d[1];d=d[0]}var g=null;if(d!=null){var g=this._getParentForm(d,c);if(g!=null){if(g.item._list==null){if(!a.listParent){a.listParent=g.item._idd}g.form._addItem("list",g.item._idd,[a],null,g.item._idd,h,e)}else{g.item._list[0].addItem(null,a,h,e)}g.form=g.item=null;g=null;this._autoCheck();return}}this._prepareItem(a,h,e);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(c,a){this._removeItem(c,a)};dhtmlXForm.prototype.removeColumn=function(j,h,e,d){var l=null;if(j instanceof Array){l=j[1];j=j[0]}if(j!=null){var g=this._getParentForm(j,l);if(g!=null){if(g.item._list!=null&&g.item._list[0]!=null){g.item._list[0].removeColumn(null,h,e,d)}g.form=g.item=null;g=null}return}h=Math.min(Math.max(h,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(e==true){this._removeItemsInColumn(this.cont.childNodes[h])}}else{if(e==true){this._removeItemsInColumn(this.cont.childNodes[h])}else{if(!d){var a=h-1;if(a<0){a=h+1}}else{var a=h+1;if(a>this.cont.childNodes.length-1){a=h-1}}while(this.cont.childNodes[h].childNodes.length>0){this.cont.childNodes[a].appendChild(this.cont.childNodes[h].childNodes[0])}}var k=[];for(var c=0;c<this.base.length;c++){if(this.cont.childNodes[h]!=this.base[c]){k.push(this.base[c])}}this.base=k;this.cont.removeChild(this.cont.childNodes[h]);this.b_index--;k=null}};dhtmlXForm.prototype.getColumnNode=function(d,c){var e=null;var a=null;if(d instanceof Array){a=d[1];d=d[0]}if(d!=null){var g=this._getParentForm(d,a);if(g!=null){if(g.item._list!=null&&g.item._list[0]!=null&&e==null){e=g.item._list[0].getColumnNode(null,c)}g.form=g.item=null;g=null}return e}if(c<0||c>this.cont.childNodes.length-1){return null}return this.cont.childNodes[c]};dhtmlXForm.prototype._removeItemsInColumn=function(e){var a=[];for(var d=0;d<e.childNodes.length;d++){var c=e.childNodes[d];if(c._idd!=null&&c._type!=null){a.push([c._idd,(c._type=="ra"?c._value:null)])}c=null}for(var d=0;d<a.length;d++){this.removeItem(a[d][0],a[d][1])}};dhtmlXForm.prototype._getParentForm=function(h,g){if(this.itemPull[this.idPrefix+h]!=null){return{form:this,item:this.itemPull[this.idPrefix+h]}}for(var c in this.itemPull){if(this.itemPull[c]._type=="ra"&&this.itemPull[c]._group==h&&this.itemPull[c]._value==g){return{form:this,item:this.itemPull[c]}}}var e=null;for(var c in this.itemPull){if(!e&&this.itemPull[c]._list!=null){for(var d=0;d<this.itemPull[c]._list.length;d++){if(!e){e=this.itemPull[c]._list[d]._getParentForm(h,g)}}}}return e};(function(){for(var c in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[c]._getItemNode){dhtmlXForm.prototype.items[c]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(c,a){if(a!=null){c=[c,a]}return this.doWithItem(c,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(j,g,f){if(typeof(f)=="undefined"){f=g}else{j=[j,g]}var d=this._getItemNode(j);if(!d){return}f=window.dhx4.s2b(f);d._required=(f==true);if(d._required){if(!d._validate){d._validate=[]}var c=false;for(var e=0;e<d._validate.length;e++){c=(d._validate[e]=="NotEmpty"||c)}if(!c){d._validate.push("NotEmpty")}var h=d.childNodes[d._ll?0:1].childNodes[0];if(!(h.lastChild&&h.lastChild.className&&h.lastChild.className.search(/required/)>=0)){var a=document.createElement("SPAN");a.className="dhxform_item_required";a.innerHTML="*";h.appendChild(a);a=h=null}}else{if(d._validate!=null){var c=d._validate;d._validate=[];for(var e=0;e<c.length;e++){if(c[e]!="NotEmpty"){d._validate.push(c[e])}}if(d._validate.length==0){d._validate=null}}var h=d.childNodes[d._ll?0:1].childNodes[0];if(h.lastChild&&h.lastChild.className&&h.lastChild.className.search(/required/)>=0){h.removeChild(h.lastChild);h=null}}this._resetValidateCss(d);d=null};dhtmlXForm.prototype.setNote=function(f,d,a){if(typeof(a)=="undefined"){a=d}else{f=[f,d]}var c=this._getItemNode(f);if(!c){return}var e=this._getNoteNode(c);if(!e){if(!a.width){a.width=c.childNodes[c._ll?1:0].childNodes[0].offsetWidth}e=document.createElement("DIV");e.className="dhxform_note";if({ch:1,ra:1}[c._type]){c.childNodes[c._ll?1:0].insertBefore(e,c.childNodes[c._ll?1:0].lastChild)}else{c.childNodes[c._ll?1:0].appendChild(e)}}e.innerHTML=a.text;if(a.width!=null){e.style.width=a.width+"px";e._w=a.width}e=null};dhtmlXForm.prototype.clearNote=function(e,c){if(typeof(c)!="undefined"){e=[e,c]}var a=this._getItemNode(e);if(!a){return}var d=this._getNoteNode(a);if(d!=null){d.parentNode.removeChild(d);d=null}};dhtmlXForm.prototype._getNoteNode=function(a){var d=null;for(var c=0;c<a.childNodes[a._ll?1:0].childNodes.length;c++){if(String(a.childNodes[a._ll?1:0].childNodes[c].className).search(/dhxform_note/)>=0){d=a.childNodes[a._ll?1:0].childNodes[c]}}a=null;return d};dhtmlXForm.prototype.setValidation=function(g,e,f){if(typeof(note)=="undefined"){f=e}else{g=[g,e]}var c=this._getItemNode(g);if(!c){return}if(c._validate!=null){for(var d=0;d<c._validate.length;d++){c._validate[d]=null}}c._validate=[];if(typeof(f)=="function"||typeof(window[f])=="function"){c._validate=[f]}else{c._validate=String(f).split(this.separator)}if(c._required){var a=false;for(var d=0;d<c._validate.length;d++){a=(c._validate[d]=="NotEmpty"||a)}if(!a){c._validate.push("NotEmpty")}}c=null};dhtmlXForm.prototype.clearValidation=function(e,d){if(typeof(d)!="undefined"){e=[e,d]}var a=this._getItemNode(e);if(!a){return}if(a._validate!=null){for(var c=0;c<a._validate.length;c++){a._validate[c]=null}}a._validate=a._required?["NotEmpty"]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,g){var c=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[c]){return}if(c=="select"||c=="multiselect"){var e=this.getOptions(a);while(e.length>0){e.remove(0)}e.length=0;e=null;if(typeof(g)=="string"){this.doWithItem(a,"doLoadOptsConnector",g)}else{if(g instanceof Array){this.doWithItem(a,"doLoadOpts",{options:g})}}}if(c=="combo"){var h=this.getCombo(a);h.clearAll();h.setComboValue("");if(typeof(g)=="string"){this.doWithItem(a,"doLoadOptsConnector",g)}else{if(g instanceof Array){var d=null;for(var f=0;f<g.length;f++){if(window.dhx4.s2b(g[f].selected)){d=g[f].value}}h.addOption(g);if(d!=null){this.setItemValue(a,d)}h=null}}}};dhtmlXForm.prototype.setTooltip=function(g,f,e){if(typeof(e)=="undefined"){e=f}else{g=[g,f]}var c=this._getItemNode(g);if(!c){return}var a=null;if(c.childNodes.length==1){a=c.childNodes[0]}else{for(var d=0;d<c.childNodes.length;d++){if(c.childNodes[d].className!=null&&c.childNodes[d].className.search("dhxform_label")>=0){a=c.childNodes[d]}}}if(a!=null){if(e==null||e.length==0){a.removeAttribute("title")}else{a.title=e}}a=null};if(!window.dhtmlx){window.dhtmlx={}}(function(){var l=null;function n(u,r){var s=u.callback;m(false);u.box.parentNode.removeChild(u.box);l=u.box=null;if(s){s(r)}}function a(s){if(l){s=s||event;var r=s.which||event.keyCode;if(dhtmlx.message.keyboard){if(r==13||r==32){n(l,true)}if(r==27){n(l,false)}}if(s.preventDefault){s.preventDefault()}return !(s.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",a)}else{document.addEventListener("keydown",a,true)}function m(s){if(!m.cover){m.cover=document.createElement("DIV");m.cover.onkeydown=a;m.cover.className="dhx_modal_cover";document.body.appendChild(m.cover)}var r=document.body.scrollHeight;m.cover.style.display=s?"inline-block":"none"}function g(s,r){return"<div class='dhtmlx_popup_button' result='"+r+"' ><div>"+s+"</div></div>"}function d(s){if(!o.area){o.area=document.createElement("DIV");o.area.className="dhtmlx_message_area";o.area.style[o.position]="5px";document.body.appendChild(o.area)}o.hide(s.id);var r=document.createElement("DIV");r.innerHTML="<div>"+s.text+"</div>";r.className="dhtmlx-info dhtmlx-"+s.type;r.onclick=function(){if(s){o.hide(s.id)}s=null};if(o.position=="bottom"&&o.area.firstChild){o.area.insertBefore(r,o.area.firstChild)}else{o.area.appendChild(r)}if(s.expire>0){o.timers[s.id]=window.setTimeout(function(){o.hide(s.id)},s.expire)}o.pull[s.id]=r;r=null;return s.id}function h(s,v,y){var x=document.createElement("DIV");x.className=" dhtmlx_modal_box dhtmlx-"+s.type;x.setAttribute("dhxbox",1);var r="";if(s.width){x.style.width=s.width}if(s.height){x.style.height=s.height}if(s.title){r+='<div class="dhtmlx_popup_title">'+s.title+"</div>"}r+='<div class="dhtmlx_popup_text"><span>'+(s.content?"":s.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(v){r+=g(s.ok||"OK",true)}if(y){r+=g(s.cancel||"Cancel",false)}if(s.buttons){for(var u=0;u<s.buttons.length;u++){r+=g(s.buttons[u],u)}}r+="</div>";x.innerHTML=r;if(s.content){var w=s.content;if(typeof w=="string"){w=document.getElementById(w)}if(w.style.display=="none"){w.style.display=""}x.childNodes[s.title?1:0].appendChild(w)}x.onclick=function(C){C=C||event;var B=C.target||C.srcElement;if(!B.className){B=B.parentNode}if(B.className=="dhtmlx_popup_button"){var A=B.getAttribute("result");A=(A=="true")||(A=="false"?false:A);n(s,A)}};s.box=x;if(v||y){l=s}return x}function q(s,u,w){var v=s.tagName?s:h(s,u,w);if(!s.hidden){m(true)}document.body.appendChild(v);var r=s.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-v.offsetWidth)/2));var A=s.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-v.offsetHeight)/2));if(s.position=="top"){v.style.top="-3px"}else{v.style.top=A+"px"}v.style.left=r+"px";v.onkeydown=a;v.focus();if(s.hidden){dhtmlx.modalbox.hide(v)}return v}function k(r){return q(r,true,false)}function c(r){return q(r,true,true)}function f(r){return q(r)}function j(s,r,u){if(typeof s!="object"){if(typeof r=="function"){u=r;r=""}s={text:s,type:r,callback:u}}return s}function e(u,s,r,v){if(typeof u!="object"){u={text:u,type:s,expire:r,id:v}}u.id=u.id||o.uid();u.expire=u.expire||o.expire;return u}dhtmlx.alert=function(){var r=j.apply(this,arguments);r.type=r.type||"confirm";return k(r)};dhtmlx.confirm=function(){var r=j.apply(this,arguments);r.type=r.type||"alert";return c(r)};dhtmlx.modalbox=function(){var r=j.apply(this,arguments);r.type=r.type||"alert";return f(r)};dhtmlx.modalbox.hide=function(r){while(r&&r.getAttribute&&!r.getAttribute("dhxbox")){r=r.parentNode}if(r){r.parentNode.removeChild(r);m(false);l=null}};var o=dhtmlx.message=function(v,u,s,w){v=e.apply(this,arguments);v.type=v.type||"info";var r=v.type.split("-")[0];switch(r){case"alert":return k(v);case"confirm":return c(v);case"modalbox":return f(v);default:return d(v);break}};o.seed=(new Date()).valueOf();o.uid=function(){return o.seed++};o.expire=4000;o.keyboard=true;o.position="top";o.pull={};o.timers={};o.hideAll=function(){for(var r in o.pull){o.hide(r)}};o.hide=function(s){var r=o.pull[s];if(r&&r.parentNode){window.setTimeout(function(){r.parentNode.removeChild(r);r=null},2000);r.className+=" hidden";if(o.timers[s]){window.clearTimeout(o.timers[s])}delete o.pull[s]}}})();
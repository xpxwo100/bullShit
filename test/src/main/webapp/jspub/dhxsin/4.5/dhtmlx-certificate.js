/*
Product Name: dhtmlxSuite 
Version: 4.5 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.5",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(c,d){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var l=g.top+a-f;var c=g.left+e-j;return{top:Math.round(l),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var j=0;j<f.length;j++){if(j>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[j]}else{d.push(f[j])}}h=d[0];for(var j=1;j<d.length;j++){e.push(d[j])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefnied"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefnied"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(j){switch(j){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var n=f.getTimezoneOffset();var l=Math.abs(Math.floor(n/60));var g=Math.abs(n)-l*60;return(n>0?"-":"+")+e(l)+":"+e(g);default:return j}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,t,y){if(t==null||typeof(t)=="undefnied"){t=window.dhx4.dateFormat[window.dhx4.dateLang]}if(y==null||typeof(y)=="undefnied"){y=window.dhx4.dateStrings[window.dhx4.dateLang]}t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var x=[];var l=[];t=t.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":l.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":l.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":l.push(e);return"(\\d{1,2})";case"%Y":l.push(e);return"(\\d{4})";case"%a":l.push(e);return"([a|p]m)";case"%A":l.push(e);return"([A|P]M)";case"%u":l.push(e);return"(\\d{1,6})";case"%P":l.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var z=new RegExp(t,"i");var m=g.match(z);if(m==null||m.length-1!=l.length){return"Invalid Date"}for(var b=1;b<m.length;b++){x.push(m[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var n={};var j={};for(var b=0;b<l.length;b++){if(typeof(c[l[b]])!="undefined"){var d=c[l[b]];if(!n[d]){n[d]=[];j[d]=[]}n[d].push(x[b]);j[d].push(l[b])}}x=[];l=[];for(var b=1;b<=7;b++){if(n[b]!=null){for(var s=0;s<n[b].length;s++){x.push(n[b][s]);l.push(j[b][s])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var o=function(r,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==r){return f}}return -1};for(var b=0;b<x.length;b++){switch(l[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(x[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[l[b]]](Number(x[b])+(l[b]=="%m"||l[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=o(x[b].toLowerCase(),y[{"%M":"monthShortName","%F":"monthFullName"}[l[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(x[b])){var u=Number(x[b]);a.setFullYear(u+(u>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(x[b])){var u=Number(x[b]);if(u<=12&&u>=0){a.setHours(u+(o("pm",x)>=0?(u==12?0:12):(u==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=x[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,d,c){if(typeof d.status=="undefined"||d.status<400){xml=(!d.responseXML)?dhx4.ajax.parse(d.responseText||d):(d.responseXML||d);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(f){return[]}}else{var d=[];var g;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(g=b.iterateNext()){d.push(g)}return d}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(a,b,c,e,g,l,d){var j=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var f=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(e==true){j.onreadystatechange=function(){if((j.readyState==4)||(f==true&&j.readyState==3)){if(j.status!=200||j.responseText==""){if(!dhx4.callEvent("onAjaxError",[{xmlDoc:j,filePath:b,async:e}])){return}}window.setTimeout(function(){if(typeof(g)=="function"){g.apply(window,[{xmlDoc:j,filePath:b,async:e}])}if(l!=null){if(typeof(l.postData)!="undefined"){dhx4.ajax.postLong(l.url,l.postData,g)}else{dhx4.ajax.getLong(l.url,g)}}g=null;j=null},1)}}}if(a=="GET"&&this.cache!=true){b+=(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"}j.open(a,b,e);if(d!=null){for(var h in d){j.setRequestHeader(h,d[h])}}else{if(a=="POST"||a=="PUT"||a=="DELETE"){j.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){c=null}}}j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.send(c);return{xmlDoc:j,filePath:b,async:e}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(o,q,r){if(arguments.length==2){r=q;q=null}var n=null;if(arguments.length==3){r=arguments[2]}if(typeof(o)=="string"){var m=o.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var v=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(v.test(m.replace(/^<\?xml[^\?]*\?>\s*/,""))){n=dhx4.ajax.parse(o);if(n!=null){n=this[this._dhxdataload.xmlToJson].apply(this,[n])}}if(n==null&&(m.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||m.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){n=dhx4.s2j(m)}if(n==null){this.callEvent("onXLS",[]);var l=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var m=this._dhxdataload.onBeforeXLS.apply(this,[o]);if(m!=null&&typeof(m)=="object"){if(m.url!=null){o=m.url}if(m.params!=null){for(var s in m.params){l.push(s+"="+encodeURIComponent(m.params[s]))}}}}var u=this;var j=function(a){var t=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){t=u[u._dhxdataload.xmlToJson].apply(u,[a.xmlDoc.responseXML])}else{t=dhx4.s2j(a.xmlDoc.responseText)}if(t!=null){u[u._dhxdataload.initObj].apply(u,[t,o])}u.callEvent("onXLE",[]);if(r!=null){if(typeof(r)=="function"){r.apply(u,[])}else{if(typeof(window[r])=="function"){window[r].apply(u,[])}}}j=r=null;t=a=u=null};l=l.join("&")+(typeof(q)=="string"?"&"+q:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(o,l,j)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(o+(l.length>0?(o.indexOf("?")>0?"&":"?")+l:""),j)}}return}}else{if(typeof(o.documentElement)=="object"||(typeof(o.tagName)!="undefined"&&typeof(o.getElementsByTagName)!="undefined"&&o.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){n=this[this._dhxdataload.xmlToJson].apply(this,[o])}else{n=window.dhx4._copyObj(o)}}if(n!=null){this[this._dhxdataload.initObj].apply(this,[n])}if(r!=null){if(typeof(r)=="function"){r.apply(this,[])}else{if(typeof(window[r])=="function"){window[r].apply(this,[])}}r=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(b,a){if(!b){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(f,c){if(!f._event_check){f._event_check={};f._event_check_size={}}for(var b in c){f._event_check[b.toLowerCase()]=c[b];var e=-1;for(var d in c[b]){e++}f._event_check_size[b.toLowerCase()]=e}};dhtmlx.assert_method_info=function(e,b,d,f){var a=[];for(var c=0;c<f.length;c++){a.push(f[c][0]+" : "+f[c][1]+"\n   "+f[c][2].describe()+(f[c][3]?"; optional":""))}return e.name+"."+b+"\n"+d+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(c,a){for(var b in a){dhtmlx.assert_method_process(c,b,a[b].descr,a[b].args,(a[b].min||99),a[b].skip)}};dhtmlx.assert_method_process=function(f,b,e,g,c,d){var a=f[b];if(!d){f[b]=function(){if(arguments.length!=g.length&&arguments.length<c){dhtmlx.log("warn","Incorrect count of parameters\n"+f[b].describe()+"\n\nExpecting "+g.length+" but have only "+arguments.length)}else{for(var h=0;h<g.length;h++){if(!g[h][3]&&!g[h][2](arguments[h])){dhtmlx.log("warn","Incorrect method call\n"+f[b].describe()+"\n\nActual value of "+(h+1)+" parameter: {"+(typeof arguments[h])+"} "+arguments[h])}}}return a.apply(this,arguments)}}f[b].describe=function(){return dhtmlx.assert_method_info(f,b,e,g)}};dhtmlx.assert_event_call=function(c,b,a){if(c._event_check){if(!c._event_check[b]){dhtmlx.log("warn","Not expected event call :"+b)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+b)}else{if(c._event_check_size[b]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+c._event_check_size[b]+" parameter(s), but have "+a.length+" parameter(s), for "+b+" event")}}}}};dhtmlx.assert_event_attach=function(b,a){if(b._event_check&&!b._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(b,a){if(!b._settings_check){b._settings_check={}}dhtmlx.extend(b._settings_check,a)};dhtmlx.assert_check=function(c,b){if(typeof c=="object"){for(var a in c){dhtmlx.assert_settings(a,c[a],b)}}};dhtmlx.assert_settings=function(h,e,d){d=d||this._settings_check;if(d){if(!d[h]){return dhtmlx.log("warn","Unknown propery: "+h)}var g="";var b="";var a=false;for(var c=0;c<d[h].length;c++){var f=d[h][c];if(typeof f=="string"){continue}if(typeof f=="function"){a=a||f(e)}else{if(typeof f=="object"&&typeof f[1]=="function"){a=a||f[1](e);if(a&&f[2]){dhtmlx.assert_check(e,f[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(h,d)+"\nActual value: {"+(typeof e)+"} "+e)}}};dhtmlx.assert_info=function(b,f){var a=f[b];var e="";var d=[];for(var c=0;c<a.length;c++){if(typeof rule=="string"){e=a[c]}else{if(a[c].describe){d.push(a[c].describe())}else{if(a[c][1]&&a[c][1].describe){d.push(a[c][1].describe())}}}}return"Property: "+b+", "+e+" \nExpected value: \n - "+d.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,b){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(b){var a=function(c){return b[c]};a.describe=function(){var d=[];for(var c in b){d.push(c)}return"{String} can take one of next values: "+d.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(d,c){var e=function(a){if(d(a)||c(a)){return true}return false};e.describe=function(){return d.describe()};return e}}dhtmlx.codebase="./";dhtmlx.copy=function(b){var a=dhtmlx.copy._function;a.prototype=b;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(b,a){for(var c in a){b[c]=a[c]}if(dhtmlx.assert_enabled()&&a._assert){b._assert();b._assert=null}dhtmlx.assert(b,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){b._init()}return b};dhtmlx.proto_extend=function(){var f=arguments;var c=f[0];var b=[];for(var e=f.length-1;e>0;e--){if(typeof f[e]=="function"){f[e]=f[e].prototype}for(var d in f[e]){if(d=="_init"){b.push(f[e][d])}else{if(!c[d]){c[d]=f[e][d]}}}}if(f[0]._init){b.push(f[0]._init)}c._init=function(){for(var g=0;g<b.length;g++){b[g].apply(this,arguments)}};c.base=f[1];var a=function(g){this._init(g);if(this._parseSettings){this._parseSettings(g,this.defaults)}};a.prototype=c;c=f=null;return a};dhtmlx.bind=function(b,a){return function(){return b.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,c,b){return function(){var d=false;d=a[c].apply(a,arguments);return d}};dhtmlx.isNotDefined=function(b){return typeof b=="undefined"};dhtmlx.delay=function(d,b,c,a){setTimeout(function(){var e=d.apply(b,c);d=b=c=null;return e},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(d,c,a,b){d=dhtmlx.toNode(d);var e=dhtmlx.uid();dhtmlx._events[e]=[d,c,a];if(b){a=dhtmlx.bind(a,b)}if(d.addEventListener){d.addEventListener(c,a,false)}else{if(d.attachEvent){d.attachEvent("on"+c,a)}}return e};dhtmlx.eventRemove=function(b){if(!b){return}dhtmlx.assert(this._events[b],"Removing non-existing event");var a=dhtmlx._events[b];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[b]};dhtmlx.log=function(b,c,a){if(window.console&&console.log){b=b.toLowerCase();if(window.console[b]){window.console[b](c||"unknown error")}else{window.console.log(b+": "+c)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var c="_start_time_log"+a;if(!dhtmlx[c]){dhtmlx[c]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx[c].valueOf())/1000+"s");dhtmlx[c]=null}};dhtmlx.error=function(b,a){dhtmlx.log("error",b,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(c,e){if(this._events._block){return true}c=c.toLowerCase();dhtmlx.assert_event_call(this,c,e);var d=this._events[c.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+c,e)}if(d){for(var b=0;b<d.length;b++){if(d[b].apply(this,(e||[]))===false){a=false}}}if(this._map[c]&&!this._map[c].callEvent(c,e)){a=false}return a},attachEvent:function(b,a,d){b=b.toLowerCase();dhtmlx.assert_event_attach(this,b);d=d||dhtmlx.uid();a=dhtmlx.toFunctor(a);var c=this._events[b]||dhtmlx.toArray();c.push(a);this._events[b]=c;this._handlers[d]={f:a,t:b};return d},detachEvent:function(d){if(this._handlers[d]){var b=this._handlers[d].t;var a=this._handlers[d].f;var c=this._events[b];c.remove(a);delete this._handlers[d]}}};dhtmlx.PowerArray={removeAt:function(b,a){if(b>=0){this.splice(b,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,d){if(!d&&d!==0){this.push(c)}else{var a=this.splice(d,(this.length-d));this[d]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,c){for(var b=0;b<this.length;b++){a.call((c||this),this[b])}},map:function(a,c){for(var b=0;b<this.length;b++){this[b]=a.call((c||this),this[b])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var e=document.createElement("DIV");var c;for(var b=0;b<a.names.length;b++){while(p=a[a.names[b]].pop()){if(typeof e.style[p]!="undefined"){dhtmlx.env[a.names[b]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(b,a,c){a=a||{};var d=document.createElement(b);for(var e in a){d.setAttribute(e,a[e])}if(a.style){d.style.cssText=a.style}if(a["class"]){d.className=a["class"]}if(c){d.innerHTML=c}return d},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.remove(b[a])}}else{if(b&&b.parentNode){b.parentNode.removeChild(b)}}},insertBefore:function(b,c,a){if(!b){return}if(c){c.parentNode.insertBefore(b,c)}else{a.appendChild(b)}},locate:function(b,d){b=b||event;var a=b.target||b.srcElement;while(a){if(a.getAttribute){var c=a.getAttribute(d);if(c){return c}}a=a.parentNode}return null},offset:function(d){if(d.getBoundingClientRect){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var l=g.top+a-f;var c=g.left+e-j;return{y:Math.round(l),x:Math.round(c)}}else{var l=0,c=0;while(d){l=l+parseInt(d.offsetTop,10);c=c+parseInt(d.offsetLeft,10);d=d.offsetParent}return{y:l,x:c}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var b=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(b,a){b.className+=" "+a},removeCss:function(b,a){b.className=b.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var c=0;c<dhtmlx.destructors.length;c++){dhtmlx.destructors[c].destructor()}dhtmlx.destructors=[]}for(var b in dhtmlx._events){var d=dhtmlx._events[b];if(d[0].removeEventListener){d[0].removeEventListener(d[1],d[2],false)}else{if(d[0].detachEvent){d[0].detachEvent("on"+d[1],d[2])}}delete dhtmlx._events[b]}});dhtmlx.ajax=function(a,b,c){if(arguments.length!==0){var d=new dhtmlx.ajax();if(c){d.master=c}d.get(a,null,b)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(e,j,g){var b=this.getXHR();if(typeof g=="function"){g=[g]}if(typeof j=="object"){var f=[];for(var c in j){var h=j[c];if(h===null||h===dhtmlx.undefined){h=""}f.push(c+"="+encodeURIComponent(h))}j=f.join("&")}if(j&&!this.post){e=e+(e.indexOf("?")!=-1?"&":"?")+j;j=null}b.open(this.post?"POST":"GET",e,!this._sync);if(this.post){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var d=this;b.onreadystatechange=function(){if(!b.readyState||b.readyState==4){if(g&&d){for(var a=0;a<g.length;a++){if(g[a]){g[a].call((d.master||d),b.responseText,b.responseXML,b)}}}d.master=null;g=d=null}};b.send(j||null);return b},get:function(a,c,b){this.post=false;return this.send(a,c,b)},post:function(a,c,b){this.post=true;return this.send(a,c,b)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,b){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhtmlx.DataDriver[b];b=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}dhtmlx.ajax(a,[this._onLoad,b],this)},parse:function(b,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(b,null)},_onLoad:function(e,b,a){var c=this.data.driver;var d=c.getRecords(c.toObject(e,b))[0];this.data=(c?c.getDetails(d):e);this.callEvent("onXLE",[])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||!b){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(b.id||b),b)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(d,c){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(d)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&a.data){a=a.data}if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(b){if(typeof b=="string"){var a=null;if(b.indexOf("<")==-1){a=dhtmlx.toNode(b)}if(!a){a=document.createElement("DIV");a.innerHTML=b}return a.getElementsByTagName(this.tag)}return b},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(c){var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(c){c=this.stringToArray(c);var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(b){b=b.split(this.cell);for(var a=0;a<b.length;a++){b[a]=b[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return b},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(b,a){if(a&&(a=this.checkResponse(b,a))){return a}if(typeof b=="string"){return this.fromString(b)}return b},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(d,l){if(window.XPathResult){var c=d;if(d.nodeName.indexOf("document")==-1){d=d.ownerDocument}var h=[];var b=d.evaluate(l,c,null,XPathResult.ANY_TYPE,null);var j=b.iterateNext();while(j){h.push(j);j=b.iterateNext()}return h}else{var g=true;try{if(typeof(d.selectNodes)=="undefined"){g=false}}catch(f){}if(g){return d.selectNodes(l)}else{var a=l.split("/").pop();return d.getElementsByTagName(a)}}},tagToObject:function(d,l){l=l||{};var f=false;var e=d.attributes;if(e&&e.length){for(var h=0;h<e.length;h++){l[e[h].name]=e[h].value}f=true}var c=d.childNodes;var j={};for(var h=0;h<c.length;h++){if(c[h].nodeType==1){var g=c[h].tagName;if(typeof l[g]!="undefined"){if(!(l[g] instanceof Array)){l[g]=[l[g]]}l[g].push(this.tagToObject(c[h],{}))}else{l[c[h].tagName]=this.tagToObject(c[h],{})}f=true}}if(!f){return this.nodeValue(d)}l.value=this.nodeValue(d);return l},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(b){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(b,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(b);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(d,c){if(c&&(c.firstChild&&c.firstChild.tagName!="parsererror")){return c}var b=this.fromString(d.replace(/^[\s]+/,""));if(b){return b}dhtmlx.error("xml can't be parsed",d)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,b){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(d,c){if(this._load_count){return this._load_count=[d,c]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+d+"&count="+c,function(){var e=this._load_count;this._load_count=false;if(typeof e=="object"){this.data.feed.apply(this,e)}})}}},_onLoad:function(c,b,a){this.data._parse(this.data.driver.toObject(c,b));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(g,f){if(this._settings.dataFeed){var e={};if(!g&&!e){return}if(typeof g=="function"){if(!f){return}g(f,e)}else{e={text:f}}this.clearAll();var b=this._settings.dataFeed;if(typeof b=="function"){return b.call(this,f,e)}var d=[];for(var c in e){d.push("dhx_filter["+c+"]="+encodeURIComponent(e[c]))}this.load(b+(b.indexOf("?")<0?"?":"&")+d.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(e){this.callEvent("onParse",[this.driver,e]);if(this._filter_order){this.filter()}var f=this.driver.getInfo(e);if(f._key){dhtmlx.security_key=f._key}var d=this.driver.getRecords(e);var h=(f._from||0)*1;if(h===0&&this.order[0]){h=this.order.length}var b=0;for(var c=0;c<d.length;c++){var a=this.driver.getDetails(d[c]);var g=this.id(a);if(!this.pull[g]){this.order[b+h]=g;b++}this.pull[g]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var c=0;c<f._size;c++){if(!this.order[c]){var g=dhtmlx.uid();var a={id:g,$template:"loading"};this.pull[g]=a;this.order[c]=g}}this.callEvent("onStoreLoad",[this.driver,e]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(b,a){dhtmlx.assert(this.pull[b],"Can't change id, for non existing item: "+b);this.pull[a]=this.pull[b];this.pull[a].id=a;this.order[this.order.find(b)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(b)]=a}this.callEvent("onIdChange",[b,a]);if(this._render_change_id){this._render_change_id(b,a)}},get:function(a){return this.item(a)},set:function(b,a){return this.update(b,a)},item:function(a){return this.pull[a]},update:function(b,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[b,a])===false){return false}this.pull[b]=a;this.refresh(b)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(d,c){if(d){d=this.indexById(d)}else{d=this.startOffset||0}if(c){c=this.indexById(c)}else{c=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(c<0){c=0}}if(d>c){var b=c;c=d;d=b}return this.getIndexRange(d,c)},getIndexRange:function(d,c){c=Math.min((c||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var b=(d||0);b<=c;b++){a.push(this.item(this.order[b]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,d){if(a<0||d<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var c=this.idByIndex(a);var b=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,d));this.callEvent("onStoreUpdated",[c,b,"move"])},scheme:function(a){this._scheme=a},sync:function(e,d,a){if(typeof d!="function"){a=d;d=null}if(dhtmlx.debug_bind){this.debug_sync_master=e;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var c=e;if(e.name!="DataStore"){e=e.data}var b=dhtmlx.bind(function(h,f,g){if(g!="update"||d){h=null}if(!h){this.order=dhtmlx.toArray([].concat(e.order));this._filter_order=null;this.pull=e.pull;if(d){this.silent(d)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(h)}else{a=false}},this);e.attachEvent("onStoreUpdated",b);this.feed=function(g,f){c.loadNext(f,g)};b()},add:function(e,a){if(this._scheme){e=e||{};for(var b in this._scheme){e[b]=e[b]||this._scheme[b]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(e)}else{if(this._scheme.$update){this._scheme.$update(e)}}}}var f=this.id(e);var d=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=d}if(a>d){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[f,e,a])===false){return false}if(this.exists(f)){return dhtmlx.error("Not unique ID")}this.pull[f]=e;this.order.insertAt(f,a);if(this._filter_order){var c=this._filter_order.length;if(!a&&this.order.length){c=0}this._filter_order.insertAt(f,c)}this.callEvent("onafterAdd",[f,a]);this.callEvent("onStoreUpdated",[f,e,"add"]);return f},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}return}if(this.callEvent("onBeforeDelete",[c])===false){return false}if(!this.exists(c)){return dhtmlx.error("Not existing ID",c)}var b=this.item(c);this.order.remove(c);if(this._filter_order){this._filter_order.remove(c)}delete this.pull[c];this.callEvent("onafterdelete",[c]);this.callEvent("onStoreUpdated",[c,b,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(b){var a=this.order.find(b);return a},next:function(b,a){return this.order[this.indexById(b)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(b,a){return this.order[this.indexById(b)-(a||1)]},sort:function(f,b,a){var c=f;if(typeof f=="function"){c={as:f,dir:b}}else{if(typeof f=="string"){c={by:f,dir:b,as:a}}}var e=[c.by,c.dir,c.as];if(!this.callEvent("onbeforesort",e)){return}if(this.order.length){var g=dhtmlx.sort.create(c);var d=this.getRange(this.first(),this.last());d.sort(g);this.order=d.map(function(h){return this.id(h)},this)}this.refresh();this.callEvent("onaftersort",e)},filter:function(e,d){if(!this.callEvent("onBeforeFilter",[e,d])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(e){var b=e;d=d||"";if(typeof e=="string"){e=dhtmlx.Template.fromHTML(e);d=d.toString().toLowerCase();b=function(h,g){return e(h).toLowerCase().indexOf(g)!=-1}}var c=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var f=this.order[a];if(b(this.item(f),d)){c.push(f)}}this._filter_order=this.order;this.order=c}this.refresh();this.callEvent("onAfterFilter",[])},each:function(c,b){for(var a=0;a<this.order.length;a++){c.call((b||this),this.item(this.order[a]))}},provideApi:function(d,b){this.debug_bind_master=d;if(b){this.mapEvent({onbeforesort:d,onaftersort:d,onbeforeadd:d,onafteradd:d,onbeforedelete:d,onafterdelete:d,onbeforeupdate:d})}var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<c.length;a++){d[c[a]]=dhtmlx.methodPush(this,c[a])}if(dhtmlx.assert_enabled()){this.assert_event(d)}},serialize:function(){var c=this.order;var a=[];for(var b=0;b<c.length;b++){a.push(this.pull[c[b]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(d,c){d=d*1;c=c*1;return d>c?1:(d<c?-1:0)},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:(d<c?-1:0)},string:function(d,c){d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:(d<c?-1:0)}},by:function(b,a){if(!b){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}b=dhtmlx.Template.fromHTML(b);return function(d,c){return a(b(d),b(c))}},dir:function(b,a){if(b=="asc"){return a}return function(d,c){return a(d,c)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(b){b=b||event;var a=b.which||b.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,b.ctrlKey,b.shiftKey,b])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);if(b&&!this.callEvent("onBeforeContextMenu",[b,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(g,f,b){g=g||event;var a=g.target||g.srcElement;var c="";var h=null;var d=false;while(a&&a.parentNode){if(!d&&a.getAttribute){h=a.getAttribute(this._id);if(h){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[h,a,g])}if(!this.callEvent("on"+b,[h,g,a])){return}d=true}}c=a.className;if(c){c=c.split(" ");c=c[0]||c[1];if(f[c]){return f[c].call(this,g,h||dhtmlx.html.locate(g,this._id),a)}}a=a.parentNode}return d}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(b,a){if(typeof b=="object"){return this._parseSeetingColl(b)}return this._define(b,a)},_define:function(b,a){dhtmlx.assert_settings.call(this,b,a);var c=this[b+"_setter"];return this._settings[b]=c?c.call(this,a):a},_parseSeetingColl:function(c){if(c){for(var b in c){this._define(b,c[b])}}},_parseSettings:function(c,a){var b=dhtmlx.extend({},a);if(typeof c=="object"&&!c.tagName){dhtmlx.extend(b,c)}this._parseSeetingColl(b)},_mergeSettings:function(a,c){for(var b in c){switch(typeof a[b]){case"object":a[b]=this._mergeSettings((a[b]||{}),c[b]);break;case"undefined":a[b]=c[b];break;default:break}}return a},_parseContainer:function(b,a,c){if(typeof b=="object"&&!b.tagName){b=b.container}this._obj=this.$view=dhtmlx.toNode(b);if(!this._obj&&c){this._obj=c(b)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(b){var a=dhtmlx.Template.setter(b);var c=this;return function(){return a.apply(c,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(c,b){if(!c.types&&c.prototype.types){c=c.prototype}if(dhtmlx.assert_enabled()){this.assert_event(b)}var a=b.name||"default";this._template(b);this._template(b,"edit");this._template(b,"loading");c.types[a]=dhtmlx.extend(dhtmlx.extend({},(c.types[a]||this._default)),b);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(c,a){a="template"+(a?("_"+a):"");var b=c[a];if(b&&(typeof b=="string")){if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case"html":b=dhtmlx.html.getValue(b[1]).replace(/\"/g,'\\"');break;case"http":b=new dhtmlx.ajax().sync().get(b[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}c[a]=dhtmlx.Template.fromHTML(b)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,b){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=b.y+this._settings.dy+"px";this._obj.style.left=b.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(b){var a=new dhtmlx.ui.Tooltip(b);this.attachEvent("onMouseMove",function(d,c){a.show(this.get(d),dhtmlx.html.pos(c))});this.attachEvent("onMouseOut",function(d,c){a.hide()});this.attachEvent("onMouseMoving",function(d,c){a.hide()});return a}};dhtmlx.compat=function(a,b){if(dhtmlx.compat[a]){dhtmlx.compat[a](b)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(b,a){var e=document.createElement("DIV");e.id="CustomObject_"+dhtmlx.uid();e.style.width="100%";e.style.height="100%";e.cmp="grid";document.body.appendChild(e);this.attachObject(e.id);a.container=e.id;var d=this.vs[this.av];d.grid=new window[b](a);d.gridId=e.id;d.gridObj=e;d.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var c="_viewRestore";return this.vs[this[c]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var d in this.conf.idx){this.conf.idx[d]=null;delete this.conf.idx[d]}for(var g=0;g<this.cell.childNodes.length;g++){var e=this.cell.childNodes[g].className;for(var d in this.conf.idx_data){var f=new RegExp(this.conf.idx_data[d]);if(e.match(f)!=null){this.conf.idx[d]=g}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var d in this.dataNodes){if(this.dataNodes[d]!=null&&typeof(this.dataNodes[d].setSizes)=="function"){this.dataNodes[d].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(o,m,q,g,j,l,e,f){if(this.conf.size==null){this.conf.size={}}if(f==null){f={}}var r={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=o;this.conf.size.y=m;this.conf.size.w=Math.max(q,0);this.conf.size.h=Math.max(g,0);for(var n in r){var d=(f[n]||n);this.cell.style[d]=this.conf.size[r[n]]+"px"}this.callEvent("_onSetSize",[]);if(l!==true){this._adjustCont(j,e)}else{this._adjustAttached(j)}this._adjustProgress()};this._adjustCont=function(j,g){var h=this.cell.childNodes[this.conf.idx.cont];var f=0;for(var d in this.conf.ofs_nodes.t){var e=this.conf.ofs_nodes.t[d];f+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}var l=0;for(var d in this.conf.ofs_nodes.b){var e=this.conf.ofs_nodes.b[d];l+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}h.style.left="0px";h.style.top=f+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};h.style.width=this.cell.offsetWidth+"px";h.style.height=Math.max(this.cell.offsetHeight-f-l,0)+"px";this.conf.cells_cont.w=parseInt(h.style.width)-h.offsetWidth;this.conf.cells_cont.h=parseInt(h.style.height)-h.offsetHeight}h.style.left="0px";h.style.top=f+"px";h.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";h.style.height=Math.max(this.conf.size.h-f-l+this.conf.cells_cont.h,0)+"px";h=null;this._adjustAttached(j);if(g=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var e=["menu","toolbar","ribbon"];for(var g=0;g<e.length;g++){if(this.conf.idx[e[g]]!=null){var h=this.cell.childNodes[this.conf.idx[e[g]]];var f="dhx_cell_"+e[g]+"_no_borders";var d="dhx_cell_"+e[g]+"_def";h.className=h.className.replace(new RegExp(this.conf.borders?f:d),this.conf.borders?d:f);h=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(f){this.views[f]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var g=this.cell.childNodes[this.conf.idx.cont];while(g.childNodes.length>0){this.views[f].cellCont.push(g.firstChild);g.removeChild(g.firstChild)}g=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var e in this.dataNodes){for(var d in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[d][e])!="undefined"){this.views[f].ofs_nodes[d][e]=this.conf.ofs_nodes[d][e];this.conf.ofs_nodes[d][e]=null;delete this.conf.ofs_nodes[d][e]}}this.views[f].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[f].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];this._updateIdx()}this.callEvent("_onViewSave",[f])};this._viewRestore=function(f){if(this.views[f]==null){return}this.dataObj=this.views[f].dataObj;this.dataType=this.views[f].dataType;this.conf.url_data=this.views[f].url_data;for(var g=0;g<this.views[f].cellCont.length;g++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[f].cellCont[g])}for(var e in this.views[f].dataNodes){this.dataNodes[e]=this.views[f].dataNodes[e];if(e=="menu"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(e=="toolbar"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="ribbon"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="sb"){this.cell.appendChild(this.views[f].dataNodesCont[e])}this._updateIdx()}for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.conf.ofs_nodes[e][d]=this.views[f].ofs_nodes[e][d]}}if(this.conf.borders!=this.views[f].borders){this[this.views[f].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[f]);this._viewDelete(f)};this._viewDelete=function(f){if(this.views[f]==null){return}this.views[f].borders=null;for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.views[f].ofs_nodes[e][d]=null}this.views[f].ofs_nodes[e]=null}this.views[f].dataType=null;this.views[f].dataObj=null;this.views[f].url_data=null;for(var g=0;g<this.views[f].cellCont.length;g++){this.views[f].cellCont[g]=null}this.views[f].cellCont=null;for(var e in this.views[f].dataNodes){this.views[f].dataNodes[e]=null;this.views[f].dataNodesCont[e]=null}this.views[f].dataNodes=this.views[f].dataNodesCont=null;this.views[f]=null;delete this.views[f]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(d){if(d==this.conf.view){var e=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=e;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[d]==null){return}var c=this.views[d];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(d);if(typeof(this.conf.views_loaded[d])!="undefined"){delete this.conf.views_loaded[d]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");a.className=this.conf.idx_data.pr2;if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(d,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){c=false}if(typeof(d)=="string"){d=document.getElementById(d)}if(d.parentNode==this.cell.childNodes[this.conf.idx.cont]){d=null;return}if(c){d.style.display="";var a=d.offsetWidth;var b=d.offsetHeight}this._attachObject(d);this.dataType="obj";d.style.display="";d=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(b,l,c){if(c==true){c={}}var d=(typeof(c)!="undefined"&&c!=false&&c!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(l==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(l==true){var j=this;if(d){var e="";for(var h in c){e+="&"+encodeURIComponent(h)+"="+encodeURIComponent(c[h])}dhx4.ajax.post(b,e,function(a){j.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(j._doOnFrameContentLoaded)=="function"){j._doOnFrameContentLoaded()}j.dataType="url-ajax";j=a=null})}else{dhx4.ajax.get(b,function(a){j.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(j._doOnFrameContentLoaded)=="function"){j._doOnFrameContentLoaded()}j.dataType="url-ajax";j=a=null})}}else{if(this.dataType=="url"){var f=this.getFrame()}else{var f=document.createElement("IFRAME");f.frameBorder=0;f.border=0;f.style.width="100%";f.style.height="100%";f.style.position="relative";this._attachObject(f);this.dataType="url";this._attachURLEvents()}if(d){var g=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(g){this._attachURLEvents()}f.src="about:blank"}else{f.src=b+(window.dhx4.ajax.cache!=true?(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime():"")}f=null}f=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,g,b,d){d=d||window.scheduler;var e=false;if(b){var f=document.getElementById(b);if(f){e=true}}if(!e){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var f=document.createElement("DIV");f.id="dhxSchedObj_"+new Date().getTime();f.style.width="100%";f.style.height="100%";f.style.position="relative";f.style.overflow="hidden";f.className="dhx_cal_container";f.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(f);this.dataType="scheduler";this.dataObj=d;this.dataObj.setSizes=function(){this.update_view()};d.init(f.id,a,g);f=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(g,d,f,a,e){if(typeof(e)!="undefined"){g=e}else{var b=d||{};var j=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var g=document.createElement("DIV");g.className="dhx_cell_statusbar_def";g.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+j+"</div>";if(c!=false){g.firstChild.style.height=g.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(g)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return g};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(d){c.callEvent("_onContentMouseDown",[b,d||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(d){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(d){}}}else{a.onreadystatechange=function(d){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(f){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(f){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(e,b,d,a,c){if(typeof(e)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[e]==1){return this["_createNode_"+e].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(d)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=d}else{this.cell.childNodes[this.conf.idx.cont].appendChild(e)}e=null};dhtmlXCellObject.prototype._detachObject=function(e,b,a){this.callEvent("_onBeforeContentDetach",[]);if(e=="menu"||e=="toolbar"||e=="ribbon"||e=="sb"){var d=this.cell.childNodes[this.conf.idx[e]];d.parentNode.removeChild(d);d=null;this.conf.ofs_nodes[e=="sb"?"b":"t"][e]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var d=this.cell.childNodes[this.conf.idx.cont];while(d.childNodes.length>0){if(a===false){d.removeChild(d.lastChild)}else{d.firstChild.style.display="none";a.appendChild(d.firstChild)}}if(this.conf.append_mode){d.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=d=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var d="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){d="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(d=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(d=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(d,b){if(arguments.length==0||typeof(d)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(d==document.body){this.conf.fs_mode=true;this.base=d;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(d)=="string"?document.getElementById(d):d)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(f){}}}this._adjustCont=function(){var h=this.conf.ofs.t;for(var g in this.conf.ofs_nodes.t){h+=(this.conf.ofs_nodes.t[g]==true?this.dataNodes[g].offsetHeight:0)}var e=this.conf.ofs.b;for(var g in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[g]==true?this.dataNodes[g].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=h+"px";this.cont.style.height=this.base.clientHeight-h-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};d=null}dhtmlXCellTop.prototype.setOffsets=function(f,e){var d=false;for(var b in f){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(f[b])){this.conf.ofs[c]=parseInt(f[b]);d=true}}if(e!==false&&typeof(this.setSizes)=="function"&&d==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");a.className="dhxcelltop_progress_img";this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var d={dhxcelltop_progress:true,dhxcelltop_progress_img:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&d[this.base.childNodes[c].className]==true){d[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in d){if(d[b]!=true){this.base.removeChild(d[b])}d[b]=null}this.conf.progress=false;d=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXCalendarObject(f,m){this.i={};var c=null;if(typeof(f)=="string"){var d=document.getElementById(f)}else{var d=f}if(d&&typeof(d)=="object"&&d.tagName&&String(d.tagName).toLowerCase()!="input"){c=d}d=null;if(typeof(f)!="object"||!f.length){f=[f]}for(var b=0;b<f.length;b++){if(typeof(f[b])=="string"){f[b]=(document.getElementById(f[b])||null)}if(f[b]!=null&&f[b].tagName&&String(f[b].tagName).toLowerCase()=="input"){this.i[window.dhx4.newId()]={input:f[b]}}else{if(!(f[b] instanceof Array)&&f[b] instanceof Object&&(f[b].input!=null||f[b].button!=null)){if(f[b].input!=null&&typeof(f[b].input)=="string"){f[b].input=document.getElementById(f[b].input)}if(f[b].button!=null&&typeof(f[b].button)=="string"){f[b].button=document.getElementById(f[b].button)}this.i[window.dhx4.newId()]=f[b]}}f[b]=null}this.conf={skin:(m||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue"),zi:window.dhx4.newId(),touch:!window.dhx4.isIE,ws_first:true};this.setSkin=function(n,a){if(this.conf.skin==n&&!a){return}this.conf.skin=n;this.base.className="dhtmlxcalendar_"+this.conf.skin;this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));if(c!=null){this._hasParent=true;c.appendChild(this.base);c=null}else{document.body.appendChild(this.base)}this.setParent=function(a){if(this._hasParent){if(typeof(a)=="object"){a.appendChild(this.base)}else{if(typeof(a)=="string"){document.getElementById(a).appendChild(this.base)}}}};this.setSkin(this.conf.skin,true);this.base.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.cancelBubble=true};this.base.onmousedown=function(){return false};if(this.conf.touch){this.base.ontouchstart=this.base.onclick}this.loadUserLanguage=function(r){if(!this.langData[r]){return}this.lang=r;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont){var o=0;for(var n=0;n<this.msCont.childNodes.length;n++){for(var a=0;a<this.msCont.childNodes[n].childNodes.length;a++){this.msCont.childNodes[n].childNodes[a].innerHTML=this.langData[this.lang].monthesSNames[o++]}}}};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contMonth.appendChild(g);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";l.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";g.appendChild(l);var e=this;l.onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}var n=(q.target||q.srcElement);if(n.className&&n.className.indexOf("dhtmlxcalendar_month_arrow")===0){e._hideSelector();var o=(n.parentNode.firstChild==n?-1:1);var a=new Date(e._activeMonth);e._drawMonth(new Date(e._activeMonth.getFullYear(),e._activeMonth.getMonth()+o,1,0,0,0,0));e._evOnArrowClick([a,new Date(e._activeMonth)]);return}if(n.className&&n.className=="dhtmlxcalendar_month_label_month"){q.cancelBubble=true;e._showSelector("month",Math.round(n.offsetLeft+n.offsetWidth/2),n.offsetTop+n.offsetHeight+2,"selector_month",true);return}if(n.className&&n.className=="dhtmlxcalendar_month_label_year"){q.cancelBubble=true;e._showSelector("year",Math.round(n.offsetLeft+n.offsetWidth/2),n.offsetTop+n.offsetHeight+2,"selector_year",true);return}e._hideSelector()};if(this.conf.touch==true){l.ontouchstart=l.onclick}this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){if(a==0){a=7}this._wStart=Math.min(Math.max((isNaN(a)?1:a),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var r=document.createElement("UL");r.className="dhtmlxcalendar_line";this.contDays.appendChild(r)}else{var r=this.contDays.firstChild}var n=this._wStart;var o=this.langData[this.lang].daysSNames;o.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var s=0;s<8;s++){if(r.childNodes[s]==null){var a=document.createElement("LI");r.appendChild(a)}else{var a=r.childNodes[s]}if(s==0){a.className="dhtmlxcalendar_cell_wn";a.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"}else{a.className="dhtmlxcalendar_cell"+(n>=6?" dhtmlxcalendar_day_weekday_cell":"")+(s==1?"_first":"");a.innerHTML=o[n];if(++n>7){n=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(s){s=s||event;if(s.type=="touchstart"&&s.preventDefault!=null){s.preventDefault()}var n=(s.target||s.srcElement);if(n.parentNode!=null&&n.parentNode._date!=null){n=n.parentNode}if(n._date!=null&&!n._css_dis){var q=e._activeDate.getHours();var o=e._activeDate.getMinutes();var r=n._date;if(e.checkEvent("onBeforeChange")){if(!e.callEvent("onBeforeChange",[new Date(n._date.getFullYear(),n._date.getMonth(),n._date.getDate(),q,o)])){return}}if(e._activeDateCell!=null){e._activeDateCell._css_date=false;e._updateCellStyle(e._activeDateCell._q,e._activeDateCell._w)}var a=(e._activeDate.getFullYear()+"_"+e._activeDate.getMonth()!=r.getFullYear()+"_"+r.getMonth());e._nullDate=false;e._activeDate=new Date(r.getFullYear(),r.getMonth(),r.getDate(),q,o);e._activeDateCell=n;e._activeDateCell._css_date=true;e._activeDateCell._css_hover=false;e._updateCellStyle(e._activeDateCell._q,e._activeDateCell._w);if(a){e._drawMonth(e._activeDate)}if(e._activeInp&&e.i[e._activeInp]&&e.i[e._activeInp].input!=null){e.i[e._activeInp].input.value=e._dateToStr(new Date(e._activeDate.getTime()))}if(!e._hasParent){if(s.type=="touchstart"){window.setTimeout(function(){e._hide()},400)}else{e._hide()}}e._evOnClick([new Date(e._activeDate.getTime())])}};if(this.conf.touch==true){this.contDates.ontouchstart=this.contDates.onclick}this.contDates.onmouseover=function(n){n=n||event;var a=(n.target||n.srcElement);if(a.parentNode!=null&&a.parentNode._date!=null){a=a.parentNode}if(a._date!=null){if(e._lastHover==a||a._css_hover){return}a._css_hover=true;e._updateCellStyle(a._q,a._w);e._lastHover=a;e._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),n]);a=null}};this.contDates.onmouseout=function(a){e._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);if(a!=null){e._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a])}this._lastHover=null};for(var b=0;b<6;b++){var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contDates.appendChild(g);for(var j=0;j<=7;j++){var l=document.createElement("LI");if(j==0){l.className="dhtmlxcalendar_cell_wn"}else{l.className="dhtmlxcalendar_cell"}g.appendChild(l)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.contTime.style.display="";this._ifrSize()};this.hideTime=function(){this.contTime.style.display="none";this._ifrSize()};var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contTime.appendChild(g);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";l.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>";g.appendChild(l);l.onclick=function(o){o=o||event;if(o.type=="touchstart"&&o.preventDefault!=null){o.preventDefault()}var a=(o.target||o.srcElement);if(a.tagName!=null&&a.tagName.toLowerCase()=="span"&&a._par==true&&a.parentNode!=null){a=a.parentNode}if(a.className&&a.className=="dhtmlxcalendar_label_hours"){o.cancelBubble=true;var n=e.contMonth.offsetHeight+e.contDays.offsetHeight+e.contDates.offsetHeight+a.offsetTop;e._showSelector("hours",Math.round(a.offsetLeft+a.offsetWidth/2),n-2,"selector_hours",true);return}if(a.className&&a.className=="dhtmlxcalendar_label_minutes"){o.cancelBubble=true;if(e._minutesInterval==1){var q=e.getFormatedDate("%i");a.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+q.charAt(0)+"</span>"+q.charAt(1);a.firstChild._par=true;e._selectorMode=1}var n=e.contMonth.offsetHeight+e.contDays.offsetHeight+e.contDates.offsetHeight+a.offsetTop;e._showSelector("minutes",Math.round(a.offsetLeft+a.offsetWidth/2),n-2,"selector_minutes",true);return}e._hideSelector()};if(this.conf.touch==true){l.ontouchstart=l.onclick}this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(n){window.dhx4.temp_calendar={tz:null};this._nullDate=(typeof(n)=="undefined"||n===""||!n);if(!(n instanceof Date)){n=this._strToDate(String(n||""));if(n=="Invalid Date"){n=new Date()}else{this.conf.tz=window.dhx4.temp_calendar.tz}window.dhx4.temp_calendar=null}if(this.conf.tz==null){this.conf.tz=window.dhx4.date2str(n,"%P")}var a=n.getTime();if(this._isOutOfRange(a)){return}this._activeDate=new Date(a);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(o){if(this._nullDate){return null}var a=new Date(this._activeDate.getTime());if(o){window.dhx4.temp_calendar={tz:this.conf.tz};var n=this._dateToStr(a);window.dhx4.temp_calendar=null;return n}return a};this._drawMonth=function(y){if(!(y instanceof Date)){return}if(isNaN(y.getFullYear())){y=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(y.getFullYear(),y.getMonth(),1,0,0,0,0);this._activeDateCell=null;var v=new Date(this._activeMonth.getTime());var o=v.getDay();var B=o-this._wStart;if(B<0){B=B+7}v.setDate(v.getDate()-B);var E=y.getMonth();var F=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var t=0;for(var n=0;n<6;n++){var x=this._wStart;for(var D=0;D<=7;D++){if(D==0){var C=this.getWeekNumber(new Date(v.getFullYear(),v.getMonth(),v.getDate()+t,0,0,0,0));if(C>=52&&this.conf.ws_first==true&&this._activeMonth.getMonth()==0){var s=this.getWeekNumber(new Date(v.getFullYear(),v.getMonth(),v.getDate()+t+7,0,0,0,0));if(s<C&&s>1){C=1}}this.contDates.childNodes[n].childNodes[D].innerHTML="<div class='dhtmlxcalendar_label'>"+C+"</div>"}else{var a=new Date(v.getFullYear(),v.getMonth(),v.getDate()+t,0,0,0,0);if(a.getHours()!=0){var u=(a.getHours()>12?24-a.getHours():a.getHours());a.setTime(a.getTime()+60*60*1000*u)}var A=a.getDay();var r=a.getTime();var z="dhtmlxcalendar_label";if(this._tipData[r]!=null){if(this._tipData[r].usePopup&&typeof(window.dhtmlXPopup)=="function"){this.contDates.childNodes[n].childNodes[D].removeAttribute("title");this._initTooltipPopup()}else{this.contDates.childNodes[n].childNodes[D].setAttribute("title",this._tipData[r].text)}if(this._tipData[r].showIcon){z+=" dhtmlxcalendar_label_title"}}else{this.contDates.childNodes[n].childNodes[D].removeAttribute("title")}this.contDates.childNodes[n].childNodes[D].innerHTML="<div class='"+z+"'>"+a.getDate()+"</div>";this.contDates.childNodes[n].childNodes[D]._date=new Date(r);this.contDates.childNodes[n].childNodes[D]._q=n;this.contDates.childNodes[n].childNodes[D]._w=D;this.contDates.childNodes[n].childNodes[D]._css_month=(a.getMonth()==E);this.contDates.childNodes[n].childNodes[D]._css_date=(!this._nullDate&&r==F);this.contDates.childNodes[n].childNodes[D]._css_weekend=(x>=6);this.contDates.childNodes[n].childNodes[D]._css_dis=this._isOutOfRange(r);this.contDates.childNodes[n].childNodes[D]._css_holiday=(this._holidays[r]==true);this._updateCellStyle(n,D);if(r==F){this._activeDateCell=this.contDates.childNodes[n].childNodes[D]}if(++x>7){x=1}t++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(y)};this._updateCellStyle=function(t,a){var o=this.contDates.childNodes[t].childNodes[a];var n="dhtmlxcalendar_cell dhtmlxcalendar_cell";n+=(o._css_month?"_month":"");n+=(o._css_date?"_date":"");n+=(o._css_weekend?"_weekend":"");n+=(o._css_holiday?"_holiday":"");n+=(o._css_dis?"_dis":"");n+=(o._css_hover&&!o._css_dis?"_hover":"");o.className=n;o=null};this._minutesInterval=5;this._initSelector=function(v,r){if(!this._selCover){this._selCover=document.createElement("DIV");this._selCover.className="dhtmlxcalendar_selector_cover";this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV");this._sel.className="dhtmlxcalendar_selector_obj";this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement("TABLE"));this._sel.firstChild.className="dhtmlxcalendar_selector_table";this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement("TBODY"));this._sel.firstChild.firstChild.appendChild(document.createElement("TR"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left";this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle";this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right";this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"};this._sel.onmouseover=function(w){w=w||event;var q=(w.target||w.srcElement);if(q._cell===true){if(e._selHover!=q){e._clearSelHover()}if(String(q.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){q.className+=" dhtmlxcalendar_selector_cell_hover";e._selHover=q}}};this._sel.onmouseout=function(){e._clearSelHover()};this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;e._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;e._scrollYears(1)};if(this.conf.touch==true){this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick;this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick}this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement("DIV"));this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[v]==true){return}if(v=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+r;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var n=0;for(var a=0;a<4;a++){var u=document.createElement("UL");u.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(u);for(var x=0;x<3;x++){var y=document.createElement("LI");y.innerHTML=this.langData[this.lang].monthesSNames[n];y.className="dhtmlxcalendar_selector_cell";u.appendChild(y);y._month=n;y._cell=true;this._msCells[n++]=y}}this.msCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._month!=null){e._hideSelector();e._updateActiveMonth();e._drawMonth(new Date(e._activeMonth.getFullYear(),q._month,1,0,0,0,0));e._doOnSelectorChange()}};if(this.conf.touch==true){this.msCont.ontouchstart=this.msCont.onclick}}if(v=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+r;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var a=0;a<4;a++){var u=document.createElement("UL");u.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(u);for(var x=0;x<3;x++){var y=document.createElement("LI");y.className="dhtmlxcalendar_selector_cell";y._cell=true;u.appendChild(y)}}this.ysCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._year!=null){e._hideSelector();e._drawMonth(new Date(q._year,e._activeMonth.getMonth(),1,0,0,0,0));e._doOnSelectorChange()}};if(this.conf.touch==true){this.ysCont.ontouchstart=this.ysCont.onclick}}if(v=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+r;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var n=0;for(var a=0;a<4;a++){var u=document.createElement("UL");u.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(u);for(var x=0;x<6;x++){var y=document.createElement("LI");y.innerHTML=this._fixLength(n,2);y.className="dhtmlxcalendar_selector_cell";u.appendChild(y);y._hours=n;y._cell=true;this._hsCells[n++]=y}}this.hsCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._hours!=null){e._hideSelector();e._activeDate.setHours(q._hours);e._updateActiveHours();e._updateVisibleHours();e._doOnSelectorChange();e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())])}};if(this.conf.touch==true){this.hsCont.ontouchstart=this.hsCont.onclick}}if(v=="minutes"){var t=4;var o=3;var s=2;if(this._minutesInterval==1){if(this._selectorMode==1){t=2;o=3;s=1}else{t=2;o=5;s=1;r+="5"}}if(this._minutesInterval==10){t=2}if(this._minutesInterval==15){t=1;o=4;r+="4"}this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+r;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var n=0;for(var a=0;a<t;a++){var u=document.createElement("UL");u.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(u);for(var x=0;x<o;x++){var y=document.createElement("LI");y.innerHTML=(s>1?this._fixLength(n,s):n);y.className="dhtmlxcalendar_selector_cell";u.appendChild(y);y._minutes=n;y._cell=true;this._rsCells[n]=y;n+=this._minutesInterval}}this.rsCont.onclick=function(z){z=z||event;if(z.type=="touchstart"&&z.preventDefault!=null){z.preventDefault()}z.cancelBubble=true;var w=(z.target||z.srcElement);if(w._minutes!=null){if(e._minutesInterval==1){var q=e.getFormatedDate("%i");if(e._selectorMode==1){q=w._minutes.toString()+q.charAt(1)}else{q=q.charAt(0)+w._minutes.toString()}e._activeDate.setMinutes(Number(q));e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())]);e._hideSelector();if(e._selectorMode==1){e._updateVisibleMinutes(true);e._selectorMode=2;e._showSelector("minutes",e._sel._x,e._sel._y,"selector_minutes",true);e._updateActiveMinutes();return}else{e._selectorMode=1}}else{e._hideSelector();e._activeDate.setMinutes(w._minutes);e._updateActiveMinutes();e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())])}e._updateVisibleMinutes();e._doOnSelectorChange()}};if(this.conf.touch==true){this.rsCont.ontouchstart=this.rsCont.onclick}}this._sel._ta[v]=true};this._showSelector=function(r,n,s,q,a){if(a===true&&this._sel!=null&&this._isSelectorVisible()&&r==this._sel._t){this._hideSelector();return}if(this.conf.skin=="dhx_terrace"){n+=12}if(!this._sel||!this._sel._ta[r]){this._initSelector(r,q)}if(r!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")}this._sel._x=n;this._sel._y=s;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=r;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+q;this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(r=="year"?"":"none");var o=Math.max(0,n-Math.round(this._sel.offsetWidth/2));if(o+this._sel.offsetWidth>this._sel.parentNode.offsetWidth){o=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=o+"px";if(r=="hours"||r=="minutes"){this._sel.style.top=s-this._sel.offsetHeight+"px"}else{this._sel.style.top=s+"px"}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(r)};this._doOnSelectorShow=function(a){if(a=="month"){this._updateActiveMonth()}if(a=="year"){this._updateYearsList(this._activeMonth)}if(a=="hours"){this._updateActiveHours()}if(a=="minutes"){this._updateActiveMinutes()}};this._hideSelector=function(a){if(!this._sel){return}this._sel.style.display="none";this._sel.style.visible="hidden";this._selCover.style.display="none";if(this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i");this._unloadSelector("minutes")}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!="none")};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,""));this._selHover=null};this._unloadSelector=function(o){if(!this._sel){return}if(!this._sel._ta[o]){return}if(o=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var n in this._msCells){this._msCells[n]._cell=null;this._msCells[n]._month=null;this._msCells[n].parentNode.removeChild(this._msCells[n]);this._msCells[n]=null}this._msCells=null;while(this.msCont.childNodes.length>0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(o=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var n in this._ysCells){this._ysCells[n]._cell=null;this._ysCells[n]._year=null;this._ysCells[n].parentNode.removeChild(this._ysCells[n]);this._ysCells[n]=null}this._ysCells=null;while(this.ysCont.childNodes.length>0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(o=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var n in this._hsCells){this._hsCells[n]._cell=null;this._hsCells[n]._hours=null;this._hsCells[n].parentNode.removeChild(this._hsCells[n]);this._hsCells[n]=null}this._hsCells=null;while(this.hsCont.childNodes.length>0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(o=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var n in this._rsCells){this._rsCells[n]._cell=null;this._rsCells[n]._minutes=null;this._rsCells[n].parentNode.removeChild(this._rsCells[n]);this._rsCells[n]=null}this._rsCells=null;while(this.rsCont.childNodes.length>0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[o]=null};this.setMinutesInterval=function(a){if(!(a==1||a==5||a==10||a==15)){return}this._minutesInterval=a;this._unloadSelector("minutes")};this._updateActiveMonth=function(){if(typeof(this._msActive)!="undefined"&&typeof(this._msCells[this._msActive])!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();if(this._ysCells[a]){this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(t){for(var o in this._ysCells){this._ysCells[o]=null;delete this._ysCells[o]}var r=12*Math.floor(t.getFullYear()/12);for(var s=0;s<4;s++){for(var n=0;n<3;n++){this.ysCont.childNodes[s].childNodes[n].innerHTML=r;this.ysCont.childNodes[s].childNodes[n]._year=r;this.ysCont.childNodes[s].childNodes[n].className="dhtmlxcalendar_selector_cell";this._ysCells[r++]=this.ysCont.childNodes[s].childNodes[n]}}this._updateActiveYear()};this._scrollYears=function(a){var o=(a<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a;var n=new Date(o,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(n)};this._updateActiveHours=function(){if(typeof(this._hsActive)!="undefined"&&typeof(this._hsCells[this._hsActive])!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof(this._rsActive)!="undefined"&&typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}if(this._minutesInterval==1){this._rsActive=(this.getFormatedDate("%i").toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(n){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();if(n==true){a=a.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+a.charAt(1)+"</span>"}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a;if(n==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(a,n){while(String(a).length<n){a="0"+String(a)}return a};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(r){var q={};if(this._strToDate!=null){for(var n in this.i){if(this.i[n].input!=null&&this.i[n].input.value.length>0){var s=this._strToDate(this.i[n].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");if(s instanceof Date){q[n]=s}}}}this._dateFormat=r;var o=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var u=a.replace(/%/,"");switch(u){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+e.langData[e.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+e.langData[e.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(o,"i");for(var n in q){this.i[n].input.value=this._dateToStr(q[n])}q=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(n){if(!this._dateFormatRE||!n.match(this._dateFormatRE)){return}if(n==this.getFormatedDate()){return}var a=this._strToDate(n);if(!(a instanceof Date)){return}if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}return}}this._nullDate=false;this._activeDate=a;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&&this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(a){if(typeof(a)=="string"){a=this._strToDate(a)}if(!(a instanceof Date)){return}this._drawMonth(a)};this.setFormatedDate=function(r,s,n,q){var o=this._strToDate(s,r);if(q){return o}this.setDate(o)};this.getFormatedDate=function(n,a){if(!(a&&a instanceof Date)){if(this._nullDate){return""}a=new Date(this._activeDate)}return this._dateToStr(a,n)};this.getWeekNumber=function(s){if(typeof(s)=="string"){s=this._strToDate(s)}if(!(s instanceof Date)){return"Invalid Date"}if(typeof(this._ftDay)=="undefined"){this._ftDay=4}var y=this._wStart;var r=y+7;var x=4;var o=new Date(s.getFullYear(),0,1,0,0,0,0);var q=o.getDay();if(q==0){q=7}if(x<y){x+=7;q+=7}var v=0;if(q>=y&&q<=x){}else{v=1}var u=q-y;var w=new Date(s.getFullYear(),0,1-u+v*7,0,0,0,0);var A=604800000;var n=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1,0,0,0,0);var z=Math.ceil((n.getTime()-w.getTime())/A);if(z==0){var t=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);var a=t.getDay()-this._wStart;if(a<0){a=a+7}t.setDate(t.getDate()-a);z=this.getWeekNumber(t)}return z};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(o){if(!o&&this._hasParent){this._show();return}if(typeof(o)=="object"&&typeof(o._dhtmlxcalendar_uid)!="undefined"&&this.i[o._dhtmlxcalendar_uid]==o){this._show(o._dhtmlxcalendar_uid);return}if(typeof(o)=="undefined"){for(var n in this.i){if(!o){o=n}}}if(!o){return}this._show(o)};this.hide=function(){if(this._isVisible()){this._hide()}};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(a,n){this._px=null;this._py=null;if(a=="right"||a=="bottom"){this.pos=a}else{this.pos="int";if(typeof(a)!="undefined"&&!isNaN(a)){this.base.style.left=a+"px";this._px=a}if(typeof(n)!="undefined"&&!isNaN(n)){this.base.style.top=n+"px";this._py=n}this._ifrSize()}};this._show=function(t,n){if(n===true&&this._activeInp==t&&this._isVisible()){this._hide();return}this.base.style.visibility="hidden";this.base.style.display="";if(!t){if(this._px&&this._py){this.base.style.left=this._px+"px";this.base.style.top=this._py+"px"}else{this.base.style.left="0px";this.base.style.top="0px"}}else{if(this.base.className.indexOf("dhtmlxcalendar_in_input")==-1){this.base.className+=" dhtmlxcalendar_in_input"}var o=(this.i[t].input||this.i[t].button);var u=window.dhx4.screenDim();var s={top:window.dhx4.absTop(o),left:window.dhx4.absLeft(o)};if(this.pos=="right"){this.base.style.left=s.left+o.offsetWidth+"px";this.base.style.top=Math.min(s.top,u.bottom-this.base.offsetHeight)+"px"}else{if(this.pos=="bottom"){var r=s.top+o.offsetHeight+1;if(r+this.base.offsetHeight>u.bottom){var q=s.top-this.base.offsetHeight;if(q>=-20){r=q}}var a=s.left;if(a+this.base.offsetWidth>u.right){a=Math.max(0,s.left+o.offsetWidth-this.base.offsetWidth)}this.base.style.left=a+"px";this.base.style.top=r+"px"}else{this.base.style.left=(this._px||0)+"px";this.base.style.top=(this._py||0)+"px"}}this._activeInp=t;o=null}this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])};this._hide=function(){if(this._lastHover!=null){this._clearDayHover()}this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);if(this.base.className.indexOf("dhtmlxcalendar_in_input")>=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")}this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return(this.base.style.display!="none")};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(o){var a=this._extractDates(o);for(var n=0;n<a.length;n++){this._rangeSet[new Date(a[n].getFullYear(),a[n].getMonth(),a[n].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(n){if(n==null){this._clearHolidays()}else{if(n!=null){var a=this._extractDates(n);for(var o=0;o<a.length;o++){this._holidays[new Date(a[o].getFullYear(),a[o].getMonth(),a[o].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(o){if(typeof(o)=="string"||o instanceof Date){o=[o]}var n=[];for(var s=0;s<o.length;s++){if(typeof(o[s])=="string"){var u=o[s].split(",");for(var a=0;a<u.length;a++){n.push(this._strToDate(u[a]))}}else{if(o[s] instanceof Date){n.push(o[s])}}}return n};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var n in this._rangeSet){this._rangeSet[n]=null;delete this._rangeSet[n]}};this._clearHolidays=function(){for(var n in this._holidays){this._holidays[n]=null;delete this._holidays[n]}};this._isOutOfRange=function(n){if(this._rangeSet[n]==true){return true}if(this._rangeActive){if(this._rangeType=="in"&&(n<this._rangeFrom||n>this._rangeTo)){return true}if(this._rangeType=="out"&&(n>=this._rangeFrom&&n<=this._rangeTo)){return true}if(this._rangeType=="from"&&n<this._rangeFrom){return true}if(this._rangeType=="to"&&n>this._rangeTo){return true}}var a=new Date(n);if(this._rangeWeek){if(this._rangeWeekData[a.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[a.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[a.getMonth()+"_"+a.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(q,o,a){var n=false;if(q!=null&&o!=null){if(!(q instanceof Date)){q=this._strToDate(q)}if(!(o instanceof Date)){o=this._strToDate(o)}if(q.getTime()>o.getTime()){return}this._rangeFrom=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="in";n=true}if(!n&&q!=null&&o==null){if(!(q instanceof Date)){q=this._strToDate(q)}this._rangeFrom=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(a===true){this._rangeFrom++}this._rangeActive=true;this._rangeType="from";n=true}if(!n&&q==null&&o!=null){if(!(o instanceof Date)){o=this._strToDate(o)}this._rangeFrom=null;this._rangeTo=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();if(a===true){this._rangeTo--}this._rangeActive=true;this._rangeType="to";n=true}if(n){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(n,a){if(n!=null&&a!=null){if(!(n instanceof Date)){n=this._strToDate(n)}if(!(a instanceof Date)){a=this._strToDate(a)}if(n.getTime()>a.getTime()){return}this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(n!=null&&a==null){this.setSensitiveRange(null,n,true);return}if(n==null&&a!=null){this.setSensitiveRange(a,null,true);return}};this.disableDays=function(u,s){if(u=="week"){if(typeof(s)!="object"&&typeof(s.length)=="undefined"){s=[s]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var n in this._rangeWeekData){this._rangeWeekData[n]=false;delete this._rangeWeekData[n]}for(var r=0;r<s.length;r++){this._rangeWeekData[s[r]]=true;if(s[r]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(u=="month"){if(typeof(s)!="object"&&typeof(s.length)=="undefined"){s=[s]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var n in this._rangeMonthData){this._rangeMonthData[n]=false;delete this._rangeMonthData[n]}for(var r=0;r<s.length;r++){this._rangeMonthData[s[r]]=true}this._rangeMonth=true}if(u=="year"){var o=this._extractDates(s);if(!this._rangeYearData){this._rangeYearData={}}for(var n in this._rangeYearData){this._rangeYearData[n]=false;delete this._rangeYearData[n]}for(var r=0;r<o.length;r++){this._rangeYearData[o[r].getMonth()+"_"+o[r].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(a){if(a=="week"){this._rangeWeek=false}if(a=="month"){this._rangeMonth=false}if(a=="year"){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(o,u,v,a){var r=this._extractDates(o);for(var s=0;s<r.length;s++){var n=new Date(r[s].getFullYear(),r[s].getMonth(),r[s].getDate(),0,0,0,0).getTime();this._tipData[n]={text:u,showIcon:v,usePopup:a}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(n){var o=this._extractDates(n);for(var r=0;r<o.length;r++){var a=new Date(o[r].getFullYear(),o[r].getMonth(),o[r].getDate(),0,0,0,0).getTime();this._tipData[a]=null;delete this._tipData[a]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent("onMouseOver",function(n){var a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();if(this._tipData[a]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=n;this._tipCellDim=this.getCellDimension(n);this._tipText=this._tipData[a].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent("onMouseOut",this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(q,a,r,n,o){if(!e._tipPopup){e._tipPopup=new dhtmlXPopup({mode:"top"})}e._tipPopup.attachHTML(e._tipText);e._tipPopup.show(e._tipCellDim.x,e._tipCellDim.y,e._tipCellDim.w,e._tipCellDim.h);e.callEvent("onPopupShow",[e._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&&this._tipPopup.isVisible()){this._tipPopup.hide();this.callEvent("onPopupHide",[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(o){if(typeof(o)=="string"){o=this._strToDate(o)}if(!(o instanceof Date)){return null}var r=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();var n=null;for(var s=0;s<this.contDates.childNodes.length;s++){for(var a=0;a<this.contDates.childNodes[s].childNodes.length;a++){var u=this.contDates.childNodes[s].childNodes[a];if(u._date!=null&&u._date.getTime()==r){n={x:window.dhx4.absLeft(u),y:window.dhx4.absTop(u),w:u.offsetWidth,h:u.offsetHeight}}u=null}}return n};this._updateFromInput=function(a){if(this._nullInInput&&((a.value).replace(/\s/g,"")).length==0){if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[null])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}return}}this.setDate(null)}else{this._updateDateStr(a.value)}a=null};this._doOnClick=function(n){n=n||event;var a=(n.target||n.srcElement);if(a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=e._activeInp&&e._isVisible()&&e._activeInp){e._hide();return}if(!a._dhtmlxcalendar_uid||!e.i[a._dhtmlxcalendar_uid]){if(e._isSelectorVisible()){e._hideSelector()}else{if(!e._hasParent&&e._isVisible()){e._hide()}}}};this._doOnKeyDown=function(a){a=a||event;if(a.keyCode==27||a.keyCode==13){if(e._isSelectorVisible()){e._hideSelector()}else{if(e._isVisible()&&!e._hasParent){e._hide()}}}};this._doOnInpClick=function(n){n=n||event;if(n.type=="touchstart"&&n.preventDefault!=null){n.preventDefault()}var a=(n.target||n.srcElement);if(!a._dhtmlxcalendar_uid){return}if(!e._listenerEnabled){e._updateFromInput(a)}e._show(a._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(n){n=n||event;var a=(n.target||n.srcElement);if(n.keyCode==13||!a._dhtmlxcalendar_uid){return}if(!e._listenerEnabled){e._updateFromInput(a)}};this._doOnBtnClick=function(n){n=n||event;if(n.type=="touchstart"&&n.preventDefault!=null){n.preventDefault()}var a=(n.target||n.srcElement);if(!a._dhtmlxcalendar_uid){return}if(e.i[a._dhtmlxcalendar_uid].input!=null){e._updateFromInput(e.i[a._dhtmlxcalendar_uid].input)}e._show(a._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(e&&e.unload){e.unload()}};if(typeof(window.addEventListener)=="function"){document.body.addEventListener("click",e._doOnClick,false);window.addEventListener("keydown",e._doOnKeyDown,false);window.addEventListener("unload",e._doOnUnload,false);if(this.conf.touch==true){document.body.addEventListener("touchstart",e._doOnClick,false)}}else{document.body.attachEvent("onclick",e._doOnClick);document.body.attachEvent("onkeydown",e._doOnKeyDown);window.attachEvent("onunload",e._doOnUnload)}this.attachObj=function(o){var n=window.dhx4.newId();if(typeof(o)=="string"){this.i[n]={input:document.getElementById(o)}}else{if(typeof(o.tagName)!="undefined"){this.i[n]={input:o}}else{if(typeof(o)=="object"&&(o.input!=null||o.button!=null)){this.i[n]={};if(o.input!=null){this.i[n].input=(typeof(o.input)=="string"?document.getElementById(o.input):o.input)}if(o.button!=null){this.i[n].button=(typeof(o.button)=="string"?document.getElementById(o.button):o.button)}}}}this._attachEventsToObject(n);return n};this.detachObj=function(q){var o=null;if(this.i[q]!=null){o=q}else{if(typeof(q)=="string"){q=document.getElementById(q);o=q._dhtmlxcalendar_uid}else{if(typeof(q.tagName)!="undefined"){o=q._dhtmlxcalendar_uid}else{if(typeof(q)=="object"&&(q.input!=null||q.button!=null)){if(o==null&&q.input!=null){o=(typeof(q.input)=="string"?document.getElementById(q.input):q.input)._dhtmlxcalendar_uid}if(o==null&&q.button!=null){o=(typeof(q.button)=="string"?document.getElementById(q.button):q.button)._dhtmlxcalendar_uid}}}}}if(o!=null&&this.i[o]!=null){this._detachEventsFromObject(o);for(var n in this.i[n]){this.i[o][n]._dhtmlxcalendar_uid=null;this.i[o][n]=null;delete this.i[o][n]}this.i[o]=null;delete this.i[o];return true}return false};this._attachEventsToObject=function(n){if(this.i[n].button!=null){this.i[n].button._dhtmlxcalendar_uid=n;if(typeof(window.addEventListener)=="function"){this.i[n].button.addEventListener("click",e._doOnBtnClick,false);if(this.conf.touch==true){this.i[n].button.addEventListener("touchstart",e._doOnBtnClick,false)}}else{this.i[n].button.attachEvent("onclick",e._doOnBtnClick)}}else{if(this.i[n].input!=null){this.i[n].input._dhtmlxcalendar_uid=n;if(typeof(window.addEventListener)=="function"){this.i[n].input.addEventListener("click",e._doOnInpClick,false);this.i[n].input.addEventListener("keyup",e._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[n].input.addEventListener("touchstart",e._doOnInpClick,false)}}else{this.i[n].input.attachEvent("onclick",e._doOnInpClick);this.i[n].input.attachEvent("onkeyup",e._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(n){if(this.i[n].button!=null){if(typeof(window.addEventListener)=="function"){this.i[n].button.removeEventListener("click",e._doOnBtnClick,false);if(this.conf.touch==true){this.i[n].button.removeEventListener("touchstart",e._doOnBtnClick,false)}}else{this.i[n].button.detachEvent("onclick",e._doOnBtnClick)}}else{if(this.i[n].input!=null){if(typeof(window.addEventListener)=="function"){this.i[n].input.removeEventListener("click",e._doOnInpClick,false);this.i[n].input.removeEventListener("keyup",e._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[n].input.removeEventListener("touchstart",e._doOnInpClick,false)}}else{this.i[n].input.detachEvent("onclick",e._doOnInpClick);this.i[n].input.detachEvent("onkeyup",e._doOnInpKeyUp)}}}};this.enableListener=function(a){if(!a){return}if(typeof(window.addEventListener)=="function"){a.addEventListener("focus",e._listenerEvFocus,false);a.addEventListener("blur",e._listenerEvBlur,false)}else{a.attachEvent("onfocus",e._listenerEvFocus);a.attachEvent("onblur",e._listenerEvBlur)}a=null};this.disableListener=function(a){if(!a){return}a._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)=="function"){a.removeEventListener("focus",e._listenerEvFocus,false);a.removeEventListener("blur",e._listenerEvBlur,false)}else{a.detachEvent("onfocus",e._listenerEvFocus);a.detachEvent("onblur",e._listenerEvBlur)}a=null};this._startListener=function(a){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(a._v1)=="undefined"){a._v1=a.value}if(a._v1!=a.value){this._updateFromInput(a);a._v1=a.value}if(a._f0){this._tmListener=window.setTimeout(function(){e._startListener(a)},100)}};this._listenerEvFocus=function(n){n=n||event;var a=n.target||n.srcElement;a._f0=true;e._startListener(a);a=null};this._listenerEvBlur=function(n){n=n||event;var a=n.target||n.srcElement;a._f0=false;a=null};for(var h in this.i){this._attachEventsToObject(h)}window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("click",e._doOnClick,false);window.removeEventListener("keydown",e._doOnKeyDown,false);window.removeEventListener("unload",e._doOnUnload,false);if(this.conf.touch==true){document.body.removeEventListener("touchstart",e._doOnClick,false)}}else{document.body.detachEvent("onclick",e._doOnClick);document.body.detachEvent("onkeydown",e._doOnKeyDown);window.detachEvent("onunload",e._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var n in this.i){this.i[n]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(n);this.disableListener(this.i[n].input);this.i[n]=null;delete this.i[n]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length>0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length>0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length>0){while(this.contDates.lastChild.childNodes.length>0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length>0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var n in this._sel._ta){this._sel._ta[n]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length>0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length>0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var n in this){delete this[n]}n=e=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(e){var b=this;var d=function(f){return(String(f).length==1?"0"+String(f):f)};var a=function(f,g){return"<span class='dhtmlxcalendar_month_label_"+f+"'>"+g+"</span>"};var c=String(this.langData[this.lang].hdrformat||("%F %Y")).replace(/%[a-z]/gi,function(f){switch(f){case"%m":return a("month",d(e.getMonth()+1));case"%n":return a("month",e.getMonth()+1);case"%M":return a("month",b.langData[b.lang].monthesSNames[e.getMonth()]);case"%F":return a("month",b.langData[b.lang].monthesFNames[e.getMonth()]);case"%y":return a("year",d(e.getYear()%100));case"%Y":return a("year",e.getFullYear());case"%%":return"%";default:return f}});b=d=a=null;return c};dhtmlXCalendarObject.prototype.enableIframe=function(a){if(a==true){if(!this._ifr){this._ifr=document.createElement("IFRAME");this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute("src","javascript:false;");this._ifr.className="dhtmlxcalendar_ifr";this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+"px";this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(b,a){return window.dhx4.str2date(b,a||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(b,a){return window.dhx4.date2str(b,a||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(b){var a=this;this.leftCalendar=new dhtmlXCalendarObject(b);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(b);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(c){a._updateRange("rightCalendar",c,null);a._evOnClick(["left",c])});this.rightCalendar.attachEvent("onClick",function(c){a._updateRange("leftCalendar",null,c);a._evOnClick(["right",c])});this.leftCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["left",c])});this.rightCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["right",c])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(c){this.leftCalendar.setDateFormat(c);this.rightCalendar.setDateFormat(c)};this.setDates=function(d,c){if(d!=null){this.leftCalendar.setDate(d)}if(c!=null){this.rightCalendar.setDate(c)}this._updateRange()};this._updateRange=function(c,e,d){if(arguments.length==3){(c=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,d)}else{this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate());this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null)}};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;a=null};this._evOnClick=function(c){return this.callEvent("onClick",c)};this._evOnBeforeChange=function(c){return this.callEvent("onBeforeChange",c)};window.dhx4._eventable(this);return this};function dhtmlXCombo(f,l,c,h,e){var g=this;var d=null;var m=null;if(typeof(f)=="object"&&!f.tagName){d=f;f=d.parent;c=d.width;l=d.name;h=d.mode;m=d.skin}this.cont=(typeof(f)=="string"?document.getElementById(f):f);this.conf={skin:null,form_name:l||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(h)=="string"&&typeof(this.modes[h])!="undefined"?h:"option"),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,enabled:true,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0),ro_mode:false,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:true,template:{input:"#text#",option:"#text#"},f_func:null,f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:"",f_ac:true,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:false,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=(this.modes[this.conf.opts_type].image==true);this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){if(g.conf.s_tm!=null){window.clearTimeout(g.conf.s_tm)}g.conf.s_tm=window.setTimeout(g._doOnListScrollAction,g.conf.s_time)};this._doOnListScrollAction=function(){g.conf.s_tm=null;if(g.conf.s_mode=="scroll"&&g.list.scrollHeight-g.list.scrollTop-10<g.list.clientHeight){g._subloadRequest()}};if(typeof(window.addEventListener)=="function"){this.list.addEventListener("scroll",this._doOnListScroll,false)}else{this.list.attachEvent("onscroll",this._doOnListScroll)}this.setSkin(m||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue");this._updateTopImage=function(a){if(!this.conf.combo_image){return}if(a!=null){this.base.lastChild.innerHTML=this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)}};this._filterOpts=function(w){if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}var s=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==s.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=s.toLowerCase();this.callEvent("onDynXLS",[s]);return}if(this.conf.f_url!=null){if(s.length==0){this.conf.f_server_last=s.toLowerCase();this.clearAll();return}if(this.conf.f_cache==true&&this.conf.f_cache_data[s]!=null){this.clearAll();this.conf.f_server_last=s.toLowerCase();for(var o=0;o<this.conf.f_cache_data[s].data.length;o++){this.load(this.conf.f_cache_data[s].data[o])}if(this.conf.f_dyn){this.conf.f_dyn_end=this.conf.f_cache_data[s].dyn_end;this.conf.f_mask=this.conf.f_cache_data[s].mask}if(w!==true){this._showList(true);this._checkForMatch()}}else{this.conf.f_server_tm=window.setTimeout(function(){g.conf.f_server_last=s.toLowerCase();g.conf.f_mask=s;var q="mask="+encodeURIComponent(s);if(g.conf.f_dyn){q+="&pos=0";g.conf.f_dyn_end=false}var a=function(B){if(g.conf.f_cache){if(!g.conf.f_cache_data[s]){g.conf.f_cache_data[s]={data:[],dyn_end:false,mask:s}}g.conf.f_cache_data[s].data.push(B.xmlDoc.responseXML)}g.clearAll();g.load(B.xmlDoc.responseXML);var A=(g.base.offsetWidth>0&&g.base.offsetHeight>0);if(A==true&&g.conf.enabled==true&&g.conf.combo_focus==true&&w!==true){if(g.conf.f_ac&&g.conf.f_mode=="start"&&g.conf.clear_bsp==false&&g.list.firstChild!=null){var t=g.list.firstChild._optId;var C=String(g.t[t].obj.getText(g.list.firstChild,true));if(s==g.base.firstChild.value&&String(C).toLowerCase().indexOf(String(s).toLowerCase())===0){g.base.firstChild.value=C;g.conf.f_ac_text=C.substr(s.length);g._selectRange(s.length,C.length)}}g._showList(true);g._checkForMatch()}a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(g.conf.f_url,q,a)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(g.conf.f_url+(String(g.conf.f_url).indexOf("?")>=0?"&":"?")+q,a)}}},200)}}else{this.conf.f_server_last=s.toLowerCase();var n=(s.length==0?true:new RegExp((this.conf.f_mode=="start"?"^":"")+String(s).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&"),"i"));var u=null;for(var x in this.t){var z=false;if(n!==true){if(this.conf.f_func!=null){var v=this._getOption(this.t[x].item._optId,o);z=(this.conf.f_func.apply(window,[s,v])==true)}else{var y=this.t[x].obj.getText(this.t[x].item,true);z=(n.test(y)==true)}}if(n===true||z==true){this.t[x].item.style.display="";if(u==null&&s.length>0){u=String(this.t[x].obj.getText(this.t[x].item,true))}}else{this.t[x].item.style.display="none"}}if(this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==false&&u!=null){this.conf.f_ac_text=u.replace(new RegExp("^"+s,"i"),"");this.base.firstChild.value=u;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}if(this.conf.f_mode=="between"&&this.conf.clear_bsp==true){this._checkForMatch(true)}if(w!==true){this._showList(true);this._checkForMatch()}}};this._searchRO=function(n){if(this.conf.ro_tm){window.clearTimeout(this.conf.ro_tm)}this.conf.ro_text+=n;this._showList();for(var o=0;o<this.list.childNodes.length;o++){var a=this.list.childNodes[o]._optId;var r=String(this.t[a].obj.getText(this.list.childNodes[o],true)).toLowerCase();if(r.indexOf(this.conf.ro_text)===0){this._setSelected(a,true,true);this._confirmSelect("script",false);break}}this.conf.ro_tm=window.setTimeout(function(){g.conf.ro_text=""},this.conf.ro_tm_time)};this._initObj=function(a){if(typeof(a.template)!="undefined"){this.setTemplate(a.template)}if(a.add!=true&&this.conf.f_loading!=true){this.clearAll(false)}this.addOption(a.options)};this._xmlToObj=function(J,s,r){var x={add:false,options:[]};var D=(s==true?J:J.getElementsByTagName("complete"));if(D.length>0){if(window.dhx4.s2b(D[0].getAttribute("add"))==true){x.add=true}var C=D[0].childNodes;for(var A=0;A<C.length;A++){if(typeof(C[A].tagName)!="undefined"){if(String(C[A].tagName).toLowerCase()=="template"){var I={};for(var v=0;v<C[A].childNodes.length;v++){var B=C[A].childNodes[v];if(B.tagName!=null){var E=B.tagName;if(typeof(this.conf.template[E])!="undefined"){I[E]=window.dhx4._xmlNodeValue(B)}if(E=="columns"){for(var G=0;G<B.childNodes.length;G++){var u=B.childNodes[G];if(u.tagName!=null&&u.tagName=="column"){var z={};for(var H in {width:1,css:1,header:1,option:1}){if(u.getAttribute(H)!=null){z[H]=u.getAttribute(H)}}for(var H in {header:1,option:1}){var F=u.getElementsByTagName(H);if(F[0]!=null&&F[0].firstChild!=null){z[H]=window.dhx4._xmlNodeValue(F[0])}}if(I.columns==null){I.columns=[]}I.columns.push(z)}u=null}}}B=null}this.setTemplate(I)}if(String(C[A].tagName).toLowerCase()=="option"){var y=false;if(s==true){y=(x.options.length==r)}else{y=window.dhx4.s2b(C[A].getAttribute("selected"))}var o={value:C[A].getAttribute("value"),text:window.dhx4._xmlNodeValue(C[A]),selected:y,checked:window.dhx4.s2b(C[A].getAttribute("checked"))};for(var H in {img:1,img_dis:1,img_src:1,img_src_dis:1,css:1}){if(C[A].getAttribute(H)!=null){o[H]=C[A].getAttribute(H)}}for(var v=0;v<C[A].childNodes.length;v++){if(C[A].childNodes[v].tagName!=null&&String(C[A].childNodes[v].tagName).toLowerCase()=="text"){o.text={};var B=C[A].childNodes[v];for(var G=0;G<B.childNodes.length;G++){if(B.childNodes[G].tagName!=null){o.text[B.childNodes[G].tagName]=window.dhx4._xmlNodeValue(B.childNodes[G])}}}}x.options.push(o)}}}D=C=null}return x};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:true});window.dhx4._eventable(this);this._getNearItem=function(o,n){var a=null;while(o!=null){o=o[n<0?"previousSibling":"nextSibling"];if(a==null&&o!=null&&o.style.display==""&&o._optId!=null){a=o;o=null}}return a};this.setName(this.conf.form_name);this._doOnListMouseMove=function(n){n=n||event;var a=n.target||n.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g._setSelected(a._optId)}a=a.parentNode}a=null};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=true;g.conf.clear_click=true;window.setTimeout(function(){g.base.firstChild.focus()},1)};this._doOnListMouseUp=function(o){o=o||event;if(o.button!=g.conf.btn_left){return}var a=o.target||o.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){var n=true;if(typeof(g.t[a._optId].obj.optionClick)=="function"&&g.t[a._optId].obj.optionClick(a,o,g)!==true){n=false}if(n){g._setSelected(a._optId,null,true);g._confirmSelect("click")}}a=a.parentNode}a=null};this._doOnListMouseOut=function(a){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g.conf.tm_hover=window.setTimeout(function(){var n=g.conf.last_match||g.conf.last_selected;if(g.conf.last_match==null&&g.t[n]!=null){if(g.base.firstChild.value!=g.t[n].obj.getText(g.t[n].item,true)){n=null}}g._setSelected(n,null,true)},1)};this._doOnBaseMouseDown=function(r){if(!g.conf.enabled){return}g.conf.clear_click=true;r=r||event;if(r.button!=g.conf.btn_left){return}var n=r.target||r.srcElement;if(n!=this.firstChild){window.setTimeout(function(){g.base.firstChild.focus()},1);var q=n;while(q!=this&&q!=null){if(q==this.lastChild){if(typeof(g.modes[g.conf.opts_type].topImageClick)=="function"){var o=(g.conf.last_hover||g.conf.last_selected);var a=(o!=null?g.t[o].item:null);if(g.modes[g.conf.opts_type].topImageClick(a,g)!==true){o=a=null;return}}q=null}else{q=q.parentNode}}}if(g._isListVisible()){g._hideList()}else{if(n!=this.firstChild){g.conf.clear_blur=true}g._showList();g._setSelected(g.conf.last_selected,true,true)}n=null};this._doOnBodyMouseDown=function(){if(g.conf.clear_click){g.conf.clear_click=false;return}g._confirmSelect("blur")};this._doOnInputFocus=function(){g.conf.clear_blur=false;if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}if(g.conf.combo_focus==false){g.conf.combo_focus=true;g.callEvent("onFocus",[])}};this._doOnInputBlur=function(){if(g.conf.clear_blur==true){g.conf.clear_blur=false;return}if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}g.conf.tm_confirm_blur=window.setTimeout(function(){if(g.conf.clear_click==false){g._confirmSelect("blur");g.conf.combo_focus=false;g.callEvent("onBlur",[])}},20)};this._doOnInputKeyUp=function(a){a=a||event;if(g.conf.f_mode!=false){g.conf.clear_bsp=(a.keyCode==8||a.keyCode==46);g._filterOpts();return}else{g._checkForMatch()}};this._doOnInputKeyDown=function(a){a=a||event;if((a.keyCode==38||a.keyCode==40)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._keyOnUpDown(a.keyCode==38?-1:1)}if(a.keyCode==113){if(!g._isListVisible()){g._showList();if(g.base.firstChild.value==g.conf.last_text){g._setSelected(g.conf.last_selected,true,true);g.base.firstChild.value=g.conf.last_text;g.conf.f_server_last=g.base.firstChild.value.toLowerCase()}else{g.conf.f_server_last=g.base.firstChild.value.toLowerCase();if(g.conf.f_mode==false){g._checkForMatch()}}}else{}}if(a.keyCode==27){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._cancelSelect()}if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}g._confirmSelect("kbd")}if(g.conf.ro_mode==true&&((a.keyCode>=48&&a.keyCode<=57)||(a.keyCode>=65&&a.keyCode<=90))){g._searchRO(String.fromCharCode(a.keyCode).toLowerCase());a.cancelBubble=true}g.conf.clear_key=true;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){if(g.conf.clear_key){g.conf.clear_key=false;return}a=a||event;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._keyOnUpDown=function(a){var n=null;if(this.conf.last_hover){n=this.t[this.conf.last_hover].item}else{if(this.conf.last_selected){n=this.t[this.conf.last_selected].item}}if(!n&&this._getListVisibleCount()==0){return}if(n!=null&&n.style.display!=""){n=null}this._showList();if(n!=null){if(this.t[n._optId].obj.isSelected(n)){n=this._getNearItem(n,a)}}else{n=this.list.firstChild;if(n.style.display!=""){n=this._getNearItem(n,1)}}if(n==null){return}this._setSelected(n._optId,true,true);if(this.conf.f_mode==false){this.base.firstChild.value=this.t[n._optId].obj.getText(n,true)}else{var o=String(this.t[n._optId].obj.getText(n,true));if(this.conf.f_mode=="start"&&this.conf.f_ac==true){if(o.toLowerCase().indexOf(this.conf.f_server_last)===0){this.conf.f_ac_text=o.substring(this.conf.f_server_last.length,o.length);this.base.firstChild.value=o;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=o;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=o;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}}n=null};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var b=0;b<this.conf.evs_nodes.length;b++){for(var j in this.conf.evs_nodes[b].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[b].node.addEventListener(j,this[this.conf.evs_nodes[b].evs[j]],false)}else{this.conf.evs_nodes[b].node.attachEvent("on"+j,this[this.conf.evs_nodes[b].evs[j]])}}}this.unload=function(){this.clearAll();this.t=null;for(var o=0;o<this.conf.evs_nodes.length;o++){for(var n in this.conf.evs_nodes[o].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[o].node.removeEventListener(n,this[this.conf.evs_nodes[o].evs[n]],false)}else{this.conf.evs_nodes[o].node.detachEvent("on"+n,this[this.conf.evs_nodes[o].evs[n]])}this.conf.evs_nodes[o].evs[n]=null;delete this.conf.evs_nodes[o].evs[n]}this.conf.evs_nodes[o].node=null;this.conf.evs_nodes[o].evs=null;delete this.conf.evs_nodes[o].node;delete this.conf.evs_nodes[o].evs;this.conf.evs_nodes[o]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var n in this.conf){this.conf[n]=null;delete this.conf[n]}this.conf=null;if(typeof(window.addEventListener)=="function"){this.list.removeEventListener("scroll",this._doOnListScroll,false)}else{this.list.detachEvent("onscroll",this._doOnListScroll)}this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(var n in this){if(typeof(this[n])=="function"){this[n]=null}}g=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=f;f=null;if(d!=null){if(d.filter!=null){if(typeof(d.filter)=="string"){this.enableFilteringMode(true,d.filter,window.dhx4.s2b(d.filter_cache),window.dhx4.s2b(d.filter_sub_load))}else{this.enableFilteringMode(true)}}if(d.image_path!=null){this.setImagePath(d.image_path)}if(d.default_image!=null||d.default_image_dis!=null){this.setDefaultImage(d.default_image,d.default_image_dis)}if(d.items||d.options){this.addOption(d.items||d.options)}if(d.xml||d.json){this.load(d.xml||d.json)}if(typeof(d.readonly)!="undefined"){this.readonly(d.readonly)}d=null}return this}function dhtmlXComboFromSelect(c){if(typeof(c)=="string"){c=document.getElementById(c)}var b=c.offsetWidth;var l=c.getAttribute("name")||null;var d=document.createElement("SPAN");c.parentNode.insertBefore(d,c);var f=c.getAttribute("mode")||c.getAttribute("opt_type")||"option";var e=new dhtmlXCombo(d,l,b,f);d=null;var h=c.getAttribute("imagePath");if(h){e.setImagePath(h)}var j=c.getAttribute("defaultImage");var g=c.getAttribute("defaultImageDis");if(window.dhx4.s2b(g)==true){g=true}if(j!=null||g!=null){e.setDefaultImage(j,g)}var a=e._xmlToObj([c],true,c.selectedIndex);if(a.options.length>0){e.addOption(a.options)}a=null;c.parentNode.removeChild(c);c=null;return e}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){if(window.dhx4.s2b(a)){this.base.firstChild.setAttribute("readOnly","true");this.conf.ro_mode=true}else{this.base.firstChild.removeAttribute("readOnly");this.conf.ro_mode=false}};dhtmlXCombo.prototype.setPlaceholder=function(a){if(typeof(a)=="undefined"||a==null){a=""}this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(c){for(var b in c){if(typeof(this.conf.template[b])!="undefined"){this.conf.template[b]=String(c[b])}}if(c.columns!=null){this._mcMakeTemplate(c.columns)}else{this._mcDetachHeader()}for(var b in this.t){this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text)}this._confirmSelect()};dhtmlXCombo.prototype.setSkin=function(a){if(a==this.conf.skin){return}this.conf.skin=a;this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled");this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":"");if(this.hdr!=null){this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"}};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++){a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.conf.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(a,b){if(a!=null){this.base.firstChild.style.fontSize=a}if(b!=null){this.list.style.fontSize=b}};dhtmlXCombo.prototype.getOption=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getValue(this.t[b].item)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getOptionByIndex=function(a){if(a<0){return null}if(this.list.childNodes[a]==null){return null}return this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getText(this.t[b].item,true)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(b){var a=this.getOption(b);return(a!=null?a.index:-1)};dhtmlXCombo.prototype.setComboText=function(a){if(this.conf.allow_free_text!=true){return}this.unSelectOption();this.conf.last_text=this.base.firstChild.value=a;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.setComboValue=function(b){var a=this.getOption(b);if(a!=null){this.selectOption(a.index)}else{this.conf.last_value=b;this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="true"}};dhtmlXCombo.prototype.selectOption=function(b,c,a){if(b<0||b>=this.list.childNodes.length){return}var d=this.list.childNodes[b]._optId;this._setSelected(d,this._isListVisible(),true);this._confirmSelect("script")};dhtmlXCombo.prototype.unSelectOption=function(){if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null}this.base.firstChild.value="";if(this.conf.f_mode!=false){this._filterOpts(true)}this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));if(this.conf.enabled==a){return}this.conf.enabled=a;if(a){this.base.className="dhxcombo_"+this.conf.skin;this.base.firstChild.removeAttribute("disabled")}else{this._hideList();this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled";this.base.firstChild.setAttribute("disabled","true")}this._updateTopImage(this.conf.last_selected)};dhtmlXCombo.prototype.disable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return(this.conf.enabled==true)};dhtmlXCombo.prototype.show=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.base.style.display=(a==true?"":"none")};dhtmlXCombo.prototype.hide=function(a){if(typeof(a)=="undefined"){a=true}this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return(this.base.style.display=="")};dhtmlXCombo.prototype.setFilterHandler=function(a){if(typeof(a)=="function"){this.conf.f_func=a;this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){this.conf.f_func=window[a];this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{this.conf.f_func=null}}};dhtmlXCombo.prototype.enableFilteringMode=function(d,b,a,c){if(d==true||d=="between"){this.conf.f_mode=(d==true?"start":"between");if(b!=null){this.conf.f_url=b;this.conf.f_cache=window.dhx4.s2b(a);this.conf.f_dyn=window.dhx4.s2b(c)}else{this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}}else{this.conf.f_mode=false;this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}};dhtmlXCombo.prototype.filter=function(c,a){for(var d=0;d<this.list.childNodes.length;d++){var b=c.apply(window,[this._getOption(this.list.childNodes[d]._optId,d)]);this.list.childNodes[d].style.display=(b===true?"":"none")}if(typeof(a)=="undefined"||a==true){this._showList(true)}};dhtmlXCombo.prototype.sort=function(c){var a=[];for(var b=0;b<this.list.childNodes.length;b++){var d=this.list.childNodes[b]._optId;a.push([d,this._getOption(d,b)])}if(c=="asc"||c=="desc"){k=true;a.sort(function(f,e){f=f[1].text_option.toLowerCase();e=e[1].text_option.toLowerCase();var g=(c=="asc"?1:-1);return(f>e?g:-1*g)})}else{if(typeof(c)=="function"||typeof(window[c])=="function"){if(typeof(window[c])=="function"){c=window[c]}a.sort(function(f,e){return c.apply(window,[f[1],e[1]])})}}while(this.list.childNodes.length>0){this.list.removeChild(this.list.lastChild)}for(var b=0;b<a.length;b++){this.list.appendChild(this.t[a[b][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(a){this.conf.allow_free_text=(typeof(a)=="undefined"?true:window.dhx4.s2b(a))};dhtmlXCombo.prototype._checkForMatch=function(d){var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var e=null;var b=this.list.firstChild;while(b!=null){if(b.style.display==""&&b._optId!=null){var c=window.dhx4.trim(this.t[b._optId].obj.getText(b,true)).toLowerCase();if(a==c){e=b._optId;b=null}}if(b!=null){b=b.nextSibling}}if(this.conf.last_match==null){if(e!=null){this._setSelected(e,true,true);this.conf.last_match=e}else{if(this.conf.f_mode!="between"||d==true){this._setSelected(null,true,true);this.conf.last_match=null}}}else{if(e!=null){if(e!=this.conf.last_match){this._setSelected(e,true,true);this.conf.last_match=e}}else{this._setSelected(null,true,true);this.conf.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(b,a){if(this.conf.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,b,a)}};dhtmlXCombo.prototype.openSelect=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){if(this._getListVisibleCount()==0){if(a&&this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);if(this.hdr!=null){this.hdr.style.zIndex=Number(this.list.style.zIndex)+1}this.list.style.visibility="hidden";this.list.style.display="";if(this.hdr!=null){this.hdr.style.visibility=this.list.style.visibility;this.hdr.style.display=this.list.style.display}var b=(this.hdr!=null?this.hdr.offsetHeight:0);this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+b+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";if(this.hdr!=null){this.hdr.style.width=this.list.style.width;this.hdr.style.left=this.list.style.left;this.hdr.style.top=parseInt(this.list.style.top)-b+"px"}this._checkListHeight();this.list.style.visibility="visible";if(this.hdr!=null){this.hdr.style.visibility="visible"}this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.conf.list_zi_id);this.list.style.display="none";if(this.hdr!=null){this.hdr.style.display="none"}this.conf.clear_click=false;this.callEvent("onClose",[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display=="")};dhtmlXCombo.prototype._getListVisibleCount=function(){var a=0;for(var b=0;b<this.list.childNodes.length;b++){a+=(this.list.childNodes[b].style.display==""?1:0)}return a};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.conf.item_h==null){var l=this.list.firstChild;while(l!=null){if(l.style.display==""){this.conf.item_h=l.offsetHeight+(this.hdr!=null?-1:0);l=null}else{l=l.nextSibling}}l=null}var m=window.dhx4.screenDim();var f=window.dhx4.absTop(this.base);var b=this.base.offsetHeight;var a=(this.hdr!=null?this.hdr.offsetHeight:0);var c=Math.max(0,Math.floor((f+a-m.top)/this.conf.item_h));var j=Math.max(0,Math.floor((m.bottom-(f+b+a))/this.conf.item_h));var n=this._getListVisibleCount();if(j<Math.min(this.conf.opts_count_min,n)&&c>j){j=null}var g=Math.min((j==null?c:j),this.conf.opts_count,n);var d=(g<n?(g*this.conf.item_h)+"px":"");var e=this.conf.sp[this.conf.skin][this.hdr!=null?"hdr_ofs":"list_ofs"];this.list.style.height=d;this.list.style.top=(j==null?f-this.list.offsetHeight+e:f+b+a-e)+"px";if(this.hdr!=null){this.hdr.style.top=(j==null?f-a-this.list.offsetHeight+e:f+b-e)+"px"}};dhtmlXCombo.prototype._scrollToItem=function(e){var d=this.t[e].item.offsetTop;var c=d+this.t[e].item.offsetHeight;var b=this.list.scrollTop;var a=b+this.list.clientHeight;if(d<b){this.list.scrollTop=d+(this.hdr!=null?1:0)}else{if(c>a){this.list.scrollTop=c-this.list.clientHeight+(this.hdr!=null?-this.conf.sp[this.conf.skin].scr_ofs:0)}}};dhtmlXCombo.prototype._setSelected=function(c,b,a){if(a){this._updateTopImage(c)}if(c!=null&&this.conf.last_hover==c){if(b){this._scrollToItem(c)}return}if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null;if(c==null){this.callEvent("onSelectionChange",[])}}if(c!=null){this.t[c].obj.setSelected(this.t[c].item,true);this.conf.last_hover=c;this.callEvent("onSelectionChange",[]);if(this.conf.s_mode=="select"&&this.t[c].item==this.t[c].item.parentNode.lastChild){this._subloadRequest()}if(b){this._scrollToItem(c)}}};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==true&&this.conf.f_dyn_end==false){var c="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length;var a=this;var b=function(e){if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].data.push(e.xmlDoc.responseXML)}var d=a.list.childNodes.length;a.conf.f_loading=true;a.load(e.xmlDoc.responseXML);a.conf.f_loading=false;if(d==a.list.childNodes.length){a.conf.f_dyn_end=true;if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].dyn_end=true}}b=a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(this.conf.f_url,c,b)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+c,b)}}}};dhtmlXCombo.prototype.addOption=function(f,g,b,a,d){var c=null;if(!(f instanceof Array)){var h=this._renderOption({value:f,text:g,css:b,img:a});if(c==null&&window.dhx4.s2b(d)==true){c=h}}else{for(var e=0;e<f.length;e++){if(typeof(f[e])=="undefined"){continue}if(f[e] instanceof Array){h=this._renderOption({value:f[e][0],text:f[e][1],css:f[e][2],img:f[e][3]});if(c==null&&window.dhx4.s2b(f[e][4])==true){c=h}}else{var h=this._renderOption(f[e]);if(c==null&&window.dhx4.s2b(f[e].selected)==true){c=h}}}}if(c!=null){this._setSelected(c,this._isListVisible(),true);this._confirmSelect("onInit")}};dhtmlXCombo.prototype.updateOption=function(a,c,b,d){var e=this._getOptionId(a);if(e==null){return}this.t[e].obj.update(this.t[e].item,{value:c,text:b,css:d});if(this.conf.last_selected==e){this.conf.last_text=this.base.firstChild.value=this.t[e].obj.getText(this.t[e].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.deleteOption=function(d){for(var b in this.t){var c=this.t[b].obj.getValue(this.t[b].item);if(c==d){this._removeOption(b)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(b){b=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));for(var c in this.t){this._removeOption(c)}if(this.conf.tm_hover){window.clearTimeout(this.conf.tm_hover)}this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;if(b==true){this._hideList()}};dhtmlXCombo.prototype._renderOption=function(d){var e=window.dhx4.newId();var c=document.createElement("DIV");c._optId=e;c._tpl=this.conf.template;if(typeof(d.img)=="undefined"&&typeof(d.img_src)!="undefined"){d.img=d.img_src;delete d.img_src}if(typeof(d.img_dis)=="undefined"&&typeof(d.img_src_dis)!="undefined"){d.img_dis=d.img_src_dis;delete d.img_src_dis}d.img_path=this.conf.img_path;d.img_def=this.conf.img_def;d.img_def_dis=this.conf.img_def_dis;this.list.appendChild(c);var b=(this._isListVisible()&&window.dhx4.isFF==true);if(b==true){var a=this.list.scrollTop;this.list.scrollTop-=1}if(this.hdr!=null){d.multicol=true}this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,d),item:c,conf:{type:this.conf.opts_type}};c=null;if(b==true){this.list.scrollTop+=1}return e};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];if(this.conf.last_hover==a){this.conf.last_hover=null}if(this.conf.last_selected==a){this.conf.last_selected=null;this._confirmSelect("onDelete")}};dhtmlXCombo.prototype._confirmSelect=function(c,a){var b=false;if(typeof(a)=="undefined"){a=true}if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}if(this.conf.last_hover!=null){b=b||(this.conf.last_value!=this._getOptionValue(this.conf.last_hover));this.conf.last_match=this.conf.last_selected=this.conf.last_hover;this.conf.last_value=this._getOptionValue(this.conf.last_selected);this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="false"}else{if(this.conf.allow_free_text||(this.base.firstChild.value==""&&this.conf.allow_empty_value)){b=b||(this.conf.last_text!=this.base.firstChild.value);this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.conf.last_text=this.base.firstChild.value;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_text;this.base.childNodes[2].value="true"}else{this._cancelSelect();this._updateTopImage(this.conf.last_selected);return}}if(this.conf.f_ac&&this.conf.f_mode=="start"){this.conf.f_ac_text="";if(c!="blur"){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}if(a){this._hideList()}if(b==true&&c!="onInit"&&c!="onDelete"){this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(){this._hideList();this.base.firstChild.value=this.conf.last_text;if(this.conf.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(g,d){if(!this.t[g]){return null}if(typeof(d)=="undefined"){d=-1}if(d<0){for(var f=0;f<this.list.childNodes.length;f++){if(d<0&&this.list.childNodes[f]._optId==g){d=f}}}var e={value:this.t[g].obj.getValue(this.t[g].item),text:this.t[g].obj.getText(this.t[g].item),text_input:this.t[g].obj.getText(this.t[g].item,true),text_option:this.t[g].obj.getText(this.t[g].item,null,true),css:this.t[g].obj.getCss(this.t[g].item),selected:(g==this.conf.last_selected),index:d};if(typeof(this.t[g].obj.getExtraData)=="function"){var c=this.t[g].obj.getExtraData(this.t[g].item);for(var b in c){if(typeof(e[b])=="undefined"){e[b]=c[b]}}}return e};dhtmlXCombo.prototype._getOptionProp=function(d,c,b){if(d!=null){var a=this._getOption(d);if(a!=null){return a[c]}}return b};dhtmlXCombo.prototype._getOptionId=function(b){var d=null;for(var a=0;a<this.list.childNodes.length;a++){if(d==null){var c=this.list.childNodes[a]._optId;if(b==this.t[c].obj.getValue(this.t[c].item)){d=c}}}return d};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase()};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,(this.conf.combo_width-24-(this.conf.combo_image?23:0)))+"px";this.base.firstChild.style.marginLeft=(this.conf.combo_image?"23px":"0px")};dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=(parseInt(a)||null)};dhtmlXCombo.prototype.setOptionIndex=function(c,a){if(isNaN(a)||a<0){return}var d=this.getOption(c);if(d==null){return}if(a==d.index){return}var b=this.list.childNodes[d.index];b.parentNode.removeChild(b);if(this.list.childNodes[a]!=null){this.list.insertBefore(b,this.list.childNodes[a])}else{this.list.appendChild(b)}b=null};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(j){var e="";var d="";this.conf.col_w=0;for(var f=0;f<j.length;f++){var a=Number(parseInt(j[f].width)||50);var c=(j[f].css||"");var g=(f==0&&window.dhx4.isIE6==true?"_first":"");d+="<div class='dhxcombo_cell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_cell_text'>"+(j[f].option||"&nbsp;")+"</div></div>";e+="<div class='dhxcombo_hdrcell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_hdrcell_text'>"+(j[f].header||"&nbsp;")+"</div></div>";this.conf.col_w+=a+1}var a=500;var b=document.createElement("DIV");b.style.position="absolute";b.style.top="10px";b.style.left=-a*2+"px";b.style.width=a+"px";b.style.height="50px";b.style.overflowY="scroll";b.innerHTML="<div>&nbsp;</div>";document.body.appendChild(b);this.conf.col_w+=a-b.firstChild.offsetWidth+10;b.parentNode.removeChild(b);b=null;this.conf.template.option=d;this._mcAttachHeader(e);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(a){if(this.hdr==null){this.hdr=document.createElement("DIV");this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr";this.hdr.style.display="none";this.list.parentNode.insertBefore(this.hdr,this.list);if(typeof(window.addEventListener)=="function"){this.hdr.addEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.attachEvent("onmousedown",this._doOnListMouseDown)}if(this.conf.opts_type=="checkbox"&&this.conf.combo_image==true){this.conf.combo_image=false;if(this.base.lastChild.className.match(/dhxcombo_top_image/)!=null){this.base.removeChild(this.base.lastChild)}this._adjustBase()}}this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){if(this.hdr!=null){if(typeof(window.addEventListener)=="function"){this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.detachEvent("onmousedown",this._doOnListMouseDown)}this.hdr.parentNode.removeChild(this.hdr);this.hdr=null}this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,g,e,c){var f=(a>=0&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null);if(f==null){return null}if(typeof(this.t[f].obj[g])!="function"){return null}var d=[this.t[f].item];for(var b=2;b<arguments.length;b++){d.push(arguments[b])}return this.t[f].obj[g].apply(this.t[f].obj,d)};function dhtmlXComboExtend(d,c){for(var b in dhtmlXCombo.prototype.modes[c]){if(typeof(dhtmlXCombo.prototype.modes[d][b])=="undefined"){dhtmlXCombo.prototype.modes[d][b]=dhtmlXCombo.prototype.modes[c][b]}}}dhtmlXCombo.prototype.modes.option={image:false,html:false,option_css:"dhxcombo_option_text",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text)},setText:function(b,c){b._conf.text=c;var a=(typeof(c)=="object"?window.dhx4.template(b._tpl.option,this.replaceHtml(b._conf.text),true):window.dhx4.trim(this.replaceHtml(b._conf.text)||""));b.lastChild.innerHTML=(a.length==0?"&nbsp;":a)},getText:function(c,a,b){if(window.dhx4.s2b(a)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.input,c._conf.text,true)}if(window.dhx4.s2b(b)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.option,c._conf.text,true)}return c._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return String(a.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(a){return{type:"option"}},replaceHtml:function(d){if(this.html==true){return d}if(typeof(d)=="object"){var c={};for(var b in d){c[b]=this.replaceHtml(d[b])}}else{var c=d.replace(/[\<\>\&\s]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return a})}return c}};dhtmlXCombo.prototype.modes.checkbox={image:true,html:true,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(a,b){if(this.image_css_regexp==null){this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))}a._conf={value:b.value,css:"",checked:window.dhx4.s2b(b.checked)};a.className="dhxcombo_option";if(b.multicol==true){b.text.checkbox="<div class='"+String(this.image_css).replace("#state#",(a._conf.checked?"1":"0"))+"'></div>&nbsp;";a.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"}else{a.innerHTML="<div class='"+String(this.image_css).replace("#state#",(a._conf.checked?"1":"0"))+"'></div><div class='"+this.option_css+"'>&nbsp;</div>"}if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},setChecked:function(b,c){b._conf.checked=window.dhx4.s2b(c);var a=String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"));this._changeChbxCss(b.childNodes,a)},_changeChbxCss:function(a,b){for(var c=0;c<a.length;c++){if(a[c].tagName!=null&&a[c].className!=null&&a[c].className.match(this.image_css_regexp)!=null){a[c].className=b}else{if(a[c].childNodes.length>0){this._changeChbxCss(a[c].childNodes,b)}}}},isChecked:function(a){return(a._conf.checked==true)},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(e,d,f){var c=true;var b=(d.target||d.srcElement);while(c==true&&b!=null&&b!=e&&b.className!=null){if(b.className.match(this.image_css_regexp)!=null){var a=[e._conf.value,!e._conf.checked];if(f.callEvent("onBeforeCheck",a)===true){this.setChecked(e,!this.isChecked(e));f.callEvent("onCheck",a)}c=false;a=null}else{b=b.parentNode}}b=f=e=null;return c},getTopImage:function(b,a){return""},topImageClick:function(a,b){return true}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)};dhtmlXCombo.prototype.getChecked=function(a){var b=[];for(var c=0;c<this.list.childNodes.length;c++){if(this.isChecked(c)){b.push(this._getOptionProp(this.list.childNodes[c]._optId,"value",""))}}return b};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};dhtmlXCombo.prototype.modes.image={image:true,html:true,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis);return this},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(c,a,e,f,d,b){if(a!=null&&a.length>0){a=f+a}else{if(d!=null&&d.length>0){a=f+d}else{a=null}}if(e!=null&&e.length>0){e=f+e}else{if(b!=null&&b.length>0){e=f+b}else{if(b==true){e=a}else{e=null}}}c._conf.img=a;c._conf.img_dis=e;c.firstChild.style.backgroundImage=(a!=null?"url("+a+")":"none")},getExtraData:function(a){return{type:"image"}},getTopImage:function(d,c){var b=(c?"img":"img_dis");if(d!=null&&d._conf[b]!=null){return"<div class='"+this.image_css+"' style='background-image:url("+d._conf[b]+");'></div>"}return""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,b){if(a!=null){this.conf.img_def=a}if(b!=null){this.conf.img_def_dis=b}};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};function dhtmlXPopup(c){var d=this;this.conf=c||{};c=null;this.mode=(this.conf.mode||"bottom");this.conf.zi=window.dhx4.newId();this.conf.context=(this.conf.context==null?true:window.dhx4.s2b(this.conf.context));this.conf.IE6_display_fix=(this.conf.IE6_display_fix==null?false:window.dhx4.s2b(this.conf.IE6_display_fix));this.conf.last_p_click=this.conf.last_body_click=null;this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.p.oncontextmenu=function(a){if(d.conf.context==false){a=a||event;a.returnValue=false;return false}};this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.ontouchstart=this.p.onclick=function(g){g=g||event;var f=(d.conf.last_p_click!=null&&d.conf.last_p_click!=g.type);d.conf.last_p_click=g.type;if(f==true){return}d._clearClick=true;if(d._nodeObj!=null){d.callEvent("onContentClick",[]);return true}var a=(g.target||g.srcElement);var h=null;while(a!=d.p&&a!=null){if(typeof(a._idd)!="undefined"&&!a._isSeparator){h=a._idd;a=null}else{a=a.parentNode}}a=null;if(h!=null){d.callEvent("onClick",[h]);if(d!=null&&d.isVisible!=null&&d.isVisible()&&d.callEvent("onBeforeHide",["select",g,h])===true){g.cancelBubble=true;d.hide()}}};this.separator="DHXSEP_"+window.dhx4.newId();this.tpl=[];this._setTemplate=function(a){this.tpl=a.split(",")};this.show=function(e){var a=null;if(arguments.length==1){if(!e){e=this.conf.id[0]}else{if(!this._idExists(e)){return}}if(this.conf.toolbar){a=this.conf.toolbar._getItemDim(e)}if(this.conf.ribbon){a=this.conf.ribbon._getItemDim(e)}if(this.conf.form){a=this.conf.form._getItemDim(e)}}else{if(arguments.length==4){this._clearClick=true;a={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]};e=null}}if(!a){return}this.p.style.visibility="hidden";this.p.style.display="";this._setPos(a);this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this.p.style.visibility="visible";this._lastId=e;this.callEvent("onShow",[e])};this._setPos=function(B,g){var q=B.left;var n=B.top;var s=B.width;var E=B.height;this._posData={left:q,top:n,width:s,height:E};var G=window.dhx4.screenDim();var z=g||this.mode;if(typeof(g)=="undefined"){g=false}var I={top:(n-this.p.offsetHeight)-G.top,bottom:G.bottom-(n+E+this.p.offsetHeight),left:q-this.p.offsetWidth-G.left,right:G.right-(q+s+this.p.offsetWidth)};if(!g&&I[z]<0){var C=this._getAvailPos(z,I);if(C!==false){this._setPos(B,C);return}}if(z=="top"||z=="bottom"){var u=this.skinParams[this.conf.skin].t2;var r=this.skinParams[this.conf.skin].t3;var m=Math.round(this.p.offsetWidth/2);var a=Math.round(this.p.lastChild.offsetWidth/2);if(q<G.left){var F=Math.min(q+s,G.left);s=q+s-F;q=F}if(q+s>G.right){s=G.right-q}var o=Math.round(q+s/2);var f=o-m;var D=o-u-a;var l=o+a+u-this.p.offsetWidth;if(f<G.left-r){f=Math.min(G.left-r,D)}else{if(f+this.p.offsetWidth>G.right+r){f=Math.max(l,G.right+r-this.p.offsetWidth)}}this.p.style.left=f+"px";this.p.style.top=(z=="top"?n-this.p.offsetHeight:n+E)+"px";o=o-f-a;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+z;this.p.lastChild.style.top=(z=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=o+"px"}if(z=="left"||z=="right"){var u=this.skinParams[this.conf.skin].t0;var r=this.skinParams[this.conf.skin].t1;var j=Math.round(this.p.offsetHeight/2);var K=Math.round(this.p.lastChild.offsetHeight/2);if(n<G.top){var e=Math.min(n+E,G.top);E=n+E-e;n=e}if(n+E>G.bottom){E=G.bottom-n}var o=Math.round(n+E/2);var A=o-j;var J=o-u-K;var H=o+K+u-this.p.offsetHeight;if(A<G.top-r){A=Math.min(G.top-r,J)}else{if(A+this.p.offsetHeight>G.bottom+r){A=Math.max(H,G.bottom+r-this.p.offsetHeight)}}this.p.style.left=(z=="left"?q-this.p.offsetWidth:q+s)+"px";this.p.style.top=A+"px";o=o-A-K;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+z;this.p.lastChild.style.left=(z=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=o+"px"}if(this._IEDisp&&this._nodeId!=null){var v=document.getElementById(this._nodeId);if(this.conf.IE6_display_fix==true){v.style.visibility="hidden"}window.setTimeout(function(){v.style.visibility="visible";v=null},1)}};this._getAvailPos=function(l,j){var f={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]};var g=null;for(var h=0;h<f[l].length;h++){if(g==null&&j[f[l][h]]>0){g=f[l][h]}}if(g==null){g="bottom";for(var e in j){if(j[e]>j[g]){g=e}}}if(g==l){return false}return g};this._repaint=function(){if(this.isVisible()){this._setPos(this._posData)}};this.clear=function(){if(this._nodeObj){if(window.dhx4.isIE&&typeof(window.dhtmlXLayoutObject)!="undefined"&&this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}if(this._nodeObj.unload){this._nodeObj.unload()}else{if(this._nodeObj.destruct){this._nodeObj.destruct()}}this._nodeObj=this._nodeId=null;if(this._nodeObjEv!=null){for(var e=0;e<this._nodeObjEv.length;e++){this.detachEvent(this._nodeObjEv[e])}this._nodeObjEv=null}}if(this._IEHoverInited){this._IEHoverClear()}var a=this.p.firstChild.firstChild.firstChild;while(a.childNodes.length>0){a.removeChild(a.lastChild)}a=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var a=this._lastId;this._lastId=null;this.callEvent("onHide",[a]);this.conf.last_p_click=this.conf.last_body_click=null}};this.isVisible=function(){return(this.p.style.display=="")};this.itemData={};this.getItemData=function(a){if(!a){return this.itemData}if(this.itemData[a]){return this.itemData[a]}return{}};this.setSkin=function(a){this.conf.skin=a;this.p.className="dhx_popup_"+this.conf.skin;if(this._nodeObj!=null&&typeof(this._nodeObj.setSkin)=="function"){this._nodeObj.setSkin(this.conf.skin)}this._repaint()};this.attachList=function(f,l){this._setTemplate(f);this.clear();var g=this.p.firstChild.firstChild.firstChild;for(var j=0;j<l.length;j++){var h=document.createElement("TR");if(l[j]!=this.separator){if(typeof(l[j].id)=="undefined"||l[j].id==null){h._idd=window.dhx4.newId();while(this.itemData[h._idd]!=null){h._idd=window.dhx4.newId()}}else{h._idd=l[j].id}this.itemData[h._idd]=l[j]}g.appendChild(h);if(l[j]==this.separator){h.className="dhx_popup_sep";h._isSeparator=true;var m=document.createElement("TD");m.className="dhx_popup_sep";m.colSpan=this.tpl.length;m.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";h.appendChild(m);m=null}else{for(var a=0;a<this.tpl.length;a++){var e="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||a==0||a==this.tpl.length-1)){if(this.tpl.length==1){e+=" dhx_popup_td_single"}else{e+=(a==0?" dhx_popup_td_first":" dhx_popup_td_last")}}var m=document.createElement("TD");m.className=e;m.innerHTML=l[j][this.tpl[a]]||"&nbsp;";h.appendChild(m);m=null}if(this._IEHover){h._IEHover=true;if(!this._IEHoverInited){this._IEHoverInit()}}}h=null}g=null;this._repaint()};this._attachNode=function(g,f){this.clear();this._nodeId="dhxpopup_node_"+window.dhx4.newId();var a=this.p.firstChild.firstChild.firstChild;var e=document.createElement("TR");e.className="dhxnode";a.appendChild(e);var h=document.createElement("TD");h.className="dhx_popup_td";h.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(f.width){h.firstChild.style.width=f.width+"px"}if(f.height){h.firstChild.style.height=f.height+"px"}e.appendChild(h);h=e=a=null;if(typeof(this["_attach_init_"+g])=="function"){this["_attach_init_"+g](f);this._enableIEVFix()}this._repaint();return this._nodeObj};this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("touchstart",this._doOnClick,false);window.removeEventListener("click",this._doOnClick,false);window.removeEventListener("keyup",this._doOnKeyUp,false);window.removeEventListener("unload",this._doOnUnload,false)}else{document.body.detachEvent("onclick",this._doOnClick,false);document.body.detachEvent("onkeyup",this._doOnKeyUp,false);document.body.detachEvent("onunload",this._doOnUnload,false)}window.dhx4.detachEvent(this.conf.ev_grid_click);this.clear();if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){if(this.conf.toolbar.detachEvent!=null){this.conf.toolbar.detachEvent(this.conf.toolbarEvent)}else{this.conf.toolbar._getItemDim=null}}if(this.conf.ribbonEvent!=null&&this.conf.ribbon!=null){if(this.conf.ribbon.detachEvent!=null){this.conf.ribbon.detachEvent(this.conf.ribbonEvent)}else{this.conf.ribbon._getItemDim=null}}if(this.conf.slider!=null){for(var f=0;f<this.conf.slider_events.length;f++){this.conf.slider.detachEvent(this.conf.slider_events[f])}this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);this.p=null;for(var e in this.conf){this.conf[e]=null}for(var e in this){this[e]=null}d=null};window.dhx4._eventable(this);this._doOnClick=function(n){n=n||event;var a=(d.conf.last_body_click!=null&&d.conf.last_body_click!=n.type);d.conf.last_body_click=n.type;if(a==true){return}if(d._clearClick==true){d._clearClick=false;return}if(d.conf.form!=null){var h;var o=(n.target||n.srcElement);if((o.tagName||"").toLowerCase()=="option"){o=o.parentNode}if(o.className!=null&&o.className.search("dhxform")>=0){if(o.parentNode!=null&&o.parentNode.parentNode!=null&&o.parentNode.parentNode._idd!=null){h=o.parentNode.parentNode._idd;if(o.parentNode.parentNode._type=="ra"){h=[o.parentNode.parentNode._group,o.parentNode.parentNode._value]}}}else{var l=true;var m=false;while(l&&!m){var j=(o.className||"").toLowerCase();if(j.length>0){m=(j=="dhxform_btn"||j.search(/dhxeditor_inside/gi)>=0||j=="dhxcombo_input"||j.search(/dhxcombolist/gi)>=0)}o=o.parentNode;l=(o!=null)}if(m){return}}o=null;if(h!=null&&d._idExists(h)){return}}if(typeof(window.dhtmlXForm)!="undefined"&&d._nodeObj instanceof window.dhtmlXForm){var q={};var j=0;var g=d._nodeObj;g.forEachItem(function(e){if(g.getItemType(e)=="combo"){q[g.getCombo(e).list._listId]=true;j++}});g=null;if(j>0){var o=(n.target||n.srcElement);var l=true;var m=false;while(l==true&&m!=true){var j=(o.className||"").toLowerCase();if(j.length>0&&j.search(/^dhxcombolist/gi)>=0&&o._listId!=null&&q[o._listId]==true){m=true;o=null}else{o=o.parentNode;l=(o!=null)}}if(m==true){return}}}if(d.isVisible()&&d.callEvent("onBeforeHide",["click",n])===true){d.hide()}};this._doOnKeyUp=function(a){a=a||event;if(a.keyCode==27){if(d.isVisible()&&d.callEvent("onBeforeHide",["esc",a])===true){d.hide()}}};this._doOnUnload=function(){d.unload()};if(typeof(window.addEventListener)=="function"){window.addEventListener("touchstart",this._doOnClick,false);window.addEventListener("click",this._doOnClick,false);window.addEventListener("keyup",this._doOnKeyUp,false);window.addEventListener("unload",this._doOnUnload,false)}else{document.body.attachEvent("onclick",this._doOnClick,false);document.body.attachEvent("onkeyup",this._doOnKeyUp,false);document.body.attachEvent("onunload",this._doOnUnload,false)}this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(e,a){if(d._nodeObj!=null&&d._nodeObj==a){return}d._clearClick=false;d._doOnClick(e)});this._idExists=function(f){var a=false;for(var e=0;e<this.conf.id.length;e++){if(this.conf.id[e] instanceof Array){a=a||(this.conf.id[e][0]==f[0]&&this.conf.id[e][1]==f[1])}else{a=a||this.conf.id[e]==f}}return a};this._IEDisp=(window.dhx4.isIE6||document.compatMode!="CSS1Compat");this._IEHover=(window.dhx4.isIE6==true);if(this._IEHover){this._IEHoverInit=function(){this.p.onmouseover=function(){var a=event.srcElement;while(a!=this&&a._IEHover!=true){a=a.parentNode}if(a._IEHover){if(d._IEHoverTM){window.clearTimeout(d._IEHoverTM)}if(d._lastIEHover==a){return}d._IEHoverRender(a);a=null}};this.p.onmouseout=function(){if(d._IEHoverTM){window.clearTimeout(d._IEHoverTM)}d._IEHoverTM=window.setTimeout(function(){d._IEHoverRender(null)},1)};this._IEHoverRender=function(a){if(this._lastIEHover!=null){if(this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,"");this._lastIEHover=null}}if(a!=null&&a.className.search(/tr_hover/gi)<0){a.className+=" tr_hover";d._lastIEHover=a}};this._IEHoverInited=true};this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=false}}this._IEFirstLast=(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8);this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var e=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"});var a=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(e,a)}};if(typeof(window.dhtmlXToolbarObject)!="undefined"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.conf.skin;this._doOnToolbarClick=function(e){for(var a=0;a<d.conf.id.length;a++){if(e==d.conf.id[a]){if(e!=d._lastId){d.show(e);d._clearClick=true}}}};if(typeof(dhtmlXToolbarObject.prototype._getItemDim)=="undefined"){dhtmlXToolbarObject.prototype._getItemDim=function(f){var a=this.objPull[this.idPrefix+f];var e={left:window.dhx4.absLeft(a.obj),top:window.dhx4.absTop(a.obj),width:a.obj.offsetWidth+(a.arw?a.arw.offsetWidth:0),height:a.obj.offsetHeight};a=null;return e}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)}if(typeof(window.dhtmlXRibbon)!="undefined"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.ribbon.conf.skin;this._doOnRibbonClick=function(e){for(var a=0;a<d.conf.id.length;a++){if(e==d.conf.id[a]){if(e!=d._lastId){d.show(e);d._clearClick=true}}}};if(typeof(dhtmlXRibbon.prototype._getItemDim)=="undefined"){dhtmlXRibbon.prototype._getItemDim=function(f){var a=this._items[f].base;var e={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return e}}this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)}if(typeof(window.dhtmlXForm)!="undefined"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof(dhtmlXForm.prototype._getItemDim)=="undefined"){dhtmlXForm.prototype._getItemDim=function(a,e){return this.doWithItem(a,"_getDim")};for(var b in {input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[b]!=null){dhtmlXForm.prototype.items[b]._getDim=function(e){var a=e;if({ta:true,pw:true,se:true,calendar:true,colorpicker:1,editor:true}[e._type]){a=e.childNodes[e._ll?1:0].childNodes[0]}if({ch:true,ra:true,btn2state:true}[e._type]){a=e.childNodes[e._ll?1:0].childNodes[1]}if({bt:true}[e._type]){a=e.firstChild}if({combo:true}[e._type]){a=e._combo.DOMParent.firstChild}var f={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};a=null;return f}}}}}if(typeof(window.dhtmlXSlider)!="undefined"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider){if(!this.conf.mode){this.mode="top"}this.conf.slider_tm=null;this._sliderShow=function(){if(d.conf.slider_tm){window.clearTimeout(d.conf.slider_tm)}var a=d.conf.slider._r_actv;if(a!=null){var e={left:window.dhx4.absLeft(a),top:window.dhx4.absTop(a),width:a.offsetWidth,height:a.offsetHeight};d.show(e.left,e.top,e.width,e.height);a=null}};this._sliderHide=function(){d.conf.slider_tm=window.setTimeout(function(){d.hide()},200)};this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]}this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue");return this}dhtmlXPopup.prototype.attachObject=function(a){return this._attachNode("object",{obj:a})};dhtmlXPopup.prototype._attach_init_object=function(a){this._nodeObj=(typeof(a.obj)=="string"?document.getElementById(a.obj):a.obj);a.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(a){return this._attachNode("html",{html:a})};dhtmlXPopup.prototype._attach_init_html=function(a){document.getElementById(this._nodeId).innerHTML=a.html;this._nodeObj={text:a.html}};dhtmlXPopup.prototype.attachForm=function(b,a){return this._attachNode("form",{struct:b,width:a})};dhtmlXPopup.prototype._attach_init_form=function(b){var a=this;this._nodeObj=new dhtmlXForm(this._nodeId,b.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){a._clearClick=true});if(this.conf.editorEv!=null&&this.checkEvent(this.conf.editorEv)==false){this.conf.editorEv=null}if(dhtmlXForm.prototype.items.editor!=null&&this.conf.editorEv==null){this.conf.editorEv=this.attachEvent("onShow",function(){var e=dhtmlXForm.prototype.items.editor.editor;for(var c in e){var f=e[c].base;var d=false;while(f!=null){if(f==this.p){d=true;f=null}else{f=f.parentNode}}f=null;if(d==true){e[c].cell.conf.cells_cont=null;e[c].setSizes()}}e=null;this.detachEvent(this.conf.editorEv);this.conf.editorEv=null});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(this.conf.editorEv)}};dhtmlXPopup.prototype.attachCalendar=function(a){return this._attachNode("calendar",a||{})};dhtmlXPopup.prototype._attach_init_calendar=function(a){if(a["double"]==true){this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId);this._nodeObj.leftCalendar.setSkin(this.conf.skin);this._nodeObj.rightCalendar.setSkin(this.conf.skin)}else{this._nodeObj=new dhtmlXCalendarObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)}this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(b,a){return this._attachNode("grid",{width:b||400,height:a||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(c,b,a){return this._attachNode("tree",{width:c||400,height:b||200,rootId:a||0})};dhtmlXPopup.prototype._attach_init_tree=function(a){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",(a.rootId))};dhtmlXPopup.prototype.attachLayout=function(b,a,c){return this._attachNode("layout",{width:b||400,height:a||200,pattern:c||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(a){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,a.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(c,a,b){return this._attachNode("accordion",{width:c||400,height:a||200,conf:b||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(a.conf)};dhtmlXPopup.prototype.attachTabbar=function(c,a,b){if(typeof(b)=="string"){b={mode:b}}else{if(typeof(b)!="object"||b==null){b={}}}return this._attachNode("tabbar",{width:c||400,height:a||200,conf:b})};dhtmlXPopup.prototype._attach_init_tabbar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(a.conf)};dhtmlXPopup.prototype.attachSidebar=function(c,a,b){if(b==null){b={}}return this._attachNode("sidebar",{width:c||400,height:a||200,conf:b})};dhtmlXPopup.prototype._attach_init_sidebar=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(a.conf)};dhtmlXPopup.prototype.attachEditor=function(c,a,b){return this._attachNode("editor",{width:c||400,height:a||200,conf:b||{}})};dhtmlXPopup.prototype._attach_init_editor=function(b){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;b.conf.parent=this._nodeId;if(b.conf.skin==null){b.conf.skin=this.conf.skin}this._nodeObj=new dhtmlXEditor(b.conf);var a=this.attachEvent("onShow",function(){if(this._nodeObj instanceof window.dhtmlXEditor){this._nodeObj.setSizes()}});if(this._nodeObjEv==null){this._nodeObjEv=[]}this._nodeObjEv.push(a)};dhtmlXPopup.prototype.attachColorPicker=function(a){if(typeof(a)!="object"||a==null){a={}}return this._attachNode("colorpicker",{conf:a})};dhtmlXPopup.prototype._attach_init_colorpicker=function(a){a.conf.skin=this.conf.skin;a.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(a.conf)};dhtmlXPopup.prototype.attachCarousel=function(c,a,b){if(b==null){b={}}return this._attachNode("carousel",{width:c||400,height:a||300,conf:b})};dhtmlXPopup.prototype._attach_init_carousel=function(a){a.conf.parent=this._nodeId;a.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(a.conf)};function dhtmlXForm(e,d,f){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var c=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(a=="dhx_terrace"?"13px":"12px");this._updateBlocks();this.forEachItem(function(h){var g=c.getItemType(h);if(typeof(c.items[g])!="undefined"&&typeof(c.items[g].setSkin)=="function"){c.doWithItem(h,"setSkin",a)}})};this.skin=(f||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(e)=="object"?e:document.getElementById(e));if(!e._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="dhx_terrace"?"13px":"12px");this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(g){g=(g||event);if(g.keyCode==13){var a=(g.target||g.srcElement);if(typeof(a.tagName)!="undefined"&&String(a.tagName).toLowerCase()=="textarea"&&!g.ctrlKey){return}c.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(n,o){if(this.b_index==null){this.b_index=0}else{this.b_index++}var h=null;var g=null;if(o!=null){if(o<0){o=0}var l=0;for(var a=0;a<this.cont.childNodes.length;a++){for(var m=0;m<this.cont.childNodes[a].childNodes.length;m++){if(g==null&&this.cont.childNodes[a].childNodes[m]._isNestedForm!=true){if(l==o){h=this.cont.childNodes[a].nextSibling;g=this.cont.childNodes[a].childNodes[m]}l++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(n)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+n+"px!important;"}if(h!=null){this.cont.insertBefore(this.base[this.b_index],h);h=null}else{this.cont.appendChild(this.base[this.b_index])}if(g!=null){while(g!=null){var j=g;g=g.nextSibling;this.base[this.b_index].appendChild(j);j=null}}};this.setSizes=function(){};this._mergeSettings=function(m){var h=-1;var j={type:"settings"};for(var g in this.idef){j[g]=this.idef[g]}for(var l=0;l<m.length;l++){if(typeof(m[l])!="undefined"&&m[l].type=="settings"){for(var g in m[l]){j[g]=m[l][g]}h=l}}m[h>=0?h:m.length]=j;return m};this._genStr=function(a){var g="dhxId_";var j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<a;h++){g+=j.charAt(Math.floor(Math.random()*j.length))}return g};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":e._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(x,l,r,n,u,y,t){if(this.items[x]._index){this.getForm()._indexId.push(l);this.getForm()._idIndex[l]={ind:this.getForm()._indexId.length-1}}if(!x){x=this._type}if(x=="list"&&u!=null&&this.itemPull[this.idPrefix+u]!=null&&typeof(this.itemPull[this.idPrefix+u]._addSubListNode)=="function"){var v=this.itemPull[this.idPrefix+u]._addSubListNode()}else{if(x=="newcolumn"){var v={}}else{var m=this.base[this.b_index];var g=null;if(typeof(y)!="undefined"&&!isNaN(y)&&x!="list"){y=Math.max(parseInt(y),0)+1;for(var A=0;A<this.cont.childNodes.length;A++){for(var h=0;h<this.cont.childNodes[A].childNodes.length;h++){if(g==null&&this.cont.childNodes[A].childNodes[h]._isNestedForm!=true){y--;if(y==0){g=this.cont.childNodes[A].childNodes[h];m=this.cont.childNodes[A]}}}}}else{if(x=="list"){for(var z in this.itemPull){if(z==this.idPrefix+l){g=this.itemPull[z].nextSibling;if(this.itemPull[z]._listBase!=null&&this.itemPull[z]._listBase.length>0){g=this.itemPull[z]._listBase[this.itemPull[z]._listBase.length-1]}}}}}var v=document.createElement("DIV");if(t==true&&g!=null){g=g.nextSibling}if(g!=null){m.insertBefore(v,g)}else{m.appendChild(v)}}}v._idd=l;v._rId=this._rId;if(typeof(v.style)!="undefined"){if(typeof(r.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){r.offsetLeft=this.idef.offsetLeft}if(typeof(r.offsetTop)=="undefined"&&this.idef.offsetTop>0){r.offsetTop=this.idef.offsetTop}var o="";if(typeof(r.offsetLeft)!="undefined"){o+=" padding-left:"+r.offsetLeft+"px!important;"}if(typeof(r.offsetTop)!="undefined"){o+=" padding-top:"+r.offsetTop+"px!important;"}v.style.cssText+=o}if(x=="block"){if(isNaN(r.blockOffset)){r.blockOffset=this.idef.blockOffset}}if(x=="list"){if(typeof(v._ofsNested)=="undefined"){v._ofsNested=this.idef_const.offsetNested}if(n!=null){v._sId=n}var s=this.items[x].render(v,this.skin);if(!this.itemPull[this.idPrefix+l]._listObj){this.itemPull[this.idPrefix+l]._listObj=[]}if(!this.itemPull[this.idPrefix+l]._list){this.itemPull[this.idPrefix+l]._list=[]}if(!this.itemPull[this.idPrefix+l]._listBase){this.itemPull[this.idPrefix+l]._listBase=[]}(this.itemPull[this.idPrefix+l]._listObj).push(s[0]);(this.itemPull[this.idPrefix+l]._list).push(s[1]);(this.itemPull[this.idPrefix+l]._listBase).push(v);s[1].checkEvent=function(a){return c.checkEvent(a)};s[1].callEvent=function(a,q){return c.callEvent(a,q)};s[1].getForm=function(){return c.getForm()};s[1]._initObj(this._mergeSettings(r));if(v._inBlcok){v.className+=" in_block"}return s[1]}if(x=="newcolumn"){this._prepare(r.offset,y);return}if(x=="label"&&this._ic++==0){r._isTopmost=true}r.position=this.apos_css[(!r.position||!this.apos_css[r.position]?this.idef.position:r.position)];v.className=r.position+(typeof(r.className)=="string"?" "+r.className:"");if(!r.labelWidth){r.labelWidth=this.idef.labelWidth}if(!r.labelHeight){r.labelHeight=this.idef.labelHeight}if(typeof(r.wrap)!="undefined"){r.wrap=window.dhx4.s2b(r.wrap)}r.labelAlign=(this.align_css[r.labelAlign]?this.align_css[r.labelAlign]:this.align_css[this.idef.labelAlign]);r.inputWidth=(r.width?r.width:(r.inputWidth?r.inputWidth:this.idef.inputWidth));if(!r.inputHeight){r.inputHeight=this.idef.inputHeight}if(typeof(r.note)!="undefined"){if(r.note.length!=null&&r.note[0]!=null){r.note=r.note[0]}if(typeof(r.note.width)=="undefined"){r.note.width=this.idef.noteWidth}if(r.note.width=="auto"){r.note.width=r.inputWidth}}v.checkEvent=function(a){return c.checkEvent(a)};v.callEvent=function(a,q){return c.callEvent(a,q)};v.getForm=function(){return c.getForm()};v._autoCheck=function(a){c._autoCheck(a)};if(typeof(r.readonly)=="string"){r.readonly=window.dhx4.s2b(r.readonly)}if(typeof(r.autoStart)=="string"){r.autoStart=window.dhx4.s2b(r.autoStart)}if(typeof(r.autoRemove)=="string"){r.autoRemove=window.dhx4.s2b(r.autoRemove)}if(typeof(r.titleScreen)=="string"){r.titleScreen=window.dhx4.s2b(r.titleScreen)}if(typeof(r.info)=="string"){r.info=window.dhx4.s2b(r.info)}if(typeof(r.hidden)=="string"){r.hidden=window.dhx4.s2b(r.hidden)}if(typeof(r.checked)=="string"){r.checked=window.dhx4.s2b(r.checked)}if(typeof(r.userdata)!="undefined"){for(var z in r.userdata){this.getForm().setUserData(l,z,r.userdata[z])}}if(r.validate){if(typeof(r.validate!="undefined")&&(typeof(r.validate)=="function"||typeof(window[r.validate])=="function")){v._validate=[r.validate]}else{v._validate=String(r.validate).split(this.separator)}}if(typeof(r.required)!="undefined"){if(typeof(r.required)=="string"){r.required=window.dhx4.s2b(r.required)}v._required=(r.required==true)}if(v._required){if(!v._validate){v._validate=[]}var j=false;for(h=0;h<v._validate.length;h++){j=(j||(v._validate[h]=="NotEmpty"))}if(!j){v._validate.push("NotEmpty")}}v._ll=(r.position==this.apos_css["label-left"]||r.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+l]=this.items[x].render(v,r);this.itemPull[this.idPrefix+l]=v};this._initObj=function(l,h){if(typeof(l.data)!="undefined"){var m=null;if(typeof(h)!="undefined"){m=h.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(m!=null&&m[0]!=null){m=m[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[m,window.dhx4._copyObj(l.data)])===true){this.formId=m;this._last_load_data=l;this.setFormData(l.data);this.resetDataProcessor("updated")}return}this._prepare();for(var j=0;j<l.length;j++){if(typeof(l[j])!="undefined"&&l[j].type=="settings"){for(var g in l[j]){this.idef[g]=l[j][g]}}}for(var j=0;j<l.length;j++){this._prepareItem(l[j])}this._autoCheck()};this._prepareItem=function(l,o,j){var h=(l!=null&&l.type!=null?l.type:"");if(this.items[h]){if(!l.name){l.name=this._genStr(12)}var n=l.name;if(this.objPull[this.idPrefix+n]!=null||h=="radio"){n=this._genStr(12)}var m=l;m.label=m.label||"";m.value=m.value;m.checked=window.dhx4.s2b(m.checked);m.disabled=window.dhx4.s2b(m.disabled);m.name=m.name||this._genStr(12);m.options=m.options||[];m.rows=m.rows||"none";m.uid=this._genStr(12);this._addItem(h,n,m,null,null,o,j);o=null;if(this._parentEnabled===false){this._disableItem(n)}for(var g=0;g<m.options.length;g++){if(m.options[g].list!=null){if(!m.options[g].value){m.options[g].value=this._genStr()}var a=this._addItem("list",n,m.options[g].list,m.options[g].value,null);a._subSelect=true;a._subSelectId=m.options[g].value}}if(l.list!=null){if(!l.listParent){l.listParent=m.name}var a=this._addItem("list",n,l.list,null,l.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(u,g){if(typeof(g)=="undefined"){g=true}if(g){var x=u.getElementsByTagName("items");x=(x!=null&&x[0]!=null?x[0]:null);var h=u.getElementsByTagName("data");h=(h!=null&&h[0]!=null?h[0]:null)}else{x=u}var s=(g?[]:{});if(x!=null){for(var l=0;l<x.childNodes.length;l++){if(typeof(x.childNodes[l].tagName)!="undefined"){var m=x.childNodes[l].tagName;if(this._xmlSubItems[m]!=null){var n=this._xmlSubItems[m];if(typeof(s[n])=="undefined"){s[n]=[]}var t=x.childNodes[l];var r={};for(var B=0;B<t.attributes.length;B++){var y=t.attributes[B].name;var v=t.attributes[B].value;r[y]=v}if(n=="note"){r.text=t.firstChild.nodeValue}if(n=="_userdata"){r.value=(t.firstChild!=null&&t.firstChild.nodeValue!=null?t.firstChild.nodeValue:"")}var o=this._xmlToObject(t,false);for(var z in o){if(z=="_userdata"){if(!r.userdata){r.userdata={}}for(var B=0;B<o[z].length;B++){r.userdata[o[z][B].name]=o[z][B].value}}else{r[z]=o[z]}}t=null;if(g){s.push(r)}else{s[n].push(r)}}}}}if(h!=null){s={data:{}};for(var l=0;l<h.childNodes.length;l++){if(typeof(h.childNodes[l].tagName)!="undefined"){var j=h.childNodes[l].tagName;var A=(h.childNodes[l].firstChild!=null?h.childNodes[l].firstChild.nodeValue:"");s.data[j]=A}}}return s};this._autoCheck=function(m){if(this._locked===true){m=false}else{if(typeof(m)=="undefined"){m=true}}for(var j in this.itemPull){var n=(m&&(this.itemPull[j]._udis!==true));this[n?"_enableItem":"_disableItem"](this.itemPull[j]._idd);if(this.getForm()._idIndex[this.itemPull[j]._idd]!=null){this.getForm()._idIndex[this.itemPull[j]._idd].enabled=n}var h=(n&&(typeof(this.itemPull[j]._checked)=="boolean"?this.itemPull[j]._checked:true));if(this.itemPull[j]._list){for(var r=0;r<this.itemPull[j]._list.length;r++){var o=true;if(this.itemPull[j]._list[r]._subSelect==true){o=false;var l=this.getItemValue(this.itemPull[j]._idd);if(!(typeof(l)=="object"&&typeof(l.length)=="number")){l=[l]}for(var g=0;g<l.length;g++){o=(l[g]==this.itemPull[j]._list[r]._subSelectId)||o}this.itemPull[j]._listObj[r][o?"show":"hide"](this.itemPull[j]._listBase[r])}this.itemPull[j]._list[r]._autoCheck(h&&o)}}}};this.doWithItem=function(j,g,s,r,o,n){if(typeof(j)=="object"){var u=j[0];var t=j[1];var v=null;var m=null;for(var l in this.itemPull){if((this.itemPull[l]._value==t||t===null)&&this.itemPull[l]._group==u){return this.objPull[l][g](this.itemPull[l],s,r,o,n)}if(this.itemPull[l]._list!=null&&!m){for(var h=0;h<this.itemPull[l]._list.length;h++){m=this.itemPull[l]._list[h].doWithItem(j,g,s,r,o)}}}if(m!=null){return m}else{if(g=="getType"){return this.doWithItem(j[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+j]){var m=null;for(var l in this.itemPull){if(this.itemPull[l]._list&&!m){for(var h=0;h<this.itemPull[l]._list.length;h++){if(m==null){m=this.itemPull[l]._list[h].doWithItem(j,g,s,r,o,n)}}}}return m}else{return this.objPull[this.idPrefix+j][g](this.itemPull[this.idPrefix+j],s,r,o,n)}}};this._removeItem=function(g,a){if(a!=null){g=this.doWithItem([g,a],"destruct")}else{this.doWithItem(g,"destruct")}this._clearItemData(g)};this._clearItemData=function(j){if(this.itemPull[this.idPrefix+j]){j=this.idPrefix+j;try{this.objPull[j]=null;this.itemPull[j]=null;delete this.objPull[j];delete this.itemPull[j]}catch(h){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var g=0;g<this.itemPull[a]._list.length;g++){this.itemPull[a]._list[g]._clearItemData(j)}}}}};this.isItem=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isExist")};this.getItemType=function(g,a){g=[g,(a||null)];return this.doWithItem(g,"getType")};this.forEachItem=function(h){for(var g in this.objPull){if(this.objPull[g].t=="radio"){h(this.itemPull[g]._group,this.itemPull[g]._value)}else{h(String(g).replace(this.idPrefix,""))}if(this.itemPull[g]._list){for(var j=0;j<this.itemPull[g]._list.length;j++){this.itemPull[g]._list[j].forEachItem(h)}}}};this.setItemLabel=function(h,a,g){if(g!=null){h=[h,a]}else{g=a}this.doWithItem(h,"setText",g)};this.getItemLabel=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"check");this._autoCheck()};this.uncheckItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"unCheck");this._autoCheck()};this.isItemChecked=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(m,l){for(var g in this.itemPull){if(this.itemPull[g]._group==m&&(l==null||this.itemPull[g]._value==l)){return this.itemPull[g]._idd}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){var h=this.itemPull[g]._list[j]._getRGroup(m,l);if(h!=null){return h}}}}return null};this.setItemValue=function(g,a){this.resetValidateCss(g,a);if(this.getItemType(g)=="radio"){if(this._getRGroup(g,a)!=null){this.checkItem(g,a)}else{this.uncheckItem(g,this.getCheckedValue(g))}return null}return this.doWithItem(g,"setValue",a)};this.getItemValue=function(g,a){if(this.getItemType(g)=="radio"){return this.getCheckedValue(g)}return this.doWithItem(g,"getValue",a)};this.updateValues=function(){this._updateValues()};this.showItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"show")};this.hideItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"hide")};this.isItemHidden=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(g,a){this.doWithItem(g,"setWidth",a)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(g,a){this.doWithItem(g,"setHeight",a)};this.setItemFocus=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"setFocus")};this._updateValues=function(){for(var g in this.itemPull){if(this.objPull[g]&&typeof(this.objPull[g].updateValue)=="function"){this.objPull[g].updateValue(this.itemPull[g])}if(this.itemPull[g]._list){for(var h=0;h<this.itemPull[g]._list.length;h++){this.itemPull[g]._list[h]._updateValues()}}}};this._getItemByName=function(l){for(var g in this.itemPull){if(this.itemPull[g]._idd==l){return this.itemPull[g]}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){var h=this.itemPull[g]._list[j]._getItemByName(l);if(h!=null){return h}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,j,h){var g=this[this.getItemType(a)=="radio"?"_getRGroup":"_getItemByName"](a);if(!g){return}if(g._vcss!=null){this._resetValidateCss(g)}g._vcss=(typeof(h)=="string"?h:"validate_"+(j===true?"ok":"error"));g.className+=" "+g._vcss};this.resetValidateCss=function(h){for(var g in this.itemPull){if(this.itemPull[g]._vcss!=null){this._resetValidateCss(this.itemPull[g])}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){this.itemPull[g]._list[j].resetValidateCss()}}}};this.validate=function(g){if(this.callEvent("onBeforeValidate",[])==false){return}var a=true;this.forEachItem(function(j,l){if(typeof(l)!="undefined"){j=[j,l]}var h=c.doWithItem(j,"_validate");if(typeof(h)!="boolean"){h=true}a=h&&a});this.callEvent("onAfterValidate",[a]);return a};this.validateItem=function(a,g){if(typeof(g)!="undefined"){a=[a,g]}return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(g,a){this.doWithItem(g,"setReadonly",a)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(g){for(var j=0;j<this._indexId.length;j++){var a=true;if(g==true){var h=this.getItemType(this._indexId[j]);if(!dhtmlXForm.prototype.items[h].setFocus){a=false}}if(a&&this._idIndex[this._indexId[j]].enabled){return this._indexId[j]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userEnable");this._autoCheck()};this.disableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userDisable");this._autoCheck()};this.isItemEnabled=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isUserEnabled")};this.clear=function(){var h={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var j in this.itemPull){var l=this.itemPull[j]._idd;if(this.itemPull[j]._type=="ch"){this.uncheckItem(l)}if(this.itemPull[j]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(l,"")}if(this.itemPull[j]._type=="combo"){this.itemPull[j]._apiChange=true;var r=this.getCombo(l);r.selectOption(0);r=null;this.itemPull[j]._apiChange=false}if(this.itemPull[j]._type=="se"){var n=this.getOptions(l);if(n.length>0){n[0].selected=true}}if(this.itemPull[j]._type=="ra"){var m=this.itemPull[j]._group;if(!h[m]){this.checkItem(m,this.doWithItem(l,"_getFirstValue"));h[m]=true}}if(this.itemPull[j]._list){for(var o=0;o<this.itemPull[j]._list.length;o++){this.itemPull[j]._list[o].clear()}}if(this["setFormData_"+this.itemPull[j]._type]){this["setFormData_"+this.itemPull[j]._type](l,"")}}h=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var g in this.objPull){this._removeItem(String(g).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var h=0;h<this.base.length;h++){while(this.base[h].childNodes.length>0){this.base[h].removeChild(this.base[h].childNodes[0])}if(this.base[h].parentNode){this.base[h].parentNode.removeChild(this.base[h])}this.base[h]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var g in this){this[g]=null}c=null};for(var b in this.items){this.items[b].t=b;if(typeof(this.items[b]._index)=="undefined"){this.items[b]._index=true}if(!this.items[b].show){this.items[b].show=function(a){a.style.display="";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].show(a._listBase[g])}}}}if(!this.items[b].hide){this.items[b].hide=function(a){a.style.display="none";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].hide(a._listBase[g])}}}}if(!this.items[b].isHidden){this.items[b].isHidden=function(a){return(a.style.display=="none")}}if(!this.items[b].userEnable){this.items[b].userEnable=function(a){a._udis=false}}if(!this.items[b].userDisable){this.items[b].userDisable=function(a){a._udis=true}}if(!this.items[b].isUserEnabled){this.items[b].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[b].getType){this.items[b].getType=function(){return this.t}}if(!this.items[b].isExist){this.items[b].isExist=function(){return true}}if(!this.items[b]._validate){this.items[b]._validate=function(h){if(!h._validate||!h._enabled){return true}if(h._type=="ch"){var m=(this.isChecked(h)?this.getValue(h):0)}else{var m=this.getValue(h)}var g=true;for(var l=0;l<h._validate.length;l++){var a="is"+h._validate[l];if((m==null||m.length==0)&&a!="isNotEmpty"&&h._type!="container"){}else{var j=dhtmlxValidation[a];if(h._type=="container"&&typeof(j)=="function"){j=function(){return true}}if(typeof(j)!="function"&&typeof(h._validate[l])=="function"){j=h._validate[l]}if(typeof(j)!="function"&&typeof(window[h._validate[l]])=="function"){j=window[h._validate[l]]}g=((typeof(j)=="function"?j(m,h._idd):new RegExp(h._validate[l]).test(m))&&g);j=null}}if(!(h.callEvent("onValidate"+(g?"Success":"Error"),[h._idd,m,g])===false)){h.getForm().setValidateCss(h._idd,g)}return g}}}this._locked=false;this._doLock=function(g){var a=(g===true?true:false);if(this._locked==a){return}else{this._locked=a}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(j,g,a,h){return this.doWithItem(j,"setNumberFormat",g,a,h)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,g){this.callEvent("onButtonClick",[a,g])});this._updateBlocks=function(){this.forEachItem(function(a){if(c.getItemType(a)=="block"||c.getItemType(a)=="combo"){c.doWithItem(a,"_setCss",c.skin,c.cont.style.fontSize)}})};this._isObj=function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")};this._copyObj=function(j){if(this._isObj(j)){var h={};for(var g in j){if(typeof(j[g])=="object"&&j[g]!=null){h[g]=this._copyObj(j[g])}else{h[g]=j[g]}}}else{var h=[];for(var g=0;g<j.length;g++){if(typeof(j[g])=="object"&&j[g]!=null){h[g]=this._copyObj(j[g])}else{h[g]=j[g]}}}return h};if(d!=null&&typeof(d)=="object"){this._initObj(this._copyObj(d))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(a,b){a._type="ch";a._enabled=true;a._checked=false;a._value=(typeof(b.value)=="undefined"?null:String(b.value));a._ro=(b.readonly==true);if(b._autoInputWidth!==false){b.inputWidth=14}this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",true,true,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");c.className="dhxform_img chbx0";a.appendChild(c);if(!isNaN(b.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px"}if(!isNaN(b.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px"}a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(e,f){var d=e.childNodes[e._ll?1:0].lastChild;d.className=(f?"dhxform_actv_c":"dhxform_img")+" "+(e._checked?"chbx1":"chbx0");e=d=null};a._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};a._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};a._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[this._ll?0:1].childNodes[0],d,this._idd])};if(b.checked==true){this.check(a)}if(b.hidden==true){this.hide(a)}if(b.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;if(c.wrap==true){a.style.whiteSpace="normal"}if(b._ll){b.insertBefore(a,b.firstChild)}else{b.appendChild(a)}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(c.labelWidth)){a.firstChild.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.firstChild.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}},doAddInput:function(o,d,b,j,l,e,f){var a=document.createElement("DIV");a.className="dhxform_control";if(o._ll){o.appendChild(a)}else{o.insertBefore(a,o.firstChild)}var n=document.createElement(b);n.className=f;n.name=o._idd;n._idd=o._idd;n.id=d.uid;if(typeof(j)=="string"){n.type=j}if(b=="INPUT"||b=="TEXTAREA"){n.onkeyup=function(q){q=q||event;o.callEvent("onKeyUp",[this,q,this._idd])};n.onkeydown=function(q){q=q||event;o.callEvent("onKeyDown",[this,q,this._idd])}}a.appendChild(n);if(d.readonly){this.setReadonly(o,true)}if(d.hidden==true){this.hide(o)}if(d.disabled==true){this.userDisable(o)}if(l){if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}}var m="";var g=false;if(e){if(!isNaN(d.inputWidth)){m+="width:"+parseInt(d.inputWidth)+"px;";g=true}if(!isNaN(d.inputHeight)){m+="height:"+parseInt(d.inputHeight)+"px;"}}if(typeof(d.style)=="string"){m+=d.style}n.style.cssText=m;if(d.maxLength){n.setAttribute("maxLength",d.maxLength)}if(d.connector){n.setAttribute("connector",d.connector)}var c=(dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==true:false);if(g&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||c)){if(dhtmlXForm.prototype.items[this.t]._dim==null){dhtmlXForm.prototype.items[this.t]._dim=o.getForm()._checkDim(a,n)}n.style.width=parseInt(n.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(d.note)=="object"){var h=document.createElement("DIV");h.className="dhxform_note";h.style.width=(isNaN(d.note.width)?n.offsetWidth:parseInt(d.note.width))+"px";h._w=d.note.width;h.innerHTML=d.note.text;a.appendChild(h);h=null}},doUnloadNestedLists:function(a){if(!a._list){return}for(var b=0;b<a._list.length;b++){a._list[b].unload();a._list[b]=null;a._listObj[b]=null;a._listBase[b].parentNode.removeChild(a._listBase[b]);a._listBase[b]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}var c=(d.target||d.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(c.className)!="undefined"&&c.className=="dhxform_note")){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode)};b.childNodes[b._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}if(!this.parentNode.parentNode._enabled){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}var c=d.target||d.srcElement;if(typeof(c.className)!="undefined"&&c.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,d]);d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==true){return}}this.setChecked(a,!a._checked);a._autoCheck();a.callEvent("onChange",[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&&a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value=""}},setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,true)},unCheck:function(a){this.setChecked(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;if(a._updateImgNode!=null){a._updateImgNode(a,false)}a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,(b===true||parseInt(b)==1||b=="true"||a._value===b))},getValue:function(a,b){if(b=="realvalue"){return a._value}return((typeof(a._value)=="undefined"||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,b){a._ro=(b===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(c,d,b){c._type="ra";c._enabled=true;c._checked=false;c._group=d.name;c._value=d.value;c._uid=b;c._ro=(d.readonly==true);c._rName=c._rId+c._group;this.r[c._idd]=c;d.inputWidth=14;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c.childNodes[c._ll?1:0].className+=" dhxform_img_node";var e=document.createElement("DIV");e.className="dhxform_img rdbt0";c.appendChild(e);if(!isNaN(d.inputLeft)){c.childNodes[c._ll?1:0].style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.childNodes[c._ll?1:0].style.top=parseInt(d.inputTop)+"px"}c.childNodes[c._ll?1:0].appendChild(e);c.childNodes[c._ll?1:0].firstChild.name="";c.childNodes[c._ll?1:0].firstChild.value="";c._updateImgNode=function(g,h){var f=g.childNodes[g._ll?1:0].lastChild;f.className=(h?"dhxform_actv_r":"dhxform_img")+" "+(g._checked?"rdbt1":"rdbt0");g=f=null};c._doOnFocus=function(f){f.getForm().callEvent("onFocus",[f._group,f._value])};c._doOnBlur=function(f){f.getForm().callEvent("onBlur",[f._group,f._value])};c._doOnKeyUpDown=function(g,f){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],f,this._group,this._value])};if(this.input[c._rName]==null){var a=document.createElement("INPUT");a.type="HIDDEN";a.name=d.name;a.firstValue=c._value;c.appendChild(a);this.input[c._rName]=a}if(!this.firstValue[c._rName]){this.firstValue[c._rName]=d.value}if(d.checked==true){this.check(c)}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}this.doAttachEvents(c);return this},destruct:function(d,e){if(d.lastChild==this.input[d._rName]){var c=false;for(var b in this.r){if(!c&&this.r[b]._group==d._group&&this.r[b]._idd!=d._idd){this.r[b].appendChild(this.input[d._rName]);c=true}}if(!c){this.input[d._rName].parentNode.removeChild(this.input[d._rName]);this.input[d._rName]=null;this.firstValue[d._rName]=null}}var f=d._idd;d._doOnFocus=d._doOnBlur=d._updateImgNode=null;this.doUnloadNestedLists(d);this.doDestruct(d);return f},doClick:function(b){b.childNodes[b._ll?0:1].childNodes[0].focus();if(!(b._enabled&&!b._checked)){return}if(b._ro){return}var a=[b._group,b._value,true];if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",a)!==true){return}}this.setChecked(b,true);b.getForm()._autoCheck();b.callEvent("onChange",a)},doCheckValue:function(c){var d=null;for(var b in this.r){if(this.r[b]._checked&&this.r[b]._group==c._group&&this.r[b]._rId==c._rId){d=this.r[b]._value}}if(d!=null&&this.r[b]._enabled){this.input[c._rName].name=String(c._group);this.input[c._rName].value=d}else{this.input[c._rName].name="";this.input[c._rName].value=""}this.input[c._rName]._value=d},setChecked:function(e,f){f=(f===true);for(var b in this.r){if(this.r[b]._group==e._group&&this.r[b]._rId==e._rId){var d=false;if(this.r[b]._idd==e._idd){if(this.r[b]._checked!=f){this.r[b]._checked=f;d=true}}else{if(this.r[b]._checked){this.r[b]._checked=false;d=true}}if(d){var c=this.r[b].childNodes[this.r[b]._ll?1:0].childNodes[1];c.className=c.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[b]._checked?" rdbt1":" rdbt0");c=null}}}this.doCheckValue(e)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,b){}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.select={render:function(a,b){a._type="se";a._enabled=true;a._value=null;a._newValue=null;this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);if(b.connector!=null){this.doLoadOptsConnector(a,b.connector)}if(typeof(b.value)!="undefined"&&b.value!=null){this.setValue(a,b.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;a.innerHTML="<label for='"+c.uid+"'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(c.wrap==true){a.style.whiteSpace="normal"}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}b.appendChild(a);if(typeof(c.label)=="undefined"||c.label==null||c.label.length==0){a.style.display="none"}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}if(c.info){a.onclick=function(f){f=f||event;var d=f.target||f.srcElement;if(typeof(d.className)!="undefined"&&d.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd,f]);f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}}},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onclick=function(){b.doOnChange(this)};a.onkeydown=function(d){d=d||event;b.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,d,this.parentNode.parentNode._idd])};a.onchange=function(){b.doOnChange(this)};a.onkeyup=function(d){d=d||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,d,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(c)},doAttachChangeLS:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.onfocus=function(){var c=this.parentNode.parentNode;c.getForm()._ccActivate(c._idd,this,c.getForm().getItemValue(c._idd,true));c.getForm().callEvent("onFocus",[c._idd]);c=null};a.onblur=function(){var c=this.parentNode.parentNode;c.getForm()._ccDeactivate(c._idd);c.getForm().callEvent("onBlur",[c._idd]);c=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(g,e,j){var h=g.childNodes[g._ll?1:0].childNodes[0];var a=e.options;var d=false;for(var b=0;b<a.length;b++){var f=a[b].text||a[b].label;if(!f||typeof(f)=="undefined"){f=""}var c=new Option(f,a[b].value);if(typeof(a[b].img_src)=="string"){c.setAttribute("img_src",a[b].img_src)}h.options.add(c);if(typeof(a[b].selected)!="undefined"&&window.dhx4.s2b(a[b].selected)==true){c.selected=true;g._value=a[b].value;d=true}if(typeof(a[b].checked)!="undefined"&&window.dhx4.s2b(a[b].checked)==true){c.setAttribute("checked","1")}if(typeof(a[b].img)!="undefined"){c.setAttribute("img",a[b].img)}if(typeof(a[b].img_dis)!="undefined"){c.setAttribute("img_dis",a[b].img_dis)}if(typeof(a[b].css)!="undefined"){c.setAttribute("css",a[b].css)}}if(!d&&h.selectedIndex>=0){g._value=h.options[h.selectedIndex].value}if(j===true){g.callEvent("onOptionsLoaded",[g._idd])}this._checkNoteWidth(g)},doLoadOptsConnector:function(c,a){var b=this;c._connector_working=true;window.dhx4.ajax.get(a,function(g){g=g.xmlDoc.responseXML;if(g==null){return}var d=g.getElementsByTagName("data");if(d==null||d[0]==null){return}d=d[0];var f=[];for(var h=0;h<d.childNodes.length;h++){if(typeof(d.childNodes[h].tagName)!="undefined"&&String(d.childNodes[h].tagName).toLowerCase()=="item"){var e=d.childNodes[h];f.push({label:e.getAttribute("label"),value:e.getAttribute("value"),selected:(e.getAttribute("selected")!=null)});e=null}}b.doLoadOpts(c,{options:f},true);c._connector_working=false;if(c._connector_value!=null){b.setValue(c,c._connector_value);c._connector_value=null}b=c=null})},doOnChange:function(c){var a=c.parentNode.parentNode;a._newValue=(c.selectedIndex>=0?c.options[c.selectedIndex].value:null);if(a._newValue!=a._value){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])!==true){for(var b=0;b<c.options.length;b++){if(c.options[b].value==a._value){c.options[b].selected=true}}return}}a._value=a._newValue;a.callEvent("onChange",[a._idd,a._value]);if(a._type=="se"&&a.getForm().live_validate){this._validate(a)}}a._autoCheck()},setText:function(a,b){if(!b){b=""}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?0:1].style.display=(b.length==0||b==null?"none":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(b,d){if(b._connector_working){b._connector_value=d;return}var a=this.getOptions(b);for(var c=0;c<a.length;c++){if(a[c].value==d){a[c].selected=true;b._value=a[c].value}}if(b._list!=null&&b._list.length>0){b.getForm()._autoCheck()}b.getForm()._ccReload(b._idd,b._value)},getValue:function(c){var a=-1;var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a=b[d].value}}return a},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(b){var a;if(b.childNodes[b._ll?1:0].childNodes[1]!=null){a=b.childNodes[b._ll?1:0].childNodes[1];if(a.className!=null&&a.className.search(/dhxform_note/gi)>=0&&a._w=="auto"){a.style.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth+"px"}}a=null}};(function(){for(var b in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(d,f,g){var b=d.childNodes[d._ll?1:0].childNodes[0];b.multiple=true;if(!isNaN(f.size)){b.size=Number(f.size)}d._value=[];d._newValue=[];var c=f.options;for(var e=0;e<c.length;e++){var a=new Option(c[e].text||c[e].label,c[e].value);b.options.add(a);if(c[e].selected==true||c[e].selected=="true"){a.selected=true;d._value.push(c[e].value)}}if(g===true){d.callEvent("onOptionsLoaded",[d._idd])}this._checkNoteWidth(d)},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onFocus",[d._idd]);d=null};a.onblur=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onBlur",[d._idd]);d=null};a.onclick=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d._autoCheck();d=null}},doOnChange:function(d){var b=d.parentNode.parentNode;b._newValue=[];for(var c=0;c<d.options.length;c++){if(d.options[c].selected){b._newValue.push(d.options[c].value)}}if((b._value).sort().toString()!=(b._newValue).sort().toString()){if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==true){var a={};for(var c=0;c<b._value.length;c++){a[b._value[c]]=true}for(var c=0;c<d.options.length;c++){d.options[c].selected=(a[d.options[c].value]==true)}a=null;return}}b._value=[];for(var c=0;c<b._newValue.length;c++){b._value.push(b._newValue[c])}b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(c,e){var a={};if(typeof(e)=="string"){e=e.split(",")}if(typeof(e)!="object"){e=[e]}for(var d=0;d<e.length;d++){a[e[d]]=true}var b=this.getOptions(c);for(var d=0;d<b.length;d++){b[d].selected=(a[b[d].value]==true)}c._autoCheck()},getValue:function(c){var a=[];var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a.push(b[d].value)}}return a}};(function(){for(var b in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[b]){dhtmlXForm.prototype.items.multiselect[b]=dhtmlXForm.prototype.items.select[b]}}})();dhtmlXForm.prototype.items.input={render:function(g,h){var f=(!isNaN(h.rows));g._type="ta";g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,(f?"TEXTAREA":"INPUT"),(f?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(g);if(f){g.childNodes[g._ll?1:0].childNodes[0].rows=Number(h.rows)+(window.dhx4.isIE6?1:0)}if(typeof(h.numberFormat)!="undefined"){var e,d=null,j=null;if(typeof(h.numberFormat)!="string"){e=h.numberFormat[0];d=h.numberFormat[1]||null;j=h.numberFormat[2]||null}else{e=h.numberFormat;if(typeof(h.groupSep)=="string"){d=h.groupSep}if(typeof(h.decSep)=="string"){j=h.decSep}}this.setNumberFormat(g,e,d,j,false)}this.setValue(g,h.value);return this},doAttachEvents:function(b){var a=this;if(b._type=="ta"||b._type=="se"||b._type=="pw"){b.childNodes[b._ll?1:0].childNodes[0].onfocus=function(){var c=this.parentNode.parentNode;if(c._df!=null){this.value=c._value||""}c.getForm()._ccActivate(c._idd,this,this.value);c.getForm().callEvent("onFocus",[c._idd]);c=null}}b.childNodes[b._ll?1:0].childNodes[0].onblur=function(){var c=this.parentNode.parentNode;c.getForm()._ccDeactivate(c._idd);a.updateValue(c,true);if(c.getForm().live_validate){a._validate(c)}c.getForm().callEvent("onBlur",[c._idd]);c=null}},updateValue:function(e,a){var f=e.childNodes[e._ll?1:0].childNodes[0].value;var d=e.getForm();var b=(d._ccActive==true&&d._formLS!=null&&d._formLS[e._idd]!=null);d=null;if(!b&&e._df!=null&&f==window.dhx4.template._getFmtValue(e._value,e._df)){return}if(!a&&e._df!=null&&e._value==f&&f==window.dhx4.template._getFmtValue(f,e._df)){return}var c=this;if(e._value!=f){if(e.checkEvent("onBeforeChange")){if(e.callEvent("onBeforeChange",[e._idd,e._value,f])!==true){if(e._df!=null){c.setValue(e,e._value)}else{e.childNodes[e._ll?1:0].childNodes[0].value=e._value}return}}if(e._df!=null&&a){c.setValue(e,f)}else{e._value=f}e.callEvent("onChange",[e._idd,f]);return}if(e._df!=null&&a){this.setValue(e,e._value)}},setValue:function(c,d){c._value=(typeof(d)!="undefined"&&d!=null?d:"");var b=(String(c._value)||"");var a=c.childNodes[c._ll?1:0].childNodes[0];if(c._df!=null){b=window.dhx4.template._getFmtValue(b,c._df)}if(a.value!=b){a.value=b;c.getForm()._ccReload(c._idd,b)}a=null},getValue:function(a){var b=a.getForm();if(b._formLS&&b._formLS[a._idd]!=null){this.updateValue(a)}b=null;return(typeof(a._value)!="undefined"&&a._value!=null?a._value:"")},setReadonly:function(a,b){a._ro=(b===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(d,e,c,f,b){if(typeof(b)!="boolean"){b=true}if(e==""){d._df=null;if(b){this.setValue(d,d._value)}return true}if(typeof(e)!="string"){return}var a=window.dhx4.template._parseFmt(e,c,f);if(a==false){return false}else{d._df=a}if(b){this.setValue(d,d._value)}return true}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.password={render:function(a,b){a._type="pw";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,b.value);return this}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.file={render:function(c,d){c._type="fl";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","FILE",true,false,"dhxform_textarea");var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){var e=this.parentNode.parentNode;e.getForm().callEvent("onFocus",[e._idd]);e=null};a.onblur=function(){var e=this.parentNode.parentNode;if(e.getForm().live_validate){b._validate(e)}e.getForm().callEvent("onBlur",[e._idd]);e=null};a=null;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){c.callEvent("onChange",[c._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(b,c){b._type="lb";b._enabled=true;b._checked=true;var a=document.createElement("DIV");a.className="dhxform_txt_label2"+(c._isTopmost?" topmost":"");a.innerHTML=c.label;b.appendChild(a);if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.button={render:function(b,c){b._type="bt";b._enabled=true;b._name=c.name;b.className=String(b.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");b._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[0].childNodes[0],d,this._idd])};b.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+c.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(c.width)){var a=Math.max(c.width,10);if(dhtmlXForm.prototype.items[this.t]._dim==null){b.firstChild.style.width=a+"px";dhtmlXForm.prototype.items[this.t]._dim=b.getForm()._checkDim(b,b.firstChild)}b.firstChild.style.width=a-dhtmlXForm.prototype.items[this.t]._dim+"px";b.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}if(!isNaN(c.inputLeft)){b.childNodes[0].style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.childNodes[0].style.top=parseInt(c.inputTop)+"px"}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(typeof(c.tooltip)!="undefined"){b.firstChild.title=c.tooltip}b.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onkeypress=function(d){d=d||event;if((d.keyCode==32||d.charCode==32||d.keyCode==13||d.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};b.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};b.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};b.firstChild.onkeyup=function(d){this.parentNode._doOnKeyUpDown("onKeyUp",d||event)};b.firstChild.onkeydown=function(d){this.parentNode._doOnKeyUpDown("onKeyDown",d||event)};b.firstChild.onmouseover=function(){var d=this.parentNode;if(!d._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";d=null};b.firstChild.onmouseout=function(){var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;d=null};b.firstChild.ontouchstart=b.firstChild.onmousedown=function(f){f=f||event;if(f.type=="touchstart"&&f.preventDefault){f.preventDefault()}if(f.button>=2){return}if(this._pressed){return}var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;d=null};b.firstChild.ontouchend=b.firstChild.onmouseup=function(f){f=f||event;if(f.button>=2){return}if(!this._pressed){return}var d=this.parentNode;if(!d._enabled){return}d._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){d.callEvent("_onButtonClick",[d._name,d._cmd])}this._allowClick=false;this._pressed=false;d=null};b._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};b._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(b,c){b.style.display="none";b._name=c.name;b._type="hd";b._enabled=true;var a=document.createElement("INPUT");a.type="HIDDEN";a.name=c.name;a.value=(c.value||"");b.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(a,b){a._type="list";a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,b)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(b,d){b._type="fs";if(typeof(parseInt(d.inputWidth))=="number"){}b._width=d.width;b._enabled=true;b._checked=true;b.className="fs_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var e=String(d.labelAlign).replace("align_","");c.innerHTML="<legend class='fs_legend' align='"+e+"' style='text-align:"+e+"'>"+d.label+"</legend>";b.appendChild(c);if(!isNaN(d.inputLeft)){c.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){c.style.width=parseInt(d.inputWidth)+"px";var a=parseInt(c.style.width);if(c.offsetWidth>a){c.style.width=a+(a-c.offsetWidth)+"px"}}}b._addSubListNode=function(){var f=document.createElement("DIV");f._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(f);return f};if(d.hidden==true){this.hide(b)}if(d.disabled==true){this.userDisable(b)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(c,d){c._type="bl";c._width=d.width;c._enabled=true;c._checked=true;c.className="block_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block";a.style.fontSize=c.getForm().cont.style.fontSize;if(d.style){a.style.cssText=d.style}if(typeof(d.id)!="undefined"){a.id=d.id}c.appendChild(a);if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}if(!isNaN(d.blockOffset)){c._ofsNested=d.blockOffset}c._addSubListNode=function(){var b=document.createElement("DIV");b._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){b._ofsNested=this._ofsNested}this.childNodes[0].appendChild(b);return b};if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}return this},_setCss:function(a,c,b){a.firstChild.className="dhxform_obj_"+c+" dhxform_block";a.firstChild.style.fontSize=b}};(function(){for(var b in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[b]=dhtmlXForm.prototype.items.fieldset[b]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(b,c){var a=(!isNaN(c.rows));b._type="tp";b._enabled=true;if(c.format!=null){if(typeof(c.format)=="function"){b.format=c.format}else{if(typeof(c.format)=="string"&&typeof(window[c.format])=="function"){b.format=window[c.format]}}}if(b.format==null){b.format=function(d,e){return e}}this.doAddLabel(b,c);this.doAddInput(b,c,"DIV",null,true,true,"dhxform_item_template");this.setValue(b,c.value||"");return this},destruct:function(a){a.format=null;this.d2(a);a=null},setValue:function(a,b){a._value=b;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype._ulToObject=function(f,j){var g=[];for(var b=0;b<f.childNodes.length;b++){if(String(f.childNodes[b].tagName||"").toLowerCase()=="li"){var c={};var m=f.childNodes[b];for(var l=0;l<j.length;l++){if(m.getAttribute(j[l])!=null){c[String(j[l]).replace("ftype","type")]=m.getAttribute(j[l])}}if(!c.label){try{c.label=m.firstChild.nodeValue}catch(h){}}var d=m.getElementsByTagName("UL");if(d[0]!=null){c[(c.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(d[0],j)}for(var l=0;l<m.childNodes.length;l++){if(String(m.childNodes[l].tagName||"").toLowerCase()=="userdata"){if(!c.userdata){c.userdata={}}c.userdata[m.childNodes[l].getAttribute("name")]=m.childNodes[l].firstChild.nodeValue}}g[g.length]=c}if(String(f.childNodes[b].tagName||"").toLowerCase()=="div"){var c={};c.type="label";try{c.label=f.childNodes[b].firstChild.nodeValue}catch(h){}g[g.length]=c}}return g};dhtmlXForm.prototype.setUserData=function(e,c,d,a){if(typeof(a)!="undefined"){var b=this.doWithItem([e,c],"_getId");if(b!=null){e=b;c=d;d=a}}if(!this._userdata){this._userdata={}}this._userdata[e]=(this._userdata[e]||{});this._userdata[e][c]=d};dhtmlXForm.prototype.getUserData=function(d,c,a){if(typeof(a)!="undefined"){var b=this.doWithItem([d,c],"_getId");if(b!=null){d=b;c=a}}if(this._userdata!=null&&typeof(this._userdata[d])!="undefined"&&typeof(this._userdata[d][c])!="undefined"){return this._userdata[d][c]}return""};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(d,b){if(typeof(b)=="object"){var a=b[1];b=b[0]}if(document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent(b,true,false);d.dispatchEvent(c)}else{if(document.createEventObject){var c=document.createEventObject();c.button=1;d.fireEvent("on"+b,c)}}if(a){window.setTimeout(function(){_dhxForm_doClick(d,a)},100)}};dhtmlXForm.prototype.setFormData=function(c){for(var b in c){var d=this.getItemType(b);switch(d){case"checkbox":this[c[b]==true||parseInt(c[b])==1||c[b]=="true"||c[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case"radio":this.checkItem(b,c[b]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(b,c[b]);break;default:if(this["setFormData_"+d]){this["setFormData_"+d](b,c[b])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,b,c[b])}break}}};dhtmlXForm.prototype.getFormData=function(o,g){var c={};var l=this;for(var n in this.itemPull){var j=this.itemPull[n]._idd;var s=this.itemPull[n]._type;if(s=="ch"){c[j]=(this.isItemChecked(j)?this.getItemValue(j):0)}if(s=="ra"&&!c[this.itemPull[n]._group]){c[this.itemPull[n]._group]=this.getCheckedValue(this.itemPull[n]._group)}if(s in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[j]=this.getItemValue(j,o)}if(this["getFormData_"+s]){c[j]=this["getFormData_"+s](j)}if(s=="up"){var f=this.getItemValue(j);for(var e in f){c[e]=f[e]}}if(this.itemPull[n]._list){for(var d=0;d<this.itemPull[n]._list.length;d++){var h=this.itemPull[n]._list[d].getFormData(o,g);for(var m in h){c[m]=h[m]}}}}if(!g&&this.hId&&this._userdata[this.hId]){for(var n in this._userdata[this.hId]){if(!c[n]){c[n]=this._userdata[this.hId][n]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var f=0;var d=-1;for(var g=0;g<this.base.length;g++){f+=this.base[g].firstChild.offsetWidth;if(this.base[g].offsetHeight>d){d=this.base[g].offsetHeight}}var c=false;try{c=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(c){var a=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(h){}if(c&&typeof(a)!="undefined"){if(f>0){a.setWidth(f+10)}if(d>0){a.setHeight(d+a.firstChild.firstChild.offsetHeight+5)}c=a=null;return}var b=false;try{b=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(b){var j=this.cont.parentNode.parentNode;if(typeof(j.callEvent)=="function"){this.cont.style.display="none";j.callEvent("_setCellSize",[f+15,d+15]);this.cont.style.display=""}}}catch(h){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(b,g,h,d){if(typeof g=="function"){h=g;g="post"}else{g=(g=="get"?"get":"post")}if(d!==true&&!this.validate()){return}var f=this.getFormData(true);var e=[];for(var c in f){e.push(c+"="+encodeURIComponent(f[c]))}var a=function(j){if(h){h.call(this,j,j.xmlDoc.responseText)}};if(g=="get"){window.dhx4.ajax.get(b+(b.indexOf("?")==-1?"?":"&")+e.join("&"),a)}else{window.dhx4.ajax.post(b,e.join("&"),a)}};dhtmlXForm.prototype.save=function(a,b){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(b,a){this.formId=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(d,b){var c=this.obj.getFormData(true);c[this.action_param]=this.obj.getUserData(d,this.action_param);return c};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(c,d,e,b){if(d=="inserted"||d=="updated"){this.obj.resetDataProcessor("updated");this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,b]);return true});a.autoUpdate=false;a.setTransactionMode("POST",true);this.dp=a;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,a)};dhtmlXForm.prototype._ccActivate=function(c,a,b){if(!this._formLS){this._formLS={}}if(!this._formLS[c]){this._formLS[c]={input:a,value:b}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var b in this._formLS){var e=this._formLS[b].input;if(String(e.tagName).toLowerCase()=="select"){var c="";if(e.selectedIndex>=0&&e.selectedIndex<e.options.length){c=e.options[e.selectedIndex].value}}else{var c=e.value}if(c!=this._formLS[b].value){this._formLS[b].value=c;this.callEvent("onInputChange",[e._idd,c,this])}e=null}if(this._ccActive){var d=this;this._ccTm=window.setTimeout(function(){d._ccDo();d=null},100)}};dhtmlXForm.prototype._ccReload=function(b,a){if(this._formLS&&this._formLS[b]){this._formLS[b].value=a}};dhtmlXForm.prototype._checkDim=function(g,f){var d=document.createElement("DIV");d.className="dhxform_obj_"+this.skin;d.style.cssText+=(dhx4.isIE6==true?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;");document.body.appendChild(d);var e=g.parentNode;var b=g.nextSibling;d.appendChild(g);var c=parseInt(f.style.width);var a=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?f.offsetWidth:f.clientWidth);var h=a-c;if(b!=null){e.insertBefore(g,b)}else{e.appendChild(g)}d.parentNode.removeChild(d);e=b=d=g=f=null;return h};dhtmlXForm.prototype._autoload=function(){var b=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];var c=document.getElementsByTagName("UL");var d=[];for(var g=0;g<c.length;g++){if(c[g].className=="dhtmlxForm"){var f=document.createElement("DIV");d[d.length]={nodeUL:c[g],nodeForm:f,data:dhtmlXForm.prototype._ulToObject(c[g],b),name:(c[g].getAttribute("name")||null)}}}for(var g=0;g<d.length;g++){d[g].nodeUL.parentNode.insertBefore(d[g].nodeForm,d[g].nodeUL);var h=new dhtmlXForm(d[g].nodeForm,d[g].data);if(d[g].name!==null){window[d[g].name]=h}var e=(d[g].nodeUL.getAttribute("oninit")||null);d[g].nodeUL.parentNode.removeChild(d[g].nodeUL);d[g].nodeUL=null;d[g].nodeForm=null;d[g].data=null;d[g]=null;if(e){if(typeof(e)=="function"){e()}else{if(typeof(window[e])=="function"){window[e]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(b)}else{b.style.overflow="auto"}this._attachObject(b);this.dataType="form";this.dataObj=new dhtmlXForm(b,a);this.dataObj.setSkin(this.conf.skin);b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXForm.prototype.items.combo={render:function(b,c){b._type="combo";b._enabled=true;b._value=null;b._newValue=null;this.doAddLabel(b,c);this.doAddInput(b,c,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(b);this.doLoadOpts(b,c);b.onselectstart=function(d){return true};b.childNodes[b._ll?1:0].childNodes[0].setAttribute("mode",c.comboType||"");if(c.comboImagePath){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("imagePath",c.comboImagePath)}if(c.comboDefaultImage){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImage",c.comboDefaultImage)}if(c.comboDefaultImageDis){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImageDis",c.comboDefaultImageDis)}b._combo=new dhtmlXComboFromSelect(b.childNodes[b._ll?1:0].childNodes[0]);b._combo.setSkin(b.getForm().skin);b._combo._currentComboValue=b._combo.getSelectedValue();b._combo.getInput().id=c.uid;var a=this;b._combo.attachEvent("onChange",function(){a.doOnChange(this)});if(c.connector){this.doLoadOptsConnector(b,c.connector)}if(c.filtering){b._combo.enableFilteringMode(true)}else{if(c.serverFiltering){b._combo.enableFilteringMode(true,c.serverFiltering,c.filterCache,c.filterSubLoad)}}if(c.readonly==true){this.setReadonly(b,true)}if(c.style){b._combo.DOMelem_input.style.cssText+=c.style}b._combo.attachEvent("onFocus",function(){var d=this.cont.parentNode.parentNode;var e=d.getForm();if(e.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}e.callEvent("onFocus",[d._idd]);e=d=null});b._combo.attachEvent("onBlur",function(){var d=this.cont.parentNode.parentNode;var e=d.getForm();if(e.skin=="dhx_terrace"&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}e.callEvent("onBlur",[d._idd]);e=d=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(b){var a=b.base.parentNode.parentNode.parentNode;if(a._apiChange){return}b._newComboValue=b.getSelectedValue();if(b._newComboValue!=b._currentComboValue){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,b._currentComboValue,b._newComboValue])!==true){window.setTimeout(function(){b.setComboValue(b._currentComboValue)},1);return false}}b._currentComboValue=b._newComboValue;a.callEvent("onChange",[a._idd,b._currentComboValue])}a._autoCheck(a._enabled)},doLoadOptsConnector:function(d,a){var c=this;var b=d;d._connector_working=true;d._apiChange=true;d._combo.load(a,function(){b.callEvent("onOptionsLoaded",[b._idd]);b._connector_working=false;if(b._connector_value!=null){c.setValue(b,b._connector_value);b._connector_value=null}b._apiChange=false;c=b=null})},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,b){if(a._connector_working){a._connector_value=b;return}a._apiChange=true;a._combo.setComboValue(b);a._combo._currentComboValue=a._combo.getActualValue();a._apiChange=false},getValue:function(a){return a._combo.getActualValue()},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,b){if(!a._combo){return}a._combo_ro=b;a._combo.readonly(a._combo_ro)},isReadonly:function(a,b){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,c,b){a._combo.setFontSize(b,b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(c,e){var b=this;c._type="calendar";c._enabled=true;var g=navigator.userAgent;var a=(g.indexOf("MSIE 6.0")>=0||g.indexOf("MSIE 7.0")>=0||g.indexOf("MSIE 8.0")>=0);this.doAddLabel(c,e);this.doAddInput(c,e,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(c);if(a){c.childNodes[c._ll?1:0].childNodes[0].onfocus2=c.childNodes[c._ll?1:0].childNodes[0].onfocus;c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var h=this.parentNode.parentNode;if(h._c.base._formMouseDown){h._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;h=null;return true}var j=h.getForm();j._ccDeactivate(h._idd);b.checkEnteredValue(this.parentNode.parentNode);if(j.live_validate){b._validate(h)}j.callEvent("onBlur",[h._idd]);if(!h._c.isVisible()){h._tempValue=null}j=h=null};c._f=(e.dateFormat||null);c._f0=(e.serverDateFormat||c._f);var d=c.getForm();c._c=new dhtmlXCalendarObject(c.childNodes[c._ll?1:0].childNodes[0],e.skin||d.skin||"dhx_skyblue");c._c._nullInInput=true;c._c.enableListener(c.childNodes[c._ll?1:0].childNodes[0]);if(c._f!=null){c._c.setDateFormat(c._f)}if(!window.dhx4.s2b(e.enableTime)){c._c.hideTime()}if(window.dhx4.s2b(e.showWeekNumbers)){c._c.showWeekNumbers()}if(!isNaN(e.weekStart)){c._c.setWeekStartDay(e.weekStart)}if(typeof(e.calendarPosition)!="undefined"){c._c.setPosition(e.calendarPosition)}if(e.minutesInterval!=null){c._c.setMinutesInterval(e.minutesInterval)}c._c._itemIdd=c._idd;c._c.attachEvent("onBeforeChange",function(f){if(c._value!=f){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,f])!==true){return false}}c._tempValue=c._value=f;b.setValue(c,f,false);c.callEvent("onChange",[this._itemIdd,c._value])}return true});c._c.attachEvent("onClick",function(){c._tempValue=null});c._c.attachEvent("onHide",function(){c._tempValue=null});if(a){c._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(c,e.value);d=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,b){a._c.setSkin(b)},setValue:function(b,c,a){if(!c||c==null||typeof(c)=="undefined"||c==""){b._value=null;b.childNodes[b._ll?1:0].childNodes[0].value=""}else{b._value=(c instanceof Date?c:b._c._strToDate(c,b._f0||b._c._dateFormat));b.childNodes[b._ll?1:0].childNodes[0].value=b._c._dateToStr(b._value,b._f||b._c._dateFormat)}if(a!==false){b._c.setDate(b._value)}},getValue:function(b,a){var c=b._tempValue||b._c.getDate();if(a===true&&c==null){return""}return(a===true?b._c._dateToStr(c,b._f0||b._c._dateFormat):c)},setDateFormat:function(b,a,c){b._f=a;b._f0=(c||b._f);b._c.setDateFormat(b._f);this.setValue(b,this.getValue(b))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(b){}a._f=null;try{delete a._f}catch(b){}a._f0=null;try{delete a._f0}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.d2(a);a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(b,a,c){this.doWithItem(b,"setDateFormat",a,c)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};(function(){for(var b in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[b]){dhtmlXForm.prototype.items.btn2state[b]=dhtmlXForm.prototype.items.checkbox[b]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(a,b){b._autoInputWidth=false;this.render2(a,b);a._type="btn2state";a._cssName=(typeof(b.cssName)=="undefined"?"btn2state":b.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(d,c,e){this.callEvent(d,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};this.setChecked(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,b){this[b==true||parseInt(b)==1||b=="true"||b==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.isItemChecked(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(c,d){var b=this;c._type="colorpicker";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c._value=(d.value||"");c.childNodes[c._ll?1:0].childNodes[0].value=c._value;var a={input:c.childNodes[c._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(d.enableCustomColors)==true),skin:c.getForm().skin};this.colorpicker[c._idd]=new dhtmlXColorPicker(a);this.colorpicker[c._idd]._nodes[0].valueColor=null;this.colorpicker[c._idd].base.className+=" dhtmlxcp_in_form";if(typeof(d.customColors)!="undefined"){this.colorpicker[c._idd].setCustomColors(d.customColors)}if(typeof(d.cpPosition)=="string"){this.colorpicker[c._idd].setPosition(d.cpPosition)}this.colorpicker[c._idd].attachEvent("onSelect",function(e){if(c._value!=e){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,e])!==true){c.childNodes[c._ll?1:0].childNodes[0].value=c._value;return}}c._value=e;b.setValue(c,e);c.callEvent("onChange",[c._idd,c._value])}});this.colorpicker[c._idd].attachEvent("onHide",function(e){var f=c.childNodes[c._ll?1:0].childNodes[0];if(f.value!=c._value){f.value=c._value}f=null});c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a);a=null},setSkin:function(a,b){this.colorpicker[a._idd].setSkin(b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(a,b){a._type="container";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[b]){dhtmlXForm.prototype.items.container[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(c,d){var a=(!isNaN(d.rows));c._type="editor";c._enabled=true;c._editor_id=c.getForm().idPrefix+c._idd;this.doAddLabel(c,d);this.doAddInput(c,d,"DIV",null,true,true,"dhxform_item_template");c._value=(d.value||"");var b=this;this.editor[c._editor_id]=new dhtmlXEditor({parent:c.childNodes[c._ll?1:0].childNodes[0],content:c._value,iconsPath:d.iconsPath,toolbar:d.toolbar});this.editor[c._editor_id].attachEvent("onAccess",function(f,g){c.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(f=="blur"){b.doOnBlur(c,this);c.callEvent("onBlur",[c._idd]);if(c.getForm().skin=="dhx_terrace"){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")>=0){c.childNodes[c._ll?1:0].className=(e).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{c.callEvent("onEditorAccess",[c._idd,f,g,this,c.getForm()]);c.callEvent("onFocus",[c._idd]);if(c.getForm().skin=="dhx_terrace"){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")==-1){c.childNodes[c._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[c._editor_id].attachEvent("onToolbarClick",function(e){c.callEvent("onEditorToolbarClick",[c._idd,e,this,c.getForm()])});if(d.readonly){this.setReadonly(c,true)}c.childNodes[c._ll?0:1].childNodes[0].removeAttribute("for");c.childNodes[c._ll?0:1].childNodes[0].onclick=function(){b.editor[c._editor_id]._focus()};return this},doOnBlur:function(c,b){var a=b.getContent();if(c._value!=a){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,a])!==true){b.setContent(c._value);return}}c._value=a;c.callEvent("onChange",[c._idd,a])}},setValue:function(a,b){if(a._value==b){return}a._value=b;this.editor[a._editor_id].setContent(a._value)},getValue:function(a){a._value=this.editor[a._editor_id].getContent();return a._value},enable:function(a){if(this.isEnabled(a)!=true){this.editor[a._editor_id].setReadonly(false);this.doEn(a)}},disable:function(a){if(this.isEnabled(a)==true){this.editor[a._editor_id].setReadonly(true);this.doDis(a)}},setReadonly:function(a,b){this.editor[a._editor_id].setReadonly(b)},getEditor:function(a){return(this.editor[a._editor_id]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._editor_id].unload();this.editor[a._editor_id]=null;this.d2(a);a=null},setFocus:function(a){this.editor[a._editor_id]._focus()}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[b]=dhtmlXForm.prototype.items.template[b]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:true,render:function(e,f){e._type="image";e._enabled=true;e._fr_name="dhxform_image_"+window.dhx4.newId();e._url=f.url;if(f.inputWidth=="auto"){f.inputWidth=120}if(f.inputHeight=="auto"){f.inputHeight=f.inputWidth}this.doAddLabel(e,f);this.doAddInput(e,f,"DIV",null,true,true,"dhxform_image");var b=e.childNodes[e._ll?1:0].childNodes[0];b.style.height=parseInt(b.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var a=(typeof(f.imageWidth)!="undefined"?parseInt(f.imageWidth):f.inputWidth);var c=(typeof(f.imageHeight)!="undefined"?parseInt(f.imageHeight):f.inputHeight);if(c=="auto"){c=a}e._dim={mw:f.inputWidth-this._dim,mh:f.inputHeight-this._dim,w:a,h:c};b.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+e._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+e._url+"' method='POST' enctype='multipart/form-data' target='"+e._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+e._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(e);b.childNodes[2].firstChild.lastChild.onchange=function(){e._is_uploading=true;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress"};var d=this;if(window.navigator.userAgent.indexOf("MSIE")>=0){b.childNodes[1].onreadystatechange=function(){if(this.readyState=="complete"){d.doOnUpload(e)}}}else{b.childNodes[1].onload=function(){d.doOnUpload(e)}}this._moreClear=function(){d=null};this.setValue(e,f.value||"");b=null;return this},destruct:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.childNodes[2].firstChild.lastChild.onchange=null;a.childNodes[1].onreadystatechange=null;a.childNodes[1].onload=null;this._moreClear();this.d2(b);b=null},doAttachEvents:function(){},setValue:function(c,e){c._value=(e==null?"":e);var b=c._url+(c._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(c._idd)+"&itemValue="+encodeURIComponent(c._value)+(window.dhx4.ajax.cache!=true?"&dhxr"+new Date().getTime()+"=1":"");var d=c.childNodes[c._ll?1:0].childNodes[0].firstChild;if(d.nextSibling.tagName.toLowerCase()=="img"){d.nextSibling.src=b}else{var a=document.createElement("IMG");a.className="dhxform_image_img";a.style.visibility="hidden";a.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null};a.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};d.parentNode.insertBefore(a,d);a.src=b;a=null;this.adjustImage(c)}d=null},getValue:function(a){return a._value},doOnUpload:function(c){if(c._is_uploading==true){var a=c.childNodes[c._ll?1:0].childNodes[0].lastChild.previousSibling;var b=dhx4.s2j(a.contentWindow.document.body.innerHTML);if(typeof(b)=="object"&&b!=null&&b.state==true&&b.itemId==c._idd){this.setValue(c,b.itemValue,true);c.getForm().callEvent("onImageUploadSuccess",[b.itemId,b.itemVaule,b.extra])}else{c.getForm().callEvent("onImageUploadFail",[c._idd,(b?b.extra:null)])}b=a=null;window.setTimeout(function(){c.childNodes[c._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";c._is_uploading=false},50)}},adjustImage:function(d){var b=d.childNodes[d._ll?1:0].childNodes[0].firstChild;var a=Math.min(d._dim.mw,d._dim.w);var c=Math.min(d._dim.mh,d._dim.h);b.style.width=a+"px";b.style.height=c+"px";b.style.marginLeft=Math.max(0,Math.round(d._dim.mw/2-a/2))+"px";b.style.marginTop=Math.max(0,Math.round(d._dim.mh/2-c/2))+"px";b=d=null}};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.image[b]){dhtmlXForm.prototype.items.image[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(a,b){this.setItemValue(a,b)};dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)};dhtmlXForm.prototype.items.upload={render:function(b,c){b._type="up";b._enabled=true;b._checked=true;b.className=c.position+(typeof(c.className)=="string"?" "+c.className:"");var a=document.createElement("DIV");b.appendChild(a);if(!isNaN(c.inputLeft)){b.style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.style.top=parseInt(c.inputTop)+"px"}if(c.inputWidth!="auto"){if(!isNaN(c.inputWidth)){a.style.width=parseInt(c.inputWidth)+"px"}}b._uploader=new dhtmlXFileUploader(a,c.swfPath||"",c.swfUrl||"",c.mode||null,c.swfLogs,c.slXap||"",c.slUrl||"",c.slLogs||"",c.multiple);b._uploader.setURL(c.url||"");b._uploader.callEvent=b.callEvent;if(typeof(c.autoStart)!="undefined"){b._uploader.setAutoStart(c.autoStart)}if(typeof(c.autoRemove)!="undefined"){b._uploader.setAutoRemove(c.autoRemove)}if(typeof(c.titleScreen)!="undefined"){b._uploader.enableTitleScreen(c.titleScreen)}if(typeof(c.titleText)!="undefined"){b._uploader.setTitleText(c.titleText)}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!(c.inputHeight=="auto"||parseInt(c.inputHeight)==NaN)){b._uploader.p_files.style.height=parseInt(c.inputHeight)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=function(){return true};a._uploader.unload();a._uploader.callEvent=null;a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._uploader.disable()},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(f){var d=f._uploader.getData();var e={};var c=0;for(var b in d){e[f._idd+"_r_"+c]=d[b].realName;e[f._idd+"_s_"+c]=d[b].serverName;c++}e[f._idd+"_count"]=c;return e},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};function dhtmlXFileUploader(b,h,g,j,n,f,q,d,r){var l=this;if(typeof(j)=="string"&&typeof(this[j])=="function"){this.engine=j}else{this.engine="html4";var c=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){c=new XMLHttpRequest();if(typeof(c.upload)=="undefined"){c=null}}if(c!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||c===false){var c=swfobject.getFlashPlayerVersion();if(c.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}c=null}if(typeof(b)=="string"){b=document.getElementById(b)}this._upload_mp=(typeof(r)!="undefined"?r==true:true);this._upload_dnd=true;this._swf_file_url=h||"";this._swf_upolad_url=g||"";this._swf_logs=n;this._sl_xap=f;this._sl_upload_url=q;this._sl_logs=d;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";b.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!l._enabled){return}if(!l._uploading){l._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!l._enabled){return}l._uploadStop();l._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!l._enabled){return}l.clear()},tooltip:"Clear list"}};this.buttons={};for(var e in this.b_opts){var s=document.createElement("DIV");s.innerHTML="&nbsp;";s.className="dhx_file_uploader_button button_"+e;s.onclick=this.b_opts[e].onclick;if(this.b_opts[e].tooltip){s.title=this.b_opts[e].tooltip}this.p_controls.appendChild(s);this.buttons[e]=s;s=null}this.buttons.cancel.style.display="none"};this._readableSize=function(s){var e=false;var a=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var u=0;u<a.length;u++){if(s>1024){s=s/1024}else{if(e===false){e=u}}}if(e===false){e=a.length-1}return Math.round(s*100)/100+" "+a[e]};this._beforeAddFileToList=function(a,e){return(this.callEvent("onBeforeFileAdd",[a,e])===true)};this._addFileToList=function(w,e,u,v,a){this._checkTitleScreen();var s=document.createElement("DIV");s._idd=w;s.className="dhx_file dhx_file_"+v;s.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+a+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(s);s.childNodes[0].style.width=s.offsetWidth-127+"px";this._items[w]=s;this._updateFileNameSize(w);s.childNodes[2].onclick=function(){if(!l._enabled){return}var t=this.parentNode._idd;l._removeFileFromQueue(t)};this.callEvent("onFileAdd",[e])};this._removeFileFromList=function(a){if(!this._items[a]){return}this._items[a].childNodes[2].onclick=null;this._items[a].parentNode.removeChild(this._items[a]);this._items[a]=null;delete this._items[a];if(this._data[a]){this._data[a]=null;delete this._data[a]}this._checkTitleScreen()};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"&nbsp;");this._items[a].childNodes[0].title=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"")};this._updateFileInList=function(s,e,a){if(!this._items[s]){return}this._items[s].className="dhx_file dhx_file_"+e;this._updateProgress(s,e,a);this._updateFileNameSize(s)};this._updateProgress=function(s,e,a){if(e=="uploading"&&a<100&&this._progress_type=="loader"){this._items[s].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[s].childNodes[1].innerHTML="&nbsp;"}else{this._items[s].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[s].childNodes[1].innerHTML=a+"%"}this._updateFileNameSize(s)};this._removeFilesByState=function(s){for(var e in this._files){if(s===true||this._files[e].state==s){this._removeFileFromQueue(e)}}};this._switchButton=function(e){if(e==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var a=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(a>0){this.callEvent("onUploadComplete",[a])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var e in this._files){if(this._files[e].state=="fail"){this._files[e].state="added";this._updateFileInList(e,"added",0)}}}this._uploading=true;var s=false;for(var e in this._files){if(!s&&[this._files[e].state]=="added"){s=true;this._files[e].state="uploading";this._updateFileInList(e,"uploading",0);this._doUploadFile(e)}}if(!s){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(v,u,s,a){if(typeof(s)!="undefined"&&this.engine=="flash"){var e=dhx4.s2j(s.data);if(e!=null&&e.state==true&&e.name!=null){u=e.name;if(e.extra!=null){a=e.extra}}else{this._onUploadFail(v,(e!=null&&e.extra!=null?e.extra:null));return}}this._uploaded_count++;this._data[v]={realName:this._files[v].name,serverName:u};this._files[v].state="uploaded";this._updateFileInList(v,"uploaded",100);this.callEvent("onUploadFile",[this._files[v].name,u,a]);if(this._autoRemove){this._removeFileFromQueue(v)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(e,a){this._files[e].state="fail";this._updateFileInList(e,"fail",0);this.callEvent("onUploadFail",[this._files[e].name,a]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(a){this._uploading=false;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var s=0;for(var e in this._files){s++}if(s==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((s>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(a){this._autoStart=(a==true)};this.setAutoRemove=function(a){this._autoRemove=(a==true)};this.enableTitleScreen=function(a){this._titleScreen=(a==true);this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var s=0;for(var e in this._files){if(this._files[e].state!="uploaded"){return -1}s=1}return s};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){l._uploadStop()}l._switchButton(false);l._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var e in this.buttons){this.buttons[e].onclick=null;this.buttons[e].parentNode.removeChild(this.buttons[e]);this.buttons[e]=null;delete this.buttons[e]}this.buttons=null;for(var e in this.b_opts){this.b_opts[e].onclick=null;this.b_opts[e]=null;delete this.b_opts[e]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var e in this){this[e]=null}l=e=null};var m=new this[this.engine]();for(var o in m){this[o]=m[o];m[o]=null}o=m=b=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var b=this;this.buttons.browse.onclick=function(){if(b._enabled){b.f.click()}};this._progress_type="percentage";var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&&a.match(/AppleWebKit/gi)!=null&&a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondragover=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondrop=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault();if(b._enabled){b._parseFilesInInput(c.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=""}}},_doUploadFile:function(c){var b=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(d){if(b._files[this._idd].state=="uploading"){b._updateFileInList(this._idd,"uploading",Math.round(d.loaded*100/d.total))}};this._loader.onload=function(f){var d=dhx4.s2j(this.responseText);if(typeof(d)=="object"&&d!=null&&typeof(d.state)!="undefined"&&d.state==true){b._onUploadSuccess(this.upload._idd,d.name,null,d.extra);d=null}else{b._onUploadFail(this.upload._idd,(d!=null&&d.extra!=null?d.extra:null))}};this._loader.onerror=function(d){b._onUploadFail(this.upload._idd)};this._loader.onabort=function(d){b._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=c;var a=new FormData();a.append("file",this._files[c].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+new Date().getTime(),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(a)},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(b){for(var a=0;a<b.length;a++){this._addFileToQueue(b[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var b=(a._idd||window.dhx4.newId());this._files[b]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(b,a.name,a.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&d==this._loader.upload._idd&&this._files[d].state=="uploading"){this._uploadStop();a=true}this._files[d].file=null;this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this;var c=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var b=document.createElement("DIV");b.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+c+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(b);b.firstChild.lastChild._idd=c;b.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";a._addForm()};b=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof(a)=="object"&&a!=null){if(typeof(a.state)!="undefined"){if(a.state=="cancelled"){this._onUploadAbort(this.fr._idd);a=null;return}else{if(a.state==true){if(typeof(a.size)!="undefined"&&!isNaN(a.size)){this._files[this.fr._idd].size=a.size}this._onUploadSuccess(this.fr._idd,a.name,null,a.extra);a=null;return}}}}this._onUploadFail(this.fr._idd,(a!=null&&a.extra!=null?a.extra:null))}},_addFileToQueue:function(b){var a=b.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=b.value}this._files[b._idd]={name:a,form:b.parentNode,node:b.parentNode.parentNode,input:b,state:"added"};this._addFileToList(b._idd,b.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){var a=this._files[c].name;var b=(this._data!=null&&this._data[c]!=null?this._data[c].serverName:null);if(this.callEvent("onBeforeFileRemove",[a,b])!==true){return}this._files[c].input.onchange=null;this._files[c].form.removeChild(this._files[c].input);this._files[c].node.removeChild(this._files[c].form);this._files[c].node.parentNode.removeChild(this._files[c].node);this._files[c].input=null;this._files[c].name=null;this._files[c].form=null;this._files[c].node=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);this.callEvent("onFileRemove",[a,b])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+new Date().getTime()},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXFileUploaderSWFObjects){window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(e,c,d){return window.dhtmlXFileUploaderSWFObjects.items[e].uploader[c].apply(window.dhtmlXFileUploaderSWFObjects.items[e].uploader,d)}}}var b=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,b){return(this.callEvent("onBeforeFileAdd",[a,b])===true)},_addFileToQueue:function(d,b,c){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT";a.style.position="absolute";a.style.left="0px";a.style.top=window.dhx4.absTop(this.buttons.browse)+"px";a.style.width="10px";document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[d]={name:b,size:c,state:"added"};this._addFileToList(d,b,c,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&this._files[d].state=="uploading"){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(d);this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(c){for(var b in this._files){if(this._files[b].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null;window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null;delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(c,a,b){window.dhtmlXFileUploaderSLObjects.items[c].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[c].uploader,b)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(c,a,b){this._files[c]={name:a,size:b,state:"added"};this._addFileToList(c,a,b,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(b){if(!this._files[b]){return}var a=false;if(this._uploading&&this._files[b].state=="uploading"){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(b);this._files[b].name=null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);if(a){this._uploadStart()}},_doUploadFile:function(b){var a=this._sl_upload_url.split("?");a=(a[1]!=null?"&"+a[1]:"");document.getElementById(this._sl_obj_id).Content.a.upload(b,this._sl_upload_url,a+"&mode=sl&dhxr"+new Date().getTime())},_uploadStop:function(c){this._uploading=false;for(var b in this._files){if(this._files[b].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var b=new ActiveXObject("AgControl.AgControl");if(b!=null){var f=4,d=0;while(b.isVersionSupported([f,d].join("."))){a=[f,d];if(++d>9){f++;d=0}}}b=null}catch(c){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){a=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return a};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.addItem=function(c,a,g,d){var b=null;if(c instanceof Array){b=c[1];c=c[0]}var e=null;if(c!=null){var e=this._getParentForm(c,b);if(e!=null){if(e.item._list==null){if(!a.listParent){a.listParent=e.item._idd}e.form._addItem("list",e.item._idd,[a],null,e.item._idd,g,d)}else{e.item._list[0].addItem(null,a,g,d)}e.form=e.item=null;e=null;this._autoCheck();return}}this._prepareItem(a,g,d);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(b,a){this._removeItem(b,a)};dhtmlXForm.prototype.removeColumn=function(h,g,d,c){var l=null;if(h instanceof Array){l=h[1];h=h[0]}if(h!=null){var e=this._getParentForm(h,l);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null){e.item._list[0].removeColumn(null,g,d,c)}e.form=e.item=null;e=null}return}g=Math.min(Math.max(g,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}}else{if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}else{if(!c){var a=g-1;if(a<0){a=g+1}}else{var a=g+1;if(a>this.cont.childNodes.length-1){a=g-1}}while(this.cont.childNodes[g].childNodes.length>0){this.cont.childNodes[a].appendChild(this.cont.childNodes[g].childNodes[0])}}var j=[];for(var b=0;b<this.base.length;b++){if(this.cont.childNodes[g]!=this.base[b]){j.push(this.base[b])}}this.base=j;this.cont.removeChild(this.cont.childNodes[g]);this.b_index--;j=null}};dhtmlXForm.prototype.getColumnNode=function(c,b){var d=null;var a=null;if(c instanceof Array){a=c[1];c=c[0]}if(c!=null){var e=this._getParentForm(c,a);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null&&d==null){d=e.item._list[0].getColumnNode(null,b)}e.form=e.item=null;e=null}return d}if(b<0||b>this.cont.childNodes.length-1){return null}return this.cont.childNodes[b]};dhtmlXForm.prototype._removeItemsInColumn=function(d){var a=[];for(var c=0;c<d.childNodes.length;c++){var b=d.childNodes[c];if(b._idd!=null&&b._type!=null){a.push([b._idd,(b._type=="ra"?b._value:null)])}b=null}for(var c=0;c<a.length;c++){this.removeItem(a[c][0],a[c][1])}};dhtmlXForm.prototype._getParentForm=function(g,e){if(this.itemPull[this.idPrefix+g]!=null){return{form:this,item:this.itemPull[this.idPrefix+g]}}for(var b in this.itemPull){if(this.itemPull[b]._type=="ra"&&this.itemPull[b]._group==g&&this.itemPull[b]._value==e){return{form:this,item:this.itemPull[b]}}}var d=null;for(var b in this.itemPull){if(!d&&this.itemPull[b]._list!=null){for(var c=0;c<this.itemPull[b]._list.length;c++){if(!d){d=this.itemPull[b]._list[c]._getParentForm(g,e)}}}}return d};(function(){for(var b in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[b]._getItemNode){dhtmlXForm.prototype.items[b]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(b,a){if(a!=null){b=[b,a]}return this.doWithItem(b,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(h,f,e){if(typeof(e)=="undefined"){e=f}else{h=[h,f]}var c=this._getItemNode(h);if(!c){return}e=window.dhx4.s2b(e);c._required=(e==true);if(c._required){if(!c._validate){c._validate=[]}var b=false;for(var d=0;d<c._validate.length;d++){b=(c._validate[d]=="NotEmpty"||b)}if(!b){c._validate.push("NotEmpty")}var g=c.childNodes[c._ll?0:1].childNodes[0];if(!(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0)){var a=document.createElement("SPAN");a.className="dhxform_item_required";a.innerHTML="*";g.appendChild(a);a=g=null}}else{if(c._validate!=null){var b=c._validate;c._validate=[];for(var d=0;d<b.length;d++){if(b[d]!="NotEmpty"){c._validate.push(b[d])}}if(c._validate.length==0){c._validate=null}}var g=c.childNodes[c._ll?0:1].childNodes[0];if(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0){g.removeChild(g.lastChild);g=null}}this._resetValidateCss(c);c=null};dhtmlXForm.prototype.setNote=function(e,c,a){if(typeof(a)=="undefined"){a=c}else{e=[e,c]}var b=this._getItemNode(e);if(!b){return}var d=this._getNoteNode(b);if(!d){if(!a.width){a.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth}d=document.createElement("DIV");d.className="dhxform_note";if({ch:1,ra:1}[b._type]){b.childNodes[b._ll?1:0].insertBefore(d,b.childNodes[b._ll?1:0].lastChild)}else{b.childNodes[b._ll?1:0].appendChild(d)}}d.innerHTML=a.text;if(a.width!=null){d.style.width=a.width+"px";d._w=a.width}d=null};dhtmlXForm.prototype.clearNote=function(d,b){if(typeof(b)!="undefined"){d=[d,b]}var a=this._getItemNode(d);if(!a){return}var c=this._getNoteNode(a);if(c!=null){c.parentNode.removeChild(c);c=null}};dhtmlXForm.prototype._getNoteNode=function(a){var c=null;for(var b=0;b<a.childNodes[a._ll?1:0].childNodes.length;b++){if(String(a.childNodes[a._ll?1:0].childNodes[b].className).search(/dhxform_note/)>=0){c=a.childNodes[a._ll?1:0].childNodes[b]}}a=null;return c};dhtmlXForm.prototype.setValidation=function(f,d,e){if(typeof(note)=="undefined"){e=d}else{f=[f,d]}var b=this._getItemNode(f);if(!b){return}if(b._validate!=null){for(var c=0;c<b._validate.length;c++){b._validate[c]=null}}b._validate=[];if(typeof(e)=="function"||typeof(window[e])=="function"){b._validate=[e]}else{b._validate=String(e).split(this.separator)}if(b._required){var a=false;for(var c=0;c<b._validate.length;c++){a=(b._validate[c]=="NotEmpty"||a)}if(!a){b._validate.push("NotEmpty")}}b=null};dhtmlXForm.prototype.clearValidation=function(d,c){if(typeof(c)!="undefined"){d=[d,c]}var a=this._getItemNode(d);if(!a){return}if(a._validate!=null){for(var b=0;b<a._validate.length;b++){a._validate[b]=null}}a._validate=a._required?["NotEmpty"]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,f){var b=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[b]){return}if(b=="select"||b=="multiselect"){var d=this.getOptions(a);while(d.length>0){d.remove(0)}d.length=0;d=null;if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){this.doWithItem(a,"doLoadOpts",{options:f})}}}if(b=="combo"){var g=this.getCombo(a);g.clearAll();g.setComboValue("");if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){var c=null;for(var e=0;e<f.length;e++){if(window.dhx4.s2b(f[e].selected)){c=f[e].value}}g.addOption(f);if(c!=null){this.setItemValue(a,c)}g=null}}}};dhtmlXForm.prototype.setTooltip=function(f,e,d){if(typeof(d)=="undefined"){d=e}else{f=[f,e]}var b=this._getItemNode(f);if(!b){return}var a=null;if(b.childNodes.length==1){a=b.childNodes[0]}else{for(var c=0;c<b.childNodes.length;c++){if(b.childNodes[c].className!=null&&b.childNodes[c].className.search("dhxform_label")>=0){a=b.childNodes[c]}}}if(a!=null){if(d==null||d.length==0){a.removeAttribute("title")}else{a.title=d}}a=null};if(!window.dhtmlx){window.dhtmlx={}}(function(){var l=null;function n(t,r){var s=t.callback;m(false);t.box.parentNode.removeChild(t.box);l=t.box=null;if(s){s(r)}}function a(s){if(l){s=s||event;var r=s.which||event.keyCode;if(dhtmlx.message.keyboard){if(r==13||r==32){n(l,true)}if(r==27){n(l,false)}}if(s.preventDefault){s.preventDefault()}return !(s.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",a)}else{document.addEventListener("keydown",a,true)}function m(s){if(!m.cover){m.cover=document.createElement("DIV");m.cover.onkeydown=a;m.cover.className="dhx_modal_cover";document.body.appendChild(m.cover)}var r=document.body.scrollHeight;m.cover.style.display=s?"inline-block":"none"}function f(s,r){return"<div class='dhtmlx_popup_button' result='"+r+"' ><div>"+s+"</div></div>"}function c(s){if(!o.area){o.area=document.createElement("DIV");o.area.className="dhtmlx_message_area";o.area.style[o.position]="5px";document.body.appendChild(o.area)}o.hide(s.id);var r=document.createElement("DIV");r.innerHTML="<div>"+s.text+"</div>";r.className="dhtmlx-info dhtmlx-"+s.type;r.onclick=function(){if(s){o.hide(s.id)}s=null};if(o.position=="bottom"&&o.area.firstChild){o.area.insertBefore(r,o.area.firstChild)}else{o.area.appendChild(r)}if(s.expire>0){o.timers[s.id]=window.setTimeout(function(){o.hide(s.id)},s.expire)}o.pull[s.id]=r;r=null;return s.id}function g(s,u,x){var w=document.createElement("DIV");w.className=" dhtmlx_modal_box dhtmlx-"+s.type;w.setAttribute("dhxbox",1);var r="";if(s.width){w.style.width=s.width}if(s.height){w.style.height=s.height}if(s.title){r+='<div class="dhtmlx_popup_title">'+s.title+"</div>"}r+='<div class="dhtmlx_popup_text"><span>'+(s.content?"":s.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(u){r+=f(s.ok||"OK",true)}if(x){r+=f(s.cancel||"Cancel",false)}if(s.buttons){for(var t=0;t<s.buttons.length;t++){r+=f(s.buttons[t],t)}}r+="</div>";w.innerHTML=r;if(s.content){var v=s.content;if(typeof v=="string"){v=document.getElementById(v)}if(v.style.display=="none"){v.style.display=""}w.childNodes[s.title?1:0].appendChild(v)}w.onclick=function(A){A=A||event;var z=A.target||A.srcElement;if(!z.className){z=z.parentNode}if(z.className=="dhtmlx_popup_button"){var y=z.getAttribute("result");y=(y=="true")||(y=="false"?false:y);n(s,y)}};s.box=w;if(u||x){l=s}return w}function q(s,t,v){var u=s.tagName?s:g(s,t,v);if(!s.hidden){m(true)}document.body.appendChild(u);var r=s.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-u.offsetWidth)/2));var w=s.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-u.offsetHeight)/2));if(s.position=="top"){u.style.top="-3px"}else{u.style.top=w+"px"}u.style.left=r+"px";u.onkeydown=a;u.focus();if(s.hidden){dhtmlx.modalbox.hide(u)}return u}function j(r){return q(r,true,false)}function b(r){return q(r,true,true)}function e(r){return q(r)}function h(s,r,t){if(typeof s!="object"){if(typeof r=="function"){t=r;r=""}s={text:s,type:r,callback:t}}return s}function d(t,s,r,u){if(typeof t!="object"){t={text:t,type:s,expire:r,id:u}}t.id=t.id||o.uid();t.expire=t.expire||o.expire;return t}dhtmlx.alert=function(){var r=h.apply(this,arguments);r.type=r.type||"confirm";return j(r)};dhtmlx.confirm=function(){var r=h.apply(this,arguments);r.type=r.type||"alert";return b(r)};dhtmlx.modalbox=function(){var r=h.apply(this,arguments);r.type=r.type||"alert";return e(r)};dhtmlx.modalbox.hide=function(r){while(r&&r.getAttribute&&!r.getAttribute("dhxbox")){r=r.parentNode}if(r){r.parentNode.removeChild(r);m(false);l=null}};var o=dhtmlx.message=function(u,t,s,v){u=d.apply(this,arguments);u.type=u.type||"info";var r=u.type.split("-")[0];switch(r){case"alert":return j(u);case"confirm":return b(u);case"modalbox":return e(u);default:return c(u);break}};o.seed=(new Date()).valueOf();o.uid=function(){return o.seed++};o.expire=4000;o.keyboard=true;o.position="top";o.pull={};o.timers={};o.hideAll=function(){for(var r in o.pull){o.hide(r)}};o.hide=function(s){var r=o.pull[s];if(r&&r.parentNode){window.setTimeout(function(){r.parentNode.removeChild(r);r=null},2000);r.className+=" hidden";if(o.timers[s]){window.clearTimeout(o.timers[s])}delete o.pull[s]}}})();